<!DOCTYPE html>
<html>
<head>
<title>DEV LOGS - Networking & Linux.md</title>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">

<style>
/* https://github.com/microsoft/vscode/blob/master/extensions/markdown-language-features/media/markdown.css */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

body {
	font-family: var(--vscode-markdown-font-family, -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif);
	font-size: var(--vscode-markdown-font-size, 14px);
	padding: 0 26px;
	line-height: var(--vscode-markdown-line-height, 22px);
	word-wrap: break-word;
}

#code-csp-warning {
	position: fixed;
	top: 0;
	right: 0;
	color: white;
	margin: 16px;
	text-align: center;
	font-size: 12px;
	font-family: sans-serif;
	background-color:#444444;
	cursor: pointer;
	padding: 6px;
	box-shadow: 1px 1px 1px rgba(0,0,0,.25);
}

#code-csp-warning:hover {
	text-decoration: none;
	background-color:#007acc;
	box-shadow: 2px 2px 2px rgba(0,0,0,.25);
}

body.scrollBeyondLastLine {
	margin-bottom: calc(100vh - 22px);
}

body.showEditorSelection .code-line {
	position: relative;
}

body.showEditorSelection .code-active-line:before,
body.showEditorSelection .code-line:hover:before {
	content: "";
	display: block;
	position: absolute;
	top: 0;
	left: -12px;
	height: 100%;
}

body.showEditorSelection li.code-active-line:before,
body.showEditorSelection li.code-line:hover:before {
	left: -30px;
}

.vscode-light.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(0, 0, 0, 0.15);
}

.vscode-light.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(0, 0, 0, 0.40);
}

.vscode-light.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-dark.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 255, 255, 0.4);
}

.vscode-dark.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 255, 255, 0.60);
}

.vscode-dark.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-high-contrast.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 160, 0, 0.7);
}

.vscode-high-contrast.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 160, 0, 1);
}

.vscode-high-contrast.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

img {
	max-width: 100%;
	max-height: 100%;
}

a {
	text-decoration: none;
}

a:hover {
	text-decoration: underline;
}

a:focus,
input:focus,
select:focus,
textarea:focus {
	outline: 1px solid -webkit-focus-ring-color;
	outline-offset: -1px;
}

hr {
	border: 0;
	height: 2px;
	border-bottom: 2px solid;
}

h1 {
	padding-bottom: 0.3em;
	line-height: 1.2;
	border-bottom-width: 1px;
	border-bottom-style: solid;
}

h1, h2, h3 {
	font-weight: normal;
}

table {
	border-collapse: collapse;
}

table > thead > tr > th {
	text-align: left;
	border-bottom: 1px solid;
}

table > thead > tr > th,
table > thead > tr > td,
table > tbody > tr > th,
table > tbody > tr > td {
	padding: 5px 10px;
}

table > tbody > tr + tr > td {
	border-top: 1px solid;
}

blockquote {
	margin: 0 7px 0 5px;
	padding: 0 16px 0 10px;
	border-left-width: 5px;
	border-left-style: solid;
}

code {
	font-family: Menlo, Monaco, Consolas, "Droid Sans Mono", "Courier New", monospace, "Droid Sans Fallback";
	font-size: 1em;
	line-height: 1.357em;
}

body.wordWrap pre {
	white-space: pre-wrap;
}

pre:not(.hljs),
pre.hljs code > div {
	padding: 16px;
	border-radius: 3px;
	overflow: auto;
}

pre code {
	color: var(--vscode-editor-foreground);
	tab-size: 4;
}

/** Theming */

.vscode-light pre {
	background-color: rgba(220, 220, 220, 0.4);
}

.vscode-dark pre {
	background-color: rgba(10, 10, 10, 0.4);
}

.vscode-high-contrast pre {
	background-color: rgb(0, 0, 0);
}

.vscode-high-contrast h1 {
	border-color: rgb(0, 0, 0);
}

.vscode-light table > thead > tr > th {
	border-color: rgba(0, 0, 0, 0.69);
}

.vscode-dark table > thead > tr > th {
	border-color: rgba(255, 255, 255, 0.69);
}

.vscode-light h1,
.vscode-light hr,
.vscode-light table > tbody > tr + tr > td {
	border-color: rgba(0, 0, 0, 0.18);
}

.vscode-dark h1,
.vscode-dark hr,
.vscode-dark table > tbody > tr + tr > td {
	border-color: rgba(255, 255, 255, 0.18);
}

</style>

<style>
/* Tomorrow Theme */
/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */
/* Original theme - https://github.com/chriskempson/tomorrow-theme */

/* Tomorrow Comment */
.hljs-comment,
.hljs-quote {
	color: #8e908c;
}

/* Tomorrow Red */
.hljs-variable,
.hljs-template-variable,
.hljs-tag,
.hljs-name,
.hljs-selector-id,
.hljs-selector-class,
.hljs-regexp,
.hljs-deletion {
	color: #c82829;
}

/* Tomorrow Orange */
.hljs-number,
.hljs-built_in,
.hljs-builtin-name,
.hljs-literal,
.hljs-type,
.hljs-params,
.hljs-meta,
.hljs-link {
	color: #f5871f;
}

/* Tomorrow Yellow */
.hljs-attribute {
	color: #eab700;
}

/* Tomorrow Green */
.hljs-string,
.hljs-symbol,
.hljs-bullet,
.hljs-addition {
	color: #718c00;
}

/* Tomorrow Blue */
.hljs-title,
.hljs-section {
	color: #4271ae;
}

/* Tomorrow Purple */
.hljs-keyword,
.hljs-selector-tag {
	color: #8959a8;
}

.hljs {
	display: block;
	overflow-x: auto;
	color: #4d4d4c;
	padding: 0.5em;
}

.hljs-emphasis {
	font-style: italic;
}

.hljs-strong {
	font-weight: bold;
}
</style>

<style>
/*
 * Markdown PDF CSS
 */

 body {
	font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif, "Meiryo";
	padding: 0 12px;
}

pre {
	background-color: #f8f8f8;
	border: 1px solid #cccccc;
	border-radius: 3px;
	overflow-x: auto;
	white-space: pre-wrap;
	overflow-wrap: break-word;
}

pre:not(.hljs) {
	padding: 23px;
	line-height: 19px;
}

blockquote {
	background: rgba(127, 127, 127, 0.1);
	border-color: rgba(0, 122, 204, 0.5);
}

.emoji {
	height: 1.4em;
}

code {
	font-size: 14px;
	line-height: 19px;
}

/* for inline code */
:not(pre):not(.hljs) > code {
	color: #C9AE75; /* Change the old color so it seems less like an error */
	font-size: inherit;
}

/* Page Break : use <div class="page"/> to insert page break
-------------------------------------------------------- */
.page {
	page-break-after: always;
}

</style>

<script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
</head>
<body>
  <script>
    mermaid.initialize({
      startOnLoad: true,
      theme: document.body.classList.contains('vscode-dark') || document.body.classList.contains('vscode-high-contrast')
          ? 'dark'
          : 'default'
    });
  </script>
<h1 id="%F0%9F%93%9A-linux--networking-mastery-series---complete-index">üìö Linux &amp; Networking Mastery Series - Complete Index</h1>
<blockquote>
<p><strong>Your comprehensive guide from Linux newbie to network-aware power user</strong></p>
</blockquote>
<h2 id="%F0%9F%8E%AF-learning-path-overview">üéØ Learning Path Overview</h2>
<p>This series is designed to take you through a structured learning journey, building skills progressively from basic Linux commands to advanced networking and system administration.</p>
<h3 id="%F0%9F%93%96-how-to-use-this-series">üìñ How to Use This Series</h3>
<ol>
<li><strong>Sequential Learning</strong>: Follow chapters in order for best results</li>
<li><strong>Hands-on Practice</strong>: Each chapter includes practical exercises</li>
<li><strong>Reference Material</strong>: Use the cheat sheet for quick lookups</li>
<li><strong>Progressive Difficulty</strong>: Concepts build upon previous chapters</li>
<li><strong>Real-world Focus</strong>: Every topic includes practical applications</li>
</ol>
<hr>
<h2 id="%F0%9F%93%8B-complete-chapter-index">üìã Complete Chapter Index</h2>
<h3 id="%F0%9F%90%A7-linux-fundamentals-chapters-1-4">üêß <strong>Linux Fundamentals</strong> (Chapters 1-4)</h3>
<h4 id="01---linux-basics"><strong><a href="./01-linux-basics.md">01 - Linux Basics</a></strong></h4>
<ul>
<li>Terminal navigation and command structure</li>
<li>File system hierarchy and navigation</li>
<li>Essential commands (<code>ls</code>, <code>cd</code>, <code>pwd</code>, <code>mkdir</code>, <code>rmdir</code>)</li>
<li>Command-line shortcuts and productivity tips</li>
<li><strong>Prerequisites</strong>: None</li>
<li><strong>Time</strong>: 2-3 hours</li>
<li><strong>Difficulty</strong>: Beginner</li>
</ul>
<h4 id="02---file-operations"><strong><a href="./02-file-operations.md">02 - File Operations</a></strong></h4>
<ul>
<li>Advanced file manipulation and text processing</li>
<li>Text editors (<code>nano</code>, <code>vim</code>) and file viewing</li>
<li>File permissions and ownership basics</li>
<li>Links (symbolic and hard) and file attributes</li>
<li><strong>Prerequisites</strong>: Chapter 1</li>
<li><strong>Time</strong>: 3-4 hours</li>
<li><strong>Difficulty</strong>: Beginner-Intermediate</li>
</ul>
<h4 id="03---permissions--ownership"><strong><a href="./03-permissions-ownership.md">03 - Permissions &amp; Ownership</a></strong></h4>
<ul>
<li>Deep dive into Linux permission model</li>
<li>Advanced permission management (<code>chmod</code>, <code>chown</code>, <code>chgrp</code>)</li>
<li>Special permissions (setuid, setgid, sticky bit)</li>
<li>Access Control Lists (ACLs) and security best practices</li>
<li><strong>Prerequisites</strong>: Chapters 1-2</li>
<li><strong>Time</strong>: 2-3 hours</li>
<li><strong>Difficulty</strong>: Intermediate</li>
</ul>
<h4 id="04---process-management"><strong><a href="./04-process-management.md">04 - Process Management</a></strong></h4>
<ul>
<li>Understanding processes and system resources</li>
<li>Process monitoring (<code>ps</code>, <code>top</code>, <code>htop</code>) and control</li>
<li>Job control, signals, and background processes</li>
<li>Service management with systemd</li>
<li><strong>Prerequisites</strong>: Chapters 1-3</li>
<li><strong>Time</strong>: 3-4 hours</li>
<li><strong>Difficulty</strong>: Intermediate</li>
</ul>
<hr>
<h3 id="%F0%9F%94%A7-system-administration-chapters-5-8">üîß <strong>System Administration</strong> (Chapters 5-8)</h3>
<h4 id="05---networking-basics"><strong><a href="./05-networking-basics.md">05 - Networking Basics</a></strong></h4>
<ul>
<li>IP addressing (IPv4/IPv6) and subnetting fundamentals</li>
<li>Network protocols (TCP/UDP, HTTP, DNS, SSH)</li>
<li>OSI model and network components</li>
<li>Home networking (NAT, DHCP, routing basics)</li>
<li><strong>Prerequisites</strong>: Chapters 1-4</li>
<li><strong>Time</strong>: 4-5 hours</li>
<li><strong>Difficulty</strong>: Intermediate</li>
</ul>
<h4 id="06---system-administration"><strong><a href="./06-system-administration.md">06 - System Administration</a></strong></h4>
<ul>
<li>User and group management at scale</li>
<li>Package management (APT, YUM/DNF) and repositories</li>
<li>System monitoring, logging, and maintenance</li>
<li>Disk management, filesystems, and LVM</li>
<li><strong>Prerequisites</strong>: Chapters 1-5</li>
<li><strong>Time</strong>: 4-6 hours</li>
<li><strong>Difficulty</strong>: Intermediate-Advanced</li>
</ul>
<h4 id="07---ssh--remote-access"><strong><a href="./07-ssh-remote-access.md">07 - SSH &amp; Remote Access</a></strong></h4>
<ul>
<li>SSH fundamentals and key-based authentication</li>
<li>SSH configuration, hardening, and security</li>
<li>Secure file transfers (SCP, SFTP, rsync)</li>
<li>SSH tunneling and port forwarding techniques</li>
<li><strong>Prerequisites</strong>: Chapters 1-6</li>
<li><strong>Time</strong>: 3-4 hours</li>
<li><strong>Difficulty</strong>: Intermediate-Advanced</li>
</ul>
<h4 id="08---web-services"><strong><a href="./08-web-services.md">08 - Web Services</a></strong></h4>
<ul>
<li>HTTP/HTTPS protocols and web server fundamentals</li>
<li>Apache and Nginx installation and configuration</li>
<li>SSL/TLS certificates and HTTPS implementation</li>
<li>Virtual hosts, load balancing, and performance optimization</li>
<li><strong>Prerequisites</strong>: Chapters 1-7</li>
<li><strong>Time</strong>: 4-5 hours</li>
<li><strong>Difficulty</strong>: Advanced</li>
</ul>
<hr>
<h3 id="%F0%9F%8C%90-network-tools--analysis-chapters-9-11">üåê <strong>Network Tools &amp; Analysis</strong> (Chapters 9-11)</h3>
<h4 id="09---basic-network-tools"><strong><a href="./09-basic-network-tools.md">09 - Basic Network Tools</a></strong></h4>
<ul>
<li>Essential diagnostic tools (<code>ping</code>, <code>traceroute</code>, <code>nslookup</code>)</li>
<li>Network interface management (<code>ip</code>, <code>ifconfig</code>)</li>
<li>Connection monitoring (<code>netstat</code>, <code>ss</code>) and analysis</li>
<li>Practical troubleshooting workflows</li>
<li><strong>Prerequisites</strong>: Chapters 1-8</li>
<li><strong>Time</strong>: 3-4 hours</li>
<li><strong>Difficulty</strong>: Intermediate</li>
</ul>
<h4 id="10---advanced-network-tools"><strong><a href="./10-advanced-network-tools.md">10 - Advanced Network Tools</a></strong></h4>
<ul>
<li>Network discovery and scanning (<code>nmap</code>, <code>masscan</code>)</li>
<li>Packet capture and analysis (<code>tcpdump</code>, <code>wireshark</code>)</li>
<li>Firewall management (<code>iptables</code>, <code>ufw</code>) and traffic control</li>
<li>Performance testing (<code>iperf3</code>, <code>mtr</code>) and optimization</li>
<li><strong>Prerequisites</strong>: Chapters 1-9</li>
<li><strong>Time</strong>: 4-6 hours</li>
<li><strong>Difficulty</strong>: Advanced</li>
</ul>
<h4 id="11---dns-deep-dive"><strong><a href="./11-dns-deep-dive.md">11 - DNS Deep Dive</a></strong></h4>
<ul>
<li>DNS hierarchy, resolution process, and record types</li>
<li>DNS server configuration (BIND9) and management</li>
<li>Advanced DNS features (load balancing, failover)</li>
<li>DNS security (DNSSEC, filtering) and troubleshooting</li>
<li><strong>Prerequisites</strong>: Chapters 1-10</li>
<li><strong>Time</strong>: 4-5 hours</li>
<li><strong>Difficulty</strong>: Advanced</li>
</ul>
<hr>
<h3 id="%F0%9F%94%92-security--advanced-topics-chapters-12-16">üîí <strong>Security &amp; Advanced Topics</strong> (Chapters 12-16)</h3>
<h4 id="12---security--firewalls"><strong><a href="./12-security-firewalls.md">12 - Security &amp; Firewalls</a></strong></h4>
<ul>
<li>Network security fundamentals and threat landscape</li>
<li>Firewall configuration (UFW, iptables) and rule management</li>
<li>Intrusion detection systems (Fail2ban, OSSEC)</li>
<li>Security scanning and vulnerability assessment</li>
<li><strong>Prerequisites</strong>: Chapters 1-11</li>
<li><strong>Time</strong>: 5-6 hours</li>
<li><strong>Difficulty</strong>: Advanced</li>
</ul>
<h4 id="13---performance-monitoring"><strong><a href="./13-performance-monitoring.md">13 - Performance Monitoring</a></strong></h4>
<ul>
<li>System resource monitoring (CPU, memory, disk, network)</li>
<li>Performance monitoring tools (SAR, Nagios, Zabbix)</li>
<li>Bottleneck identification and optimization strategies</li>
<li>Automated monitoring and alerting systems</li>
<li><strong>Prerequisites</strong>: Chapters 1-12</li>
<li><strong>Time</strong>: 4-5 hours</li>
<li><strong>Difficulty</strong>: Advanced</li>
</ul>
<h4 id="14---automation--scripting"><strong><a href="./14-automation-scripting.md">14 - Automation &amp; Scripting</a></strong></h4>
<ul>
<li>Bash scripting fundamentals and best practices</li>
<li>Task automation (cron, systemd timers)</li>
<li>Configuration management (Ansible) and Infrastructure as Code</li>
<li>Log management and backup automation</li>
<li><strong>Prerequisites</strong>: Chapters 1-13</li>
<li><strong>Time</strong>: 5-7 hours</li>
<li><strong>Difficulty</strong>: Advanced</li>
</ul>
<h4 id="15---troubleshooting--debugging"><strong><a href="./15-troubleshooting-debugging.md">15 - Troubleshooting &amp; Debugging</a></strong></h4>
<ul>
<li>Systematic troubleshooting methodology</li>
<li>Advanced debugging tools (<code>strace</code>, <code>gdb</code>, <code>lsof</code>)</li>
<li>Network debugging and packet analysis</li>
<li>Log analysis, correlation, and root cause analysis</li>
<li><strong>Prerequisites</strong>: Chapters 1-14</li>
<li><strong>Time</strong>: 4-5 hours</li>
<li><strong>Difficulty</strong>: Advanced</li>
</ul>
<h4 id="16---best-practices"><strong><a href="./16-best-practices.md">16 - Best Practices</a></strong></h4>
<ul>
<li>Industry best practices and professional workflows</li>
<li>Security hardening and compliance frameworks</li>
<li>Performance optimization and capacity planning</li>
<li>Career development and certification paths</li>
<li><strong>Prerequisites</strong>: All previous chapters</li>
<li><strong>Time</strong>: 3-4 hours</li>
<li><strong>Difficulty</strong>: Expert</li>
</ul>
<hr>
<h3 id="%F0%9F%93%9D-reference-materials">üìù <strong>Reference Materials</strong></h3>
<h4 id="networking-cheat-sheet"><strong><a href="./networking-cheatsheet.md">Networking Cheat Sheet</a></strong></h4>
<ul>
<li>Quick reference for all essential commands</li>
<li>Common network ports and protocols</li>
<li>Troubleshooting workflows and decision trees</li>
<li>Pro tips and advanced techniques</li>
<li><strong>Type</strong>: Reference</li>
<li><strong>Use</strong>: Throughout the series</li>
</ul>
<hr>
<h2 id="%F0%9F%8E%AF-learning-tracks">üéØ Learning Tracks</h2>
<h3 id="track-1-linux-system-administrator-8-10-weeks"><strong>Track 1: Linux System Administrator</strong> (8-10 weeks)</h3>
<pre class="hljs"><code><div>Chapters: 1 ‚Üí 2 ‚Üí 3 ‚Üí 4 ‚Üí 6 ‚Üí 14 ‚Üí 15 ‚Üí 16
Focus: System administration, automation, troubleshooting
Career: Linux System Administrator, DevOps Engineer
</div></code></pre>
<h3 id="track-2-network-engineer-10-12-weeks"><strong>Track 2: Network Engineer</strong> (10-12 weeks)</h3>
<pre class="hljs"><code><div>Chapters: 1 ‚Üí 5 ‚Üí 9 ‚Üí 10 ‚Üí 11 ‚Üí 12 ‚Üí 13 ‚Üí 15 ‚Üí 16
Focus: Networking, security, performance monitoring
Career: Network Engineer, Network Security Specialist
</div></code></pre>
<h3 id="track-3-security-specialist-12-14-weeks"><strong>Track 3: Security Specialist</strong> (12-14 weeks)</h3>
<pre class="hljs"><code><div>Chapters: 1 ‚Üí 2 ‚Üí 3 ‚Üí 5 ‚Üí 7 ‚Üí 9 ‚Üí 10 ‚Üí 12 ‚Üí 15 ‚Üí 16
Focus: Security hardening, monitoring, incident response
Career: Security Analyst, Penetration Tester
</div></code></pre>
<h3 id="track-4-full-stack-complete-16-20-weeks"><strong>Track 4: Full-Stack (Complete)</strong> (16-20 weeks)</h3>
<pre class="hljs"><code><div>Chapters: 1 ‚Üí 2 ‚Üí 3 ‚Üí 4 ‚Üí 5 ‚Üí 6 ‚Üí 7 ‚Üí 8 ‚Üí 9 ‚Üí 10 ‚Üí 11 ‚Üí 12 ‚Üí 13 ‚Üí 14 ‚Üí 15 ‚Üí 16
Focus: Comprehensive Linux and networking mastery
Career: Senior System Administrator, DevOps Architect, Technical Lead
</div></code></pre>
<hr>
<h2 id="%F0%9F%93%8A-progress-tracking">üìä Progress Tracking</h2>
<h3 id="beginner-level-chapters-1-4"><strong>Beginner Level</strong> (Chapters 1-4)</h3>
<ul>
<li><input type="checkbox" id="checkbox0"><label for="checkbox0">Chapter 1: Linux Basics</label></li>
<li><input type="checkbox" id="checkbox1"><label for="checkbox1">Chapter 2: File Operations</label></li>
<li><input type="checkbox" id="checkbox2"><label for="checkbox2">Chapter 3: Permissions &amp; Ownership</label></li>
<li><input type="checkbox" id="checkbox3"><label for="checkbox3">Chapter 4: Process Management</label></li>
</ul>
<p><strong>Milestone</strong>: Can navigate Linux systems confidently and manage basic system tasks</p>
<h3 id="intermediate-level-chapters-5-8"><strong>Intermediate Level</strong> (Chapters 5-8)</h3>
<ul>
<li><input type="checkbox" id="checkbox4"><label for="checkbox4">Chapter 5: Networking Basics</label></li>
<li><input type="checkbox" id="checkbox5"><label for="checkbox5">Chapter 6: System Administration</label></li>
<li><input type="checkbox" id="checkbox6"><label for="checkbox6">Chapter 7: SSH &amp; Remote Access</label></li>
<li><input type="checkbox" id="checkbox7"><label for="checkbox7">Chapter 8: Web Services</label></li>
</ul>
<p><strong>Milestone</strong>: Can administer Linux systems and understand networking fundamentals</p>
<h3 id="advanced-level-chapters-9-12"><strong>Advanced Level</strong> (Chapters 9-12)</h3>
<ul>
<li><input type="checkbox" id="checkbox8"><label for="checkbox8">Chapter 9: Basic Network Tools</label></li>
<li><input type="checkbox" id="checkbox9"><label for="checkbox9">Chapter 10: Advanced Network Tools</label></li>
<li><input type="checkbox" id="checkbox10"><label for="checkbox10">Chapter 11: DNS Deep Dive</label></li>
<li><input type="checkbox" id="checkbox11"><label for="checkbox11">Chapter 12: Security &amp; Firewalls</label></li>
</ul>
<p><strong>Milestone</strong>: Can troubleshoot complex network issues and implement security measures</p>
<h3 id="expert-level-chapters-13-16"><strong>Expert Level</strong> (Chapters 13-16)</h3>
<ul>
<li><input type="checkbox" id="checkbox12"><label for="checkbox12">Chapter 13: Performance Monitoring</label></li>
<li><input type="checkbox" id="checkbox13"><label for="checkbox13">Chapter 14: Automation &amp; Scripting</label></li>
<li><input type="checkbox" id="checkbox14"><label for="checkbox14">Chapter 15: Troubleshooting &amp; Debugging</label></li>
<li><input type="checkbox" id="checkbox15"><label for="checkbox15">Chapter 16: Best Practices</label></li>
</ul>
<p><strong>Milestone</strong>: Can design, implement, and maintain enterprise-grade Linux and networking solutions</p>
<hr>
<h2 id="%F0%9F%9B%A0%EF%B8%8F-prerequisites-and-setup">üõ†Ô∏è Prerequisites and Setup</h2>
<h3 id="system-requirements"><strong>System Requirements</strong></h3>
<ul>
<li>Linux system (Ubuntu 20.04+ recommended) or Linux VM</li>
<li>At least 4GB RAM and 20GB disk space</li>
<li>Internet connection for package installation</li>
<li>Administrative (sudo) access</li>
</ul>
<h3 id="recommended-lab-setup"><strong>Recommended Lab Setup</strong></h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Virtual machines for practice:</span>
<span class="hljs-comment"># 1. Ubuntu Server (main learning environment)</span>
<span class="hljs-comment"># 2. CentOS/RHEL (for package management differences)</span>
<span class="hljs-comment"># 3. Network simulation tools (GNS3, Packet Tracer)</span>
<span class="hljs-comment"># 4. Monitoring tools (Nagios, Zabbix)</span>
</div></code></pre>
<h3 id="essential-tools-to-install"><strong>Essential Tools to Install</strong></h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Basic tools</span>
sudo apt update &amp;&amp; sudo apt install -y \
    curl wget vim htop tree git \
    net-tools iputils-ping traceroute \
    nmap tcpdump wireshark-cli \
    fail2ban ufw iptables-persistent

<span class="hljs-comment"># Monitoring tools</span>
sudo apt install -y \
    sysstat iotop nload \
    prometheus-node-exporter \
    rsyslog logrotate

<span class="hljs-comment"># Development tools</span>
sudo apt install -y \
    build-essential python3-pip \
    ansible docker.io \
    nginx apache2-utils
</div></code></pre>
<hr>
<h2 id="%F0%9F%8E%93-certification-preparation">üéì Certification Preparation</h2>
<p>This series prepares you for:</p>
<h3 id="linux-certifications"><strong>Linux Certifications</strong></h3>
<ul>
<li><strong>CompTIA Linux+</strong>: Chapters 1-6, 14</li>
<li><strong>LPIC-1</strong>: Chapters 1-8, 13-14</li>
<li><strong>RHCSA</strong>: Chapters 1-6, 14 (with RHEL-specific practice)</li>
</ul>
<h3 id="networking-certifications"><strong>Networking Certifications</strong></h3>
<ul>
<li><strong>CompTIA Network+</strong>: Chapters 5, 9-12</li>
<li><strong>Cisco CCNA</strong>: Chapters 5, 9-11 (with Cisco-specific practice)</li>
</ul>
<h3 id="security-certifications"><strong>Security Certifications</strong></h3>
<ul>
<li><strong>CompTIA Security+</strong>: Chapters 7, 12, 16</li>
<li><strong>CEH</strong>: Chapters 10, 12, 15</li>
</ul>
<hr>
<h2 id="%F0%9F%93%9E-support-and-community">üìû Support and Community</h2>
<h3 id="getting-help"><strong>Getting Help</strong></h3>
<ul>
<li>Review the troubleshooting sections in each chapter</li>
<li>Check the networking cheat sheet for quick references</li>
<li>Practice in a safe lab environment before production</li>
<li>Join Linux and networking communities for support</li>
</ul>
<h3 id="contributing"><strong>Contributing</strong></h3>
<ul>
<li>Report errors or suggest improvements</li>
<li>Share your learning experiences and tips</li>
<li>Create additional practice scenarios</li>
<li>Help others in their learning journey</li>
</ul>
<hr>
<h2 id="%F0%9F%9A%80-ready-to-start">üöÄ Ready to Start?</h2>
<p><strong>Begin your journey with <a href="./01-linux-basics.md">Chapter 1: Linux Basics</a></strong></p>
<p>Remember:</p>
<ul>
<li>Take your time with each chapter</li>
<li>Practice extensively in lab environments</li>
<li>Don't skip the hands-on exercises</li>
<li>Build real projects to reinforce learning</li>
<li>Stay curious and keep exploring!</li>
</ul>
<hr>
<blockquote>
<p><strong>&quot;The expert in anything was once a beginner.&quot;</strong> - Start your Linux and networking mastery journey today! üêßüåê</p>
</blockquote>
<h1 id="%F0%9F%9A%80-linux--networking-command-cheat-sheet">üöÄ Linux &amp; Networking Command Cheat Sheet</h1>
<blockquote>
<p><strong>Quick reference for essential Linux and networking commands - your go-to guide for daily operations</strong></p>
</blockquote>
<h2 id="%F0%9F%93%8B-table-of-contents">üìã Table of Contents</h2>
<ul>
<li><a href="#basic-linux-commands">Basic Linux Commands</a></li>
<li><a href="#file-operations">File Operations</a></li>
<li><a href="#system-information">System Information</a></li>
<li><a href="#process-management">Process Management</a></li>
<li><a href="#network-interface-management">Network Interface Management</a></li>
<li><a href="#connectivity-testing">Connectivity Testing</a></li>
<li><a href="#dns-operations">DNS Operations</a></li>
<li><a href="#network-monitoring">Network Monitoring</a></li>
<li><a href="#firewall-management">Firewall Management</a></li>
<li><a href="#advanced-network-tools">Advanced Network Tools</a></li>
<li><a href="#performance-testing">Performance Testing</a></li>
<li><a href="#security--scanning">Security &amp; Scanning</a></li>
<li><a href="#troubleshooting-workflows">Troubleshooting Workflows</a></li>
<li><a href="#common-network-ports">Common Network Ports</a></li>
<li><a href="#ip-address-ranges">IP Address Ranges</a></li>
</ul>
<hr>
<h2 id="%F0%9F%96%A5%EF%B8%8F-basic-linux-commands">üñ•Ô∏è Basic Linux Commands</h2>
<h3 id="navigation--file-system">Navigation &amp; File System</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Directory navigation</span>
<span class="hljs-built_in">pwd</span>                     <span class="hljs-comment"># Show current directory</span>
ls -la                  <span class="hljs-comment"># List files with details</span>
<span class="hljs-built_in">cd</span> /path/to/dir         <span class="hljs-comment"># Change directory</span>
<span class="hljs-built_in">cd</span> ~                    <span class="hljs-comment"># Go to home directory</span>
<span class="hljs-built_in">cd</span> -                    <span class="hljs-comment"># Go to previous directory</span>

<span class="hljs-comment"># File operations</span>
cp file1 file2          <span class="hljs-comment"># Copy file</span>
mv file1 file2          <span class="hljs-comment"># Move/rename file</span>
rm file                 <span class="hljs-comment"># Delete file</span>
rm -rf directory        <span class="hljs-comment"># Delete directory recursively</span>
mkdir directory         <span class="hljs-comment"># Create directory</span>
rmdir directory         <span class="hljs-comment"># Remove empty directory</span>

<span class="hljs-comment"># File viewing</span>
cat file                <span class="hljs-comment"># Display file content</span>
less file               <span class="hljs-comment"># View file with pagination</span>
head -n 10 file         <span class="hljs-comment"># Show first 10 lines</span>
tail -n 10 file         <span class="hljs-comment"># Show last 10 lines</span>
tail -f file            <span class="hljs-comment"># Follow file changes</span>

<span class="hljs-comment"># File searching</span>
find /path -name <span class="hljs-string">"*.txt"</span> <span class="hljs-comment"># Find files by name</span>
grep <span class="hljs-string">"pattern"</span> file      <span class="hljs-comment"># Search text in file</span>
grep -r <span class="hljs-string">"pattern"</span> /dir   <span class="hljs-comment"># Recursive text search</span>
locate filename         <span class="hljs-comment"># Find file by name (fast)</span>
</div></code></pre>
<h3 id="permissions--ownership">Permissions &amp; Ownership</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># View permissions</span>
ls -l file              <span class="hljs-comment"># Show file permissions</span>
<span class="hljs-built_in">stat</span> file               <span class="hljs-comment"># Detailed file info</span>

<span class="hljs-comment"># Change permissions</span>
chmod 755 file          <span class="hljs-comment"># rwxr-xr-x</span>
chmod u+x file          <span class="hljs-comment"># Add execute for user</span>
chmod g-w file          <span class="hljs-comment"># Remove write for group</span>
chmod o=r file          <span class="hljs-comment"># Set read-only for others</span>

<span class="hljs-comment"># Change ownership</span>
chown user:group file   <span class="hljs-comment"># Change owner and group</span>
chown user file         <span class="hljs-comment"># Change owner only</span>
chgrp group file        <span class="hljs-comment"># Change group only</span>
sudo chown -R user:group /dir  <span class="hljs-comment"># Recursive ownership change</span>
</div></code></pre>
<hr>
<h2 id="%F0%9F%93%81-file-operations">üìÅ File Operations</h2>
<h3 id="text-processing">Text Processing</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Text manipulation</span>
cut -d<span class="hljs-string">':'</span> -f1 /etc/passwd     <span class="hljs-comment"># Extract first field</span>
awk <span class="hljs-string">'{print $1}'</span> file         <span class="hljs-comment"># Print first column</span>
sed <span class="hljs-string">'s/old/new/g'</span> file        <span class="hljs-comment"># Replace text</span>
sort file                     <span class="hljs-comment"># Sort lines</span>
uniq file                     <span class="hljs-comment"># Remove duplicates</span>
wc -l file                    <span class="hljs-comment"># Count lines</span>

<span class="hljs-comment"># File comparison</span>
diff file1 file2              <span class="hljs-comment"># Compare files</span>
comm file1 file2              <span class="hljs-comment"># Compare sorted files</span>

<span class="hljs-comment"># Archives</span>
tar -czf archive.tar.gz dir   <span class="hljs-comment"># Create compressed archive</span>
tar -xzf archive.tar.gz       <span class="hljs-comment"># Extract archive</span>
zip -r archive.zip dir        <span class="hljs-comment"># Create zip archive</span>
unzip archive.zip             <span class="hljs-comment"># Extract zip</span>
</div></code></pre>
<h3 id="file-transfer">File Transfer</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Local transfer</span>
cp -r <span class="hljs-built_in">source</span>/ dest/           <span class="hljs-comment"># Copy directory</span>
rsync -av <span class="hljs-built_in">source</span>/ dest/       <span class="hljs-comment"># Sync directories</span>

<span class="hljs-comment"># Remote transfer</span>
scp file user@host:/path      <span class="hljs-comment"># Copy file to remote</span>
scp user@host:/path file      <span class="hljs-comment"># Copy file from remote</span>
rsync -av dir/ user@host:/path <span class="hljs-comment"># Sync to remote</span>

<span class="hljs-comment"># Download</span>
wget https://example.com/file <span class="hljs-comment"># Download file</span>
curl -O https://example.com/file <span class="hljs-comment"># Download with curl</span>
</div></code></pre>
<hr>
<h2 id="%F0%9F%96%A5%EF%B8%8F-system-information">üñ•Ô∏è System Information</h2>
<h3 id="hardware--system">Hardware &amp; System</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># System info</span>
uname -a                <span class="hljs-comment"># System information</span>
hostname                <span class="hljs-comment"># System hostname</span>
uptime                  <span class="hljs-comment"># System uptime</span>
whoami                  <span class="hljs-comment"># Current user</span>
id                      <span class="hljs-comment"># User and group IDs</span>

<span class="hljs-comment"># Hardware info</span>
lscpu                   <span class="hljs-comment"># CPU information</span>
lsmem                   <span class="hljs-comment"># Memory information</span>
lsblk                   <span class="hljs-comment"># Block devices</span>
lsusb                   <span class="hljs-comment"># USB devices</span>
lspci                   <span class="hljs-comment"># PCI devices</span>

<span class="hljs-comment"># Memory &amp; disk</span>
free -h                 <span class="hljs-comment"># Memory usage</span>
df -h                   <span class="hljs-comment"># Disk usage</span>
du -sh /path            <span class="hljs-comment"># Directory size</span>
</div></code></pre>
<h3 id="performance-monitoring">Performance Monitoring</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Process monitoring</span>
top                     <span class="hljs-comment"># Real-time processes</span>
htop                    <span class="hljs-comment"># Enhanced process viewer</span>
ps aux                  <span class="hljs-comment"># All running processes</span>
ps -ef | grep process   <span class="hljs-comment"># Find specific process</span>

<span class="hljs-comment"># System load</span>
w                       <span class="hljs-comment"># Who is logged in and load</span>
vmstat 1                <span class="hljs-comment"># Virtual memory statistics</span>
iostat 1                <span class="hljs-comment"># I/O statistics</span>
sar -u 1 10             <span class="hljs-comment"># CPU usage over time</span>
</div></code></pre>
<hr>
<h2 id="%E2%9A%99%EF%B8%8F-process-management">‚öôÔ∏è Process Management</h2>
<h3 id="process-control">Process Control</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Start/stop processes</span>
nohup <span class="hljs-built_in">command</span> &amp;         <span class="hljs-comment"># Run in background</span>
<span class="hljs-built_in">command</span> &amp;               <span class="hljs-comment"># Run in background</span>
<span class="hljs-built_in">jobs</span>                    <span class="hljs-comment"># List background jobs</span>
<span class="hljs-built_in">fg</span> %1                   <span class="hljs-comment"># Bring job to foreground</span>
<span class="hljs-built_in">bg</span> %1                   <span class="hljs-comment"># Send job to background</span>

<span class="hljs-comment"># Kill processes</span>
<span class="hljs-built_in">kill</span> PID                <span class="hljs-comment"># Terminate process</span>
<span class="hljs-built_in">kill</span> -9 PID             <span class="hljs-comment"># Force kill process</span>
killall process_name    <span class="hljs-comment"># Kill by name</span>
pkill -f pattern        <span class="hljs-comment"># Kill by pattern</span>

<span class="hljs-comment"># Process priority</span>
nice -n 10 <span class="hljs-built_in">command</span>      <span class="hljs-comment"># Start with lower priority</span>
renice 10 PID           <span class="hljs-comment"># Change process priority</span>
</div></code></pre>
<h3 id="service-management">Service Management</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Systemd services</span>
sudo systemctl start service    <span class="hljs-comment"># Start service</span>
sudo systemctl stop service     <span class="hljs-comment"># Stop service</span>
sudo systemctl restart service  <span class="hljs-comment"># Restart service</span>
sudo systemctl <span class="hljs-built_in">enable</span> service   <span class="hljs-comment"># Enable at boot</span>
sudo systemctl <span class="hljs-built_in">disable</span> service  <span class="hljs-comment"># Disable at boot</span>
sudo systemctl status service   <span class="hljs-comment"># Check service status</span>
sudo systemctl list-units       <span class="hljs-comment"># List all services</span>
</div></code></pre>
<hr>
<h2 id="%F0%9F%8C%90-network-interface-management">üåê Network Interface Management</h2>
<h3 id="interface-information">Interface Information</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Modern commands (ip)</span>
ip addr show            <span class="hljs-comment"># Show all interfaces</span>
ip addr show eth0       <span class="hljs-comment"># Show specific interface</span>
ip -4 addr show         <span class="hljs-comment"># Show IPv4 only</span>
ip -6 addr show         <span class="hljs-comment"># Show IPv6 only</span>
ip link show            <span class="hljs-comment"># Show link status</span>

<span class="hljs-comment"># Legacy commands (ifconfig)</span>
ifconfig                <span class="hljs-comment"># Show all interfaces</span>
ifconfig eth0           <span class="hljs-comment"># Show specific interface</span>
ifconfig -a             <span class="hljs-comment"># Show all interfaces (including down)</span>
</div></code></pre>
<h3 id="interface-configuration">Interface Configuration</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Bring interface up/down</span>
sudo ip link <span class="hljs-built_in">set</span> eth0 up
sudo ip link <span class="hljs-built_in">set</span> eth0 down
sudo ifconfig eth0 up
sudo ifconfig eth0 down

<span class="hljs-comment"># Configure IP address</span>
sudo ip addr add 192.168.1.100/24 dev eth0
sudo ip addr del 192.168.1.100/24 dev eth0
sudo ifconfig eth0 192.168.1.100 netmask 255.255.255.0

<span class="hljs-comment"># Configure routes</span>
ip route show           <span class="hljs-comment"># Show routing table</span>
sudo ip route add 10.0.0.0/8 via 192.168.1.1
sudo ip route del 10.0.0.0/8
sudo ip route add default via 192.168.1.1
</div></code></pre>
<hr>
<h2 id="%F0%9F%8F%93-connectivity-testing">üèì Connectivity Testing</h2>
<h3 id="basic-connectivity">Basic Connectivity</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Ping tests</span>
ping google.com         <span class="hljs-comment"># Basic connectivity test</span>
ping -c 4 google.com    <span class="hljs-comment"># Ping 4 times</span>
ping -i 0.5 google.com  <span class="hljs-comment"># Ping every 0.5 seconds</span>
ping -s 1000 google.com <span class="hljs-comment"># Ping with 1000 byte packets</span>
ping6 google.com        <span class="hljs-comment"># IPv6 ping</span>

<span class="hljs-comment"># Path tracing</span>
traceroute google.com   <span class="hljs-comment"># Trace route to destination</span>
traceroute -I google.com <span class="hljs-comment"># Use ICMP instead of UDP</span>
traceroute -T google.com <span class="hljs-comment"># Use TCP</span>
traceroute6 google.com  <span class="hljs-comment"># IPv6 traceroute</span>
mtr google.com          <span class="hljs-comment"># Real-time traceroute</span>
</div></code></pre>
<h3 id="port-testing">Port Testing</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Test port connectivity</span>
telnet google.com 80    <span class="hljs-comment"># Test TCP port</span>
nc -zv google.com 80    <span class="hljs-comment"># Test port with netcat</span>
nc -zvu google.com 53   <span class="hljs-comment"># Test UDP port</span>
timeout 5 bash -c <span class="hljs-string">'&lt;/dev/tcp/google.com/80'</span> <span class="hljs-comment"># Bash TCP test</span>

<span class="hljs-comment"># HTTP testing</span>
curl -I http://google.com       <span class="hljs-comment"># HTTP headers only</span>
curl -w <span class="hljs-string">"%{time_total}"</span> google.com <span class="hljs-comment"># Show timing</span>
wget --spider google.com        <span class="hljs-comment"># Test without downloading</span>
</div></code></pre>
<hr>
<h2 id="%F0%9F%94%8D-dns-operations">üîç DNS Operations</h2>
<h3 id="dns-queries">DNS Queries</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Basic DNS lookup</span>
nslookup google.com     <span class="hljs-comment"># Basic DNS query</span>
dig google.com          <span class="hljs-comment"># Detailed DNS query</span>
dig +short google.com   <span class="hljs-comment"># Short answer only</span>
host google.com         <span class="hljs-comment"># Simple DNS lookup</span>

<span class="hljs-comment"># Specific record types</span>
dig A google.com        <span class="hljs-comment"># IPv4 address</span>
dig AAAA google.com     <span class="hljs-comment"># IPv6 address</span>
dig MX google.com       <span class="hljs-comment"># Mail exchange</span>
dig NS google.com       <span class="hljs-comment"># Name servers</span>
dig TXT google.com      <span class="hljs-comment"># Text records</span>
dig SOA google.com      <span class="hljs-comment"># Start of authority</span>

<span class="hljs-comment"># Reverse DNS</span>
dig -x 8.8.8.8          <span class="hljs-comment"># Reverse lookup</span>
nslookup 8.8.8.8        <span class="hljs-comment"># Reverse lookup</span>
</div></code></pre>
<h3 id="advanced-dns">Advanced DNS</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># DNS tracing</span>
dig +trace google.com   <span class="hljs-comment"># Trace DNS resolution</span>
dig +trace +additional google.com <span class="hljs-comment"># Include additional records</span>

<span class="hljs-comment"># Query specific server</span>
dig @8.8.8.8 google.com <span class="hljs-comment"># Query Google DNS</span>
dig @1.1.1.1 google.com <span class="hljs-comment"># Query Cloudflare DNS</span>

<span class="hljs-comment"># DNS cache management</span>
sudo systemd-resolve --flush-caches <span class="hljs-comment"># Clear DNS cache</span>
sudo systemctl restart systemd-resolved <span class="hljs-comment"># Restart DNS service</span>
systemd-resolve --status <span class="hljs-comment"># Show DNS status</span>
</div></code></pre>
<hr>
<h2 id="%F0%9F%93%8A-network-monitoring">üìä Network Monitoring</h2>
<h3 id="connection-monitoring">Connection Monitoring</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Active connections</span>
netstat -tulpn          <span class="hljs-comment"># All listening ports with processes</span>
netstat -an             <span class="hljs-comment"># All connections (numerical)</span>
netstat -i              <span class="hljs-comment"># Interface statistics</span>
netstat -r              <span class="hljs-comment"># Routing table</span>

<span class="hljs-comment"># Modern alternative (ss)</span>
ss -tulpn               <span class="hljs-comment"># All listening ports</span>
ss -an                  <span class="hljs-comment"># All connections</span>
ss -o state established <span class="hljs-comment"># Established connections</span>
ss -s                   <span class="hljs-comment"># Socket statistics</span>
</div></code></pre>
<h3 id="traffic-analysis">Traffic Analysis</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Real-time monitoring</span>
iftop                   <span class="hljs-comment"># Real-time bandwidth usage</span>
nload                   <span class="hljs-comment"># Network load monitor</span>
bmon                    <span class="hljs-comment"># Bandwidth monitor</span>
watch -n 1 <span class="hljs-string">'cat /proc/net/dev'</span> <span class="hljs-comment"># Interface statistics</span>

<span class="hljs-comment"># Packet capture</span>
sudo tcpdump -i eth0    <span class="hljs-comment"># Capture all traffic</span>
sudo tcpdump -i eth0 port 80 <span class="hljs-comment"># Capture HTTP traffic</span>
sudo tcpdump -i eth0 host 192.168.1.1 <span class="hljs-comment"># Capture specific host</span>
sudo tcpdump -w capture.pcap <span class="hljs-comment"># Save to file</span>
tcpdump -r capture.pcap <span class="hljs-comment"># Read from file</span>
</div></code></pre>
<hr>
<h2 id="%F0%9F%9B%A1%EF%B8%8F-firewall-management">üõ°Ô∏è Firewall Management</h2>
<h3 id="iptables">iptables</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># View rules</span>
sudo iptables -L        <span class="hljs-comment"># List all rules</span>
sudo iptables -L -n -v  <span class="hljs-comment"># Numerical and verbose</span>
sudo iptables -L INPUT  <span class="hljs-comment"># List INPUT chain</span>

<span class="hljs-comment"># Basic rules</span>
sudo iptables -A INPUT -p tcp --dport 22 -j ACCEPT <span class="hljs-comment"># Allow SSH</span>
sudo iptables -A INPUT -p tcp --dport 80 -j ACCEPT <span class="hljs-comment"># Allow HTTP</span>
sudo iptables -A INPUT -s 192.168.1.100 -j ACCEPT <span class="hljs-comment"># Allow IP</span>
sudo iptables -A INPUT -j DROP <span class="hljs-comment"># Drop everything else</span>

<span class="hljs-comment"># Delete rules</span>
sudo iptables -D INPUT 1 <span class="hljs-comment"># Delete rule number 1</span>
sudo iptables -F        <span class="hljs-comment"># Flush all rules</span>

<span class="hljs-comment"># Save/restore</span>
sudo iptables-save &gt; rules.txt
sudo iptables-restore &lt; rules.txt
</div></code></pre>
<h3 id="ufw-ubuntu-firewall">ufw (Ubuntu Firewall)</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Basic operations</span>
sudo ufw <span class="hljs-built_in">enable</span>         <span class="hljs-comment"># Enable firewall</span>
sudo ufw <span class="hljs-built_in">disable</span>        <span class="hljs-comment"># Disable firewall</span>
sudo ufw status         <span class="hljs-comment"># Show status</span>
sudo ufw status numbered <span class="hljs-comment"># Show numbered rules</span>

<span class="hljs-comment"># Allow/deny rules</span>
sudo ufw allow 22       <span class="hljs-comment"># Allow SSH</span>
sudo ufw allow ssh      <span class="hljs-comment"># Allow SSH (by name)</span>
sudo ufw allow 80/tcp   <span class="hljs-comment"># Allow HTTP</span>
sudo ufw allow from 192.168.1.0/24 <span class="hljs-comment"># Allow subnet</span>
sudo ufw deny 23        <span class="hljs-comment"># Deny telnet</span>

<span class="hljs-comment"># Delete rules</span>
sudo ufw delete allow 80
sudo ufw delete 1       <span class="hljs-comment"># Delete rule number 1</span>
sudo ufw --force reset  <span class="hljs-comment"># Reset all rules</span>
</div></code></pre>
<hr>
<h2 id="%F0%9F%94%AC-advanced-network-tools">üî¨ Advanced Network Tools</h2>
<h3 id="network-scanning-nmap">Network Scanning (nmap)</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Host discovery</span>
nmap -sn 192.168.1.0/24 <span class="hljs-comment"># Ping scan</span>
nmap 192.168.1.1-10     <span class="hljs-comment"># Scan range</span>
nmap -F 192.168.1.1     <span class="hljs-comment"># Fast scan (top 100 ports)</span>

<span class="hljs-comment"># Port scanning</span>
nmap -p 22,80,443 192.168.1.1 <span class="hljs-comment"># Specific ports</span>
nmap -p- 192.168.1.1    <span class="hljs-comment"># All ports</span>
nmap -sS 192.168.1.1    <span class="hljs-comment"># SYN scan</span>
nmap -sU 192.168.1.1    <span class="hljs-comment"># UDP scan</span>

<span class="hljs-comment"># Service detection</span>
nmap -sV 192.168.1.1    <span class="hljs-comment"># Version detection</span>
nmap -O 192.168.1.1     <span class="hljs-comment"># OS detection</span>
nmap -A 192.168.1.1     <span class="hljs-comment"># Aggressive scan</span>
nmap --script vuln 192.168.1.1 <span class="hljs-comment"># Vulnerability scan</span>
</div></code></pre>
<h3 id="packet-analysis">Packet Analysis</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># tcpdump filters</span>
sudo tcpdump -i eth0 <span class="hljs-string">'tcp port 80'</span> <span class="hljs-comment"># HTTP traffic</span>
sudo tcpdump -i eth0 <span class="hljs-string">'udp port 53'</span>  <span class="hljs-comment"># DNS traffic</span>
sudo tcpdump -i eth0 <span class="hljs-string">'icmp'</span>         <span class="hljs-comment"># ICMP traffic</span>
sudo tcpdump -i eth0 <span class="hljs-string">'host 192.168.1.1'</span> <span class="hljs-comment"># Specific host</span>
sudo tcpdump -i eth0 <span class="hljs-string">'net 192.168.1.0/24'</span> <span class="hljs-comment"># Subnet</span>

<span class="hljs-comment"># Wireshark command line (tshark)</span>
tshark -i eth0          <span class="hljs-comment"># Live capture</span>
tshark -r capture.pcap  <span class="hljs-comment"># Read file</span>
tshark -Y <span class="hljs-string">"http"</span>        <span class="hljs-comment"># Display filter</span>
tshark -T fields -e ip.src -e ip.dst <span class="hljs-comment"># Extract fields</span>
</div></code></pre>
<hr>
<h2 id="%F0%9F%93%88-performance-testing">üìà Performance Testing</h2>
<h3 id="bandwidth-testing">Bandwidth Testing</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># iperf3 (requires server)</span>
iperf3 -s               <span class="hljs-comment"># Server mode</span>
iperf3 -c server_ip     <span class="hljs-comment"># Client mode</span>
iperf3 -c server_ip -u  <span class="hljs-comment"># UDP test</span>
iperf3 -c server_ip -R  <span class="hljs-comment"># Reverse test</span>
iperf3 -c server_ip -P 4 <span class="hljs-comment"># Parallel streams</span>

<span class="hljs-comment"># Speed test</span>
speedtest-cli           <span class="hljs-comment"># Internet speed test</span>
wget -O /dev/null http://speedtest.wdc01.softlayer.com/downloads/test100.zip
</div></code></pre>
<h3 id="latency-testing">Latency Testing</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Continuous monitoring</span>
ping -i 0.2 google.com  <span class="hljs-comment"># High frequency ping</span>
mtr --report-cycles 100 google.com <span class="hljs-comment"># MTR report</span>

<span class="hljs-comment"># Jitter testing</span>
ping -c 100 google.com | grep <span class="hljs-string">'time='</span> | awk -F<span class="hljs-string">'time='</span> <span class="hljs-string">'{print $2}'</span> | awk -F<span class="hljs-string">' '</span> <span class="hljs-string">'{print $1}'</span>
</div></code></pre>
<hr>
<h2 id="%F0%9F%94%92-security--scanning">üîí Security &amp; Scanning</h2>
<h3 id="security-scanning">Security Scanning</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Port scanning</span>
nmap -sS -O target      <span class="hljs-comment"># Stealth scan with OS detection</span>
nmap --script vuln target <span class="hljs-comment"># Vulnerability scan</span>
nmap --script safe target <span class="hljs-comment"># Safe scripts only</span>

<span class="hljs-comment"># SSL/TLS testing</span>
nmap --script ssl-cert target
nmap --script ssl-enum-ciphers target
openssl s_client -connect target:443

<span class="hljs-comment"># Web security</span>
nmap --script http-enum target
nmap --script http-vuln* target
curl -I https://target  <span class="hljs-comment"># Check headers</span>
</div></code></pre>
<h3 id="network-security">Network Security</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Monitor connections</span>
ss -tulpn | grep LISTEN <span class="hljs-comment"># Listening services</span>
lsof -i                 <span class="hljs-comment"># Open network files</span>
netstat -an | grep ESTABLISHED <span class="hljs-comment"># Active connections</span>

<span class="hljs-comment"># Check for suspicious activity</span>
last                    <span class="hljs-comment"># Login history</span>
who                     <span class="hljs-comment"># Currently logged in</span>
w                       <span class="hljs-comment"># What users are doing</span>
journalctl -f           <span class="hljs-comment"># System logs</span>
</div></code></pre>
<hr>
<h2 id="%F0%9F%94%A7-troubleshooting-workflows">üîß Troubleshooting Workflows</h2>
<h3 id="network-connectivity-issues">Network Connectivity Issues</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Step 1: Check local interface</span>
ip addr show
ping 127.0.0.1

<span class="hljs-comment"># Step 2: Check local network</span>
ping $(ip route | grep default | awk <span class="hljs-string">'{print $3}'</span>)

<span class="hljs-comment"># Step 3: Check DNS</span>
nslookup google.com
ping 8.8.8.8

<span class="hljs-comment"># Step 4: Check internet</span>
ping google.com
curl -I http://google.com

<span class="hljs-comment"># Step 5: Check specific service</span>
telnet target 80
nc -zv target 80
</div></code></pre>
<h3 id="dns-issues">DNS Issues</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Check DNS configuration</span>
cat /etc/resolv.conf
systemd-resolve --status

<span class="hljs-comment"># Test different DNS servers</span>
dig @8.8.8.8 domain.com
dig @1.1.1.1 domain.com

<span class="hljs-comment"># Clear DNS cache</span>
sudo systemd-resolve --flush-caches
sudo systemctl restart systemd-resolved

<span class="hljs-comment"># Check DNS propagation</span>
dig +trace domain.com
</div></code></pre>
<h3 id="performance-issues">Performance Issues</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Check bandwidth</span>
iperf3 -c speedtest.server.com
speedtest-cli

<span class="hljs-comment"># Check latency</span>
ping -c 10 target
mtr --report target

<span class="hljs-comment"># Check packet loss</span>
ping -c 100 target | grep <span class="hljs-string">'packet loss'</span>

<span class="hljs-comment"># Check interface errors</span>
ip -s link show
cat /proc/net/dev
</div></code></pre>
<hr>
<h2 id="%F0%9F%94%8C-common-network-ports">üîå Common Network Ports</h2>
<h3 id="well-known-ports">Well-Known Ports</h3>
<pre class="hljs"><code><div>20/21   FTP (File Transfer Protocol)
22      SSH (Secure Shell)
23      Telnet
25      SMTP (Simple Mail Transfer Protocol)
53      DNS (Domain Name System)
67/68   DHCP (Dynamic Host Configuration Protocol)
80      HTTP (Hypertext Transfer Protocol)
110     POP3 (Post Office Protocol v3)
143     IMAP (Internet Message Access Protocol)
443     HTTPS (HTTP Secure)
993     IMAPS (IMAP Secure)
995     POP3S (POP3 Secure)
</div></code></pre>
<h3 id="application-ports">Application Ports</h3>
<pre class="hljs"><code><div>3306    MySQL
5432    PostgreSQL
6379    Redis
27017   MongoDB
3389    RDP (Remote Desktop Protocol)
5900    VNC (Virtual Network Computing)
8080    HTTP Alternative
8443    HTTPS Alternative
9200    Elasticsearch
5601    Kibana
</div></code></pre>
<hr>
<h2 id="%F0%9F%8C%90-ip-address-ranges">üåê IP Address Ranges</h2>
<h3 id="private-ip-ranges-rfc-1918">Private IP Ranges (RFC 1918)</h3>
<pre class="hljs"><code><div>10.0.0.0/8        (10.0.0.0 - 10.255.255.255)
172.16.0.0/12     (172.16.0.0 - 172.31.255.255)
192.168.0.0/16    (192.168.0.0 - 192.168.255.255)
</div></code></pre>
<h3 id="special-ip-addresses">Special IP Addresses</h3>
<pre class="hljs"><code><div>127.0.0.0/8      Loopback (localhost)
169.254.0.0/16   Link-local (APIPA)
224.0.0.0/4      Multicast
0.0.0.0/0        Default route (any address)
255.255.255.255  Broadcast
</div></code></pre>
<h3 id="subnet-masks-cidr">Subnet Masks (CIDR)</h3>
<pre class="hljs"><code><div>/8  = 255.0.0.0       (16,777,214 hosts)
/16 = 255.255.0.0     (65,534 hosts)
/24 = 255.255.255.0   (254 hosts)
/25 = 255.255.255.128 (126 hosts)
/26 = 255.255.255.192 (62 hosts)
/27 = 255.255.255.224 (30 hosts)
/28 = 255.255.255.240 (14 hosts)
/29 = 255.255.255.248 (6 hosts)
/30 = 255.255.255.252 (2 hosts)
</div></code></pre>
<hr>
<h2 id="%F0%9F%8E%AF-quick-reference-scripts">üéØ Quick Reference Scripts</h2>
<h3 id="network-health-check">Network Health Check</h3>
<pre class="hljs"><code><div><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># Quick network health check</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"=== Network Health Check ==="</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Interface Status:"</span>
ip addr show | grep -E <span class="hljs-string">'^[0-9]+:|inet '</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"\nDefault Gateway:"</span>
ip route | grep default
<span class="hljs-built_in">echo</span> <span class="hljs-string">"\nDNS Servers:"</span>
cat /etc/resolv.conf | grep nameserver
<span class="hljs-built_in">echo</span> <span class="hljs-string">"\nConnectivity Test:"</span>
ping -c 1 8.8.8.8 &gt; /dev/null &amp;&amp; <span class="hljs-built_in">echo</span> <span class="hljs-string">"‚úÖ Internet OK"</span> || <span class="hljs-built_in">echo</span> <span class="hljs-string">"‚ùå Internet FAIL"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"\nDNS Test:"</span>
nslookup google.com &gt; /dev/null &amp;&amp; <span class="hljs-built_in">echo</span> <span class="hljs-string">"‚úÖ DNS OK"</span> || <span class="hljs-built_in">echo</span> <span class="hljs-string">"‚ùå DNS FAIL"</span>
</div></code></pre>
<h3 id="port-scanner">Port Scanner</h3>
<pre class="hljs"><code><div><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># Simple port scanner</span>
HOST=<span class="hljs-string">"<span class="hljs-variable">$1</span>"</span>
<span class="hljs-keyword">for</span> PORT <span class="hljs-keyword">in</span> 22 23 25 53 80 110 143 443 993 995; <span class="hljs-keyword">do</span>
    timeout 1 bash -c <span class="hljs-string">"&lt;/dev/tcp/<span class="hljs-variable">$HOST</span>/<span class="hljs-variable">$PORT</span>"</span> 2&gt;/dev/null &amp;&amp;
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Port <span class="hljs-variable">$PORT</span>: Open"</span> || <span class="hljs-built_in">echo</span> <span class="hljs-string">"Port <span class="hljs-variable">$PORT</span>: Closed"</span>
<span class="hljs-keyword">done</span>
</div></code></pre>
<h3 id="bandwidth-monitor">Bandwidth Monitor</h3>
<pre class="hljs"><code><div><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># Simple bandwidth monitor</span>
INTERFACE=<span class="hljs-string">"eth0"</span>
<span class="hljs-keyword">while</span> <span class="hljs-literal">true</span>; <span class="hljs-keyword">do</span>
    RX1=$(cat /sys/class/net/<span class="hljs-variable">$INTERFACE</span>/statistics/rx_bytes)
    TX1=$(cat /sys/class/net/<span class="hljs-variable">$INTERFACE</span>/statistics/tx_bytes)
    sleep 1
    RX2=$(cat /sys/class/net/<span class="hljs-variable">$INTERFACE</span>/statistics/rx_bytes)
    TX2=$(cat /sys/class/net/<span class="hljs-variable">$INTERFACE</span>/statistics/tx_bytes)

    RX_RATE=$(((RX2-RX1)/1024))
    TX_RATE=$(((TX2-TX1)/1024))

    <span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$(date)</span>: RX: <span class="hljs-variable">${RX_RATE}</span> KB/s, TX: <span class="hljs-variable">${TX_RATE}</span> KB/s"</span>
<span class="hljs-keyword">done</span>
</div></code></pre>
<hr>
<h2 id="%F0%9F%92%A1-pro-tips">üí° Pro Tips</h2>
<h3 id="command-aliases">Command Aliases</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Add to ~/.bashrc or ~/.zshrc</span>
<span class="hljs-built_in">alias</span> ll=<span class="hljs-string">'ls -la'</span>
<span class="hljs-built_in">alias</span> la=<span class="hljs-string">'ls -la'</span>
<span class="hljs-built_in">alias</span> myip=<span class="hljs-string">'curl -s ifconfig.me'</span>
<span class="hljs-built_in">alias</span> ports=<span class="hljs-string">'netstat -tulpn'</span>
<span class="hljs-built_in">alias</span> listening=<span class="hljs-string">'ss -tulpn'</span>
<span class="hljs-built_in">alias</span> connections=<span class="hljs-string">'ss -tuln'</span>
<span class="hljs-built_in">alias</span> flushdns=<span class="hljs-string">'sudo systemd-resolve --flush-caches'</span>
<span class="hljs-built_in">alias</span> netcheck=<span class="hljs-string">'ping -c 4 8.8.8.8 &amp;&amp; nslookup google.com'</span>
</div></code></pre>
<h3 id="useful-one-liners">Useful One-liners</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Find your public IP</span>
curl -s ifconfig.me
curl -s ipinfo.io/ip

<span class="hljs-comment"># Show all listening ports</span>
ss -tulpn | grep LISTEN

<span class="hljs-comment"># Find process using specific port</span>
lsof -i :80
ss -tulpn | grep :80

<span class="hljs-comment"># Monitor network connections</span>
watch -n 1 <span class="hljs-string">'ss -tuln'</span>

<span class="hljs-comment"># Check if port is open</span>
nc -zv google.com 80

<span class="hljs-comment"># Quick HTTP test</span>
curl -w <span class="hljs-string">"@curl-format.txt"</span> -o /dev/null -s http://example.com

<span class="hljs-comment"># DNS lookup with timing</span>
time nslookup google.com

<span class="hljs-comment"># Show routing table</span>
ip route show
route -n

<span class="hljs-comment"># Monitor interface traffic</span>
watch -n 1 <span class="hljs-string">'cat /proc/net/dev'</span>
</div></code></pre>
<hr>
<blockquote>
<p><strong>üéì Congratulations!</strong> You now have a comprehensive reference for Linux and networking commands. Bookmark this page and refer to it whenever you need quick command syntax or troubleshooting workflows. Practice these commands regularly to build muscle memory and become a networking power user! üöÄ</p>
</blockquote>
<p><strong>Remember</strong>: Always test commands in a safe environment first, especially those that modify system configuration. When in doubt, check the man pages (<code>man command</code>) for detailed documentation.</p>
<h1 id="%F0%9F%90%A7-linux-basics-foundation-skills">üêß Linux Basics: Foundation Skills</h1>
<blockquote>
<p><strong>Master the terminal, file system navigation, and essential commands</strong></p>
</blockquote>
<h2 id="%F0%9F%93%96-what-youll-learn">üìñ What You'll Learn</h2>
<p>Linux is the backbone of the internet, powering everything from web servers to smartphones. Understanding Linux fundamentals is essential for any technical professional. In this chapter, you'll master:</p>
<ul>
<li>Terminal navigation and basic commands</li>
<li>Linux file system structure</li>
<li>File and directory operations</li>
<li>Basic permissions and ownership</li>
<li>Essential shortcuts and productivity tips</li>
</ul>
<h2 id="%F0%9F%8C%8D-why-this-matters">üåç Why This Matters</h2>
<p><strong>Real-world applications:</strong></p>
<ul>
<li><strong>Web Development</strong>: Deploy applications on Linux servers</li>
<li><strong>DevOps</strong>: Automate infrastructure and deployments</li>
<li><strong>System Administration</strong>: Manage servers and services</li>
<li><strong>Cybersecurity</strong>: Analyze systems and investigate incidents</li>
<li><strong>Data Science</strong>: Process large datasets on Linux clusters</li>
</ul>
<h2 id="%F0%9F%92%BB-getting-started-the-terminal">üíª Getting Started: The Terminal</h2>
<h3 id="opening-the-terminal">Opening the Terminal</h3>
<p><strong>Ubuntu/Debian:</strong></p>
<pre class="hljs"><code><div><span class="hljs-comment"># Keyboard shortcut</span>
Ctrl + Alt + T

<span class="hljs-comment"># Or search for "Terminal" in applications</span>
</div></code></pre>
<p><strong>Your First Command:</strong></p>
<pre class="hljs"><code><div>$ whoami
username

$ <span class="hljs-built_in">pwd</span>
/home/username
</div></code></pre>
<h3 id="understanding-the-prompt">Understanding the Prompt</h3>
<pre class="hljs"><code><div>username@hostname:~$
<span class="hljs-comment">#   ^        ^     ^  ^</span>
<span class="hljs-comment">#   |        |     |  |</span>
<span class="hljs-comment">#   user   computer |  command prompt</span>
<span class="hljs-comment">#                   |</span>
<span class="hljs-comment">#                current directory (~ = home)</span>
</div></code></pre>
<h2 id="%F0%9F%97%82%EF%B8%8F-linux-file-system-structure">üóÇÔ∏è Linux File System Structure</h2>
<h3 id="the-root-directory">The Root Directory (<code>/</code>)</h3>
<pre class="hljs"><code><div>$ ls /
bin   dev  home  lib64  mnt  proc  run   srv  tmp  var
boot  etc  lib   media  opt  root  sbin  sys  usr
</div></code></pre>
<h3 id="key-directories-explained">Key Directories Explained</h3>
<table>
<thead>
<tr>
<th>Directory</th>
<th>Purpose</th>
<th>Example Contents</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>/home</code></td>
<td>User home directories</td>
<td><code>/home/john</code>, <code>/home/mary</code></td>
</tr>
<tr>
<td><code>/etc</code></td>
<td>System configuration files</td>
<td><code>/etc/passwd</code>, <code>/etc/hosts</code></td>
</tr>
<tr>
<td><code>/var</code></td>
<td>Variable data (logs, databases)</td>
<td><code>/var/log</code>, <code>/var/www</code></td>
</tr>
<tr>
<td><code>/usr</code></td>
<td>User programs and libraries</td>
<td><code>/usr/bin</code>, <code>/usr/local</code></td>
</tr>
<tr>
<td><code>/tmp</code></td>
<td>Temporary files</td>
<td>Session files, cache</td>
</tr>
<tr>
<td><code>/bin</code></td>
<td>Essential system binaries</td>
<td><code>ls</code>, <code>cp</code>, <code>mv</code></td>
</tr>
<tr>
<td><code>/sbin</code></td>
<td>System administration binaries</td>
<td><code>iptables</code>, <code>mount</code></td>
</tr>
</tbody>
</table>
<h3 id="visualizing-the-structure">Visualizing the Structure</h3>
<pre class="hljs"><code><div>$ tree -L 2 /
/
‚îú‚îÄ‚îÄ bin -&gt; usr/bin
‚îú‚îÄ‚îÄ boot
‚îÇ   ‚îú‚îÄ‚îÄ grub
‚îÇ   ‚îî‚îÄ‚îÄ vmlinuz
‚îú‚îÄ‚îÄ dev
‚îÇ   ‚îú‚îÄ‚îÄ sda1
‚îÇ   ‚îî‚îÄ‚îÄ tty1
‚îú‚îÄ‚îÄ etc
‚îÇ   ‚îú‚îÄ‚îÄ passwd
‚îÇ   ‚îî‚îÄ‚îÄ hosts
‚îú‚îÄ‚îÄ home
‚îÇ   ‚îú‚îÄ‚îÄ john
‚îÇ   ‚îî‚îÄ‚îÄ mary
‚îî‚îÄ‚îÄ var
    ‚îú‚îÄ‚îÄ <span class="hljs-built_in">log</span>
    ‚îî‚îÄ‚îÄ www
</div></code></pre>
<h2 id="%F0%9F%A7%AD-navigation-commands">üß≠ Navigation Commands</h2>
<h3 id="basic-navigation">Basic Navigation</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Print working directory</span>
$ <span class="hljs-built_in">pwd</span>
/home/username

<span class="hljs-comment"># List directory contents</span>
$ ls
Documents  Downloads  Pictures  Videos

<span class="hljs-comment"># List with details</span>
$ ls -l
total 16
drwxr-xr-x 2 user user 4096 Dec 15 10:30 Documents
drwxr-xr-x 2 user user 4096 Dec 15 10:30 Downloads
drwxr-xr-x 2 user user 4096 Dec 15 10:30 Pictures
drwxr-xr-x 2 user user 4096 Dec 15 10:30 Videos

<span class="hljs-comment"># List including hidden files</span>
$ ls -la
total 24
drwxr-xr-x 3 user user 4096 Dec 15 10:30 .
drwxr-xr-x 3 root root 4096 Dec 15 10:00 ..
-rw-r--r-- 1 user user  220 Dec 15 10:00 .bash_logout
-rw-r--r-- 1 user user 3771 Dec 15 10:00 .bashrc
drwxr-xr-x 2 user user 4096 Dec 15 10:30 Documents
</div></code></pre>
<h3 id="change-directory">Change Directory</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Go to home directory</span>
$ <span class="hljs-built_in">cd</span>
$ <span class="hljs-built_in">cd</span> ~
$ <span class="hljs-built_in">cd</span> /home/username

<span class="hljs-comment"># Go to specific directory</span>
$ <span class="hljs-built_in">cd</span> /var/<span class="hljs-built_in">log</span>
$ <span class="hljs-built_in">pwd</span>
/var/<span class="hljs-built_in">log</span>

<span class="hljs-comment"># Go back one level</span>
$ <span class="hljs-built_in">cd</span> ..
$ <span class="hljs-built_in">pwd</span>
/var

<span class="hljs-comment"># Go back to previous directory</span>
$ <span class="hljs-built_in">cd</span> -
/var/<span class="hljs-built_in">log</span>

<span class="hljs-comment"># Relative vs Absolute paths</span>
$ <span class="hljs-built_in">cd</span> Documents          <span class="hljs-comment"># Relative path</span>
$ <span class="hljs-built_in">cd</span> /home/user/Documents  <span class="hljs-comment"># Absolute path</span>
</div></code></pre>
<h3 id="path-shortcuts">Path Shortcuts</h3>
<table>
<thead>
<tr>
<th>Symbol</th>
<th>Meaning</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>~</code></td>
<td>Home directory</td>
<td><code>cd ~/Documents</code></td>
</tr>
<tr>
<td><code>.</code></td>
<td>Current directory</td>
<td><code>./script.sh</code></td>
</tr>
<tr>
<td><code>..</code></td>
<td>Parent directory</td>
<td><code>cd ../..</code></td>
</tr>
<tr>
<td><code>-</code></td>
<td>Previous directory</td>
<td><code>cd -</code></td>
</tr>
<tr>
<td><code>/</code></td>
<td>Root directory</td>
<td><code>cd /</code></td>
</tr>
</tbody>
</table>
<h2 id="%F0%9F%93%81-file-and-directory-operations">üìÅ File and Directory Operations</h2>
<h3 id="creating-files-and-directories">Creating Files and Directories</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Create empty file</span>
$ touch newfile.txt
$ ls -l newfile.txt
-rw-r--r-- 1 user user 0 Dec 15 11:00 newfile.txt

<span class="hljs-comment"># Create multiple files</span>
$ touch file1.txt file2.txt file3.txt

<span class="hljs-comment"># Create directory</span>
$ mkdir projects
$ ls -ld projects
drwxr-xr-x 2 user user 4096 Dec 15 11:01 projects

<span class="hljs-comment"># Create nested directories</span>
$ mkdir -p projects/web/frontend
$ tree projects
projects
‚îî‚îÄ‚îÄ web
    ‚îî‚îÄ‚îÄ frontend
</div></code></pre>
<h3 id="copying-files-and-directories">Copying Files and Directories</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Copy file</span>
$ cp file1.txt file1_backup.txt

<span class="hljs-comment"># Copy file to directory</span>
$ cp file1.txt projects/

<span class="hljs-comment"># Copy directory recursively</span>
$ cp -r projects projects_backup

<span class="hljs-comment"># Copy with verbose output</span>
$ cp -v file1.txt file1_copy.txt
<span class="hljs-string">'file1.txt'</span> -&gt; <span class="hljs-string">'file1_copy.txt'</span>

<span class="hljs-comment"># Copy preserving attributes</span>
$ cp -p file1.txt file1_preserve.txt
</div></code></pre>
<h3 id="moving-and-renaming">Moving and Renaming</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Rename file</span>
$ mv file1.txt renamed_file.txt

<span class="hljs-comment"># Move file to directory</span>
$ mv renamed_file.txt projects/

<span class="hljs-comment"># Move and rename simultaneously</span>
$ mv file2.txt projects/project_file.txt

<span class="hljs-comment"># Move directory</span>
$ mv projects_backup archive/
</div></code></pre>
<h3 id="removing-files-and-directories">Removing Files and Directories</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Remove file</span>
$ rm file3.txt

<span class="hljs-comment"># Remove multiple files</span>
$ rm *.txt

<span class="hljs-comment"># Remove directory (empty)</span>
$ rmdir empty_directory

<span class="hljs-comment"># Remove directory and contents</span>
$ rm -r projects_backup

<span class="hljs-comment"># Remove with confirmation</span>
$ rm -i important_file.txt
rm: remove regular file <span class="hljs-string">'important_file.txt'</span>? y

<span class="hljs-comment"># Force remove (be careful!)</span>
$ rm -rf dangerous_directory
</div></code></pre>
<h2 id="%F0%9F%94%8D-viewing-file-contents">üîç Viewing File Contents</h2>
<h3 id="basic-file-viewing">Basic File Viewing</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Display entire file</span>
$ cat /etc/passwd
root:x:0:0:root:/root:/bin/bash
daemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologin
...

<span class="hljs-comment"># Display with line numbers</span>
$ cat -n /etc/passwd
     1	root:x:0:0:root:/root:/bin/bash
     2	daemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologin
...

<span class="hljs-comment"># View first 10 lines</span>
$ head /var/<span class="hljs-built_in">log</span>/syslog
Dec 15 10:00:01 hostname systemd[1]: Started Daily apt download activities.
Dec 15 10:00:01 hostname systemd[1]: Starting Daily apt upgrade and clean activities...
...

<span class="hljs-comment"># View last 10 lines</span>
$ tail /var/<span class="hljs-built_in">log</span>/syslog
Dec 15 11:45:01 hostname CRON[1234]: (root) CMD (<span class="hljs-built_in">command</span> -v debian-sa1 &gt; /dev/null &amp;&amp; debian-sa1 1 1)
...

<span class="hljs-comment"># Follow file changes (useful for logs)</span>
$ tail -f /var/<span class="hljs-built_in">log</span>/syslog
<span class="hljs-comment"># Press Ctrl+C to stop</span>
</div></code></pre>
<h3 id="paging-through-files">Paging Through Files</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># View file page by page</span>
$ less /var/<span class="hljs-built_in">log</span>/syslog
<span class="hljs-comment"># Navigation:</span>
<span class="hljs-comment"># Space: next page</span>
<span class="hljs-comment"># b: previous page</span>
<span class="hljs-comment"># /search_term: search</span>
<span class="hljs-comment"># q: quit</span>

<span class="hljs-comment"># Alternative pager</span>
$ more /var/<span class="hljs-built_in">log</span>/syslog
</div></code></pre>
<h2 id="%F0%9F%94%A7-essential-commands-reference">üîß Essential Commands Reference</h2>
<h3 id="file-information">File Information</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># File type and permissions</span>
$ file /bin/ls
/bin/ls: ELF 64-bit LSB executable, x86-64

<span class="hljs-comment"># Disk usage of files/directories</span>
$ du -h projects/
4.0K	projects/web/frontend
8.0K	projects/web
12K	projects/

<span class="hljs-comment"># File size</span>
$ ls -lh file1.txt
-rw-r--r-- 1 user user 1.2K Dec 15 11:00 file1.txt

<span class="hljs-comment"># Count lines, words, characters</span>
$ wc /etc/passwd
  45   65 2419 /etc/passwd
<span class="hljs-comment"># lines words chars filename</span>
</div></code></pre>
<h3 id="system-information">System Information</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Current user</span>
$ whoami
username

<span class="hljs-comment"># User ID information</span>
$ id
uid=1000(username) gid=1000(username) groups=1000(username),4(adm),24(cdrom),27(sudo)

<span class="hljs-comment"># Current date and time</span>
$ date
Fri Dec 15 11:30:45 UTC 2023

<span class="hljs-comment"># System uptime</span>
$ uptime
 11:30:45 up  2:15,  1 user,  load average: 0.08, 0.03, 0.01

<span class="hljs-comment"># Disk space usage</span>
$ df -h
Filesystem      Size  Used Avail Use% Mounted on
/dev/sda1        20G  5.5G   14G  30% /
/dev/sda2       100G   45G   50G  48% /home
</div></code></pre>
<h2 id="%E2%9A%A0%EF%B8%8F-common-pitfalls-and-tips">‚ö†Ô∏è Common Pitfalls and Tips</h2>
<h3 id="1-case-sensitivity">1. Case Sensitivity</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Linux is case-sensitive!</span>
$ ls Documents  <span class="hljs-comment"># ‚úÖ Correct</span>
$ ls documents  <span class="hljs-comment"># ‚ùå Error if directory is "Documents"</span>
ls: cannot access <span class="hljs-string">'documents'</span>: No such file or directory
</div></code></pre>
<h3 id="2-spaces-in-filenames">2. Spaces in Filenames</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Use quotes or escape spaces</span>
$ touch <span class="hljs-string">"my file.txt"</span>        <span class="hljs-comment"># ‚úÖ Correct</span>
$ touch my\ file.txt          <span class="hljs-comment"># ‚úÖ Correct</span>
$ touch my file.txt          <span class="hljs-comment"># ‚ùå Creates two files: "my" and "file.txt"</span>
</div></code></pre>
<h3 id="3-hidden-files">3. Hidden Files</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Files starting with . are hidden</span>
$ ls              <span class="hljs-comment"># Won't show .bashrc</span>
$ ls -a           <span class="hljs-comment"># Shows all files including hidden ones</span>
</div></code></pre>
<h3 id="4-tab-completion">4. Tab Completion</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Use Tab to auto-complete</span>
$ <span class="hljs-built_in">cd</span> Doc&lt;Tab&gt;     <span class="hljs-comment"># Completes to "Documents"</span>
$ ls /etc/pas&lt;Tab&gt; <span class="hljs-comment"># Completes to "/etc/passwd"</span>
</div></code></pre>
<h2 id="%F0%9F%8E%AF-practical-scenario-setting-up-a-project">üéØ Practical Scenario: Setting Up a Project</h2>
<p>Let's create a typical project structure:</p>
<pre class="hljs"><code><div><span class="hljs-comment"># 1. Create project directory</span>
$ mkdir -p ~/projects/my-website
$ <span class="hljs-built_in">cd</span> ~/projects/my-website

<span class="hljs-comment"># 2. Create project structure</span>
$ mkdir -p {src,docs,tests,config}
$ touch README.md
$ touch src/{index.html,style.css,script.js}
$ touch docs/setup.md
$ touch config/settings.conf

<span class="hljs-comment"># 3. Verify structure</span>
$ tree
.
‚îú‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ config
‚îÇ   ‚îî‚îÄ‚îÄ settings.conf
‚îú‚îÄ‚îÄ docs
‚îÇ   ‚îî‚îÄ‚îÄ setup.md
‚îú‚îÄ‚îÄ src
‚îÇ   ‚îú‚îÄ‚îÄ index.html
‚îÇ   ‚îú‚îÄ‚îÄ script.js
‚îÇ   ‚îî‚îÄ‚îÄ style.css
‚îî‚îÄ‚îÄ tests

<span class="hljs-comment"># 4. Add some content</span>
$ <span class="hljs-built_in">echo</span> <span class="hljs-string">"# My Website Project"</span> &gt; README.md
$ <span class="hljs-built_in">echo</span> <span class="hljs-string">"&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;&lt;title&gt;My Site&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;h1&gt;Hello World!&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;"</span> &gt; src/index.html

<span class="hljs-comment"># 5. Check our work</span>
$ cat README.md
<span class="hljs-comment"># My Website Project</span>

$ cat src/index.html
&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;&lt;title&gt;My Site&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;h1&gt;Hello World!&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;
</div></code></pre>
<h2 id="%F0%9F%94%A7-productivity-tips">üîß Productivity Tips</h2>
<h3 id="command-history">Command History</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># View command history</span>
$ <span class="hljs-built_in">history</span>
  1  ls
  2  <span class="hljs-built_in">cd</span> projects
  3  mkdir my-website
  ...

<span class="hljs-comment"># Repeat last command</span>
$ !!

<span class="hljs-comment"># Repeat command by number</span>
$ !3

<span class="hljs-comment"># Search history</span>
$ Ctrl+R
(reverse-i-search)`<span class="hljs-built_in">cd</span><span class="hljs-string">': cd projects
</span></div></code></pre>
<h3 id="keyboard-shortcuts">Keyboard Shortcuts</h3>
<table>
<thead>
<tr>
<th>Shortcut</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Ctrl+C</code></td>
<td>Cancel current command</td>
</tr>
<tr>
<td><code>Ctrl+D</code></td>
<td>Exit terminal/logout</td>
</tr>
<tr>
<td><code>Ctrl+L</code></td>
<td>Clear screen</td>
</tr>
<tr>
<td><code>Ctrl+A</code></td>
<td>Move to beginning of line</td>
</tr>
<tr>
<td><code>Ctrl+E</code></td>
<td>Move to end of line</td>
</tr>
<tr>
<td><code>Ctrl+U</code></td>
<td>Delete from cursor to beginning</td>
</tr>
<tr>
<td><code>Ctrl+K</code></td>
<td>Delete from cursor to end</td>
</tr>
<tr>
<td><code>Tab</code></td>
<td>Auto-complete</td>
</tr>
<tr>
<td><code>‚Üë/‚Üì</code></td>
<td>Navigate command history</td>
</tr>
</tbody>
</table>
<h3 id="aliases-for-efficiency">Aliases for Efficiency</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Add to ~/.bashrc for permanent aliases</span>
$ <span class="hljs-built_in">echo</span> <span class="hljs-string">'alias ll="ls -la"'</span> &gt;&gt; ~/.bashrc
$ <span class="hljs-built_in">echo</span> <span class="hljs-string">'alias la="ls -la"'</span> &gt;&gt; ~/.bashrc
$ <span class="hljs-built_in">echo</span> <span class="hljs-string">'alias ..="cd .."'</span> &gt;&gt; ~/.bashrc
$ <span class="hljs-built_in">source</span> ~/.bashrc

<span class="hljs-comment"># Now you can use:</span>
$ ll        <span class="hljs-comment"># Instead of ls -la</span>
$ ..        <span class="hljs-comment"># Instead of cd ..</span>
</div></code></pre>
<h2 id="%F0%9F%A7%A0-knowledge-check">üß† Knowledge Check</h2>
<h3 id="quick-quiz">Quick Quiz</h3>
<ol>
<li>
<p><strong>What command shows your current directory?</strong></p>
<details>
<summary>Answer</summary>
<pre class="hljs"><code><div><span class="hljs-built_in">pwd</span>
</div></code></pre>
</details>
</li>
<li>
<p><strong>How do you create a directory called &quot;test&quot; and navigate into it in one line?</strong></p>
<details>
<summary>Answer</summary>
<pre class="hljs"><code><div>mkdir <span class="hljs-built_in">test</span> &amp;&amp; <span class="hljs-built_in">cd</span> <span class="hljs-built_in">test</span>
</div></code></pre>
</details>
</li>
<li>
<p><strong>What's the difference between <code>rm file.txt</code> and <code>rm -r directory/</code>?</strong></p>
<details>
<summary>Answer</summary>
<ul>
<li><code>rm file.txt</code> removes a single file</li>
<li><code>rm -r directory/</code> removes a directory and all its contents recursively</li>
</ul>
</details>
</li>
<li>
<p><strong>How do you view the last 20 lines of a file called &quot;logfile.txt&quot;?</strong></p>
<details>
<summary>Answer</summary>
<pre class="hljs"><code><div>tail -n 20 logfile.txt
<span class="hljs-comment"># or</span>
tail -20 logfile.txt
</div></code></pre>
</details>
</li>
</ol>
<h3 id="hands-on-challenges">Hands-On Challenges</h3>
<p><strong>Challenge 1: File System Explorer</strong></p>
<pre class="hljs"><code><div><span class="hljs-comment"># Navigate to root directory and explore</span>
<span class="hljs-comment"># Find the largest directory in /var</span>
<span class="hljs-comment"># List all files in /etc that contain "conf" in their name</span>
</div></code></pre>
<p><strong>Challenge 2: Project Setup</strong></p>
<pre class="hljs"><code><div><span class="hljs-comment"># Create a project structure for a blog:</span>
<span class="hljs-comment"># blog/</span>
<span class="hljs-comment"># ‚îú‚îÄ‚îÄ posts/</span>
<span class="hljs-comment"># ‚îú‚îÄ‚îÄ images/</span>
<span class="hljs-comment"># ‚îú‚îÄ‚îÄ css/</span>
<span class="hljs-comment"># ‚îú‚îÄ‚îÄ js/</span>
<span class="hljs-comment"># ‚îî‚îÄ‚îÄ index.html</span>
</div></code></pre>
<p><strong>Challenge 3: File Operations</strong></p>
<pre class="hljs"><code><div><span class="hljs-comment"># Create 5 text files with different extensions</span>
<span class="hljs-comment"># Copy all .txt files to a backup directory</span>
<span class="hljs-comment"># Rename all .log files to have today's date in the filename</span>
</div></code></pre>
<h2 id="%F0%9F%9A%80-next-steps">üöÄ Next Steps</h2>
<p>Congratulations! You've mastered Linux basics. You can now:</p>
<ul>
<li>Navigate the Linux file system confidently</li>
<li>Create, copy, move, and delete files and directories</li>
<li>View file contents and system information</li>
<li>Use essential productivity shortcuts</li>
</ul>
<p><strong>Ready for the next level?</strong> Continue to <a href="02-file-operations.md">02-file-operations.md</a> to master advanced file manipulation, text processing, and powerful command-line editors.</p>
<hr>
<blockquote>
<p><strong>Pro Tip</strong>: The best way to learn Linux is by using it daily. Set up a Linux virtual machine or use WSL on Windows to practice these commands regularly. Remember: every expert was once a beginner! üêß</p>
</blockquote>
<h1 id="%F0%9F%93%81-file-operations-text-processing-mastery">üìÅ File Operations: Text Processing Mastery</h1>
<blockquote>
<p><strong>Master file manipulation, text processing, and command-line editors</strong></p>
</blockquote>
<h2 id="%F0%9F%93%96-what-youll-learn">üìñ What You'll Learn</h2>
<p>File operations are the heart of Linux system administration and development. This chapter covers advanced file manipulation, powerful text processing tools, and essential editors that every Linux user must know:</p>
<ul>
<li>Advanced file searching and filtering</li>
<li>Text processing with <code>grep</code>, <code>sed</code>, and <code>awk</code></li>
<li>File comparison and merging</li>
<li>Command-line editors (<code>nano</code>, <code>vim</code>)</li>
<li>File permissions and ownership</li>
<li>Symbolic and hard links</li>
</ul>
<h2 id="%F0%9F%8C%8D-why-this-matters">üåç Why This Matters</h2>
<p><strong>Real-world applications:</strong></p>
<ul>
<li><strong>Log Analysis</strong>: Parse and analyze system logs for troubleshooting</li>
<li><strong>Configuration Management</strong>: Edit config files on remote servers</li>
<li><strong>Data Processing</strong>: Clean and transform text data</li>
<li><strong>Automation</strong>: Create scripts that process files automatically</li>
<li><strong>Security</strong>: Analyze files for suspicious content or changes</li>
</ul>
<h2 id="%F0%9F%94%8D-advanced-file-searching">üîç Advanced File Searching</h2>
<h3 id="finding-files-with-find">Finding Files with <code>find</code></h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Find files by name</span>
$ find /home -name <span class="hljs-string">"*.txt"</span>
/home/user/documents/notes.txt
/home/user/projects/readme.txt

<span class="hljs-comment"># Find files by type</span>
$ find /var/<span class="hljs-built_in">log</span> -<span class="hljs-built_in">type</span> f -name <span class="hljs-string">"*.log"</span>
/var/<span class="hljs-built_in">log</span>/syslog
/var/<span class="hljs-built_in">log</span>/auth.log
/var/<span class="hljs-built_in">log</span>/kern.log

<span class="hljs-comment"># Find directories</span>
$ find /etc -<span class="hljs-built_in">type</span> d -name <span class="hljs-string">"*conf*"</span>
/etc/apparmor.d
/etc/systemd/system.conf.d

<span class="hljs-comment"># Find files by size</span>
$ find /var -size +100M
/var/<span class="hljs-built_in">log</span>/huge_log.log
/var/cache/large_file.cache

<span class="hljs-comment"># Find files modified in last 7 days</span>
$ find /home -mtime -7

<span class="hljs-comment"># Find files by permissions</span>
$ find /usr/bin -perm 755
</div></code></pre>
<h3 id="advanced-find-examples">Advanced <code>find</code> Examples</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Find and execute command on results</span>
$ find /tmp -name <span class="hljs-string">"*.tmp"</span> -<span class="hljs-built_in">exec</span> rm {} \;

<span class="hljs-comment"># Find large files and show their sizes</span>
$ find /var -size +50M -<span class="hljs-built_in">exec</span> ls -lh {} \;

<span class="hljs-comment"># Find files owned by specific user</span>
$ find /home -user john -<span class="hljs-built_in">type</span> f

<span class="hljs-comment"># Find files with specific permissions</span>
$ find /etc -perm 644 -<span class="hljs-built_in">type</span> f

<span class="hljs-comment"># Find empty files</span>
$ find /tmp -empty -<span class="hljs-built_in">type</span> f

<span class="hljs-comment"># Find files modified more than 30 days ago</span>
$ find /var/<span class="hljs-built_in">log</span> -mtime +30 -name <span class="hljs-string">"*.log"</span>
</div></code></pre>
<h3 id="using-locate-for-fast-searches">Using <code>locate</code> for Fast Searches</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Update locate database (run as root)</span>
$ sudo updatedb

<span class="hljs-comment"># Fast file search</span>
$ locate nginx.conf
/etc/nginx/nginx.conf
/usr/share/doc/nginx/examples/nginx.conf

<span class="hljs-comment"># Case-insensitive search</span>
$ locate -i README
/home/user/projects/readme.md
/usr/share/doc/README
</div></code></pre>
<h2 id="%F0%9F%94%8E-text-processing-with-grep">üîé Text Processing with <code>grep</code></h2>
<h3 id="basic-grep-usage">Basic <code>grep</code> Usage</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Search for pattern in file</span>
$ grep <span class="hljs-string">"error"</span> /var/<span class="hljs-built_in">log</span>/syslog
Dec 15 10:30:15 server kernel: [12345.678] USB disconnect, address 1
Dec 15 10:31:22 server systemd[1]: Failed to start service

<span class="hljs-comment"># Case-insensitive search</span>
$ grep -i <span class="hljs-string">"ERROR"</span> /var/<span class="hljs-built_in">log</span>/syslog

<span class="hljs-comment"># Show line numbers</span>
$ grep -n <span class="hljs-string">"failed"</span> /var/<span class="hljs-built_in">log</span>/auth.log
23:Dec 15 10:25:30 server sshd[1234]: Failed password <span class="hljs-keyword">for</span> user from 192.168.1.100
45:Dec 15 10:26:15 server sshd[1235]: Failed password <span class="hljs-keyword">for</span> admin from 192.168.1.101

<span class="hljs-comment"># Count matches</span>
$ grep -c <span class="hljs-string">"ssh"</span> /var/<span class="hljs-built_in">log</span>/auth.log
127

<span class="hljs-comment"># Show context around matches</span>
$ grep -A 2 -B 2 <span class="hljs-string">"error"</span> /var/<span class="hljs-built_in">log</span>/syslog
<span class="hljs-comment"># -A 2: show 2 lines after</span>
<span class="hljs-comment"># -B 2: show 2 lines before</span>
<span class="hljs-comment"># -C 2: show 2 lines before and after</span>
</div></code></pre>
<h3 id="advanced-grep-patterns">Advanced <code>grep</code> Patterns</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Regular expressions</span>
$ grep <span class="hljs-string">"^Dec 15"</span> /var/<span class="hljs-built_in">log</span>/syslog          <span class="hljs-comment"># Lines starting with "Dec 15"</span>
$ grep <span class="hljs-string">"error$"</span> /var/<span class="hljs-built_in">log</span>/syslog           <span class="hljs-comment"># Lines ending with "error"</span>
$ grep <span class="hljs-string">"[0-9]\{1,3\}\.[0-9]\{1,3\}"</span> /var/<span class="hljs-built_in">log</span>/auth.log  <span class="hljs-comment"># IP addresses</span>

<span class="hljs-comment"># Multiple patterns</span>
$ grep -E <span class="hljs-string">"error|warning|critical"</span> /var/<span class="hljs-built_in">log</span>/syslog

<span class="hljs-comment"># Exclude patterns</span>
$ grep -v <span class="hljs-string">"info"</span> /var/<span class="hljs-built_in">log</span>/syslog          <span class="hljs-comment"># Show all lines except those with "info"</span>

<span class="hljs-comment"># Recursive search in directories</span>
$ grep -r <span class="hljs-string">"TODO"</span> /home/user/projects/
/home/user/projects/app.js:15:// TODO: Add error handling
/home/user/projects/README.md:23:TODO: Update documentation

<span class="hljs-comment"># Search in specific file types</span>
$ grep -r --include=<span class="hljs-string">"*.py"</span> <span class="hljs-string">"import"</span> /home/user/projects/
</div></code></pre>
<h3 id="practical-grep-examples">Practical <code>grep</code> Examples</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Find failed login attempts</span>
$ grep <span class="hljs-string">"Failed password"</span> /var/<span class="hljs-built_in">log</span>/auth.log

<span class="hljs-comment"># Find all IP addresses in logs</span>
$ grep -oE <span class="hljs-string">"[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}"</span> /var/<span class="hljs-built_in">log</span>/auth.log

<span class="hljs-comment"># Find processes using specific port</span>
$ netstat -tulpn | grep <span class="hljs-string">":80 "</span>

<span class="hljs-comment"># Search for configuration errors</span>
$ grep -i <span class="hljs-string">"error\|warning\|fail"</span> /etc/nginx/nginx.conf
</div></code></pre>
<h2 id="%E2%9C%82%EF%B8%8F-text-manipulation-with-sed">‚úÇÔ∏è Text Manipulation with <code>sed</code></h2>
<h3 id="basic-sed-operations">Basic <code>sed</code> Operations</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Replace first occurrence per line</span>
$ sed <span class="hljs-string">'s/old/new/'</span> file.txt

<span class="hljs-comment"># Replace all occurrences</span>
$ sed <span class="hljs-string">'s/old/new/g'</span> file.txt

<span class="hljs-comment"># Replace and save to new file</span>
$ sed <span class="hljs-string">'s/old/new/g'</span> file.txt &gt; newfile.txt

<span class="hljs-comment"># Edit file in place</span>
$ sed -i <span class="hljs-string">'s/old/new/g'</span> file.txt

<span class="hljs-comment"># Replace with backup</span>
$ sed -i.bak <span class="hljs-string">'s/old/new/g'</span> file.txt
</div></code></pre>
<h3 id="advanced-sed-examples">Advanced <code>sed</code> Examples</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Delete lines containing pattern</span>
$ sed <span class="hljs-string">'/pattern/d'</span> file.txt

<span class="hljs-comment"># Delete empty lines</span>
$ sed <span class="hljs-string">'/^$/d'</span> file.txt

<span class="hljs-comment"># Print specific lines</span>
$ sed -n <span class="hljs-string">'10,20p'</span> file.txt              <span class="hljs-comment"># Print lines 10-20</span>
$ sed -n <span class="hljs-string">'/pattern/p'</span> file.txt          <span class="hljs-comment"># Print lines matching pattern</span>

<span class="hljs-comment"># Insert text before/after pattern</span>
$ sed <span class="hljs-string">'/pattern/i\New line before'</span> file.txt
$ sed <span class="hljs-string">'/pattern/a\New line after'</span> file.txt

<span class="hljs-comment"># Multiple operations</span>
$ sed -e <span class="hljs-string">'s/old1/new1/g'</span> -e <span class="hljs-string">'s/old2/new2/g'</span> file.txt
</div></code></pre>
<h3 id="practical-sed-use-cases">Practical <code>sed</code> Use Cases</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Remove comments from config file</span>
$ sed <span class="hljs-string">'/^#/d'</span> /etc/ssh/sshd_config

<span class="hljs-comment"># Change IP address in config</span>
$ sed -i <span class="hljs-string">'s/192.168.1.100/192.168.1.200/g'</span> /etc/hosts

<span class="hljs-comment"># Add line numbers</span>
$ sed = file.txt | sed <span class="hljs-string">'N;s/\n/\t/'</span>

<span class="hljs-comment"># Convert DOS line endings to Unix</span>
$ sed -i <span class="hljs-string">'s/\r$//'</span> file.txt

<span class="hljs-comment"># Extract email addresses</span>
$ sed -n <span class="hljs-string">'s/.*\([a-zA-Z0-9._%+-]\+@[a-zA-Z0-9.-]\+\.[a-zA-Z]\{2,\}\).*/\1/p'</span> file.txt
</div></code></pre>
<h2 id="%F0%9F%94%A7-text-processing-with-awk">üîß Text Processing with <code>awk</code></h2>
<h3 id="basic-awk-concepts">Basic <code>awk</code> Concepts</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Print specific columns</span>
$ awk <span class="hljs-string">'{print $1, $3}'</span> /etc/passwd       <span class="hljs-comment"># Print 1st and 3rd columns</span>

<span class="hljs-comment"># Print with custom separator</span>
$ awk -F: <span class="hljs-string">'{print $1, $3}'</span> /etc/passwd   <span class="hljs-comment"># Use : as field separator</span>

<span class="hljs-comment"># Print lines matching condition</span>
$ awk <span class="hljs-string">'$3 &gt;= 1000'</span> /etc/passwd           <span class="hljs-comment"># Users with UID &gt;= 1000</span>

<span class="hljs-comment"># Count lines</span>
$ awk <span class="hljs-string">'END {print NR}'</span> file.txt

<span class="hljs-comment"># Sum numbers in column</span>
$ awk <span class="hljs-string">'{sum += $1} END {print sum}'</span> numbers.txt
</div></code></pre>
<h3 id="advanced-awk-examples">Advanced <code>awk</code> Examples</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Process log files</span>
$ awk <span class="hljs-string">'$9 == 404 {print $1, $7}'</span> /var/<span class="hljs-built_in">log</span>/apache2/access.log

<span class="hljs-comment"># Calculate averages</span>
$ awk <span class="hljs-string">'{sum += $3; count++} END {print sum/count}'</span> data.txt

<span class="hljs-comment"># Format output</span>
$ awk -F: <span class="hljs-string">'{printf "%-20s %s\n", $1, $5}'</span> /etc/passwd

<span class="hljs-comment"># Conditional processing</span>
$ awk <span class="hljs-string">'$3 &gt; 1000 {print $1 " is a regular user"}'</span> /etc/passwd

<span class="hljs-comment"># Multiple conditions</span>
$ awk <span class="hljs-string">'$3 &gt;= 1000 &amp;&amp; $7 != "/usr/sbin/nologin" {print $1}'</span> /etc/passwd
</div></code></pre>
<h3 id="real-world-awk-scripts">Real-World <code>awk</code> Scripts</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Analyze web server logs</span>
$ awk <span class="hljs-string">'{print $1}'</span> /var/<span class="hljs-built_in">log</span>/apache2/access.log | sort | uniq -c | sort -nr
<span class="hljs-comment"># Shows most frequent IP addresses</span>

<span class="hljs-comment"># Process CSV files</span>
$ awk -F, <span class="hljs-string">'{print $2, $4}'</span> data.csv

<span class="hljs-comment"># Calculate disk usage summary</span>
$ df -h | awk <span class="hljs-string">'NR&gt;1 {gsub(/%/, "", $5); if($5 &gt; 80) print $6 " is " $5 "% full"}'</span>

<span class="hljs-comment"># Monitor system load</span>
$ uptime | awk <span class="hljs-string">'{print "Load average: " $(NF-2) " " $(NF-1) " " $NF}'</span>
</div></code></pre>
<h2 id="%F0%9F%93%9D-command-line-editors">üìù Command-Line Editors</h2>
<h3 id="nano---beginner-friendly-editor"><code>nano</code> - Beginner-Friendly Editor</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Open file in nano</span>
$ nano filename.txt

<span class="hljs-comment"># Nano shortcuts (shown at bottom of screen):</span>
<span class="hljs-comment"># Ctrl+O: Save (WriteOut)</span>
<span class="hljs-comment"># Ctrl+X: Exit</span>
<span class="hljs-comment"># Ctrl+W: Search</span>
<span class="hljs-comment"># Ctrl+K: Cut line</span>
<span class="hljs-comment"># Ctrl+U: Paste</span>
<span class="hljs-comment"># Ctrl+G: Help</span>
</div></code></pre>
<p><strong>Nano Configuration:</strong></p>
<pre class="hljs"><code><div><span class="hljs-comment"># Create ~/.nanorc for custom settings</span>
$ cat &gt; ~/.nanorc &lt;&lt; EOF
<span class="hljs-built_in">set</span> linenumbers
<span class="hljs-built_in">set</span> mouse
<span class="hljs-built_in">set</span> smooth
<span class="hljs-built_in">set</span> tabsize 4
include /usr/share/nano/*.nanorc
EOF
</div></code></pre>
<h3 id="vim---powerful-modal-editor"><code>vim</code> - Powerful Modal Editor</h3>
<h4 id="vim-modes">Vim Modes</h4>
<ul>
<li><strong>Normal Mode</strong>: Navigation and commands (default)</li>
<li><strong>Insert Mode</strong>: Text editing</li>
<li><strong>Visual Mode</strong>: Text selection</li>
<li><strong>Command Mode</strong>: Execute commands</li>
</ul>
<h4 id="basic-vim-commands">Basic Vim Commands</h4>
<pre class="hljs"><code><div><span class="hljs-comment"># Open file</span>
$ vim filename.txt

<span class="hljs-comment"># Mode switching:</span>
<span class="hljs-comment"># i: Enter insert mode</span>
<span class="hljs-comment"># Esc: Return to normal mode</span>
<span class="hljs-comment"># v: Enter visual mode</span>
<span class="hljs-comment"># :: Enter command mode</span>

<span class="hljs-comment"># Navigation (Normal mode):</span>
<span class="hljs-comment"># h,j,k,l: Left, down, up, right</span>
<span class="hljs-comment"># w: Next word</span>
<span class="hljs-comment"># b: Previous word</span>
<span class="hljs-comment"># 0: Beginning of line</span>
<span class="hljs-comment"># $: End of line</span>
<span class="hljs-comment"># gg: First line</span>
<span class="hljs-comment"># G: Last line</span>
<span class="hljs-comment"># :n: Go to line n</span>

<span class="hljs-comment"># Editing (Normal mode):</span>
<span class="hljs-comment"># x: Delete character</span>
<span class="hljs-comment"># dd: Delete line</span>
<span class="hljs-comment"># yy: Copy line</span>
<span class="hljs-comment"># p: Paste</span>
<span class="hljs-comment"># u: Undo</span>
<span class="hljs-comment"># Ctrl+r: Redo</span>

<span class="hljs-comment"># Search and replace:</span>
<span class="hljs-comment"># /pattern: Search forward</span>
<span class="hljs-comment"># ?pattern: Search backward</span>
<span class="hljs-comment"># n: Next match</span>
<span class="hljs-comment"># N: Previous match</span>
<span class="hljs-comment"># :%s/old/new/g: Replace all</span>

<span class="hljs-comment"># Save and exit:</span>
<span class="hljs-comment"># :w: Save</span>
<span class="hljs-comment"># :q: Quit</span>
<span class="hljs-comment"># :wq: Save and quit</span>
<span class="hljs-comment"># :q!: Quit without saving</span>
</div></code></pre>
<h4 id="vim-configuration">Vim Configuration</h4>
<pre class="hljs"><code><div><span class="hljs-comment"># Create ~/.vimrc for custom settings</span>
$ cat &gt; ~/.vimrc &lt;&lt; EOF
<span class="hljs-built_in">set</span> number          <span class="hljs-string">" Show line numbers
set tabstop=4       "</span> Tab width
<span class="hljs-built_in">set</span> shiftwidth=4    <span class="hljs-string">" Indent width
set expandtab       "</span> Use spaces instead of tabs
<span class="hljs-built_in">set</span> hlsearch        <span class="hljs-string">" Highlight search results
set ignorecase      "</span> Case-insensitive search
<span class="hljs-built_in">set</span> smartcase       <span class="hljs-string">" Smart case search
syntax on           "</span> Enable syntax highlighting
<span class="hljs-built_in">set</span> mouse=a         <span class="hljs-string">" Enable mouse support
EOF
</span></div></code></pre>
<h2 id="%F0%9F%94%90-file-permissions-and-ownership">üîê File Permissions and Ownership</h2>
<h3 id="understanding-permissions">Understanding Permissions</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># View permissions</span>
$ ls -l file.txt
-rw-r--r-- 1 user group 1024 Dec 15 10:30 file.txt
<span class="hljs-comment"># ^^^^^^^^^^</span>
<span class="hljs-comment"># |||||||++-- Other permissions (r--)</span>
<span class="hljs-comment"># ||||+++---- Group permissions (r--)</span>
<span class="hljs-comment"># |+++------- User permissions (rw-)</span>
<span class="hljs-comment"># +---------- File type (-=file, d=directory, l=link)</span>
</div></code></pre>
<h3 id="permission-types">Permission Types</h3>
<table>
<thead>
<tr>
<th>Symbol</th>
<th>Permission</th>
<th>Numeric</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>r</code></td>
<td>Read</td>
<td>4</td>
<td>View file contents</td>
</tr>
<tr>
<td><code>w</code></td>
<td>Write</td>
<td>2</td>
<td>Modify file</td>
</tr>
<tr>
<td><code>x</code></td>
<td>Execute</td>
<td>1</td>
<td>Run file as program</td>
</tr>
<tr>
<td><code>-</code></td>
<td>No permission</td>
<td>0</td>
<td>No access</td>
</tr>
</tbody>
</table>
<h3 id="changing-permissions">Changing Permissions</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Symbolic method</span>
$ chmod u+x script.sh              <span class="hljs-comment"># Add execute for user</span>
$ chmod g-w file.txt               <span class="hljs-comment"># Remove write for group</span>
$ chmod o+r file.txt               <span class="hljs-comment"># Add read for others</span>
$ chmod a+x script.sh              <span class="hljs-comment"># Add execute for all</span>

<span class="hljs-comment"># Numeric method</span>
$ chmod 755 script.sh              <span class="hljs-comment"># rwxr-xr-x</span>
$ chmod 644 file.txt               <span class="hljs-comment"># rw-r--r--</span>
$ chmod 600 private.txt            <span class="hljs-comment"># rw-------</span>
$ chmod 777 public_dir/            <span class="hljs-comment"># rwxrwxrwx (dangerous!)</span>

<span class="hljs-comment"># Recursive permissions</span>
$ chmod -R 755 /var/www/html/
</div></code></pre>
<h3 id="common-permission-patterns">Common Permission Patterns</h3>
<table>
<thead>
<tr>
<th>Permissions</th>
<th>Numeric</th>
<th>Use Case</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>rwx------</code></td>
<td>700</td>
<td>Private executable</td>
</tr>
<tr>
<td><code>rwxr-xr-x</code></td>
<td>755</td>
<td>Public executable</td>
</tr>
<tr>
<td><code>rw-------</code></td>
<td>600</td>
<td>Private file</td>
</tr>
<tr>
<td><code>rw-r--r--</code></td>
<td>644</td>
<td>Public readable file</td>
</tr>
<tr>
<td><code>rw-rw-r--</code></td>
<td>664</td>
<td>Group writable file</td>
</tr>
</tbody>
</table>
<h3 id="changing-ownership">Changing Ownership</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Change owner</span>
$ sudo chown newuser file.txt

<span class="hljs-comment"># Change owner and group</span>
$ sudo chown newuser:newgroup file.txt

<span class="hljs-comment"># Change only group</span>
$ sudo chgrp newgroup file.txt

<span class="hljs-comment"># Recursive ownership change</span>
$ sudo chown -R www-data:www-data /var/www/

<span class="hljs-comment"># Copy permissions from another file</span>
$ chmod --reference=source.txt target.txt
</div></code></pre>
<h2 id="%F0%9F%94%97-links-symbolic-and-hard">üîó Links: Symbolic and Hard</h2>
<h3 id="hard-links">Hard Links</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Create hard link</span>
$ ln original.txt hardlink.txt

<span class="hljs-comment"># Both files point to same data</span>
$ ls -li original.txt hardlink.txt
123456 -rw-r--r-- 2 user group 1024 Dec 15 10:30 original.txt
123456 -rw-r--r-- 2 user group 1024 Dec 15 10:30 hardlink.txt
<span class="hljs-comment">#      ^</span>
<span class="hljs-comment">#      Same inode number</span>

<span class="hljs-comment"># Deleting original doesn't affect hard link</span>
$ rm original.txt
$ cat hardlink.txt  <span class="hljs-comment"># Still works</span>
</div></code></pre>
<h3 id="symbolic-links">Symbolic Links</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Create symbolic link</span>
$ ln -s /path/to/original.txt symlink.txt

<span class="hljs-comment"># View symbolic link</span>
$ ls -l symlink.txt
lrwxrwxrwx 1 user group 20 Dec 15 10:30 symlink.txt -&gt; /path/to/original.txt

<span class="hljs-comment"># Create relative symbolic link</span>
$ ln -s ../config/settings.conf current_settings.conf

<span class="hljs-comment"># Update symbolic link</span>
$ ln -sfn /new/path/file.txt symlink.txt
</div></code></pre>
<h3 id="link-differences">Link Differences</h3>
<table>
<thead>
<tr>
<th>Feature</th>
<th>Hard Link</th>
<th>Symbolic Link</th>
</tr>
</thead>
<tbody>
<tr>
<td>Cross filesystems</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr>
<td>Link to directories</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr>
<td>Original deleted</td>
<td>Still works</td>
<td>Broken link</td>
</tr>
<tr>
<td>Shows in <code>ls -l</code></td>
<td>No</td>
<td>Yes</td>
</tr>
<tr>
<td>Disk space</td>
<td>None</td>
<td>Minimal</td>
</tr>
</tbody>
</table>
<h2 id="%F0%9F%93%8A-file-comparison-and-merging">üìä File Comparison and Merging</h2>
<h3 id="comparing-files">Comparing Files</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Simple comparison</span>
$ diff file1.txt file2.txt
2c2
&lt; This is line 2 <span class="hljs-keyword">in</span> file1
---
&gt; This is line 2 <span class="hljs-keyword">in</span> file2

<span class="hljs-comment"># Side-by-side comparison</span>
$ diff -y file1.txt file2.txt
Line 1 is same                    Line 1 is same
This is line 2 <span class="hljs-keyword">in</span> file1         | This is line 2 <span class="hljs-keyword">in</span> file2
Line 3 is same                    Line 3 is same

<span class="hljs-comment"># Unified diff format</span>
$ diff -u file1.txt file2.txt
--- file1.txt	2023-12-15 10:30:00.000000000 +0000
+++ file2.txt	2023-12-15 10:31:00.000000000 +0000
@@ -1,3 +1,3 @@
 Line 1 is same
-This is line 2 <span class="hljs-keyword">in</span> file1
+This is line 2 <span class="hljs-keyword">in</span> file2
 Line 3 is same

<span class="hljs-comment"># Compare directories</span>
$ diff -r dir1/ dir2/
</div></code></pre>
<h3 id="advanced-comparison-tools">Advanced Comparison Tools</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Compare ignoring whitespace</span>
$ diff -w file1.txt file2.txt

<span class="hljs-comment"># Compare ignoring case</span>
$ diff -i file1.txt file2.txt

<span class="hljs-comment"># Show only if files differ</span>
$ diff -q file1.txt file2.txt
Files file1.txt and file2.txt differ

<span class="hljs-comment"># Context diff</span>
$ diff -c file1.txt file2.txt
</div></code></pre>
<h2 id="%F0%9F%8E%AF-practical-scenario-log-analysis">üéØ Practical Scenario: Log Analysis</h2>
<p>Let's analyze a web server log file:</p>
<pre class="hljs"><code><div><span class="hljs-comment"># 1. Create sample log file</span>
$ cat &gt; access.log &lt;&lt; EOF
192.168.1.100 - - [15/Dec/2023:10:30:15 +0000] <span class="hljs-string">"GET /index.html HTTP/1.1"</span> 200 1024
192.168.1.101 - - [15/Dec/2023:10:30:16 +0000] <span class="hljs-string">"GET /about.html HTTP/1.1"</span> 200 2048
192.168.1.100 - - [15/Dec/2023:10:30:17 +0000] <span class="hljs-string">"GET /contact.php HTTP/1.1"</span> 404 512
192.168.1.102 - - [15/Dec/2023:10:30:18 +0000] <span class="hljs-string">"POST /login.php HTTP/1.1"</span> 200 256
192.168.1.100 - - [15/Dec/2023:10:30:19 +0000] <span class="hljs-string">"GET /admin.php HTTP/1.1"</span> 403 128
EOF

<span class="hljs-comment"># 2. Find all 404 errors</span>
$ grep <span class="hljs-string">" 404 "</span> access.log
192.168.1.100 - - [15/Dec/2023:10:30:17 +0000] <span class="hljs-string">"GET /contact.php HTTP/1.1"</span> 404 512

<span class="hljs-comment"># 3. Count requests per IP</span>
$ awk <span class="hljs-string">'{print $1}'</span> access.log | sort | uniq -c
      3 192.168.1.100
      1 192.168.1.101
      1 192.168.1.102

<span class="hljs-comment"># 4. Find most requested pages</span>
$ awk <span class="hljs-string">'{print $7}'</span> access.log | sort | uniq -c | sort -nr
      1 /index.html
      1 /contact.php
      1 /admin.php
      1 /about.html
      1 /login.php

<span class="hljs-comment"># 5. Calculate total bytes transferred</span>
$ awk <span class="hljs-string">'{sum += $10} END {print "Total bytes:", sum}'</span> access.log
Total bytes: 3968

<span class="hljs-comment"># 6. Find suspicious activity (multiple failed attempts)</span>
$ awk <span class="hljs-string">'$9 &gt;= 400 {print $1, $7, $9}'</span> access.log
192.168.1.100 /contact.php 404
192.168.1.100 /admin.php 403

<span class="hljs-comment"># 7. Extract unique IP addresses</span>
$ awk <span class="hljs-string">'{print $1}'</span> access.log | sort -u
192.168.1.100
192.168.1.101
192.168.1.102
</div></code></pre>
<h2 id="%E2%9A%A0%EF%B8%8F-common-pitfalls-and-best-practices">‚ö†Ô∏è Common Pitfalls and Best Practices</h2>
<h3 id="1-backup-before-editing">1. Backup Before Editing</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Always backup important files</span>
$ cp /etc/important.conf /etc/important.conf.backup
$ sed -i.bak <span class="hljs-string">'s/old/new/g'</span> /etc/important.conf
</div></code></pre>
<h3 id="2-test-regular-expressions">2. Test Regular Expressions</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Test grep patterns before using in scripts</span>
$ <span class="hljs-built_in">echo</span> <span class="hljs-string">"test string"</span> | grep <span class="hljs-string">"pattern"</span>
</div></code></pre>
<h3 id="3-use-quotes-with-special-characters">3. Use Quotes with Special Characters</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Protect special characters</span>
$ grep <span class="hljs-string">"\$variable"</span> file.txt
$ find . -name <span class="hljs-string">"*.tmp"</span>
</div></code></pre>
<h3 id="4-understand-file-permissions">4. Understand File Permissions</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Check permissions before changing</span>
$ ls -l file.txt
$ chmod 644 file.txt  <span class="hljs-comment"># Don't use 777 unless necessary</span>
</div></code></pre>
<h2 id="%F0%9F%A7%A0-knowledge-check">üß† Knowledge Check</h2>
<h3 id="quick-quiz">Quick Quiz</h3>
<ol>
<li>
<p><strong>How do you search for all files larger than 100MB in /var?</strong></p>
<details>
<summary>Answer</summary>
<pre class="hljs"><code><div>find /var -size +100M
</div></code></pre>
</details>
</li>
<li>
<p><strong>What's the difference between <code>&gt;</code> and <code>&gt;&gt;</code> when redirecting output?</strong></p>
<details>
<summary>Answer</summary>
<ul>
<li><code>&gt;</code> overwrites the file</li>
<li><code>&gt;&gt;</code> appends to the file</li>
</ul>
</details>
</li>
<li>
<p><strong>How do you replace all occurrences of &quot;old&quot; with &quot;new&quot; in a file using sed?</strong></p>
<details>
<summary>Answer</summary>
<pre class="hljs"><code><div>sed -i <span class="hljs-string">'s/old/new/g'</span> filename
</div></code></pre>
</details>
</li>
<li>
<p><strong>What permission number gives read and write to owner, read to group, and no access to others?</strong></p>
<details>
<summary>Answer</summary>
<pre class="hljs"><code><div>640 (rw-r-----)
</div></code></pre>
</details>
</li>
</ol>
<h3 id="hands-on-challenges">Hands-On Challenges</h3>
<p><strong>Challenge 1: Log Processing</strong></p>
<pre class="hljs"><code><div><span class="hljs-comment"># Create a script that:</span>
<span class="hljs-comment"># 1. Finds all ERROR entries in /var/log/syslog</span>
<span class="hljs-comment"># 2. Counts how many errors occurred today</span>
<span class="hljs-comment"># 3. Saves unique error messages to a file</span>
</div></code></pre>
<p><strong>Challenge 2: Configuration Management</strong></p>
<pre class="hljs"><code><div><span class="hljs-comment"># 1. Create a backup of /etc/hosts</span>
<span class="hljs-comment"># 2. Add a new entry: "127.0.0.1 myapp.local"</span>
<span class="hljs-comment"># 3. Verify the change was made correctly</span>
</div></code></pre>
<p><strong>Challenge 3: File Cleanup</strong></p>
<pre class="hljs"><code><div><span class="hljs-comment"># Create a script that:</span>
<span class="hljs-comment"># 1. Finds all .tmp files older than 7 days</span>
<span class="hljs-comment"># 2. Lists them with their sizes</span>
<span class="hljs-comment"># 3. Asks for confirmation before deleting</span>
</div></code></pre>
<h2 id="%F0%9F%9A%80-next-steps">üöÄ Next Steps</h2>
<p>Excellent work! You've mastered advanced file operations and text processing. You can now:</p>
<ul>
<li>Search and filter files efficiently</li>
<li>Process text data with grep, sed, and awk</li>
<li>Edit files with nano and vim</li>
<li>Manage file permissions and ownership</li>
<li>Compare and analyze files</li>
</ul>
<p><strong>Ready to dive deeper?</strong> Continue to <a href="03-process-management.md">03-process-management.md</a> to learn about managing processes, services, and system resources.</p>
<hr>
<blockquote>
<p><strong>Pro Tip</strong>: Text processing skills are invaluable for automation and data analysis. Practice these commands with real log files and configuration files to build muscle memory. The combination of grep, sed, and awk can solve most text processing challenges! üîß</p>
</blockquote>
<h1 id="%F0%9F%94%90-file-permissions--ownership-security-fundamentals">üîê File Permissions &amp; Ownership: Security Fundamentals</h1>
<blockquote>
<p><strong>Master Linux file permissions, ownership, and access control for secure system administration</strong></p>
</blockquote>
<h2 id="%F0%9F%93%96-what-youll-learn">üìñ What You'll Learn</h2>
<p>File permissions and ownership are the foundation of Linux security. This chapter covers everything you need to know about controlling access to files and directories:</p>
<ul>
<li>Understanding Linux permission model</li>
<li>Reading and interpreting permission strings</li>
<li>Changing permissions with <code>chmod</code></li>
<li>Managing ownership with <code>chown</code> and <code>chgrp</code></li>
<li>Special permissions (setuid, setgid, sticky bit)</li>
<li>Access Control Lists (ACLs)</li>
<li>Security best practices</li>
<li>Troubleshooting permission issues</li>
</ul>
<h2 id="%F0%9F%8C%8D-why-this-matters">üåç Why This Matters</h2>
<p><strong>Critical applications:</strong></p>
<ul>
<li><strong>Security</strong>: Protect sensitive files and system resources</li>
<li><strong>Multi-user Systems</strong>: Control access in shared environments</li>
<li><strong>Web Servers</strong>: Secure web applications and content</li>
<li><strong>System Administration</strong>: Maintain proper system security</li>
<li><strong>Compliance</strong>: Meet security requirements and standards</li>
</ul>
<h2 id="%F0%9F%8F%97%EF%B8%8F-understanding-linux-permissions">üèóÔ∏è Understanding Linux Permissions</h2>
<h3 id="permission-model-overview">Permission Model Overview</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Linux uses a simple but powerful permission model:</span>
<span class="hljs-comment"># Every file/directory has:</span>
<span class="hljs-comment"># 1. Owner (user who owns the file)</span>
<span class="hljs-comment"># 2. Group (group that owns the file)</span>
<span class="hljs-comment"># 3. Others (everyone else)</span>

<span class="hljs-comment"># Each category has three permissions:</span>
<span class="hljs-comment"># r = read (4)</span>
<span class="hljs-comment"># w = write (2)</span>
<span class="hljs-comment"># x = execute (1)</span>

<span class="hljs-comment"># Example permission string:</span>
<span class="hljs-comment"># -rwxr-xr--</span>
<span class="hljs-comment"># ||||||||||</span>
<span class="hljs-comment"># ||||||||+-- Others: read only (r--)</span>
<span class="hljs-comment"># |||||||+--- Others: no write</span>
<span class="hljs-comment"># ||||||+---- Others: no execute</span>
<span class="hljs-comment"># |||||+----- Group: read and execute (r-x)</span>
<span class="hljs-comment"># ||||+------ Group: no write</span>
<span class="hljs-comment"># |||+------- Group: execute</span>
<span class="hljs-comment"># ||+-------- Owner: read, write, execute (rwx)</span>
<span class="hljs-comment"># |+--------- Owner: write</span>
<span class="hljs-comment"># +---------- File type: - (regular file)</span>
</div></code></pre>
<h3 id="viewing-permissions">Viewing Permissions</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Basic permission viewing</span>
$ ls -l
total 12
-rw-r--r-- 1 user group  1024 Dec 15 10:30 document.txt
drwxr-xr-x 2 user group  4096 Dec 15 10:31 directory
-rwxr-xr-x 1 user group  2048 Dec 15 10:32 script.sh

<span class="hljs-comment"># Detailed breakdown:</span>
<span class="hljs-comment"># -rw-r--r-- 1 user group  1024 Dec 15 10:30 document.txt</span>
<span class="hljs-comment"># |          | |    |     |    |           |</span>
<span class="hljs-comment"># |          | |    |     |    |           +-- Filename</span>
<span class="hljs-comment"># |          | |    |     |    +-- Modification time</span>
<span class="hljs-comment"># |          | |    |     +-- File size</span>
<span class="hljs-comment"># |          | |    +-- Group owner</span>
<span class="hljs-comment"># |          | +-- User owner</span>
<span class="hljs-comment"># |          +-- Number of hard links</span>
<span class="hljs-comment"># +-- Permissions</span>

<span class="hljs-comment"># Show permissions in octal format</span>
$ <span class="hljs-built_in">stat</span> -c <span class="hljs-string">"%a %n"</span> *
644 document.txt
755 directory
755 script.sh

<span class="hljs-comment"># Show detailed file information</span>
$ <span class="hljs-built_in">stat</span> document.txt
  File: document.txt
  Size: 1024      	Blocks: 8          IO Block: 4096   regular file
Device: 801h/2049d	Inode: 123456      Links: 1
Access: (0644/-rw-r--r--)  Uid: ( 1000/    user)   Gid: ( 1000/   group)
Access: 2023-12-15 10:30:00.000000000 +0000
Modify: 2023-12-15 10:30:00.000000000 +0000
Change: 2023-12-15 10:30:00.000000000 +0000
</div></code></pre>
<h3 id="file-type-indicators">File Type Indicators</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># First character indicates file type:</span>
-  Regular file
d  Directory
l  Symbolic link
c  Character device
b  Block device
p  Named pipe (FIFO)
s  Socket

<span class="hljs-comment"># Examples:</span>
$ ls -l /dev/ | head -5
crw-rw-rw- 1 root tty     5,   0 Dec 15 10:30 tty
brw-rw---- 1 root disk    8,   0 Dec 15 10:30 sda
lrwxrwxrwx 1 root root        15 Dec 15 10:30 stdout -&gt; /proc/self/fd/1
prw-r--r-- 1 root root         0 Dec 15 10:30 mypipe
srwxrwxrwx 1 root root         0 Dec 15 10:30 socket
</div></code></pre>
<h2 id="%F0%9F%94%A7-changing-permissions-with-chmod">üîß Changing Permissions with <code>chmod</code></h2>
<h3 id="symbolic-mode">Symbolic Mode</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Symbolic mode uses letters and symbols:</span>
<span class="hljs-comment"># u = user (owner)</span>
<span class="hljs-comment"># g = group</span>
<span class="hljs-comment"># o = others</span>
<span class="hljs-comment"># a = all (user + group + others)</span>

<span class="hljs-comment"># + = add permission</span>
<span class="hljs-comment"># - = remove permission</span>
<span class="hljs-comment"># = = set exact permission</span>

<span class="hljs-comment"># Examples:</span>
$ chmod u+x script.sh        <span class="hljs-comment"># Add execute for user</span>
$ chmod g-w document.txt     <span class="hljs-comment"># Remove write for group</span>
$ chmod o=r document.txt     <span class="hljs-comment"># Set others to read-only</span>
$ chmod a+r document.txt     <span class="hljs-comment"># Add read for all</span>
$ chmod u+rwx,g+rx,o+r file  <span class="hljs-comment"># Multiple permissions</span>

<span class="hljs-comment"># Before and after examples:</span>
$ ls -l script.sh
-rw-r--r-- 1 user group 1024 Dec 15 10:30 script.sh

$ chmod u+x script.sh
$ ls -l script.sh
-rwxr--r-- 1 user group 1024 Dec 15 10:30 script.sh

$ chmod g+w,o-r script.sh
$ ls -l script.sh
-rwxrw---- 1 user group 1024 Dec 15 10:30 script.sh
</div></code></pre>
<h3 id="numeric-octal-mode">Numeric (Octal) Mode</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Numeric mode uses three digits (0-7):</span>
<span class="hljs-comment"># Each digit represents permissions for user, group, others</span>
<span class="hljs-comment"># 4 = read (r)</span>
<span class="hljs-comment"># 2 = write (w)</span>
<span class="hljs-comment"># 1 = execute (x)</span>

<span class="hljs-comment"># Common permission combinations:</span>
<span class="hljs-comment"># 0 = --- (no permissions)</span>
<span class="hljs-comment"># 1 = --x (execute only)</span>
<span class="hljs-comment"># 2 = -w- (write only)</span>
<span class="hljs-comment"># 3 = -wx (write + execute)</span>
<span class="hljs-comment"># 4 = r-- (read only)</span>
<span class="hljs-comment"># 5 = r-x (read + execute)</span>
<span class="hljs-comment"># 6 = rw- (read + write)</span>
<span class="hljs-comment"># 7 = rwx (read + write + execute)</span>

<span class="hljs-comment"># Examples:</span>
$ chmod 755 script.sh        <span class="hljs-comment"># rwxr-xr-x</span>
$ chmod 644 document.txt     <span class="hljs-comment"># rw-r--r--</span>
$ chmod 600 private.txt      <span class="hljs-comment"># rw-------</span>
$ chmod 777 shared_dir       <span class="hljs-comment"># rwxrwxrwx (dangerous!)</span>
$ chmod 000 locked_file      <span class="hljs-comment"># --------- (no access)</span>

<span class="hljs-comment"># Practical examples:</span>
$ chmod 755 ~/bin/*          <span class="hljs-comment"># Make all scripts executable</span>
$ chmod 644 *.txt            <span class="hljs-comment"># Standard file permissions</span>
$ chmod 700 ~/.ssh           <span class="hljs-comment"># Secure SSH directory</span>
$ chmod 600 ~/.ssh/id_rsa    <span class="hljs-comment"># Secure private key</span>
</div></code></pre>
<h3 id="recursive-permission-changes">Recursive Permission Changes</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Apply permissions recursively to directories</span>
$ chmod -R 755 /var/www/html <span class="hljs-comment"># Web directory permissions</span>
$ chmod -R 644 /var/www/html/*.html <span class="hljs-comment"># HTML files</span>

<span class="hljs-comment"># Set directory and file permissions differently:</span>
$ find /path -<span class="hljs-built_in">type</span> d -<span class="hljs-built_in">exec</span> chmod 755 {} \;  <span class="hljs-comment"># Directories: 755</span>
$ find /path -<span class="hljs-built_in">type</span> f -<span class="hljs-built_in">exec</span> chmod 644 {} \;  <span class="hljs-comment"># Files: 644</span>

<span class="hljs-comment"># One-liner for web directories:</span>
$ find /var/www/html -<span class="hljs-built_in">type</span> d -<span class="hljs-built_in">exec</span> chmod 755 {} \; -o -<span class="hljs-built_in">type</span> f -<span class="hljs-built_in">exec</span> chmod 644 {} \;

<span class="hljs-comment"># Using chmod with find for specific file types:</span>
$ find . -name <span class="hljs-string">"*.sh"</span> -<span class="hljs-built_in">exec</span> chmod +x {} \;   <span class="hljs-comment"># Make all .sh files executable</span>
$ find . -name <span class="hljs-string">"*.txt"</span> -<span class="hljs-built_in">exec</span> chmod 644 {} \; <span class="hljs-comment"># Set standard permissions for text files</span>
</div></code></pre>
<h2 id="%F0%9F%91%A5-managing-ownership">üë• Managing Ownership</h2>
<h3 id="changing-file-ownership">Changing File Ownership</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Change owner only</span>
$ sudo chown newuser file.txt
$ ls -l file.txt
-rw-r--r-- 1 newuser group 1024 Dec 15 10:30 file.txt

<span class="hljs-comment"># Change owner and group</span>
$ sudo chown newuser:newgroup file.txt
$ ls -l file.txt
-rw-r--r-- 1 newuser newgroup 1024 Dec 15 10:30 file.txt

<span class="hljs-comment"># Change ownership recursively</span>
$ sudo chown -R apache:apache /var/www/html

<span class="hljs-comment"># Copy ownership from another file</span>
$ sudo chown --reference=template.txt file.txt

<span class="hljs-comment"># Change ownership of symbolic links</span>
$ sudo chown -h user:group symlink  <span class="hljs-comment"># Change link itself, not target</span>
</div></code></pre>
<h3 id="changing-group-ownership">Changing Group Ownership</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Change group only</span>
$ sudo chgrp developers project_dir
$ ls -ld project_dir
drwxr-xr-x 2 user developers 4096 Dec 15 10:30 project_dir

<span class="hljs-comment"># Change group recursively</span>
$ sudo chgrp -R www-data /var/www

<span class="hljs-comment"># Copy group from another file</span>
$ sudo chgrp --reference=template.txt file.txt
</div></code></pre>
<h3 id="practical-ownership-examples">Practical Ownership Examples</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Web server setup</span>
$ sudo chown -R www-data:www-data /var/www/html
$ sudo chmod -R 755 /var/www/html

<span class="hljs-comment"># Database files</span>
$ sudo chown -R mysql:mysql /var/lib/mysql
$ sudo chmod -R 750 /var/lib/mysql

<span class="hljs-comment"># Log files</span>
$ sudo chown -R syslog:adm /var/<span class="hljs-built_in">log</span>
$ sudo chmod -R 640 /var/<span class="hljs-built_in">log</span>/*.<span class="hljs-built_in">log</span>

<span class="hljs-comment"># User home directory</span>
$ sudo chown -R user:user /home/user
$ sudo chmod 755 /home/user
$ sudo chmod 700 /home/user/.ssh
</div></code></pre>
<h2 id="%F0%9F%94%92-special-permissions">üîí Special Permissions</h2>
<h3 id="setuid-set-user-id">Setuid (Set User ID)</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Setuid allows a file to run with owner's privileges</span>
<span class="hljs-comment"># Represented by 's' in user execute position</span>

<span class="hljs-comment"># Set setuid bit</span>
$ sudo chmod u+s /usr/bin/passwd
$ ls -l /usr/bin/passwd
-rwsr-xr-x 1 root root 68208 Dec 15 10:30 /usr/bin/passwd

<span class="hljs-comment"># Numeric method (add 4000)</span>
$ sudo chmod 4755 /usr/bin/passwd

<span class="hljs-comment"># Remove setuid</span>
$ sudo chmod u<span class="hljs-_">-s</span> /usr/bin/passwd

<span class="hljs-comment"># Find setuid files (security audit)</span>
$ find / -<span class="hljs-built_in">type</span> f -perm -4000 2&gt;/dev/null
/usr/bin/passwd
/usr/bin/sudo
/usr/bin/su
</div></code></pre>
<h3 id="setgid-set-group-id">Setgid (Set Group ID)</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Setgid on files: run with group's privileges</span>
<span class="hljs-comment"># Setgid on directories: new files inherit directory's group</span>

<span class="hljs-comment"># Set setgid on directory</span>
$ sudo chmod g+s /shared/project
$ ls -ld /shared/project
drwxrwsr-x 2 user developers 4096 Dec 15 10:30 /shared/project

<span class="hljs-comment"># Files created in this directory inherit the group</span>
$ touch /shared/project/newfile.txt
$ ls -l /shared/project/newfile.txt
-rw-r--r-- 1 user developers 0 Dec 15 10:30 newfile.txt

<span class="hljs-comment"># Numeric method (add 2000)</span>
$ sudo chmod 2775 /shared/project

<span class="hljs-comment"># Find setgid files and directories</span>
$ find / -<span class="hljs-built_in">type</span> f -perm -2000 2&gt;/dev/null
$ find / -<span class="hljs-built_in">type</span> d -perm -2000 2&gt;/dev/null
</div></code></pre>
<h3 id="sticky-bit">Sticky Bit</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Sticky bit on directories: only owner can delete files</span>
<span class="hljs-comment"># Common on /tmp directory</span>

$ ls -ld /tmp
drwxrwxrwt 10 root root 4096 Dec 15 10:30 /tmp
<span class="hljs-comment">#        ^</span>
<span class="hljs-comment">#        +-- Sticky bit (t)</span>

<span class="hljs-comment"># Set sticky bit</span>
$ sudo chmod +t /shared/temp
$ ls -ld /shared/temp
drwxrwxrwt 2 root root 4096 Dec 15 10:30 /shared/temp

<span class="hljs-comment"># Numeric method (add 1000)</span>
$ sudo chmod 1777 /shared/temp

<span class="hljs-comment"># Remove sticky bit</span>
$ sudo chmod -t /shared/temp
</div></code></pre>
<h3 id="combined-special-permissions">Combined Special Permissions</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># All special permissions combined</span>
$ sudo chmod 7755 special_file  <span class="hljs-comment"># setuid + setgid + sticky + 755</span>
$ ls -l special_file
-rwsrwsrwt 1 user group 1024 Dec 15 10:30 special_file

<span class="hljs-comment"># Understanding the numbers:</span>
<span class="hljs-comment"># 7755 = 4000 (setuid) + 2000 (setgid) + 1000 (sticky) + 755 (rwxr-xr-x)</span>
</div></code></pre>
<h2 id="%F0%9F%93%8B-access-control-lists-acls">üìã Access Control Lists (ACLs)</h2>
<h3 id="basic-acl-operations">Basic ACL Operations</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Check if filesystem supports ACLs</span>
$ mount | grep acl
/dev/sda1 on / <span class="hljs-built_in">type</span> ext4 (rw,relatime,acl,user_xattr)

<span class="hljs-comment"># View ACLs</span>
$ getfacl file.txt
<span class="hljs-comment"># file: file.txt</span>
<span class="hljs-comment"># owner: user</span>
<span class="hljs-comment"># group: group</span>
user::rw-
group::r--
other::r--

<span class="hljs-comment"># Set ACL for specific user</span>
$ setfacl -m u:alice:rw file.txt
$ getfacl file.txt
<span class="hljs-comment"># file: file.txt</span>
<span class="hljs-comment"># owner: user</span>
<span class="hljs-comment"># group: group</span>
user::rw-
user:alice:rw-
group::r--
mask::rw-
other::r--

<span class="hljs-comment"># Set ACL for specific group</span>
$ setfacl -m g:developers:rwx project_dir

<span class="hljs-comment"># Set default ACLs for directories</span>
$ setfacl -d -m g:developers:rwx project_dir
$ setfacl -d -m o::r-x project_dir
</div></code></pre>
<h3 id="advanced-acl-management">Advanced ACL Management</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Remove specific ACL entry</span>
$ setfacl -x u:alice file.txt

<span class="hljs-comment"># Remove all ACLs</span>
$ setfacl -b file.txt

<span class="hljs-comment"># Copy ACLs from one file to another</span>
$ getfacl file1.txt | setfacl --<span class="hljs-built_in">set</span>-file=- file2.txt

<span class="hljs-comment"># Recursive ACL operations</span>
$ setfacl -R -m g:developers:rwx /project

<span class="hljs-comment"># Set ACLs with mask</span>
$ setfacl -m m::rw file.txt  <span class="hljs-comment"># Limit maximum permissions</span>

<span class="hljs-comment"># Backup and restore ACLs</span>
$ getfacl -R /project &gt; acl_backup.txt
$ setfacl --restore=acl_backup.txt
</div></code></pre>
<h2 id="%F0%9F%9B%A1%EF%B8%8F-security-best-practices">üõ°Ô∏è Security Best Practices</h2>
<h3 id="principle-of-least-privilege">Principle of Least Privilege</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Give minimum necessary permissions</span>

<span class="hljs-comment"># Bad: World-writable files</span>
$ chmod 777 file.txt  <span class="hljs-comment"># DON'T DO THIS!</span>

<span class="hljs-comment"># Good: Specific permissions</span>
$ chmod 644 file.txt  <span class="hljs-comment"># Read-write for owner, read for others</span>
$ chmod 755 script.sh <span class="hljs-comment"># Executable for owner, read-execute for others</span>

<span class="hljs-comment"># Secure directories</span>
$ chmod 700 ~/.ssh           <span class="hljs-comment"># SSH directory</span>
$ chmod 600 ~/.ssh/id_rsa    <span class="hljs-comment"># Private key</span>
$ chmod 644 ~/.ssh/id_rsa.pub <span class="hljs-comment"># Public key</span>
$ chmod 644 ~/.ssh/authorized_keys <span class="hljs-comment"># Authorized keys</span>

<span class="hljs-comment"># Web application security</span>
$ chmod 755 /var/www/html    <span class="hljs-comment"># Web root</span>
$ chmod 644 /var/www/html/*.html <span class="hljs-comment"># HTML files</span>
$ chmod 600 /var/www/html/config.php <span class="hljs-comment"># Config files</span>
</div></code></pre>
<h3 id="common-security-patterns">Common Security Patterns</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># System configuration files</span>
$ sudo chmod 644 /etc/passwd     <span class="hljs-comment"># World-readable</span>
$ sudo chmod 600 /etc/shadow     <span class="hljs-comment"># Root-only</span>
$ sudo chmod 644 /etc/group      <span class="hljs-comment"># World-readable</span>
$ sudo chmod 600 /etc/gshadow    <span class="hljs-comment"># Root-only</span>

<span class="hljs-comment"># Log files</span>
$ sudo chmod 640 /var/<span class="hljs-built_in">log</span>/*.<span class="hljs-built_in">log</span>  <span class="hljs-comment"># Owner read-write, group read</span>
$ sudo chmod 600 /var/<span class="hljs-built_in">log</span>/auth.log <span class="hljs-comment"># Sensitive logs</span>

<span class="hljs-comment"># Temporary directories</span>
$ sudo chmod 1777 /tmp           <span class="hljs-comment"># Sticky bit for shared temp</span>
$ chmod 700 ~/tmp                <span class="hljs-comment"># Private temp directory</span>

<span class="hljs-comment"># Backup files</span>
$ chmod 600 backup_*.tar.gz      <span class="hljs-comment"># Secure backups</span>
$ chmod 700 backup_scripts/      <span class="hljs-comment"># Secure backup scripts</span>
</div></code></pre>
<h3 id="permission-auditing">Permission Auditing</h3>
<pre class="hljs"><code><div><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># security-audit.sh - Basic permission audit</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"=== Security Audit ==="</span>
<span class="hljs-built_in">echo</span>

<span class="hljs-comment"># Find world-writable files (potential security risk)</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"World-writable files:"</span>
find / -<span class="hljs-built_in">type</span> f -perm -002 2&gt;/dev/null | head -10
<span class="hljs-built_in">echo</span>

<span class="hljs-comment"># Find setuid files</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Setuid files:"</span>
find / -<span class="hljs-built_in">type</span> f -perm -4000 2&gt;/dev/null
<span class="hljs-built_in">echo</span>

<span class="hljs-comment"># Find setgid files</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Setgid files:"</span>
find / -<span class="hljs-built_in">type</span> f -perm -2000 2&gt;/dev/null
<span class="hljs-built_in">echo</span>

<span class="hljs-comment"># Find files with no owner</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Files with no owner:"</span>
find / -nouser 2&gt;/dev/null | head -10
<span class="hljs-built_in">echo</span>

<span class="hljs-comment"># Find files with no group</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Files with no group:"</span>
find / -nogroup 2&gt;/dev/null | head -10
<span class="hljs-built_in">echo</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"=== Audit Complete ==="</span>
</div></code></pre>
<h2 id="%F0%9F%94%A7-troubleshooting-permission-issues">üîß Troubleshooting Permission Issues</h2>
<h3 id="common-permission-problems">Common Permission Problems</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Problem: Permission denied</span>
$ ./script.sh
bash: ./script.sh: Permission denied

<span class="hljs-comment"># Solution: Add execute permission</span>
$ chmod +x script.sh
$ ./script.sh
Hello World!

<span class="hljs-comment"># Problem: Cannot write to file</span>
$ <span class="hljs-built_in">echo</span> <span class="hljs-string">"test"</span> &gt; file.txt
bash: file.txt: Permission denied

<span class="hljs-comment"># Check permissions</span>
$ ls -l file.txt
-r--r--r-- 1 user group 0 Dec 15 10:30 file.txt

<span class="hljs-comment"># Solution: Add write permission</span>
$ chmod u+w file.txt
$ <span class="hljs-built_in">echo</span> <span class="hljs-string">"test"</span> &gt; file.txt

<span class="hljs-comment"># Problem: Cannot access directory</span>
$ <span class="hljs-built_in">cd</span> /restricted
bash: <span class="hljs-built_in">cd</span>: /restricted: Permission denied

<span class="hljs-comment"># Check directory permissions</span>
$ ls -ld /restricted
drw-r--r-- 2 root root 4096 Dec 15 10:30 /restricted

<span class="hljs-comment"># Solution: Need execute permission on directories</span>
$ sudo chmod +x /restricted
</div></code></pre>
<h3 id="permission-debugging-tools">Permission Debugging Tools</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Check effective permissions</span>
$ namei -l /path/to/file
f: /path/to/file
 drwxr-xr-x root root /
 drwxr-xr-x root root path
 drwxr-xr-x user user to
 -rw-r--r-- user user file

<span class="hljs-comment"># Test file access</span>
$ <span class="hljs-built_in">test</span> -r file.txt &amp;&amp; <span class="hljs-built_in">echo</span> <span class="hljs-string">"Readable"</span> || <span class="hljs-built_in">echo</span> <span class="hljs-string">"Not readable"</span>
$ <span class="hljs-built_in">test</span> -w file.txt &amp;&amp; <span class="hljs-built_in">echo</span> <span class="hljs-string">"Writable"</span> || <span class="hljs-built_in">echo</span> <span class="hljs-string">"Not writable"</span>
$ <span class="hljs-built_in">test</span> -x file.txt &amp;&amp; <span class="hljs-built_in">echo</span> <span class="hljs-string">"Executable"</span> || <span class="hljs-built_in">echo</span> <span class="hljs-string">"Not executable"</span>

<span class="hljs-comment"># Check user groups</span>
$ groups
user sudo developers

$ id
uid=1000(user) gid=1000(user) groups=1000(user),27(sudo),1001(developers)

<span class="hljs-comment"># Check file ownership</span>
$ <span class="hljs-built_in">stat</span> -c <span class="hljs-string">"%U %G"</span> file.txt
user group
</div></code></pre>
<h3 id="permission-recovery">Permission Recovery</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Reset home directory permissions</span>
$ sudo chmod 755 /home/user
$ sudo chmod -R u+rwX,go-w /home/user
$ sudo chmod 700 /home/user/.ssh
$ sudo chmod 600 /home/user/.ssh/*

<span class="hljs-comment"># Reset web directory permissions</span>
$ sudo find /var/www/html -<span class="hljs-built_in">type</span> d -<span class="hljs-built_in">exec</span> chmod 755 {} \;
$ sudo find /var/www/html -<span class="hljs-built_in">type</span> f -<span class="hljs-built_in">exec</span> chmod 644 {} \;
$ sudo chown -R www-data:www-data /var/www/html

<span class="hljs-comment"># Emergency permission reset script</span>
<span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># reset-permissions.sh</span>
DIR=<span class="hljs-string">"<span class="hljs-variable">$1</span>"</span>
<span class="hljs-keyword">if</span> [ -z <span class="hljs-string">"<span class="hljs-variable">$DIR</span>"</span> ]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Usage: <span class="hljs-variable">$0</span> &lt;directory&gt;"</span>
    <span class="hljs-built_in">exit</span> 1
<span class="hljs-keyword">fi</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"Resetting permissions for <span class="hljs-variable">$DIR</span>"</span>
find <span class="hljs-string">"<span class="hljs-variable">$DIR</span>"</span> -<span class="hljs-built_in">type</span> d -<span class="hljs-built_in">exec</span> chmod 755 {} \;
find <span class="hljs-string">"<span class="hljs-variable">$DIR</span>"</span> -<span class="hljs-built_in">type</span> f -<span class="hljs-built_in">exec</span> chmod 644 {} \;
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Done!"</span>
</div></code></pre>
<h2 id="%F0%9F%A7%A0-knowledge-check">üß† Knowledge Check</h2>
<h3 id="quick-quiz">Quick Quiz</h3>
<ol>
<li>
<p><strong>What does the permission string <code>-rwxr-xr--</code> mean?</strong></p>
<details>
<summary>Answer</summary>
<p>Regular file with owner having read/write/execute, group having read/execute, and others having read-only permissions.</p>
</details>
</li>
<li>
<p><strong>How do you make a script executable for everyone?</strong></p>
<details>
<summary>Answer</summary>
<pre class="hljs"><code><div>chmod +x script.sh
<span class="hljs-comment"># or</span>
chmod 755 script.sh
</div></code></pre>
</details>
</li>
<li>
<p><strong>What's the difference between <code>chmod 755</code> and <code>chmod 644</code>?</strong></p>
<details>
<summary>Answer</summary>
<p>755 includes execute permission (rwxr-xr-x), while 644 doesn't (rw-r--r--). 755 is for executables/directories, 644 is for regular files.</p>
</details>
</li>
<li>
<p><strong>How do you find all setuid files on the system?</strong></p>
<details>
<summary>Answer</summary>
<pre class="hljs"><code><div>find / -<span class="hljs-built_in">type</span> f -perm -4000 2&gt;/dev/null
</div></code></pre>
</details>
</li>
</ol>
<h3 id="hands-on-challenges">Hands-On Challenges</h3>
<p><strong>Challenge 1: Secure Web Directory</strong></p>
<pre class="hljs"><code><div><span class="hljs-comment"># Create a web directory structure with proper permissions</span>
<span class="hljs-comment"># - Web root: 755</span>
<span class="hljs-comment"># - HTML files: 644</span>
<span class="hljs-comment"># - CGI scripts: 755</span>
<span class="hljs-comment"># - Config files: 600</span>
<span class="hljs-comment"># - Log directory: 755 with www-data ownership</span>
</div></code></pre>
<p><strong>Challenge 2: Shared Project Directory</strong></p>
<pre class="hljs"><code><div><span class="hljs-comment"># Set up a shared directory where:</span>
<span class="hljs-comment"># - Multiple users can read/write</span>
<span class="hljs-comment"># - New files inherit the group</span>
<span class="hljs-comment"># - Only file owners can delete their files</span>
<span class="hljs-comment"># - Use ACLs for fine-grained control</span>
</div></code></pre>
<p><strong>Challenge 3: Permission Audit</strong></p>
<pre class="hljs"><code><div><span class="hljs-comment"># Write a script that:</span>
<span class="hljs-comment"># - Finds world-writable files</span>
<span class="hljs-comment"># - Identifies setuid/setgid binaries</span>
<span class="hljs-comment"># - Checks for files with unusual permissions</span>
<span class="hljs-comment"># - Reports potential security issues</span>
</div></code></pre>
<h2 id="%F0%9F%9A%80-next-steps">üöÄ Next Steps</h2>
<p>Excellent! You've mastered Linux file permissions and ownership. You can now:</p>
<ul>
<li>Understand and interpret permission strings</li>
<li>Set appropriate permissions for different scenarios</li>
<li>Manage file ownership effectively</li>
<li>Use special permissions securely</li>
<li>Implement ACLs for complex access control</li>
<li>Troubleshoot permission-related issues</li>
</ul>
<p><strong>Ready for process management?</strong> Continue to <a href="04-process-management.md">04-process-management.md</a> to learn about controlling and monitoring system processes.</p>
<hr>
<blockquote>
<p><strong>Pro Tip</strong>: Always test permission changes in a safe environment first. Use <code>ls -l</code> frequently to verify permissions, and remember that directories need execute permission to be accessible. When in doubt, start with restrictive permissions and add access as needed! üîí</p>
</blockquote>
<h1 id="%E2%9A%99%EF%B8%8F-process-management-controlling-system-resources">‚öôÔ∏è Process Management: Controlling System Resources</h1>
<blockquote>
<p><strong>Master process control, monitoring, and system resource management in Linux</strong></p>
</blockquote>
<h2 id="%F0%9F%93%96-what-youll-learn">üìñ What You'll Learn</h2>
<p>Process management is essential for system administration and troubleshooting. This chapter covers everything you need to know about controlling processes and system resources:</p>
<ul>
<li>Understanding processes and process hierarchy</li>
<li>Monitoring running processes with <code>ps</code>, <code>top</code>, and <code>htop</code></li>
<li>Starting, stopping, and controlling processes</li>
<li>Background and foreground job management</li>
<li>Process signals and communication</li>
<li>System resource monitoring</li>
<li>Service management with systemd</li>
<li>Performance optimization and troubleshooting</li>
</ul>
<h2 id="%F0%9F%8C%8D-why-this-matters">üåç Why This Matters</h2>
<p><strong>Critical applications:</strong></p>
<ul>
<li><strong>System Administration</strong>: Monitor and control system resources</li>
<li><strong>Troubleshooting</strong>: Identify and resolve performance issues</li>
<li><strong>Security</strong>: Detect suspicious processes and resource abuse</li>
<li><strong>Automation</strong>: Manage services and background tasks</li>
<li><strong>Performance</strong>: Optimize system resource utilization</li>
</ul>
<h2 id="%F0%9F%94%8D-understanding-processes">üîç Understanding Processes</h2>
<h3 id="process-basics">Process Basics</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Every running program is a process</span>
<span class="hljs-comment"># Each process has:</span>
<span class="hljs-comment"># - PID (Process ID): Unique identifier</span>
<span class="hljs-comment"># - PPID (Parent Process ID): Parent process</span>
<span class="hljs-comment"># - UID/GID: User and group ownership</span>
<span class="hljs-comment"># - State: Running, sleeping, stopped, zombie</span>
<span class="hljs-comment"># - Priority: CPU scheduling priority</span>
<span class="hljs-comment"># - Memory usage: RAM and virtual memory</span>

<span class="hljs-comment"># View your current shell process</span>
$ <span class="hljs-built_in">echo</span> $$
1234

<span class="hljs-comment"># View parent process ID</span>
$ <span class="hljs-built_in">echo</span> <span class="hljs-variable">$PPID</span>
1000

<span class="hljs-comment"># Process hierarchy example:</span>
<span class="hljs-comment"># systemd (PID 1)</span>
<span class="hljs-comment"># ‚îú‚îÄ‚îÄ sshd (PID 500)</span>
<span class="hljs-comment"># ‚îÇ   ‚îî‚îÄ‚îÄ sshd (PID 1000) - your SSH session</span>
<span class="hljs-comment"># ‚îÇ       ‚îî‚îÄ‚îÄ bash (PID 1234) - your shell</span>
<span class="hljs-comment"># ‚îÇ           ‚îî‚îÄ‚îÄ ps (PID 1500) - command you're running</span>
</div></code></pre>
<h3 id="process-states">Process States</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Process states in Linux:</span>
<span class="hljs-comment"># R - Running or runnable</span>
<span class="hljs-comment"># S - Interruptible sleep (waiting for event)</span>
<span class="hljs-comment"># D - Uninterruptible sleep (usually I/O)</span>
<span class="hljs-comment"># T - Stopped (by signal or debugger)</span>
<span class="hljs-comment"># Z - Zombie (finished but not cleaned up)</span>
<span class="hljs-comment"># X - Dead (should never be seen)</span>

<span class="hljs-comment"># View process states</span>
$ ps aux | head -5
USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
root         1  0.0  0.1 225316  9876 ?        Ss   10:00   0:01 /sbin/init
root         2  0.0  0.0      0     0 ?        S    10:00   0:00 [kthreadd]
root         3  0.0  0.0      0     0 ?        I&lt;   10:00   0:00 [rcu_gp]
user      1234  0.0  0.2  21532  5432 pts/0    Ss   10:30   0:00 -bash
</div></code></pre>
<h2 id="%F0%9F%93%8A-monitoring-processes">üìä Monitoring Processes</h2>
<h3 id="using-ps-command">Using <code>ps</code> Command</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Basic process listing</span>
$ ps
  PID TTY          TIME CMD
 1234 pts/0    00:00:00 bash
 1567 pts/0    00:00:00 ps

<span class="hljs-comment"># Show all processes</span>
$ ps aux
$ ps -ef

<span class="hljs-comment"># Show process tree</span>
$ ps auxf
$ ps -ef --forest
$ pstree

<span class="hljs-comment"># Show processes for specific user</span>
$ ps -u username
$ ps aux | grep username

<span class="hljs-comment"># Show processes by command name</span>
$ ps aux | grep nginx
$ pgrep nginx
$ pgrep -l nginx  <span class="hljs-comment"># Show PID and name</span>

<span class="hljs-comment"># Show process hierarchy</span>
$ ps -ejH
$ ps axjf

<span class="hljs-comment"># Custom output format</span>
$ ps -eo pid,ppid,cmd,%mem,%cpu --sort=-%cpu
  PID  PPID CMD                         %MEM %CPU
 1500  1234 firefox                     15.2 25.3
 1600  1234 chrome                      12.1 18.7
 1234     1 bash                         0.2  0.1
</div></code></pre>
<h3 id="real-time-monitoring-with-top">Real-time Monitoring with <code>top</code></h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Basic top usage</span>
$ top

top - 10:30:45 up 2 days,  3:15,  2 users,  load average: 0.15, 0.25, 0.30
Tasks: 125 total,   1 running, 124 sleeping,   0 stopped,   0 zombie
%Cpu(s):  2.3 us,  1.2 sy,  0.0 ni, 96.2 id,  0.3 wa,  0.0 hi,  0.0 si,  0.0 st
MiB Mem :   8192.0 total,   2048.5 free,   3072.2 used,   3071.3 buff/cache
MiB Swap:   2048.0 total,   2048.0 free,      0.0 used.   4608.1 avail Mem

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU  %MEM     TIME+ COMMAND
 1500 user      20   0 2097152 524288  65536 S  25.3  15.2   5:23.45 firefox
 1600 user      20   0 1572864 393216  49152 S  18.7  12.1   3:45.67 chrome
 1234 user      20   0   21532   5432   3456 S   0.1   0.2   0:00.12 bash

<span class="hljs-comment"># Top interactive commands:</span>
<span class="hljs-comment"># q - quit</span>
<span class="hljs-comment"># k - kill process (enter PID)</span>
<span class="hljs-comment"># r - renice process (change priority)</span>
<span class="hljs-comment"># u - show processes for specific user</span>
<span class="hljs-comment"># M - sort by memory usage</span>
<span class="hljs-comment"># P - sort by CPU usage</span>
<span class="hljs-comment"># T - sort by running time</span>
<span class="hljs-comment"># 1 - show individual CPU cores</span>
<span class="hljs-comment"># h - help</span>

<span class="hljs-comment"># Top with specific options</span>
$ top -u username     <span class="hljs-comment"># Show processes for specific user</span>
$ top -p 1234,5678    <span class="hljs-comment"># Monitor specific PIDs</span>
$ top -n 1            <span class="hljs-comment"># Run once and exit</span>
$ top -b -n 1         <span class="hljs-comment"># Batch mode (good for scripts)</span>
</div></code></pre>
<h3 id="enhanced-monitoring-with-htop">Enhanced Monitoring with <code>htop</code></h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Install htop (if not available)</span>
$ sudo apt install htop  <span class="hljs-comment"># Ubuntu/Debian</span>
$ sudo yum install htop  <span class="hljs-comment"># CentOS/RHEL</span>

<span class="hljs-comment"># Run htop</span>
$ htop

<span class="hljs-comment"># htop features:</span>
<span class="hljs-comment"># - Color-coded display</span>
<span class="hljs-comment"># - Mouse support</span>
<span class="hljs-comment"># - Tree view (F5)</span>
<span class="hljs-comment"># - Search (F3)</span>
<span class="hljs-comment"># - Filter (F4)</span>
<span class="hljs-comment"># - Kill process (F9)</span>
<span class="hljs-comment"># - Nice/renice (F7/F8)</span>
<span class="hljs-comment"># - Setup (F2)</span>

<span class="hljs-comment"># htop command line options</span>
$ htop -u username    <span class="hljs-comment"># Show processes for specific user</span>
$ htop -p 1234,5678   <span class="hljs-comment"># Monitor specific PIDs</span>
$ htop -t             <span class="hljs-comment"># Tree view</span>
$ htop -s PERCENT_CPU <span class="hljs-comment"># Sort by CPU usage</span>
</div></code></pre>
<h3 id="system-resource-monitoring">System Resource Monitoring</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Memory usage</span>
$ free -h
              total        used        free      shared  buff/cache   available
Mem:          8.0Gi       3.0Gi       2.0Gi       256Mi       3.0Gi       4.6Gi
Swap:         2.0Gi          0B       2.0Gi

<span class="hljs-comment"># Detailed memory information</span>
$ cat /proc/meminfo | head -10
MemTotal:        8388608 kB
MemFree:         2097152 kB
MemAvailable:    4718592 kB
Buffers:          524288 kB
Cached:          2621440 kB

<span class="hljs-comment"># CPU information</span>
$ lscpu
Architecture:        x86_64
CPU op-mode(s):      32-bit, 64-bit
Byte Order:          Little Endian
CPU(s):              4
On-line CPU(s) list: 0-3
Thread(s) per core:  2
Core(s) per socket:  2
Socket(s):           1

<span class="hljs-comment"># Load average</span>
$ uptime
 10:30:45 up 2 days,  3:15,  2 users,  load average: 0.15, 0.25, 0.30

$ cat /proc/loadavg
0.15 0.25 0.30 2/125 1567

<span class="hljs-comment"># I/O statistics</span>
$ iostat 1 3  <span class="hljs-comment"># 1-second intervals, 3 times</span>
Linux 5.4.0 (hostname)     12/15/2023      _x86_64_        (4 CPU)

avg-cpu:  %user   %nice %system %iowait  %steal   %idle
           2.50    0.00    1.25    0.25    0.00   96.00

Device             tps    kB_read/s    kB_wrtn/s    kB_read    kB_wrtn
sda               5.25        125.50        75.25     125500      75250
</div></code></pre>
<h2 id="%F0%9F%8E%AE-process-control">üéÆ Process Control</h2>
<h3 id="starting-and-stopping-processes">Starting and Stopping Processes</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Start process in foreground</span>
$ long_running_command

<span class="hljs-comment"># Start process in background</span>
$ long_running_command &amp;
[1] 1234

<span class="hljs-comment"># Start with nohup (survives logout)</span>
$ nohup long_running_command &amp;
[1] 1234
nohup: ignoring input and appending output to <span class="hljs-string">'nohup.out'</span>

<span class="hljs-comment"># Start with custom output redirection</span>
$ nohup long_running_command &gt; output.log 2&gt;&amp;1 &amp;

<span class="hljs-comment"># Disown process (remove from job control)</span>
$ long_running_command &amp;
$ <span class="hljs-built_in">disown</span> %1

<span class="hljs-comment"># Start process with specific priority</span>
$ nice -n 10 cpu_intensive_task  <span class="hljs-comment"># Lower priority</span>
$ nice -n -5 important_task      <span class="hljs-comment"># Higher priority (requires sudo)</span>
</div></code></pre>
<h3 id="job-control">Job Control</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># List active jobs</span>
$ <span class="hljs-built_in">jobs</span>
[1]+  Running                 long_running_command &amp;
[2]-  Stopped                 vim file.txt

<span class="hljs-comment"># Bring job to foreground</span>
$ <span class="hljs-built_in">fg</span> %1        <span class="hljs-comment"># Bring job 1 to foreground</span>
$ <span class="hljs-built_in">fg</span>           <span class="hljs-comment"># Bring most recent job to foreground</span>

<span class="hljs-comment"># Send job to background</span>
$ <span class="hljs-built_in">bg</span> %1        <span class="hljs-comment"># Send job 1 to background</span>
$ <span class="hljs-built_in">bg</span>           <span class="hljs-comment"># Send most recent job to background</span>

<span class="hljs-comment"># Suspend current foreground process</span>
<span class="hljs-comment"># Press Ctrl+Z</span>
$ vim file.txt
^Z
[1]+  Stopped                 vim file.txt

<span class="hljs-comment"># Resume suspended job in background</span>
$ <span class="hljs-built_in">bg</span> %1
[1]+ vim file.txt &amp;

<span class="hljs-comment"># Kill job</span>
$ <span class="hljs-built_in">kill</span> %1      <span class="hljs-comment"># Kill job 1</span>
$ <span class="hljs-built_in">kill</span> %2      <span class="hljs-comment"># Kill job 2</span>
</div></code></pre>
<h3 id="process-signals">Process Signals</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Common signals:</span>
<span class="hljs-comment"># SIGTERM (15) - Graceful termination (default)</span>
<span class="hljs-comment"># SIGKILL (9)  - Force kill (cannot be caught)</span>
<span class="hljs-comment"># SIGSTOP (19) - Stop process (cannot be caught)</span>
<span class="hljs-comment"># SIGCONT (18) - Continue stopped process</span>
<span class="hljs-comment"># SIGHUP (1)   - Hangup (often used to reload config)</span>
<span class="hljs-comment"># SIGINT (2)   - Interrupt (Ctrl+C)</span>
<span class="hljs-comment"># SIGQUIT (3)  - Quit (Ctrl+\)</span>

<span class="hljs-comment"># Send signals to processes</span>
$ <span class="hljs-built_in">kill</span> 1234           <span class="hljs-comment"># Send SIGTERM to PID 1234</span>
$ <span class="hljs-built_in">kill</span> -9 1234        <span class="hljs-comment"># Send SIGKILL to PID 1234</span>
$ <span class="hljs-built_in">kill</span> -TERM 1234     <span class="hljs-comment"># Send SIGTERM (same as default)</span>
$ <span class="hljs-built_in">kill</span> -HUP 1234      <span class="hljs-comment"># Send SIGHUP (reload config)</span>
$ <span class="hljs-built_in">kill</span> -STOP 1234     <span class="hljs-comment"># Stop process</span>
$ <span class="hljs-built_in">kill</span> -CONT 1234     <span class="hljs-comment"># Continue process</span>

<span class="hljs-comment"># Kill processes by name</span>
$ killall firefox     <span class="hljs-comment"># Kill all firefox processes</span>
$ killall -9 firefox  <span class="hljs-comment"># Force kill all firefox processes</span>
$ pkill firefox       <span class="hljs-comment"># Kill processes matching pattern</span>
$ pkill -f <span class="hljs-string">"python script.py"</span>  <span class="hljs-comment"># Kill by full command line</span>

<span class="hljs-comment"># Kill processes by user</span>
$ pkill -u username   <span class="hljs-comment"># Kill all processes by user</span>
$ sudo pkill -u username  <span class="hljs-comment"># Kill as root</span>

<span class="hljs-comment"># Interactive process killing</span>
$ top                 <span class="hljs-comment"># Press 'k' and enter PID</span>
$ htop                <span class="hljs-comment"># Press F9 and select signal</span>
</div></code></pre>
<h3 id="process-priority-management">Process Priority Management</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># View process priorities</span>
$ ps -eo pid,ni,pri,pcpu,comm
  PID  NI PRI %CPU COMMAND
 1234   0  20  0.1 bash
 1500  10  30  5.2 backup_script
 1600 -10  10 15.3 important_app

<span class="hljs-comment"># Change priority of running process</span>
$ sudo renice 10 1234      <span class="hljs-comment"># Lower priority (higher nice value)</span>
$ sudo renice -5 1234      <span class="hljs-comment"># Higher priority (lower nice value)</span>
$ sudo renice 0 1234       <span class="hljs-comment"># Normal priority</span>

<span class="hljs-comment"># Change priority by process name</span>
$ sudo renice 10 $(pgrep firefox)

<span class="hljs-comment"># Start process with specific priority</span>
$ nice -n 19 backup_script.sh    <span class="hljs-comment"># Lowest priority</span>
$ nice -n 0 normal_script.sh     <span class="hljs-comment"># Normal priority</span>
$ sudo nice -n -20 critical_app  <span class="hljs-comment"># Highest priority</span>

<span class="hljs-comment"># Real-time priority (use with caution)</span>
$ sudo chrt -f 50 critical_realtime_app  <span class="hljs-comment"># FIFO scheduling</span>
$ sudo chrt -r 50 critical_realtime_app  <span class="hljs-comment"># Round-robin scheduling</span>
</div></code></pre>
<h2 id="%F0%9F%94%A7-service-management-with-systemd">üîß Service Management with systemd</h2>
<h3 id="basic-service-operations">Basic Service Operations</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Check service status</span>
$ sudo systemctl status nginx
‚óè nginx.service - A high performance web server and a reverse proxy server
   Loaded: loaded (/lib/systemd/system/nginx.service; enabled; vendor preset: enabled)
   Active: active (running) since Mon 2023-12-15 10:00:00 UTC; 2h 30min ago
     Docs: man:nginx(8)
  Process: 1234 ExecStartPre=/usr/sbin/nginx -t -q -g daemon on; master_process on; (code=exited, status=0/SUCCESS)
  Process: 1235 ExecStart=/usr/sbin/nginx -g daemon on; master_process on; (code=exited, status=0/SUCCESS)
 Main PID: 1236 (nginx)
    Tasks: 5 (<span class="hljs-built_in">limit</span>: 4915)
   Memory: 15.2M
   CGroup: /system.slice/nginx.service
           ‚îú‚îÄ1236 nginx: master process /usr/sbin/nginx -g daemon on; master_process on;
           ‚îú‚îÄ1237 nginx: worker process
           ‚îî‚îÄ1238 nginx: worker process

<span class="hljs-comment"># Start/stop/restart services</span>
$ sudo systemctl start nginx
$ sudo systemctl stop nginx
$ sudo systemctl restart nginx
$ sudo systemctl reload nginx    <span class="hljs-comment"># Reload config without restart</span>

<span class="hljs-comment"># Enable/disable services (auto-start at boot)</span>
$ sudo systemctl <span class="hljs-built_in">enable</span> nginx
$ sudo systemctl <span class="hljs-built_in">disable</span> nginx

<span class="hljs-comment"># Check if service is enabled</span>
$ systemctl is-enabled nginx
enabled

<span class="hljs-comment"># Check if service is active</span>
$ systemctl is-active nginx
active
</div></code></pre>
<h3 id="service-management-commands">Service Management Commands</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># List all services</span>
$ systemctl list-units --<span class="hljs-built_in">type</span>=service
$ systemctl list-units --<span class="hljs-built_in">type</span>=service --state=running
$ systemctl list-units --<span class="hljs-built_in">type</span>=service --state=failed

<span class="hljs-comment"># List all unit files</span>
$ systemctl list-unit-files --<span class="hljs-built_in">type</span>=service

<span class="hljs-comment"># Show service dependencies</span>
$ systemctl list-dependencies nginx

<span class="hljs-comment"># View service logs</span>
$ sudo journalctl -u nginx
$ sudo journalctl -u nginx -f        <span class="hljs-comment"># Follow logs</span>
$ sudo journalctl -u nginx --since today
$ sudo journalctl -u nginx --since <span class="hljs-string">"2023-12-15 10:00:00"</span>

<span class="hljs-comment"># Mask/unmask services (prevent starting)</span>
$ sudo systemctl mask nginx
$ sudo systemctl unmask nginx

<span class="hljs-comment"># Edit service configuration</span>
$ sudo systemctl edit nginx          <span class="hljs-comment"># Create override file</span>
$ sudo systemctl edit --full nginx   <span class="hljs-comment"># Edit full unit file</span>

<span class="hljs-comment"># Reload systemd configuration</span>
$ sudo systemctl daemon-reload
</div></code></pre>
<h3 id="creating-custom-services">Creating Custom Services</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Create a simple service file</span>
$ sudo nano /etc/systemd/system/myapp.service

[Unit]
Description=My Application
After=network.target

[Service]
Type=simple
User=myuser
WorkingDirectory=/opt/myapp
ExecStart=/opt/myapp/start.sh
ExecReload=/bin/<span class="hljs-built_in">kill</span> -HUP <span class="hljs-variable">$MAINPID</span>
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target

<span class="hljs-comment"># Enable and start the service</span>
$ sudo systemctl daemon-reload
$ sudo systemctl <span class="hljs-built_in">enable</span> myapp
$ sudo systemctl start myapp
$ sudo systemctl status myapp

<span class="hljs-comment"># Service types:</span>
<span class="hljs-comment"># simple - Default, process doesn't fork</span>
<span class="hljs-comment"># forking - Process forks and parent exits</span>
<span class="hljs-comment"># oneshot - Process exits after completion</span>
<span class="hljs-comment"># notify - Process sends notification when ready</span>
<span class="hljs-comment"># idle - Waits for other jobs to complete</span>
</div></code></pre>
<h2 id="%F0%9F%93%88-performance-monitoring-and-optimization">üìà Performance Monitoring and Optimization</h2>
<h3 id="system-performance-analysis">System Performance Analysis</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># CPU usage over time</span>
$ sar -u 1 10         <span class="hljs-comment"># CPU usage every 1 second, 10 times</span>
Linux 5.4.0 (hostname)     12/15/2023      _x86_64_        (4 CPU)

10:30:01 AM     CPU     %user     %nice   %system   %iowait    %steal     %idle
10:30:02 AM     all      2.50      0.00      1.25      0.25      0.00     96.00
10:30:03 AM     all      3.75      0.00      1.50      0.50      0.00     94.25

<span class="hljs-comment"># Memory usage over time</span>
$ sar -r 1 5          <span class="hljs-comment"># Memory usage every 1 second, 5 times</span>

<span class="hljs-comment"># I/O statistics</span>
$ sar -b 1 5          <span class="hljs-comment"># I/O statistics</span>
$ sar -d 1 5          <span class="hljs-comment"># Disk statistics</span>

<span class="hljs-comment"># Network statistics</span>
$ sar -n DEV 1 5      <span class="hljs-comment"># Network device statistics</span>

<span class="hljs-comment"># Generate system activity report</span>
$ sar -A &gt; system_report.txt
</div></code></pre>
<h3 id="process-resource-usage">Process Resource Usage</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Detailed process information</span>
$ cat /proc/1234/status
Name:	firefox
State:	S (sleeping)
Pid:	1234
PPid:	1000
VmPeak:	 2097152 kB
VmSize:	 1572864 kB
VmRSS:	  524288 kB

<span class="hljs-comment"># Process memory maps</span>
$ cat /proc/1234/maps | head -5
7f8b4c000000-7f8b4c021000 rw-p 00000000 00:00 0
7f8b4c021000-7f8b50000000 ---p 00000000 00:00 0
7f8b50000000-7f8b50021000 rw-p 00000000 00:00 0

<span class="hljs-comment"># Process file descriptors</span>
$ ls -l /proc/1234/fd/
total 0
lrwx------ 1 user user 64 Dec 15 10:30 0 -&gt; /dev/pts/0
lrwx------ 1 user user 64 Dec 15 10:30 1 -&gt; /dev/pts/0
lrwx------ 1 user user 64 Dec 15 10:30 2 -&gt; /dev/pts/0

<span class="hljs-comment"># Process environment</span>
$ cat /proc/1234/environ | tr <span class="hljs-string">'\0'</span> <span class="hljs-string">'\n'</span> | head -5
PATH=/usr/<span class="hljs-built_in">local</span>/bin:/usr/bin:/bin
HOME=/home/user
USER=user
SHELL=/bin/bash
TERM=xterm-256color

<span class="hljs-comment"># Process command line</span>
$ cat /proc/1234/cmdline
firefox--no-remote--profile
</div></code></pre>
<h3 id="resource-monitoring-scripts">Resource Monitoring Scripts</h3>
<pre class="hljs"><code><div><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># system-monitor.sh - Comprehensive system monitoring</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"=== System Performance Monitor ==="</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Date: <span class="hljs-variable">$(date)</span>"</span>
<span class="hljs-built_in">echo</span>

<span class="hljs-comment"># CPU usage</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"CPU Usage:"</span>
top -bn1 | grep <span class="hljs-string">"Cpu(s)"</span> | awk <span class="hljs-string">'{print "User: " $2 ", System: " $4 ", Idle: " $8}'</span>
<span class="hljs-built_in">echo</span>

<span class="hljs-comment"># Memory usage</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Memory Usage:"</span>
free -h | grep -E <span class="hljs-string">"Mem|Swap"</span>
<span class="hljs-built_in">echo</span>

<span class="hljs-comment"># Load average</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Load Average:"</span>
uptime | awk -F<span class="hljs-string">'load average:'</span> <span class="hljs-string">'{print $2}'</span>
<span class="hljs-built_in">echo</span>

<span class="hljs-comment"># Top 5 CPU consumers</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Top 5 CPU Consumers:"</span>
ps aux --sort=-%cpu | head -6 | awk <span class="hljs-string">'{print $11 " (" $3 "%)"}'</span>  | tail -5
<span class="hljs-built_in">echo</span>

<span class="hljs-comment"># Top 5 Memory consumers</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Top 5 Memory Consumers:"</span>
ps aux --sort=-%mem | head -6 | awk <span class="hljs-string">'{print $11 " (" $4 "%)"}'</span>  | tail -5
<span class="hljs-built_in">echo</span>

<span class="hljs-comment"># Disk usage</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Disk Usage:"</span>
df -h | grep -E <span class="hljs-string">"^/dev"</span>
<span class="hljs-built_in">echo</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"=== Monitor Complete ==="</span>
</div></code></pre>
<h3 id="performance-optimization-tips">Performance Optimization Tips</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Find resource-intensive processes</span>
$ ps aux --sort=-%cpu | head -10    <span class="hljs-comment"># Top CPU users</span>
$ ps aux --sort=-%mem | head -10    <span class="hljs-comment"># Top memory users</span>

<span class="hljs-comment"># Find processes with many open files</span>
$ lsof | awk <span class="hljs-string">'{print $2}'</span> | sort | uniq -c | sort -nr | head -10

<span class="hljs-comment"># Monitor process creation</span>
$ sudo sysctl kernel.fork_rate
$ watch -n 1 <span class="hljs-string">'ps aux | wc -l'</span>

<span class="hljs-comment"># Check for zombie processes</span>
$ ps aux | grep -E <span class="hljs-string">"&lt;defunct&gt;|Z"</span>

<span class="hljs-comment"># Monitor system calls</span>
$ strace -p 1234          <span class="hljs-comment"># Trace system calls for PID 1234</span>
$ strace -c <span class="hljs-built_in">command</span>       <span class="hljs-comment"># Count system calls</span>

<span class="hljs-comment"># Profile CPU usage</span>
$ perf top                <span class="hljs-comment"># Real-time CPU profiling</span>
$ perf record <span class="hljs-built_in">command</span>     <span class="hljs-comment"># Record performance data</span>
$ perf report             <span class="hljs-comment"># Analyze recorded data</span>
</div></code></pre>
<h2 id="%F0%9F%A7%A0-knowledge-check">üß† Knowledge Check</h2>
<h3 id="quick-quiz">Quick Quiz</h3>
<ol>
<li>
<p><strong>What's the difference between <code>kill</code> and <code>killall</code>?</strong></p>
<details>
<summary>Answer</summary>
<p><code>kill</code> terminates a specific process by PID, while <code>killall</code> terminates all processes with a specific name.</p>
</details>
</li>
<li>
<p><strong>How do you start a process that survives logout?</strong></p>
<details>
<summary>Answer</summary>
<pre class="hljs"><code><div>nohup <span class="hljs-built_in">command</span> &amp;
<span class="hljs-comment"># or</span>
<span class="hljs-built_in">command</span> &amp;
<span class="hljs-built_in">disown</span>
</div></code></pre>
</details>
</li>
<li>
<p><strong>What does a load average of 2.0 mean on a 4-core system?</strong></p>
<details>
<summary>Answer</summary>
<p>The system is 50% utilized. Load average represents the number of processes waiting for CPU time. 2.0 on a 4-core system means 2 cores are fully utilized on average.</p>
</details>
</li>
<li>
<p><strong>How do you change the priority of a running process?</strong></p>
<details>
<summary>Answer</summary>
<pre class="hljs"><code><div>sudo renice 10 PID    <span class="hljs-comment"># Lower priority</span>
sudo renice -5 PID    <span class="hljs-comment"># Higher priority</span>
</div></code></pre>
</details>
</li>
</ol>
<h3 id="hands-on-challenges">Hands-On Challenges</h3>
<p><strong>Challenge 1: Process Monitoring Dashboard</strong></p>
<pre class="hljs"><code><div><span class="hljs-comment"># Create a script that displays:</span>
<span class="hljs-comment"># - Top 5 CPU-consuming processes</span>
<span class="hljs-comment"># - Top 5 memory-consuming processes</span>
<span class="hljs-comment"># - Current load average</span>
<span class="hljs-comment"># - Available memory</span>
<span class="hljs-comment"># - Number of running processes</span>
</div></code></pre>
<p><strong>Challenge 2: Service Management</strong></p>
<pre class="hljs"><code><div><span class="hljs-comment"># Create a custom systemd service for a simple application</span>
<span class="hljs-comment"># Configure it to:</span>
<span class="hljs-comment"># - Start automatically at boot</span>
<span class="hljs-comment"># - Restart on failure</span>
<span class="hljs-comment"># - Log to a specific file</span>
<span class="hljs-comment"># - Run as a non-root user</span>
</div></code></pre>
<p><strong>Challenge 3: Performance Troubleshooting</strong></p>
<pre class="hljs"><code><div><span class="hljs-comment"># Simulate a high CPU load and:</span>
<span class="hljs-comment"># - Identify the problematic process</span>
<span class="hljs-comment"># - Reduce its priority</span>
<span class="hljs-comment"># - Monitor the impact</span>
<span class="hljs-comment"># - Create a script to automatically detect and handle such situations</span>
</div></code></pre>
<h2 id="%F0%9F%9A%80-next-steps">üöÄ Next Steps</h2>
<p>Excellent! You've mastered Linux process management. You can now:</p>
<ul>
<li>Monitor system processes and resource usage</li>
<li>Control process execution and priority</li>
<li>Manage background jobs effectively</li>
<li>Work with systemd services</li>
<li>Troubleshoot performance issues</li>
<li>Optimize system resource utilization</li>
</ul>
<p><strong>Ready for networking fundamentals?</strong> Continue to <a href="05-networking-basics.md">05-networking-basics.md</a> to learn about network concepts and protocols.</p>
<hr>
<blockquote>
<p><strong>Pro Tip</strong>: Use <code>htop</code> for interactive process management, <code>systemctl</code> for service control, and always check system load before making changes. Remember that killing processes with <code>-9</code> should be a last resort - try graceful termination first! ‚öôÔ∏è</p>
</blockquote>
<h1 id="%F0%9F%8C%90-networking-basics-core-concepts">üåê Networking Basics: Core Concepts</h1>
<blockquote>
<p><strong>Understand IP addresses, subnets, protocols, and how devices communicate</strong></p>
</blockquote>
<h2 id="%F0%9F%93%96-what-youll-learn">üìñ What You'll Learn</h2>
<p>Networking is the foundation of modern computing. Whether you're troubleshooting connectivity issues, setting up servers, or securing systems, understanding networking fundamentals is essential. This chapter covers:</p>
<ul>
<li>IP addressing and subnetting (IPv4 and IPv6)</li>
<li>MAC addresses and how they work</li>
<li>Network protocols and the OSI model</li>
<li>CIDR notation and subnet calculations</li>
<li>Private vs public IP addresses</li>
<li>How devices find and communicate with each other</li>
</ul>
<h2 id="%F0%9F%8C%8D-why-this-matters">üåç Why This Matters</h2>
<p><strong>Real-world applications:</strong></p>
<ul>
<li><strong>Web Development</strong>: Understanding how browsers connect to servers</li>
<li><strong>System Administration</strong>: Configuring network interfaces and routing</li>
<li><strong>DevOps</strong>: Setting up cloud infrastructure and container networking</li>
<li><strong>Cybersecurity</strong>: Analyzing network traffic and implementing security</li>
<li><strong>Troubleshooting</strong>: Diagnosing connectivity and performance issues</li>
</ul>
<h2 id="%F0%9F%8F%A0-network-fundamentals">üè† Network Fundamentals</h2>
<h3 id="what-is-a-network">What is a Network?</h3>
<p>A network is a collection of devices that can communicate with each other. Think of it like a postal system:</p>
<pre class="hljs"><code><div>[Your Computer] ‚Üê‚Üí [Router] ‚Üê‚Üí [Internet] ‚Üê‚Üí [Web Server]
      ‚Üì                ‚Üì           ‚Üì          ‚Üì
   Your House    Post Office   Highway    Destination
</div></code></pre>
<h3 id="network-components">Network Components</h3>
<table>
<thead>
<tr>
<th>Component</th>
<th>Purpose</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Host</strong></td>
<td>End device that sends/receives data</td>
<td>Computer, phone, server</td>
</tr>
<tr>
<td><strong>Switch</strong></td>
<td>Connects devices in local network</td>
<td>Office network switch</td>
</tr>
<tr>
<td><strong>Router</strong></td>
<td>Connects different networks</td>
<td>Home router, ISP router</td>
</tr>
<tr>
<td><strong>Gateway</strong></td>
<td>Entry/exit point between networks</td>
<td>Default gateway</td>
</tr>
<tr>
<td><strong>Firewall</strong></td>
<td>Controls network traffic</td>
<td>Hardware/software firewall</td>
</tr>
</tbody>
</table>
<h2 id="%F0%9F%93%8D-ip-addresses-the-internets-postal-system">üìç IP Addresses: The Internet's Postal System</h2>
<h3 id="ipv4-addresses">IPv4 Addresses</h3>
<p>IPv4 addresses are 32-bit numbers written as four octets (0-255):</p>
<pre class="hljs"><code><div><span class="hljs-comment"># Example IPv4 address</span>
192.168.1.100
<span class="hljs-comment"># ^^^.^^^.^.^^^</span>
<span class="hljs-comment">#  |   |  | |</span>
<span class="hljs-comment">#  |   |  | +-- Host part (100)</span>
<span class="hljs-comment">#  |   |  +---- Network part</span>
<span class="hljs-comment">#  |   +------- Network part</span>
<span class="hljs-comment">#  +----------- Network part (192.168.1)</span>
</div></code></pre>
<h3 id="ipv4-address-classes-historical">IPv4 Address Classes (Historical)</h3>
<table>
<thead>
<tr>
<th>Class</th>
<th>Range</th>
<th>Default Subnet</th>
<th>Typical Use</th>
</tr>
</thead>
<tbody>
<tr>
<td>A</td>
<td>1.0.0.0 - 126.255.255.255</td>
<td>/8</td>
<td>Large organizations</td>
</tr>
<tr>
<td>B</td>
<td>128.0.0.0 - 191.255.255.255</td>
<td>/16</td>
<td>Medium organizations</td>
</tr>
<tr>
<td>C</td>
<td>192.0.0.0 - 223.255.255.255</td>
<td>/24</td>
<td>Small networks</td>
</tr>
<tr>
<td>D</td>
<td>224.0.0.0 - 239.255.255.255</td>
<td>-</td>
<td>Multicast</td>
</tr>
<tr>
<td>E</td>
<td>240.0.0.0 - 255.255.255.255</td>
<td>-</td>
<td>Reserved</td>
</tr>
</tbody>
</table>
<h3 id="private-vs-public-ip-addresses">Private vs Public IP Addresses</h3>
<p><strong>Private IP Ranges (RFC 1918):</strong></p>
<pre class="hljs"><code><div><span class="hljs-comment"># These are NOT routed on the internet</span>
10.0.0.0/8        <span class="hljs-comment"># 10.0.0.0 - 10.255.255.255</span>
172.16.0.0/12     <span class="hljs-comment"># 172.16.0.0 - 172.31.255.255</span>
192.168.0.0/16    <span class="hljs-comment"># 192.168.0.0 - 192.168.255.255</span>

<span class="hljs-comment"># Special addresses</span>
127.0.0.0/8       <span class="hljs-comment"># Loopback (localhost)</span>
169.254.0.0/16    <span class="hljs-comment"># Link-local (APIPA)</span>
</div></code></pre>
<p><strong>Public IP Addresses:</strong></p>
<ul>
<li>Globally unique and routable on the internet</li>
<li>Assigned by Internet Service Providers (ISPs)</li>
<li>Examples: 8.8.8.8 (Google DNS), 1.1.1.1 (Cloudflare DNS)</li>
</ul>
<h3 id="checking-your-ip-addresses">Checking Your IP Addresses</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Check private IP address</span>
$ ip addr show
<span class="hljs-comment"># or</span>
$ ifconfig

<span class="hljs-comment"># Check public IP address</span>
$ curl ifconfig.me
203.0.113.45

<span class="hljs-comment"># or</span>
$ curl ipinfo.io/ip
203.0.113.45

<span class="hljs-comment"># Detailed public IP info</span>
$ curl ipinfo.io
{
  <span class="hljs-string">"ip"</span>: <span class="hljs-string">"203.0.113.45"</span>,
  <span class="hljs-string">"city"</span>: <span class="hljs-string">"New York"</span>,
  <span class="hljs-string">"region"</span>: <span class="hljs-string">"New York"</span>,
  <span class="hljs-string">"country"</span>: <span class="hljs-string">"US"</span>,
  <span class="hljs-string">"org"</span>: <span class="hljs-string">"AS12345 Example ISP"</span>
}
</div></code></pre>
<h2 id="%F0%9F%94%A2-subnetting-and-cidr-notation">üî¢ Subnetting and CIDR Notation</h2>
<h3 id="understanding-subnet-masks">Understanding Subnet Masks</h3>
<p>Subnet masks determine which part of an IP address is the network and which part is the host:</p>
<pre class="hljs"><code><div><span class="hljs-comment"># IP Address:    192.168.1.100</span>
<span class="hljs-comment"># Subnet Mask:   255.255.255.0</span>
<span class="hljs-comment"># Network:       192.168.1.0</span>
<span class="hljs-comment"># Host:          100</span>
<span class="hljs-comment"># Broadcast:     192.168.1.255</span>
</div></code></pre>
<h3 id="cidr-notation">CIDR Notation</h3>
<p>CIDR (Classless Inter-Domain Routing) uses a slash followed by the number of network bits:</p>
<pre class="hljs"><code><div><span class="hljs-comment"># Common CIDR notations</span>
192.168.1.0/24    <span class="hljs-comment"># 255.255.255.0   - 254 hosts</span>
192.168.1.0/25    <span class="hljs-comment"># 255.255.255.128 - 126 hosts</span>
192.168.1.0/26    <span class="hljs-comment"># 255.255.255.192 - 62 hosts</span>
192.168.1.0/27    <span class="hljs-comment"># 255.255.255.224 - 30 hosts</span>
192.168.1.0/28    <span class="hljs-comment"># 255.255.255.240 - 14 hosts</span>
</div></code></pre>
<h3 id="subnet-calculation-examples">Subnet Calculation Examples</h3>
<p><strong>Example 1: /24 Network</strong></p>
<pre class="hljs"><code><div>Network: 192.168.1.0/24
Subnet Mask: 255.255.255.0
Network Address: 192.168.1.0
First Host: 192.168.1.1
Last Host: 192.168.1.254
Broadcast: 192.168.1.255
Total Hosts: 254
</div></code></pre>
<p><strong>Example 2: /26 Network</strong></p>
<pre class="hljs"><code><div>Network: 192.168.1.0/26
Subnet Mask: 255.255.255.192
Network Address: 192.168.1.0
First Host: 192.168.1.1
Last Host: 192.168.1.62
Broadcast: 192.168.1.63
Total Hosts: 62
</div></code></pre>
<h3 id="subnet-calculation-tools">Subnet Calculation Tools</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Using ipcalc (install if needed)</span>
$ sudo apt install ipcalc
$ ipcalc 192.168.1.0/24
Address:   192.168.1.0          11000000.10101000.00000001. 00000000
Netmask:   255.255.255.0 = 24   11111111.11111111.11111111. 00000000
Wildcard:  0.0.0.255            00000000.00000000.00000000. 11111111
=&gt;
Network:   192.168.1.0/24       11000000.10101000.00000001. 00000000
HostMin:   192.168.1.1          11000000.10101000.00000001. 00000001
HostMax:   192.168.1.254        11000000.10101000.00000001. 11111110
Broadcast: 192.168.1.255        11000000.10101000.00000001. 11111111
Hosts/Net: 254                   Class C, Private Internet

<span class="hljs-comment"># Using sipcalc</span>
$ sudo apt install sipcalc
$ sipcalc 192.168.1.0/24
</div></code></pre>
<h2 id="%F0%9F%86%94-mac-addresses-hardware-identifiers">üÜî MAC Addresses: Hardware Identifiers</h2>
<h3 id="what-is-a-mac-address">What is a MAC Address?</h3>
<p>MAC (Media Access Control) addresses are unique 48-bit identifiers assigned to network interfaces:</p>
<pre class="hljs"><code><div><span class="hljs-comment"># MAC address format</span>
00:1B:44:11:3A:B7
<span class="hljs-comment"># ^^:^^:^^:^^:^^:^^</span>
<span class="hljs-comment"># |     |     |</span>
<span class="hljs-comment"># |     |     +-- Device-specific (NIC)</span>
<span class="hljs-comment"># |     +-------- Manufacturer-specific</span>
<span class="hljs-comment"># +-------------- Organizationally Unique Identifier (OUI)</span>
</div></code></pre>
<h3 id="viewing-mac-addresses">Viewing MAC Addresses</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Linux - show all interfaces</span>
$ ip link show
1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP
    link/ether 00:1b:44:11:3a:b7 brd ff:ff:ff:ff:ff:ff

<span class="hljs-comment"># Show specific interface</span>
$ cat /sys/class/net/eth0/address
00:1b:44:11:3a:b7

<span class="hljs-comment"># Using ifconfig</span>
$ ifconfig eth0
eth0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500
        inet 192.168.1.100  netmask 255.255.255.0  broadcast 192.168.1.255
        ether 00:1b:44:11:3a:b7  txqueuelen 1000  (Ethernet)
</div></code></pre>
<h3 id="mac-address-vs-ip-address">MAC Address vs IP Address</h3>
<table>
<thead>
<tr>
<th>Feature</th>
<th>MAC Address</th>
<th>IP Address</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Scope</strong></td>
<td>Local network only</td>
<td>Global (with routing)</td>
</tr>
<tr>
<td><strong>Layer</strong></td>
<td>Data Link (Layer 2)</td>
<td>Network (Layer 3)</td>
</tr>
<tr>
<td><strong>Changes</strong></td>
<td>Fixed to hardware</td>
<td>Can change</td>
</tr>
<tr>
<td><strong>Format</strong></td>
<td>6 hex octets</td>
<td>4 decimal octets (IPv4)</td>
</tr>
<tr>
<td><strong>Purpose</strong></td>
<td>Local delivery</td>
<td>End-to-end delivery</td>
</tr>
</tbody>
</table>
<h2 id="%F0%9F%8C%90-ipv6-the-future-of-internet-addressing">üåê IPv6: The Future of Internet Addressing</h2>
<h3 id="ipv6-address-format">IPv6 Address Format</h3>
<p>IPv6 addresses are 128-bit numbers written in hexadecimal:</p>
<pre class="hljs"><code><div><span class="hljs-comment"># Full IPv6 address</span>
2001:0db8:85a3:0000:0000:8a2e:0370:7334

<span class="hljs-comment"># Compressed format (remove leading zeros)</span>
2001:db8:85a3:0:0:8a2e:370:7334

<span class="hljs-comment"># Further compressed (:: replaces consecutive zeros)</span>
2001:db8:85a3::8a2e:370:7334
</div></code></pre>
<h3 id="ipv6-address-types">IPv6 Address Types</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Loopback</span>
::1                    <span class="hljs-comment"># Equivalent to 127.0.0.1</span>

<span class="hljs-comment"># Link-local (auto-configured)</span>
fe80::/10              <span class="hljs-comment"># fe80:0000:0000:0000::/64</span>

<span class="hljs-comment"># Unique local (private)</span>
fc00::/7               <span class="hljs-comment"># Similar to RFC 1918</span>

<span class="hljs-comment"># Global unicast (public)</span>
2000::/3               <span class="hljs-comment"># Routable on internet</span>

<span class="hljs-comment"># Multicast</span>
ff00::/8               <span class="hljs-comment"># Group communication</span>
</div></code></pre>
<h3 id="viewing-ipv6-addresses">Viewing IPv6 Addresses</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Show IPv6 addresses</span>
$ ip -6 addr show
1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 state UNKNOWN
    inet6 ::1/128 scope host
2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 state UP
    inet6 2001:db8:85a3::8a2e:370:7334/64 scope global
    inet6 fe80::21b:44ff:fe11:3ab7/64 scope link

<span class="hljs-comment"># Check IPv6 connectivity</span>
$ ping6 google.com
$ ping6 2001:4860:4860::8888  <span class="hljs-comment"># Google's IPv6 DNS</span>
</div></code></pre>
<h2 id="%F0%9F%9A%A6-network-protocols-and-the-osi-model">üö¶ Network Protocols and the OSI Model</h2>
<h3 id="the-osi-model">The OSI Model</h3>
<table>
<thead>
<tr>
<th>Layer</th>
<th>Name</th>
<th>Purpose</th>
<th>Examples</th>
</tr>
</thead>
<tbody>
<tr>
<td>7</td>
<td>Application</td>
<td>User interface</td>
<td>HTTP, FTP, SSH, DNS</td>
</tr>
<tr>
<td>6</td>
<td>Presentation</td>
<td>Data formatting</td>
<td>SSL/TLS, compression</td>
</tr>
<tr>
<td>5</td>
<td>Session</td>
<td>Connection management</td>
<td>NetBIOS, RPC</td>
</tr>
<tr>
<td>4</td>
<td>Transport</td>
<td>End-to-end delivery</td>
<td>TCP, UDP</td>
</tr>
<tr>
<td>3</td>
<td>Network</td>
<td>Routing</td>
<td>IP, ICMP, OSPF</td>
</tr>
<tr>
<td>2</td>
<td>Data Link</td>
<td>Local delivery</td>
<td>Ethernet, WiFi</td>
</tr>
<tr>
<td>1</td>
<td>Physical</td>
<td>Electrical signals</td>
<td>Cables, radio waves</td>
</tr>
</tbody>
</table>
<h3 id="tcp-vs-udp">TCP vs UDP</h3>
<p><strong>TCP (Transmission Control Protocol):</strong></p>
<pre class="hljs"><code><div><span class="hljs-comment"># Characteristics:</span>
<span class="hljs-comment"># ‚úÖ Reliable (guaranteed delivery)</span>
<span class="hljs-comment"># ‚úÖ Connection-oriented</span>
<span class="hljs-comment"># ‚úÖ Error checking and correction</span>
<span class="hljs-comment"># ‚úÖ Flow control</span>
<span class="hljs-comment"># ‚ùå Higher overhead</span>

<span class="hljs-comment"># Common TCP ports:</span>
22   <span class="hljs-comment"># SSH</span>
23   <span class="hljs-comment"># Telnet</span>
25   <span class="hljs-comment"># SMTP</span>
53   <span class="hljs-comment"># DNS (also UDP)</span>
80   <span class="hljs-comment"># HTTP</span>
110  <span class="hljs-comment"># POP3</span>
143  <span class="hljs-comment"># IMAP</span>
443  <span class="hljs-comment"># HTTPS</span>
993  <span class="hljs-comment"># IMAPS</span>
995  <span class="hljs-comment"># POP3S</span>
</div></code></pre>
<p><strong>UDP (User Datagram Protocol):</strong></p>
<pre class="hljs"><code><div><span class="hljs-comment"># Characteristics:</span>
<span class="hljs-comment"># ‚úÖ Fast (low overhead)</span>
<span class="hljs-comment"># ‚úÖ Connectionless</span>
<span class="hljs-comment"># ‚ùå No guaranteed delivery</span>
<span class="hljs-comment"># ‚ùå No error correction</span>
<span class="hljs-comment"># ‚ùå No flow control</span>

<span class="hljs-comment"># Common UDP ports:</span>
53   <span class="hljs-comment"># DNS</span>
67   <span class="hljs-comment"># DHCP Server</span>
68   <span class="hljs-comment"># DHCP Client</span>
69   <span class="hljs-comment"># TFTP</span>
123  <span class="hljs-comment"># NTP</span>
161  <span class="hljs-comment"># SNMP</span>
514  <span class="hljs-comment"># Syslog</span>
</div></code></pre>
<h3 id="common-network-protocols">Common Network Protocols</h3>
<p><strong>Application Layer Protocols:</strong></p>
<pre class="hljs"><code><div><span class="hljs-comment"># HTTP/HTTPS - Web traffic</span>
$ curl -I https://google.com
HTTP/2 200
date: Fri, 15 Dec 2023 10:30:00 GMT
server: gws

<span class="hljs-comment"># DNS - Name resolution</span>
$ nslookup google.com
Server:		8.8.8.8
Address:	8.8.8.8<span class="hljs-comment">#53</span>

Non-authoritative answer:
Name:	google.com
Address: 142.250.191.14

<span class="hljs-comment"># SSH - Secure remote access</span>
$ ssh user@192.168.1.100

<span class="hljs-comment"># FTP - File transfer</span>
$ ftp ftp.example.com
</div></code></pre>
<p><strong>Network Layer Protocols:</strong></p>
<pre class="hljs"><code><div><span class="hljs-comment"># ICMP - Internet Control Message Protocol</span>
$ ping google.com
PING google.com (142.250.191.14) 56(84) bytes of data.
64 bytes from lga25s62-in-f14.1e100.net (142.250.191.14): icmp_seq=1 ttl=117 time=12.3 ms

<span class="hljs-comment"># ARP - Address Resolution Protocol</span>
$ arp -a
? (192.168.1.1) at 00:1a:2b:3c:4d:5e [ether] on eth0
? (192.168.1.100) at 00:1b:44:11:3a:b7 [ether] on eth0
</div></code></pre>
<h2 id="%F0%9F%8F%A0-how-home-networks-work">üè† How Home Networks Work</h2>
<h3 id="typical-home-network-setup">Typical Home Network Setup</h3>
<pre class="hljs"><code><div>Internet (ISP)
      |
   [Modem]  ‚Üê Converts ISP signal to Ethernet
      |
   [Router] ‚Üê NAT, DHCP, Firewall, WiFi
      |
   [Switch] ‚Üê Additional wired ports (optional)
   /  |  \
 [PC] [Laptop] [Phone]
</div></code></pre>
<h3 id="network-address-translation-nat">Network Address Translation (NAT)</h3>
<p>NAT allows multiple devices to share one public IP address:</p>
<pre class="hljs"><code><div><span class="hljs-comment"># Without NAT (not possible - not enough public IPs)</span>
Phone:  203.0.113.45
Laptop: 203.0.113.46  ‚Üê Would need separate public IPs
PC:     203.0.113.47

<span class="hljs-comment"># With NAT (how it actually works)</span>
Public IP:  203.0.113.45
           ‚Üì (NAT Router)
Phone:     192.168.1.10:5000 ‚Üí 203.0.113.45:5000
Laptop:    192.168.1.11:5001 ‚Üí 203.0.113.45:5001
PC:        192.168.1.12:5002 ‚Üí 203.0.113.45:5002
</div></code></pre>
<h3 id="dhcp-dynamic-host-configuration-protocol">DHCP (Dynamic Host Configuration Protocol)</h3>
<p>DHCP automatically assigns IP addresses to devices:</p>
<pre class="hljs"><code><div><span class="hljs-comment"># DHCP process:</span>
1. Device: <span class="hljs-string">"I need an IP address"</span> (DHCP Discover)
2. Router: <span class="hljs-string">"Here are available options"</span> (DHCP Offer)
3. Device: <span class="hljs-string">"I'll take 192.168.1.100"</span> (DHCP Request)
4. Router: <span class="hljs-string">"Confirmed, here's your config"</span> (DHCP Acknowledge)

<span class="hljs-comment"># DHCP provides:</span>
<span class="hljs-comment"># - IP address (192.168.1.100)</span>
<span class="hljs-comment"># - Subnet mask (255.255.255.0)</span>
<span class="hljs-comment"># - Default gateway (192.168.1.1)</span>
<span class="hljs-comment"># - DNS servers (8.8.8.8, 8.8.4.4)</span>
<span class="hljs-comment"># - Lease time (24 hours)</span>
</div></code></pre>
<h3 id="viewing-network-configuration">Viewing Network Configuration</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Show IP configuration</span>
$ ip addr show eth0
2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP group default qlen 1000
    link/ether 00:1b:44:11:3a:b7 brd ff:ff:ff:ff:ff:ff
    inet 192.168.1.100/24 brd 192.168.1.255 scope global dynamic eth0
       valid_lft 86395sec preferred_lft 86395sec

<span class="hljs-comment"># Show routing table</span>
$ ip route show
default via 192.168.1.1 dev eth0 proto dhcp metric 100
192.168.1.0/24 dev eth0 proto kernel scope link src 192.168.1.100 metric 100

<span class="hljs-comment"># Show DNS configuration</span>
$ cat /etc/resolv.conf
nameserver 8.8.8.8
nameserver 8.8.4.4
search local.domain
</div></code></pre>
<h2 id="%F0%9F%8E%AF-practical-scenario-network-troubleshooting">üéØ Practical Scenario: Network Troubleshooting</h2>
<p>Let's diagnose a connectivity issue step by step:</p>
<pre class="hljs"><code><div><span class="hljs-comment"># Problem: "I can't access google.com"</span>

<span class="hljs-comment"># Step 1: Check local network interface</span>
$ ip addr show
<span class="hljs-comment"># Look for: IP address assigned, interface UP</span>

<span class="hljs-comment"># Step 2: Check local connectivity</span>
$ ping 127.0.0.1
PING 127.0.0.1 (127.0.0.1) 56(84) bytes of data.
64 bytes from 127.0.0.1: icmp_seq=1 ttl=64 time=0.045 ms
<span class="hljs-comment"># ‚úÖ Local interface works</span>

<span class="hljs-comment"># Step 3: Check default gateway</span>
$ ip route | grep default
default via 192.168.1.1 dev eth0

$ ping 192.168.1.1
PING 192.168.1.1 (192.168.1.1) 56(84) bytes of data.
64 bytes from 192.168.1.1: icmp_seq=1 ttl=64 time=1.23 ms
<span class="hljs-comment"># ‚úÖ Can reach router</span>

<span class="hljs-comment"># Step 4: Check DNS resolution</span>
$ nslookup google.com
Server:		8.8.8.8
Address:	8.8.8.8<span class="hljs-comment">#53</span>

Non-authoritative answer:
Name:	google.com
Address: 142.250.191.14
<span class="hljs-comment"># ‚úÖ DNS works</span>

<span class="hljs-comment"># Step 5: Check internet connectivity</span>
$ ping 8.8.8.8
PING 8.8.8.8 (8.8.8.8) 56(84) bytes of data.
64 bytes from 8.8.8.8: icmp_seq=1 ttl=117 time=12.3 ms
<span class="hljs-comment"># ‚úÖ Internet connectivity works</span>

<span class="hljs-comment"># Step 6: Check specific service</span>
$ curl -I https://google.com
HTTP/2 200
<span class="hljs-comment"># ‚úÖ Web service works</span>

<span class="hljs-comment"># Conclusion: Network is working properly</span>
<span class="hljs-comment"># Issue might be browser-specific or application-level</span>
</div></code></pre>
<h2 id="%E2%9A%A0%EF%B8%8F-common-networking-mistakes">‚ö†Ô∏è Common Networking Mistakes</h2>
<h3 id="1-subnet-misconfiguration">1. Subnet Misconfiguration</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># ‚ùå Wrong: Device and gateway in different subnets</span>
Device:  192.168.1.100/25  (subnet: 192.168.1.0-127)
Gateway: 192.168.1.200     (subnet: 192.168.1.128-255)

<span class="hljs-comment"># ‚úÖ Correct: Same subnet</span>
Device:  192.168.1.100/24
Gateway: 192.168.1.1
</div></code></pre>
<h3 id="2-ip-address-conflicts">2. IP Address Conflicts</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># ‚ùå Two devices with same IP</span>
Device A: 192.168.1.100
Device B: 192.168.1.100  ‚Üê Conflict!

<span class="hljs-comment"># Check for conflicts</span>
$ arping 192.168.1.100
</div></code></pre>
<h3 id="3-dns-issues">3. DNS Issues</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># ‚ùå Wrong DNS servers</span>
nameserver 192.168.1.999  ‚Üê Invalid IP

<span class="hljs-comment"># ‚úÖ Use reliable DNS</span>
nameserver 8.8.8.8        ‚Üê Google
nameserver 1.1.1.1        ‚Üê Cloudflare
</div></code></pre>
<h2 id="%F0%9F%A7%A0-knowledge-check">üß† Knowledge Check</h2>
<h3 id="quick-quiz">Quick Quiz</h3>
<ol>
<li>
<p><strong>What's the difference between 192.168.1.0/24 and 192.168.1.0/25?</strong></p>
<details>
<summary>Answer</summary>
<ul>
<li>/24 has 254 usable hosts (192.168.1.1-254)</li>
<li>/25 has 126 usable hosts (192.168.1.1-126)</li>
<li>/25 splits the /24 network into two smaller subnets</li>
</ul>
</details>
</li>
<li>
<p><strong>Why can't you ping a device on the internet using its MAC address?</strong></p>
<details>
<summary>Answer</summary>
<p>MAC addresses only work on the local network segment. Routers strip and replace MAC addresses as packets travel between networks. Only IP addresses are used for end-to-end communication.</p>
</details>
</li>
<li>
<p><strong>What happens when you type &quot;google.com&quot; in your browser?</strong></p>
<details>
<summary>Answer</summary>
<ol>
<li>DNS lookup to resolve google.com to IP address</li>
<li>TCP connection to port 80/443</li>
<li>HTTP/HTTPS request sent</li>
<li>Server responds with web page</li>
<li>Browser renders the content</li>
</ol>
</details>
</li>
<li>
<p><strong>What's the broadcast address for 10.0.0.0/8?</strong></p>
<details>
<summary>Answer</summary>
<p>10.255.255.255</p>
</details>
</li>
</ol>
<h3 id="hands-on-challenges">Hands-On Challenges</h3>
<p><strong>Challenge 1: Subnet Planning</strong></p>
<pre class="hljs"><code><div><span class="hljs-comment"># You have 192.168.1.0/24 and need 4 subnets with ~60 hosts each</span>
<span class="hljs-comment"># Calculate the subnet addresses, ranges, and broadcast addresses</span>
</div></code></pre>
<p><strong>Challenge 2: Network Discovery</strong></p>
<pre class="hljs"><code><div><span class="hljs-comment"># Find all devices on your local network</span>
<span class="hljs-comment"># Identify their IP addresses, MAC addresses, and hostnames</span>
</div></code></pre>
<p><strong>Challenge 3: Protocol Analysis</strong></p>
<pre class="hljs"><code><div><span class="hljs-comment"># Use netstat to identify:</span>
<span class="hljs-comment"># - All listening TCP services</span>
<span class="hljs-comment"># - All active connections</span>
<span class="hljs-comment"># - Which processes are using the network</span>
</div></code></pre>
<h2 id="%F0%9F%9A%80-next-steps">üöÄ Next Steps</h2>
<p>Fantastic! You now understand networking fundamentals. You can:</p>
<ul>
<li>Calculate subnets and understand IP addressing</li>
<li>Distinguish between different types of addresses and protocols</li>
<li>Understand how devices communicate on networks</li>
<li>Troubleshoot basic connectivity issues</li>
</ul>
<p><strong>Ready to get hands-on with tools?</strong> Continue to <a href="09-basic-network-tools.md">09-basic-network-tools.md</a> to master essential networking commands and diagnostic tools.</p>
<hr>
<blockquote>
<p><strong>Pro Tip</strong>: Networking concepts build on each other. Make sure you understand IP addressing and subnetting before moving to advanced topics. Practice subnet calculations until they become second nature - this knowledge is fundamental for network administration and troubleshooting! üåê</p>
</blockquote>
<h1 id="%F0%9F%9B%A0%EF%B8%8F-system-administration-managing-linux-systems">üõ†Ô∏è System Administration: Managing Linux Systems</h1>
<blockquote>
<p><strong>Master essential system administration tasks for Linux servers and workstations</strong></p>
</blockquote>
<h2 id="%F0%9F%93%96-what-youll-learn">üìñ What You'll Learn</h2>
<p>System administration is the backbone of maintaining reliable Linux systems. This chapter covers essential administrative tasks that every Linux professional should master:</p>
<ul>
<li>User and group management</li>
<li>Package management across distributions</li>
<li>System monitoring and logging</li>
<li>Disk and filesystem management</li>
<li>Network configuration and management</li>
<li>System backup and recovery</li>
<li>Security hardening basics</li>
<li>Automation with cron and scripts</li>
</ul>
<h2 id="%F0%9F%8C%8D-why-this-matters">üåç Why This Matters</h2>
<p><strong>Critical applications:</strong></p>
<ul>
<li><strong>Server Management</strong>: Maintain production servers and services</li>
<li><strong>Security</strong>: Implement proper access controls and monitoring</li>
<li><strong>Performance</strong>: Optimize system resources and troubleshoot issues</li>
<li><strong>Reliability</strong>: Ensure system uptime and data protection</li>
<li><strong>Compliance</strong>: Meet organizational and regulatory requirements</li>
</ul>
<h2 id="%F0%9F%91%A5-user-and-group-management">üë• User and Group Management</h2>
<h3 id="user-account-management">User Account Management</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Create new user</span>
$ sudo useradd -m -s /bin/bash john
$ sudo useradd -m -s /bin/bash -G sudo,developers john  <span class="hljs-comment"># With groups</span>

<span class="hljs-comment"># Set user password</span>
$ sudo passwd john
Enter new UNIX password:
Retype new UNIX password:
passwd: password updated successfully

<span class="hljs-comment"># Create user with specific UID and home directory</span>
$ sudo useradd -m -u 1500 -d /home/custom -s /bin/bash jane

<span class="hljs-comment"># Modify existing user</span>
$ sudo usermod -aG sudo john        <span class="hljs-comment"># Add to sudo group</span>
$ sudo usermod -s /bin/zsh john     <span class="hljs-comment"># Change shell</span>
$ sudo usermod -d /new/home john    <span class="hljs-comment"># Change home directory</span>
$ sudo usermod -l newname john      <span class="hljs-comment"># Change username</span>

<span class="hljs-comment"># Lock/unlock user account</span>
$ sudo usermod -L john              <span class="hljs-comment"># Lock account</span>
$ sudo usermod -U john              <span class="hljs-comment"># Unlock account</span>
$ sudo passwd -l john               <span class="hljs-comment"># Lock password</span>
$ sudo passwd -u john               <span class="hljs-comment"># Unlock password</span>

<span class="hljs-comment"># Delete user</span>
$ sudo userdel john                 <span class="hljs-comment"># Delete user (keep home)</span>
$ sudo userdel -r john              <span class="hljs-comment"># Delete user and home directory</span>

<span class="hljs-comment"># View user information</span>
$ id john
uid=1001(john) gid=1001(john) groups=1001(john),27(sudo),1002(developers)

$ finger john
Login: john                             Name: John Doe
Directory: /home/john                   Shell: /bin/bash
Last login Mon Dec 15 10:30 (UTC) on pts/0
No mail.
No Plan.

<span class="hljs-comment"># List all users</span>
$ cat /etc/passwd | cut -d: -f1
$ getent passwd | cut -d: -f1
</div></code></pre>
<h3 id="group-management">Group Management</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Create new group</span>
$ sudo groupadd developers
$ sudo groupadd -g 2000 admins     <span class="hljs-comment"># With specific GID</span>

<span class="hljs-comment"># Add user to group</span>
$ sudo usermod -aG developers john
$ sudo gpasswd -a john developers  <span class="hljs-comment"># Alternative method</span>

<span class="hljs-comment"># Remove user from group</span>
$ sudo gpasswd -d john developers

<span class="hljs-comment"># Change user's primary group</span>
$ sudo usermod -g developers john

<span class="hljs-comment"># Delete group</span>
$ sudo groupdel developers

<span class="hljs-comment"># List all groups</span>
$ cat /etc/group | cut -d: -f1
$ getent group | cut -d: -f1

<span class="hljs-comment"># Show groups for user</span>
$ groups john
john : john sudo developers

<span class="hljs-comment"># Show group members</span>
$ getent group sudo
sudo:x:27:john,jane,admin
</div></code></pre>
<h3 id="advanced-user-management">Advanced User Management</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Set password policies</span>
$ sudo nano /etc/login.defs
<span class="hljs-comment"># PASS_MAX_DAYS   90</span>
<span class="hljs-comment"># PASS_MIN_DAYS   1</span>
<span class="hljs-comment"># PASS_WARN_AGE   7</span>
<span class="hljs-comment"># PASS_MIN_LEN    8</span>

<span class="hljs-comment"># Force password change on next login</span>
$ sudo chage -d 0 john

<span class="hljs-comment"># Set password expiration</span>
$ sudo chage -M 90 john             <span class="hljs-comment"># Max 90 days</span>
$ sudo chage -m 1 john              <span class="hljs-comment"># Min 1 day between changes</span>
$ sudo chage -W 7 john              <span class="hljs-comment"># Warn 7 days before expiry</span>

<span class="hljs-comment"># View password aging information</span>
$ sudo chage -l john
Last password change                                    : Dec 15, 2023
Password expires                                        : Mar 14, 2024
Password inactive                                       : never
Account expires                                         : never
Minimum number of days between password change         : 1
Maximum number of days between password change         : 90
Number of days of warning before password expires      : 7

<span class="hljs-comment"># Create system user (no login)</span>
$ sudo useradd -r -s /bin/<span class="hljs-literal">false</span> -d /var/lib/myapp myapp

<span class="hljs-comment"># Bulk user creation</span>
$ sudo newusers users.txt
<span class="hljs-comment"># users.txt format:</span>
<span class="hljs-comment"># username:password:uid:gid:comment:home:shell</span>
</div></code></pre>
<h2 id="%F0%9F%93%A6-package-management">üì¶ Package Management</h2>
<h3 id="debianubuntu-apt">Debian/Ubuntu (APT)</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Update package lists</span>
$ sudo apt update

<span class="hljs-comment"># Upgrade packages</span>
$ sudo apt upgrade
$ sudo apt full-upgrade            <span class="hljs-comment"># More comprehensive upgrade</span>

<span class="hljs-comment"># Install packages</span>
$ sudo apt install nginx
$ sudo apt install nginx mysql-server php  <span class="hljs-comment"># Multiple packages</span>

<span class="hljs-comment"># Remove packages</span>
$ sudo apt remove nginx
$ sudo apt purge nginx             <span class="hljs-comment"># Remove with config files</span>
$ sudo apt autoremove              <span class="hljs-comment"># Remove unused dependencies</span>

<span class="hljs-comment"># Search packages</span>
$ apt search nginx
$ apt-cache search web server

<span class="hljs-comment"># Show package information</span>
$ apt show nginx
$ apt-cache show nginx

<span class="hljs-comment"># List installed packages</span>
$ apt list --installed
$ dpkg -l

<span class="hljs-comment"># Check if package is installed</span>
$ dpkg -l | grep nginx
$ apt list --installed | grep nginx

<span class="hljs-comment"># Download package without installing</span>
$ apt download nginx

<span class="hljs-comment"># Install local .deb package</span>
$ sudo dpkg -i package.deb
$ sudo apt install -f             <span class="hljs-comment"># Fix dependencies</span>

<span class="hljs-comment"># Hold package (prevent updates)</span>
$ sudo apt-mark hold nginx
$ sudo apt-mark unhold nginx

<span class="hljs-comment"># Clean package cache</span>
$ sudo apt clean
$ sudo apt autoclean
</div></code></pre>
<h3 id="red-hatcentos-yumdnf">Red Hat/CentOS (YUM/DNF)</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Update package lists</span>
$ sudo yum update                  <span class="hljs-comment"># CentOS 7</span>
$ sudo dnf update                  <span class="hljs-comment"># CentOS 8+</span>

<span class="hljs-comment"># Install packages</span>
$ sudo yum install nginx
$ sudo dnf install nginx mysql-server

<span class="hljs-comment"># Remove packages</span>
$ sudo yum remove nginx
$ sudo dnf remove nginx

<span class="hljs-comment"># Search packages</span>
$ yum search nginx
$ dnf search nginx

<span class="hljs-comment"># Show package information</span>
$ yum info nginx
$ dnf info nginx

<span class="hljs-comment"># List installed packages</span>
$ yum list installed
$ dnf list installed
$ rpm -qa

<span class="hljs-comment"># Install local .rpm package</span>
$ sudo rpm -ivh package.rpm
$ sudo yum localinstall package.rpm
$ sudo dnf localinstall package.rpm

<span class="hljs-comment"># Enable/disable repositories</span>
$ sudo yum-config-manager --<span class="hljs-built_in">enable</span> epel
$ sudo dnf config-manager --<span class="hljs-built_in">enable</span> epel

<span class="hljs-comment"># Clean package cache</span>
$ sudo yum clean all
$ sudo dnf clean all
</div></code></pre>
<h3 id="package-management-best-practices">Package Management Best Practices</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Always update before installing</span>
$ sudo apt update &amp;&amp; sudo apt install package

<span class="hljs-comment"># Check for security updates</span>
$ sudo apt list --upgradable
$ sudo unattended-upgrade --dry-run  <span class="hljs-comment"># Ubuntu</span>

<span class="hljs-comment"># Backup package list</span>
$ dpkg --get-selections &gt; package-list.txt
$ sudo dpkg --<span class="hljs-built_in">set</span>-selections &lt; package-list.txt
$ sudo apt-get dselect-upgrade

<span class="hljs-comment"># Find which package provides a file</span>
$ dpkg -S /usr/bin/nginx
$ yum whatprovides /usr/bin/nginx
$ dnf whatprovides /usr/bin/nginx

<span class="hljs-comment"># List files in package</span>
$ dpkg -L nginx
$ rpm -ql nginx

<span class="hljs-comment"># Verify package integrity</span>
$ debsums nginx                    <span class="hljs-comment"># Debian/Ubuntu</span>
$ rpm -V nginx                     <span class="hljs-comment"># Red Hat/CentOS</span>
</div></code></pre>
<h2 id="%F0%9F%93%8A-system-monitoring-and-logging">üìä System Monitoring and Logging</h2>
<h3 id="system-logs">System Logs</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># View system logs with journalctl (systemd)</span>
$ sudo journalctl
$ sudo journalctl -f               <span class="hljs-comment"># Follow logs</span>
$ sudo journalctl -u nginx         <span class="hljs-comment"># Service-specific logs</span>
$ sudo journalctl --since today
$ sudo journalctl --since <span class="hljs-string">"2023-12-15 10:00:00"</span>
$ sudo journalctl --until <span class="hljs-string">"2023-12-15 12:00:00"</span>
$ sudo journalctl -p err           <span class="hljs-comment"># Error level and above</span>
$ sudo journalctl -n 50            <span class="hljs-comment"># Last 50 entries</span>

<span class="hljs-comment"># Traditional log files</span>
$ sudo tail -f /var/<span class="hljs-built_in">log</span>/syslog     <span class="hljs-comment"># System log</span>
$ sudo tail -f /var/<span class="hljs-built_in">log</span>/auth.log   <span class="hljs-comment"># Authentication log</span>
$ sudo tail -f /var/<span class="hljs-built_in">log</span>/kern.log   <span class="hljs-comment"># Kernel log</span>
$ sudo tail -f /var/<span class="hljs-built_in">log</span>/mail.log   <span class="hljs-comment"># Mail log</span>
$ sudo tail -f /var/<span class="hljs-built_in">log</span>/apache2/access.log  <span class="hljs-comment"># Web server logs</span>

<span class="hljs-comment"># Log rotation</span>
$ sudo logrotate -d /etc/logrotate.conf  <span class="hljs-comment"># Dry run</span>
$ sudo logrotate -f /etc/logrotate.conf  <span class="hljs-comment"># Force rotation</span>

<span class="hljs-comment"># Configure log rotation</span>
$ sudo nano /etc/logrotate.d/myapp
/var/<span class="hljs-built_in">log</span>/myapp/*.<span class="hljs-built_in">log</span> {
    daily
    missingok
    rotate 52
    compress
    delaycompress
    notifempty
    create 644 myapp myapp
    postrotate
        systemctl reload myapp
    endscript
}
</div></code></pre>
<h3 id="system-resource-monitoring">System Resource Monitoring</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Disk usage monitoring</span>
$ df -h                            <span class="hljs-comment"># Filesystem usage</span>
$ du -sh /var/<span class="hljs-built_in">log</span>/*                <span class="hljs-comment"># Directory sizes</span>
$ du -h --max-depth=1 /            <span class="hljs-comment"># Top-level directory sizes</span>

<span class="hljs-comment"># Find large files</span>
$ find / -<span class="hljs-built_in">type</span> f -size +100M 2&gt;/dev/null | head -10
$ find /var/<span class="hljs-built_in">log</span> -<span class="hljs-built_in">type</span> f -size +10M -<span class="hljs-built_in">exec</span> ls -lh {} \;

<span class="hljs-comment"># Monitor disk I/O</span>
$ iostat -x 1                      <span class="hljs-comment"># Extended I/O statistics</span>
$ iotop                            <span class="hljs-comment"># Top-like I/O monitor</span>

<span class="hljs-comment"># Network monitoring</span>
$ netstat -tuln                    <span class="hljs-comment"># Listening ports</span>
$ ss -tuln                         <span class="hljs-comment"># Modern alternative</span>
$ iftop                            <span class="hljs-comment"># Network bandwidth usage</span>
$ nethogs                          <span class="hljs-comment"># Per-process network usage</span>

<span class="hljs-comment"># System performance</span>
$ vmstat 1                         <span class="hljs-comment"># Virtual memory statistics</span>
$ sar -u 1 10                      <span class="hljs-comment"># CPU usage</span>
$ sar -r 1 10                      <span class="hljs-comment"># Memory usage</span>
$ sar -d 1 10                      <span class="hljs-comment"># Disk activity</span>
</div></code></pre>
<h3 id="automated-monitoring-scripts">Automated Monitoring Scripts</h3>
<pre class="hljs"><code><div><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># system-health-check.sh - Automated system health monitoring</span>

LOGFILE=<span class="hljs-string">"/var/log/system-health.log"</span>
DATE=$(date <span class="hljs-string">'+%Y-%m-%d %H:%M:%S'</span>)

<span class="hljs-built_in">echo</span> <span class="hljs-string">"[<span class="hljs-variable">$DATE</span>] Starting system health check"</span> &gt;&gt; <span class="hljs-variable">$LOGFILE</span>

<span class="hljs-comment"># Check disk usage</span>
DISK_USAGE=$(df / | awk <span class="hljs-string">'NR==2 {print $5}'</span> | sed <span class="hljs-string">'s/%//'</span>)
<span class="hljs-keyword">if</span> [ <span class="hljs-variable">$DISK_USAGE</span> -gt 90 ]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"[<span class="hljs-variable">$DATE</span>] WARNING: Root filesystem is <span class="hljs-variable">${DISK_USAGE}</span>% full"</span> &gt;&gt; <span class="hljs-variable">$LOGFILE</span>
    <span class="hljs-comment"># Send alert email</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Root filesystem is <span class="hljs-variable">${DISK_USAGE}</span>% full"</span> | mail -s <span class="hljs-string">"Disk Space Alert"</span> admin@example.com
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># Check memory usage</span>
MEM_USAGE=$(free | awk <span class="hljs-string">'NR==2{printf "%.0f", $3*100/$2}'</span>)
<span class="hljs-keyword">if</span> [ <span class="hljs-variable">$MEM_USAGE</span> -gt 90 ]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"[<span class="hljs-variable">$DATE</span>] WARNING: Memory usage is <span class="hljs-variable">${MEM_USAGE}</span>%"</span> &gt;&gt; <span class="hljs-variable">$LOGFILE</span>
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># Check load average</span>
LOAD_AVG=$(uptime | awk -F<span class="hljs-string">'load average:'</span> <span class="hljs-string">'{print $2}'</span> | awk <span class="hljs-string">'{print $1}'</span> | sed <span class="hljs-string">'s/,//'</span>)
LOAD_THRESHOLD=<span class="hljs-string">"2.0"</span>
<span class="hljs-keyword">if</span> (( $(<span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$LOAD_AVG</span> &gt; <span class="hljs-variable">$LOAD_THRESHOLD</span>"</span> | bc -l) )); <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"[<span class="hljs-variable">$DATE</span>] WARNING: High load average: <span class="hljs-variable">$LOAD_AVG</span>"</span> &gt;&gt; <span class="hljs-variable">$LOGFILE</span>
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># Check failed services</span>
FAILED_SERVICES=$(systemctl --failed --no-legend | wc -l)
<span class="hljs-keyword">if</span> [ <span class="hljs-variable">$FAILED_SERVICES</span> -gt 0 ]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"[<span class="hljs-variable">$DATE</span>] WARNING: <span class="hljs-variable">$FAILED_SERVICES</span> failed services detected"</span> &gt;&gt; <span class="hljs-variable">$LOGFILE</span>
    systemctl --failed --no-legend &gt;&gt; <span class="hljs-variable">$LOGFILE</span>
<span class="hljs-keyword">fi</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"[<span class="hljs-variable">$DATE</span>] System health check completed"</span> &gt;&gt; <span class="hljs-variable">$LOGFILE</span>
</div></code></pre>
<h2 id="%F0%9F%92%BE-disk-and-filesystem-management">üíæ Disk and Filesystem Management</h2>
<h3 id="disk-partitioning">Disk Partitioning</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># List block devices</span>
$ lsblk
NAME   MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT
sda      8:0    0   20G  0 disk
‚îú‚îÄsda1   8:1    0    1G  0 part /boot
‚îú‚îÄsda2   8:2    0    2G  0 part [SWAP]
‚îî‚îÄsda3   8:3    0   17G  0 part /
sdb      8:16   0   10G  0 disk

<span class="hljs-comment"># Partition disk with fdisk</span>
$ sudo fdisk /dev/sdb
Command (m <span class="hljs-keyword">for</span> <span class="hljs-built_in">help</span>): n     <span class="hljs-comment"># New partition</span>
Command (m <span class="hljs-keyword">for</span> <span class="hljs-built_in">help</span>): p     <span class="hljs-comment"># Print partition table</span>
Command (m <span class="hljs-keyword">for</span> <span class="hljs-built_in">help</span>): w     <span class="hljs-comment"># Write changes</span>

<span class="hljs-comment"># Partition disk with parted</span>
$ sudo parted /dev/sdb
(parted) mklabel gpt
(parted) mkpart primary ext4 0% 100%
(parted) <span class="hljs-built_in">print</span>
(parted) quit

<span class="hljs-comment"># Create filesystem</span>
$ sudo mkfs.ext4 /dev/sdb1
$ sudo mkfs.xfs /dev/sdb1
$ sudo mkfs.btrfs /dev/sdb1

<span class="hljs-comment"># Check filesystem</span>
$ sudo fsck /dev/sdb1
$ sudo fsck.ext4 /dev/sdb1
$ sudo e2fsck -f /dev/sdb1
</div></code></pre>
<h3 id="mount-management">Mount Management</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Mount filesystem</span>
$ sudo mkdir /mnt/data
$ sudo mount /dev/sdb1 /mnt/data

<span class="hljs-comment"># Mount with specific options</span>
$ sudo mount -o rw,noexec,nosuid /dev/sdb1 /mnt/data

<span class="hljs-comment"># Unmount filesystem</span>
$ sudo umount /mnt/data
$ sudo umount /dev/sdb1

<span class="hljs-comment"># Force unmount (if busy)</span>
$ sudo fuser -km /mnt/data
$ sudo umount -f /mnt/data

<span class="hljs-comment"># Permanent mounts in /etc/fstab</span>
$ sudo nano /etc/fstab
<span class="hljs-comment"># Add line:</span>
/dev/sdb1 /mnt/data ext4 defaults,noatime 0 2

<span class="hljs-comment"># Test fstab entries</span>
$ sudo mount -a

<span class="hljs-comment"># View mounted filesystems</span>
$ mount | grep ^/dev
$ df -h
$ findmnt
</div></code></pre>
<h3 id="lvm-logical-volume-management">LVM (Logical Volume Management)</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Create physical volume</span>
$ sudo pvcreate /dev/sdb1
$ sudo pvdisplay

<span class="hljs-comment"># Create volume group</span>
$ sudo vgcreate data_vg /dev/sdb1
$ sudo vgdisplay

<span class="hljs-comment"># Create logical volume</span>
$ sudo lvcreate -L 5G -n data_lv data_vg
$ sudo lvdisplay

<span class="hljs-comment"># Create filesystem on LV</span>
$ sudo mkfs.ext4 /dev/data_vg/data_lv

<span class="hljs-comment"># Mount logical volume</span>
$ sudo mkdir /mnt/lvm_data
$ sudo mount /dev/data_vg/data_lv /mnt/lvm_data

<span class="hljs-comment"># Extend logical volume</span>
$ sudo lvextend -L +2G /dev/data_vg/data_lv
$ sudo resize2fs /dev/data_vg/data_lv  <span class="hljs-comment"># For ext4</span>
$ sudo xfs_growfs /mnt/lvm_data        <span class="hljs-comment"># For XFS</span>

<span class="hljs-comment"># Add physical volume to VG</span>
$ sudo pvcreate /dev/sdc1
$ sudo vgextend data_vg /dev/sdc1
</div></code></pre>
<h2 id="%F0%9F%94%92-security-hardening-basics">üîí Security Hardening Basics</h2>
<h3 id="ssh-security">SSH Security</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Configure SSH security</span>
$ sudo nano /etc/ssh/sshd_config

<span class="hljs-comment"># Recommended settings:</span>
Port 2222                          <span class="hljs-comment"># Change default port</span>
PermitRootLogin no                 <span class="hljs-comment"># Disable root login</span>
PasswordAuthentication no          <span class="hljs-comment"># Use key-based auth only</span>
PubkeyAuthentication yes
MaxAuthTries 3
ClientAliveInterval 300
ClientAliveCountMax 2
AllowUsers john jane               <span class="hljs-comment"># Limit allowed users</span>
DenyUsers guest                    <span class="hljs-comment"># Deny specific users</span>

<span class="hljs-comment"># Restart SSH service</span>
$ sudo systemctl restart sshd

<span class="hljs-comment"># Generate SSH key pair</span>
$ ssh-keygen -t rsa -b 4096 -C <span class="hljs-string">"user@example.com"</span>
$ ssh-keygen -t ed25519 -C <span class="hljs-string">"user@example.com"</span>  <span class="hljs-comment"># More secure</span>

<span class="hljs-comment"># Copy public key to server</span>
$ ssh-copy-id user@server
$ ssh-copy-id -i ~/.ssh/id_ed25519.pub user@server
</div></code></pre>
<h3 id="firewall-configuration">Firewall Configuration</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># UFW (Uncomplicated Firewall)</span>
$ sudo ufw <span class="hljs-built_in">enable</span>
$ sudo ufw default deny incoming
$ sudo ufw default allow outgoing
$ sudo ufw allow ssh
$ sudo ufw allow 80/tcp
$ sudo ufw allow 443/tcp
$ sudo ufw allow from 192.168.1.0/24
$ sudo ufw status verbose

<span class="hljs-comment"># iptables (more advanced)</span>
$ sudo iptables -L
$ sudo iptables -A INPUT -p tcp --dport 22 -j ACCEPT
$ sudo iptables -A INPUT -p tcp --dport 80 -j ACCEPT
$ sudo iptables -A INPUT -j DROP
$ sudo iptables-save &gt; /etc/iptables/rules.v4
</div></code></pre>
<h3 id="system-security-auditing">System Security Auditing</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Check for rootkits</span>
$ sudo apt install rkhunter chkrootkit
$ sudo rkhunter --check
$ sudo chkrootkit

<span class="hljs-comment"># File integrity monitoring</span>
$ sudo apt install aide
$ sudo aideinit
$ sudo aide --check

<span class="hljs-comment"># Check for SUID/SGID files</span>
$ find / -<span class="hljs-built_in">type</span> f \( -perm -4000 -o -perm -2000 \) -<span class="hljs-built_in">exec</span> ls -l {} \; 2&gt;/dev/null

<span class="hljs-comment"># Check for world-writable files</span>
$ find / -<span class="hljs-built_in">type</span> f -perm -002 -<span class="hljs-built_in">exec</span> ls -l {} \; 2&gt;/dev/null

<span class="hljs-comment"># Monitor login attempts</span>
$ sudo tail -f /var/<span class="hljs-built_in">log</span>/auth.log | grep <span class="hljs-string">"Failed password"</span>
$ sudo lastb                       <span class="hljs-comment"># Failed login attempts</span>
$ sudo last                        <span class="hljs-comment"># Successful logins</span>
</div></code></pre>
<h2 id="%E2%8F%B0-automation-with-cron">‚è∞ Automation with Cron</h2>
<h3 id="cron-job-management">Cron Job Management</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Edit user crontab</span>
$ crontab -e

<span class="hljs-comment"># List user crontab</span>
$ crontab -l

<span class="hljs-comment"># Remove user crontab</span>
$ crontab -r

<span class="hljs-comment"># Edit system-wide crontab</span>
$ sudo nano /etc/crontab

<span class="hljs-comment"># Cron format:</span>
<span class="hljs-comment"># minute hour day month weekday command</span>
<span class="hljs-comment"># 0-59   0-23 1-31 1-12  0-7 (0 and 7 are Sunday)</span>

<span class="hljs-comment"># Examples:</span>
0 2 * * *     /usr/<span class="hljs-built_in">local</span>/bin/backup.sh           <span class="hljs-comment"># Daily at 2 AM</span>
*/15 * * * *  /usr/<span class="hljs-built_in">local</span>/bin/check-health.sh      <span class="hljs-comment"># Every 15 minutes</span>
0 0 * * 0     /usr/<span class="hljs-built_in">local</span>/bin/weekly-cleanup.sh    <span class="hljs-comment"># Weekly on Sunday</span>
0 0 1 * *     /usr/<span class="hljs-built_in">local</span>/bin/monthly-report.sh    <span class="hljs-comment"># Monthly on 1st</span>
@reboot       /usr/<span class="hljs-built_in">local</span>/bin/startup.sh           <span class="hljs-comment"># At boot</span>
@daily        /usr/<span class="hljs-built_in">local</span>/bin/daily-tasks.sh       <span class="hljs-comment"># Daily</span>
@weekly       /usr/<span class="hljs-built_in">local</span>/bin/weekly-tasks.sh      <span class="hljs-comment"># Weekly</span>
</div></code></pre>
<h3 id="cron-directories">Cron Directories</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># System cron directories</span>
/etc/cron.hourly/     <span class="hljs-comment"># Scripts run hourly</span>
/etc/cron.daily/      <span class="hljs-comment"># Scripts run daily</span>
/etc/cron.weekly/     <span class="hljs-comment"># Scripts run weekly</span>
/etc/cron.monthly/    <span class="hljs-comment"># Scripts run monthly</span>

<span class="hljs-comment"># Place executable scripts in these directories</span>
$ sudo cp backup.sh /etc/cron.daily/
$ sudo chmod +x /etc/cron.daily/backup.sh

<span class="hljs-comment"># Check cron logs</span>
$ sudo grep CRON /var/<span class="hljs-built_in">log</span>/syslog
$ sudo journalctl -u cron
</div></code></pre>
<h3 id="backup-automation-example">Backup Automation Example</h3>
<pre class="hljs"><code><div><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># /usr/local/bin/backup.sh - Automated backup script</span>

BACKUP_DIR=<span class="hljs-string">"/backup"</span>
SOURCE_DIRS=<span class="hljs-string">"/home /etc /var/www"</span>
DATE=$(date +%Y%m%d_%H%M%S)
BACKUP_FILE=<span class="hljs-string">"<span class="hljs-variable">$BACKUP_DIR</span>/system_backup_<span class="hljs-variable">$DATE</span>.tar.gz"</span>
LOG_FILE=<span class="hljs-string">"/var/log/backup.log"</span>

<span class="hljs-comment"># Create backup directory if it doesn't exist</span>
mkdir -p <span class="hljs-variable">$BACKUP_DIR</span>

<span class="hljs-comment"># Log start</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"[<span class="hljs-variable">$(date)</span>] Starting backup"</span> &gt;&gt; <span class="hljs-variable">$LOG_FILE</span>

<span class="hljs-comment"># Create compressed backup</span>
tar -czf <span class="hljs-variable">$BACKUP_FILE</span> <span class="hljs-variable">$SOURCE_DIRS</span> 2&gt;&gt;<span class="hljs-variable">$LOG_FILE</span>

<span class="hljs-keyword">if</span> [ $? -eq 0 ]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"[<span class="hljs-variable">$(date)</span>] Backup completed successfully: <span class="hljs-variable">$BACKUP_FILE</span>"</span> &gt;&gt; <span class="hljs-variable">$LOG_FILE</span>

    <span class="hljs-comment"># Remove backups older than 7 days</span>
    find <span class="hljs-variable">$BACKUP_DIR</span> -name <span class="hljs-string">"system_backup_*.tar.gz"</span> -mtime +7 -delete

    <span class="hljs-comment"># Send success notification</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Backup completed: <span class="hljs-variable">$BACKUP_FILE</span>"</span> | mail -s <span class="hljs-string">"Backup Success"</span> admin@example.com
<span class="hljs-keyword">else</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"[<span class="hljs-variable">$(date)</span>] Backup failed"</span> &gt;&gt; <span class="hljs-variable">$LOG_FILE</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Backup failed. Check <span class="hljs-variable">$LOG_FILE</span> for details"</span> | mail -s <span class="hljs-string">"Backup Failed"</span> admin@example.com
<span class="hljs-keyword">fi</span>
</div></code></pre>
<h2 id="%F0%9F%A7%A0-knowledge-check">üß† Knowledge Check</h2>
<h3 id="quick-quiz">Quick Quiz</h3>
<ol>
<li>
<p><strong>What's the difference between <code>apt remove</code> and <code>apt purge</code>?</strong></p>
<details>
<summary>Answer</summary>
<p><code>apt remove</code> uninstalls the package but keeps configuration files, while <code>apt purge</code> removes both the package and its configuration files.</p>
</details>
</li>
<li>
<p><strong>How do you make a filesystem mount automatically at boot?</strong></p>
<details>
<summary>Answer</summary>
<p>Add an entry to <code>/etc/fstab</code> with the appropriate mount options and run <code>sudo mount -a</code> to test.</p>
</details>
</li>
<li>
<p><strong>What does the cron expression <code>0 */6 * * *</code> mean?</strong></p>
<details>
<summary>Answer</summary>
<p>Run at minute 0 of every 6th hour (00:00, 06:00, 12:00, 18:00) every day.</p>
</details>
</li>
<li>
<p><strong>How do you check which package provides a specific file?</strong></p>
<details>
<summary>Answer</summary>
<pre class="hljs"><code><div>dpkg -S /path/to/file        <span class="hljs-comment"># Debian/Ubuntu</span>
rpm -qf /path/to/file        <span class="hljs-comment"># Red Hat/CentOS</span>
</div></code></pre>
</details>
</li>
</ol>
<h3 id="hands-on-challenges">Hands-On Challenges</h3>
<p><strong>Challenge 1: User Management System</strong></p>
<pre class="hljs"><code><div><span class="hljs-comment"># Create a script that:</span>
<span class="hljs-comment"># - Adds users from a CSV file</span>
<span class="hljs-comment"># - Sets up proper home directories</span>
<span class="hljs-comment"># - Assigns users to appropriate groups</span>
<span class="hljs-comment"># - Sets password policies</span>
<span class="hljs-comment"># - Generates a report of created users</span>
</div></code></pre>
<p><strong>Challenge 2: System Monitoring Dashboard</strong></p>
<pre class="hljs"><code><div><span class="hljs-comment"># Create a monitoring system that:</span>
<span class="hljs-comment"># - Checks disk usage, memory, and CPU</span>
<span class="hljs-comment"># - Monitors critical services</span>
<span class="hljs-comment"># - Sends alerts when thresholds are exceeded</span>
<span class="hljs-comment"># - Logs all activities</span>
<span class="hljs-comment"># - Runs automatically via cron</span>
</div></code></pre>
<p><strong>Challenge 3: Automated Backup Solution</strong></p>
<pre class="hljs"><code><div><span class="hljs-comment"># Design a backup system that:</span>
<span class="hljs-comment"># - Backs up multiple directories</span>
<span class="hljs-comment"># - Implements rotation (keep last 30 days)</span>
<span class="hljs-comment"># - Compresses and encrypts backups</span>
<span class="hljs-comment"># - Verifies backup integrity</span>
<span class="hljs-comment"># - Sends status notifications</span>
</div></code></pre>
<h2 id="%F0%9F%9A%80-next-steps">üöÄ Next Steps</h2>
<p>Excellent! You've mastered essential Linux system administration. You can now:</p>
<ul>
<li>Manage users and groups effectively</li>
<li>Handle package management across distributions</li>
<li>Monitor system resources and logs</li>
<li>Configure disks and filesystems</li>
<li>Implement basic security measures</li>
<li>Automate tasks with cron</li>
<li>Troubleshoot common system issues</li>
</ul>
<p><strong>Ready for advanced networking?</strong> Continue to <a href="07-ssh-remote-access.md">07-ssh-remote-access.md</a> to master secure remote access and administration.</p>
<hr>
<blockquote>
<p><strong>Pro Tip</strong>: Always test system changes in a non-production environment first. Keep regular backups, monitor system logs, and document your configurations. Automation is powerful, but always include error handling and logging in your scripts! üõ†Ô∏è</p>
</blockquote>
<h1 id="%F0%9F%94%90-ssh--remote-access-secure-system-administration">üîê SSH &amp; Remote Access: Secure System Administration</h1>
<blockquote>
<p><strong>Master secure remote access, file transfers, and advanced SSH techniques</strong></p>
</blockquote>
<h2 id="%F0%9F%93%96-what-youll-learn">üìñ What You'll Learn</h2>
<p>SSH (Secure Shell) is the cornerstone of secure remote system administration. This chapter covers everything from basic connections to advanced SSH techniques:</p>
<ul>
<li>SSH fundamentals and security principles</li>
<li>Key-based authentication setup</li>
<li>SSH configuration and hardening</li>
<li>Secure file transfers (SCP, SFTP, rsync)</li>
<li>SSH tunneling and port forwarding</li>
<li>SSH agent and key management</li>
<li>Remote command execution</li>
<li>Troubleshooting SSH connections</li>
</ul>
<h2 id="%F0%9F%8C%8D-why-this-matters">üåç Why This Matters</h2>
<p><strong>Critical applications:</strong></p>
<ul>
<li><strong>Remote Administration</strong>: Manage servers from anywhere securely</li>
<li><strong>DevOps</strong>: Deploy applications and manage infrastructure</li>
<li><strong>Security</strong>: Replace insecure protocols like Telnet and FTP</li>
<li><strong>Automation</strong>: Execute remote commands in scripts</li>
<li><strong>File Management</strong>: Transfer files securely between systems</li>
</ul>
<h2 id="%F0%9F%94%91-ssh-fundamentals">üîë SSH Fundamentals</h2>
<h3 id="basic-ssh-connection">Basic SSH Connection</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Basic connection</span>
$ ssh username@hostname
$ ssh user@192.168.1.100
$ ssh user@example.com

<span class="hljs-comment"># Connect with specific port</span>
$ ssh -p 2222 user@hostname

<span class="hljs-comment"># Connect with verbose output (debugging)</span>
$ ssh -v user@hostname
$ ssh -vv user@hostname     <span class="hljs-comment"># More verbose</span>
$ ssh -vvv user@hostname    <span class="hljs-comment"># Maximum verbosity</span>

<span class="hljs-comment"># Connect and execute command</span>
$ ssh user@hostname <span class="hljs-string">'ls -la'</span>
$ ssh user@hostname <span class="hljs-string">'df -h &amp;&amp; free -h'</span>

<span class="hljs-comment"># Connect with X11 forwarding (GUI apps)</span>
$ ssh -X user@hostname
$ ssh -Y user@hostname      <span class="hljs-comment"># Trusted X11 forwarding</span>

<span class="hljs-comment"># Example connection output:</span>
$ ssh john@192.168.1.100
The authenticity of host <span class="hljs-string">'192.168.1.100 (192.168.1.100)'</span> can<span class="hljs-string">'t be established.
ECDSA key fingerprint is SHA256:abc123def456...
Are you sure you want to continue connecting (yes/no/[fingerprint])? yes
Warning: Permanently added '</span>192.168.1.100<span class="hljs-string">' (ECDSA) to the list of known hosts.
john@192.168.1.100'</span>s password:
Last login: Mon Dec 15 10:30:15 2023 from 192.168.1.50
john@server:~$
</div></code></pre>
<h3 id="ssh-key-generation-and-management">SSH Key Generation and Management</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Generate SSH key pair (RSA)</span>
$ ssh-keygen -t rsa -b 4096 -C <span class="hljs-string">"your_email@example.com"</span>
Generating public/private rsa key pair.
Enter file <span class="hljs-keyword">in</span> <span class="hljs-built_in">which</span> to save the key (/home/user/.ssh/id_rsa):
Enter passphrase (empty <span class="hljs-keyword">for</span> no passphrase):
Enter same passphrase again:
Your identification has been saved <span class="hljs-keyword">in</span> /home/user/.ssh/id_rsa
Your public key has been saved <span class="hljs-keyword">in</span> /home/user/.ssh/id_rsa.pub

<span class="hljs-comment"># Generate Ed25519 key (more secure, recommended)</span>
$ ssh-keygen -t ed25519 -C <span class="hljs-string">"your_email@example.com"</span>

<span class="hljs-comment"># Generate key with custom filename</span>
$ ssh-keygen -t ed25519 -f ~/.ssh/server_key -C <span class="hljs-string">"server access key"</span>

<span class="hljs-comment"># List SSH keys</span>
$ ls -la ~/.ssh/
total 16
drwx------ 2 user user 4096 Dec 15 10:30 .
drwxr-xr-x 5 user user 4096 Dec 15 10:29 ..
-rw------- 1 user user  411 Dec 15 10:30 id_ed25519
-rw-r--r-- 1 user user   99 Dec 15 10:30 id_ed25519.pub
-rw-r--r-- 1 user user  222 Dec 15 10:25 known_hosts

<span class="hljs-comment"># View public key</span>
$ cat ~/.ssh/id_ed25519.pub
ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIGq... your_email@example.com

<span class="hljs-comment"># Copy public key to server</span>
$ ssh-copy-id user@hostname
$ ssh-copy-id -i ~/.ssh/id_ed25519.pub user@hostname

<span class="hljs-comment"># Manual key installation</span>
$ cat ~/.ssh/id_ed25519.pub | ssh user@hostname <span class="hljs-string">'mkdir -p ~/.ssh &amp;&amp; cat &gt;&gt; ~/.ssh/authorized_keys'</span>

<span class="hljs-comment"># Set proper permissions</span>
$ chmod 700 ~/.ssh
$ chmod 600 ~/.ssh/id_ed25519
$ chmod 644 ~/.ssh/id_ed25519.pub
$ chmod 600 ~/.ssh/authorized_keys
</div></code></pre>
<h3 id="ssh-configuration">SSH Configuration</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># User SSH config file</span>
$ nano ~/.ssh/config

<span class="hljs-comment"># Example configuration:</span>
Host server1
    HostName 192.168.1.100
    User john
    Port 2222
    IdentityFile ~/.ssh/server1_key
    IdentitiesOnly yes

Host *.example.com
    User admin
    Port 22
    IdentityFile ~/.ssh/company_key
    ForwardAgent yes

Host bastion
    HostName bastion.example.com
    User jumpuser
    Port 22
    IdentityFile ~/.ssh/bastion_key

Host internal-server
    HostName 10.0.1.100
    User admin
    ProxyJump bastion
    IdentityFile ~/.ssh/internal_key

<span class="hljs-comment"># Global SSH client config</span>
$ sudo nano /etc/ssh/ssh_config

<span class="hljs-comment"># Common client settings:</span>
Host *
    ServerAliveInterval 60
    ServerAliveCountMax 3
    TCPKeepAlive yes
    Compression yes
    ControlMaster auto
    ControlPath ~/.ssh/master-%r@%h:%p
    ControlPersist 10m

<span class="hljs-comment"># Connect using config</span>
$ ssh server1                <span class="hljs-comment"># Uses config settings</span>
$ ssh internal-server        <span class="hljs-comment"># Automatically uses bastion as jump host</span>
</div></code></pre>
<h2 id="%F0%9F%9B%A1%EF%B8%8F-ssh-server-configuration-and-hardening">üõ°Ô∏è SSH Server Configuration and Hardening</h2>
<h3 id="ssh-server-configuration">SSH Server Configuration</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Edit SSH server config</span>
$ sudo nano /etc/ssh/sshd_config

<span class="hljs-comment"># Security hardening settings:</span>
Port 2222                          <span class="hljs-comment"># Change default port</span>
Protocol 2                         <span class="hljs-comment"># Use SSH protocol 2 only</span>
PermitRootLogin no                 <span class="hljs-comment"># Disable root login</span>
PasswordAuthentication no          <span class="hljs-comment"># Disable password auth</span>
PubkeyAuthentication yes           <span class="hljs-comment"># Enable key-based auth</span>
AuthenticationMethods publickey    <span class="hljs-comment"># Require public key auth</span>
PermitEmptyPasswords no            <span class="hljs-comment"># No empty passwords</span>
MaxAuthTries 3                     <span class="hljs-comment"># Limit auth attempts</span>
MaxSessions 2                      <span class="hljs-comment"># Limit concurrent sessions</span>
MaxStartups 2                      <span class="hljs-comment"># Limit connection attempts</span>

<span class="hljs-comment"># User and group restrictions</span>
AllowUsers john jane admin        <span class="hljs-comment"># Only allow specific users</span>
DenyUsers guest nobody             <span class="hljs-comment"># Deny specific users</span>
AllowGroups ssh-users admin       <span class="hljs-comment"># Only allow specific groups</span>
DenyGroups guests                  <span class="hljs-comment"># Deny specific groups</span>

<span class="hljs-comment"># Network settings</span>
ListenAddress 0.0.0.0             <span class="hljs-comment"># Listen on all interfaces</span>
ListenAddress 192.168.1.100       <span class="hljs-comment"># Listen on specific IP</span>
AddressFamily inet                 <span class="hljs-comment"># IPv4 only (or inet6 for IPv6)</span>
TCPKeepAlive yes
ClientAliveInterval 300            <span class="hljs-comment"># Send keepalive every 5 minutes</span>
ClientAliveCountMax 2              <span class="hljs-comment"># Disconnect after 2 failed keepalives</span>

<span class="hljs-comment"># Logging</span>
LogLevel VERBOSE                   <span class="hljs-comment"># Detailed logging</span>
SyslogFacility AUTH               <span class="hljs-comment"># Log to auth facility</span>

<span class="hljs-comment"># Disable dangerous features</span>
X11Forwarding no                   <span class="hljs-comment"># Disable X11 forwarding</span>
AllowTcpForwarding no             <span class="hljs-comment"># Disable TCP forwarding</span>
GatewayPorts no                   <span class="hljs-comment"># Disable gateway ports</span>
PermitTunnel no                   <span class="hljs-comment"># Disable tunneling</span>

<span class="hljs-comment"># Banner and MOTD</span>
Banner /etc/ssh/banner            <span class="hljs-comment"># Display banner before login</span>
PrintMotd yes                     <span class="hljs-comment"># Show message of the day</span>

<span class="hljs-comment"># Restart SSH service after changes</span>
$ sudo systemctl restart sshd
$ sudo systemctl status sshd

<span class="hljs-comment"># Test configuration</span>
$ sudo sshd -t                    <span class="hljs-comment"># Test config syntax</span>
$ sudo sshd -T                    <span class="hljs-comment"># Show effective configuration</span>
</div></code></pre>
<h3 id="ssh-security-best-practices">SSH Security Best Practices</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Create SSH banner</span>
$ sudo nano /etc/ssh/banner
***************************************************************************
                    AUTHORIZED ACCESS ONLY
***************************************************************************
This system is <span class="hljs-keyword">for</span> authorized users only. All activities are monitored
and logged. Unauthorized access is prohibited and will be prosecuted.
***************************************************************************

<span class="hljs-comment"># Monitor SSH connections</span>
$ sudo tail -f /var/<span class="hljs-built_in">log</span>/auth.log | grep sshd
$ sudo journalctl -u sshd -f

<span class="hljs-comment"># Check failed login attempts</span>
$ sudo grep <span class="hljs-string">"Failed password"</span> /var/<span class="hljs-built_in">log</span>/auth.log
$ sudo lastb                      <span class="hljs-comment"># Show failed logins</span>

<span class="hljs-comment"># Check successful logins</span>
$ sudo last                       <span class="hljs-comment"># Show successful logins</span>
$ w                               <span class="hljs-comment"># Show current users</span>
$ who                             <span class="hljs-comment"># Show logged-in users</span>

<span class="hljs-comment"># Install and configure fail2ban</span>
$ sudo apt install fail2ban
$ sudo nano /etc/fail2ban/jail.local

[sshd]
enabled = <span class="hljs-literal">true</span>
port = 2222
filter = sshd
logpath = /var/<span class="hljs-built_in">log</span>/auth.log
maxretry = 3
bantime = 3600
findtime = 600

$ sudo systemctl restart fail2ban
$ sudo fail2ban-client status sshd
</div></code></pre>
<h2 id="%F0%9F%93%81-secure-file-transfers">üìÅ Secure File Transfers</h2>
<h3 id="scp-secure-copy">SCP (Secure Copy)</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Copy file to remote server</span>
$ scp file.txt user@hostname:/path/to/destination/
$ scp -P 2222 file.txt user@hostname:/home/user/  <span class="hljs-comment"># Custom port</span>

<span class="hljs-comment"># Copy file from remote server</span>
$ scp user@hostname:/path/to/file.txt ./
$ scp user@hostname:/path/to/file.txt /<span class="hljs-built_in">local</span>/path/

<span class="hljs-comment"># Copy directory recursively</span>
$ scp -r /<span class="hljs-built_in">local</span>/directory user@hostname:/remote/path/
$ scp -r user@hostname:/remote/directory ./

<span class="hljs-comment"># Copy with compression</span>
$ scp -C large_file.tar.gz user@hostname:/tmp/

<span class="hljs-comment"># Copy preserving permissions and timestamps</span>
$ scp -p file.txt user@hostname:/path/

<span class="hljs-comment"># Copy multiple files</span>
$ scp file1.txt file2.txt user@hostname:/path/
$ scp *.txt user@hostname:/path/

<span class="hljs-comment"># Copy with progress and verbose output</span>
$ scp -v file.txt user@hostname:/path/

<span class="hljs-comment"># Copy through jump host</span>
$ scp -o ProxyJump=bastion file.txt user@target:/path/
</div></code></pre>
<h3 id="sftp-ssh-file-transfer-protocol">SFTP (SSH File Transfer Protocol)</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Connect to SFTP server</span>
$ sftp user@hostname
$ sftp -P 2222 user@hostname      <span class="hljs-comment"># Custom port</span>

sftp&gt; <span class="hljs-built_in">help</span>                        <span class="hljs-comment"># Show available commands</span>
sftp&gt; <span class="hljs-built_in">pwd</span>                         <span class="hljs-comment"># Show remote working directory</span>
sftp&gt; lpwd                        <span class="hljs-comment"># Show local working directory</span>
sftp&gt; ls                          <span class="hljs-comment"># List remote files</span>
sftp&gt; lls                         <span class="hljs-comment"># List local files</span>
sftp&gt; <span class="hljs-built_in">cd</span> /path/to/directory       <span class="hljs-comment"># Change remote directory</span>
sftp&gt; lcd /<span class="hljs-built_in">local</span>/path             <span class="hljs-comment"># Change local directory</span>

<span class="hljs-comment"># File operations</span>
sftp&gt; get remote_file.txt         <span class="hljs-comment"># Download file</span>
sftp&gt; get -r remote_directory     <span class="hljs-comment"># Download directory recursively</span>
sftp&gt; put local_file.txt          <span class="hljs-comment"># Upload file</span>
sftp&gt; put -r local_directory      <span class="hljs-comment"># Upload directory recursively</span>
sftp&gt; mget *.txt                  <span class="hljs-comment"># Download multiple files</span>
sftp&gt; mput *.txt                  <span class="hljs-comment"># Upload multiple files</span>

<span class="hljs-comment"># File management</span>
sftp&gt; mkdir new_directory         <span class="hljs-comment"># Create remote directory</span>
sftp&gt; rmdir directory             <span class="hljs-comment"># Remove remote directory</span>
sftp&gt; rm file.txt                 <span class="hljs-comment"># Delete remote file</span>
sftp&gt; rename old.txt new.txt      <span class="hljs-comment"># Rename remote file</span>
sftp&gt; chmod 644 file.txt          <span class="hljs-comment"># Change remote file permissions</span>

sftp&gt; quit                        <span class="hljs-comment"># Exit SFTP</span>

<span class="hljs-comment"># Batch SFTP operations</span>
$ <span class="hljs-built_in">echo</span> -e <span class="hljs-string">"cd /remote/path\nput file.txt\nquit"</span> | sftp user@hostname

<span class="hljs-comment"># SFTP with script file</span>
$ nano sftp_commands.txt
<span class="hljs-built_in">cd</span> /remote/path
put *.txt
get *.<span class="hljs-built_in">log</span>
quit

$ sftp -b sftp_commands.txt user@hostname
</div></code></pre>
<h3 id="rsync-over-ssh">Rsync over SSH</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Basic rsync over SSH</span>
$ rsync -avz /<span class="hljs-built_in">local</span>/path/ user@hostname:/remote/path/
$ rsync -avz user@hostname:/remote/path/ /<span class="hljs-built_in">local</span>/path/

<span class="hljs-comment"># Rsync options explained:</span>
<span class="hljs-comment"># -a: archive mode (preserves permissions, timestamps, etc.)</span>
<span class="hljs-comment"># -v: verbose output</span>
<span class="hljs-comment"># -z: compress data during transfer</span>
<span class="hljs-comment"># -h: human-readable output</span>
<span class="hljs-comment"># -P: show progress and keep partial files</span>
<span class="hljs-comment"># --delete: delete files in destination that don't exist in source</span>

<span class="hljs-comment"># Sync with progress and delete</span>
$ rsync -avzP --delete /<span class="hljs-built_in">local</span>/path/ user@hostname:/remote/path/

<span class="hljs-comment"># Exclude files and directories</span>
$ rsync -avz --exclude=<span class="hljs-string">'*.log'</span> --exclude=<span class="hljs-string">'tmp/'</span> /<span class="hljs-built_in">local</span>/path/ user@hostname:/remote/path/

<span class="hljs-comment"># Dry run (test without making changes)</span>
$ rsync -avzn /<span class="hljs-built_in">local</span>/path/ user@hostname:/remote/path/

<span class="hljs-comment"># Rsync with custom SSH port</span>
$ rsync -avz -e <span class="hljs-string">'ssh -p 2222'</span> /<span class="hljs-built_in">local</span>/path/ user@hostname:/remote/path/

<span class="hljs-comment"># Rsync with bandwidth limit</span>
$ rsync -avz --bwlimit=1000 /<span class="hljs-built_in">local</span>/path/ user@hostname:/remote/path/

<span class="hljs-comment"># Backup script using rsync</span>
<span class="hljs-meta">#!/bin/bash</span>
SOURCE=<span class="hljs-string">"/home/user/documents"</span>
DEST=<span class="hljs-string">"backup@server:/backups/<span class="hljs-variable">$(hostname)</span>"</span>
LOGFILE=<span class="hljs-string">"/var/log/backup.log"</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"[<span class="hljs-variable">$(date)</span>] Starting backup"</span> &gt;&gt; <span class="hljs-variable">$LOGFILE</span>
rsync -avz --delete --<span class="hljs-built_in">log</span>-file=<span class="hljs-variable">$LOGFILE</span> <span class="hljs-variable">$SOURCE</span> <span class="hljs-variable">$DEST</span>
<span class="hljs-keyword">if</span> [ $? -eq 0 ]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"[<span class="hljs-variable">$(date)</span>] Backup completed successfully"</span> &gt;&gt; <span class="hljs-variable">$LOGFILE</span>
<span class="hljs-keyword">else</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"[<span class="hljs-variable">$(date)</span>] Backup failed"</span> &gt;&gt; <span class="hljs-variable">$LOGFILE</span>
<span class="hljs-keyword">fi</span>
</div></code></pre>
<h2 id="%F0%9F%8C%90-ssh-tunneling-and-port-forwarding">üåê SSH Tunneling and Port Forwarding</h2>
<h3 id="local-port-forwarding">Local Port Forwarding</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Forward local port to remote service</span>
$ ssh -L 8080:localhost:80 user@hostname
<span class="hljs-comment"># Access remote web server at http://localhost:8080</span>

<span class="hljs-comment"># Forward to different remote host</span>
$ ssh -L 3306:database.internal:3306 user@gateway
<span class="hljs-comment"># Access internal database at localhost:3306</span>

<span class="hljs-comment"># Multiple port forwards</span>
$ ssh -L 8080:web.internal:80 -L 3306:db.internal:3306 user@gateway

<span class="hljs-comment"># Background tunnel</span>
$ ssh -f -N -L 8080:localhost:80 user@hostname
<span class="hljs-comment"># -f: run in background</span>
<span class="hljs-comment"># -N: don't execute remote command</span>

<span class="hljs-comment"># Example: Access internal web application</span>
$ ssh -L 8080:intranet.company.com:80 user@gateway.company.com
<span class="hljs-comment"># Now browse to http://localhost:8080</span>
</div></code></pre>
<h3 id="remote-port-forwarding">Remote Port Forwarding</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Forward remote port to local service</span>
$ ssh -R 8080:localhost:80 user@hostname
<span class="hljs-comment"># Remote users can access your local web server via hostname:8080</span>

<span class="hljs-comment"># Forward to different local host</span>
$ ssh -R 3306:database.local:3306 user@remote

<span class="hljs-comment"># Example: Share local development server</span>
$ ssh -R 8080:localhost:3000 user@public-server
<span class="hljs-comment"># Others can access your dev server at public-server:8080</span>

<span class="hljs-comment"># Persistent remote tunnel</span>
$ ssh -f -N -R 8080:localhost:80 user@hostname
</div></code></pre>
<h3 id="dynamic-port-forwarding-socks-proxy">Dynamic Port Forwarding (SOCKS Proxy)</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Create SOCKS proxy</span>
$ ssh -D 1080 user@hostname
<span class="hljs-comment"># Configure browser to use localhost:1080 as SOCKS proxy</span>

<span class="hljs-comment"># Background SOCKS proxy</span>
$ ssh -f -N -D 1080 user@hostname

<span class="hljs-comment"># Use with curl</span>
$ curl --socks5 localhost:1080 http://internal.website.com

<span class="hljs-comment"># Configure Firefox for SOCKS proxy:</span>
<span class="hljs-comment"># Preferences &gt; Network Settings &gt; Manual proxy configuration</span>
<span class="hljs-comment"># SOCKS Host: localhost, Port: 1080, SOCKS v5</span>
</div></code></pre>
<h3 id="ssh-jump-hosts-proxyjump">SSH Jump Hosts (ProxyJump)</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Connect through jump host</span>
$ ssh -J jumphost user@target
$ ssh -J user1@jump1,user2@jump2 user@target  <span class="hljs-comment"># Multiple jumps</span>

<span class="hljs-comment"># Using ProxyCommand (older method)</span>
$ ssh -o ProxyCommand=<span class="hljs-string">"ssh -W %h:%p user@jumphost"</span> user@target

<span class="hljs-comment"># Configure in ~/.ssh/config</span>
Host target-server
    HostName 10.0.1.100
    User admin
    ProxyJump jumphost

Host jumphost
    HostName jump.example.com
    User jumpuser
    Port 22

<span class="hljs-comment"># Now simply:</span>
$ ssh target-server
</div></code></pre>
<h2 id="%F0%9F%94%A7-ssh-agent-and-key-management">üîß SSH Agent and Key Management</h2>
<h3 id="ssh-agent">SSH Agent</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Start SSH agent</span>
$ <span class="hljs-built_in">eval</span> $(ssh-agent)
Agent pid 12345

<span class="hljs-comment"># Add keys to agent</span>
$ ssh-add ~/.ssh/id_ed25519
Enter passphrase <span class="hljs-keyword">for</span> /home/user/.ssh/id_ed25519:
Identity added: /home/user/.ssh/id_ed25519 (user@hostname)

<span class="hljs-comment"># Add all keys</span>
$ ssh-add

<span class="hljs-comment"># List loaded keys</span>
$ ssh-add -l
256 SHA256:abc123... user@hostname (ED25519)

<span class="hljs-comment"># Remove key from agent</span>
$ ssh-add -d ~/.ssh/id_ed25519

<span class="hljs-comment"># Remove all keys</span>
$ ssh-add -D

<span class="hljs-comment"># Kill SSH agent</span>
$ ssh-agent -k

<span class="hljs-comment"># Auto-start SSH agent in ~/.bashrc</span>
<span class="hljs-keyword">if</span> [ -z <span class="hljs-string">"<span class="hljs-variable">$SSH_AUTH_SOCK</span>"</span> ]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">eval</span> $(ssh-agent -s)
    ssh-add ~/.ssh/id_ed25519
<span class="hljs-keyword">fi</span>
</div></code></pre>
<h3 id="ssh-agent-forwarding">SSH Agent Forwarding</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Enable agent forwarding</span>
$ ssh -A user@hostname

<span class="hljs-comment"># Configure in ~/.ssh/config</span>
Host *
    ForwardAgent yes

<span class="hljs-comment"># Test agent forwarding</span>
$ ssh server1
user@server1:~$ ssh server2  <span class="hljs-comment"># Uses forwarded agent</span>

<span class="hljs-comment"># Security note: Only use agent forwarding with trusted hosts</span>
</div></code></pre>
<h3 id="key-management-best-practices">Key Management Best Practices</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Use different keys for different purposes</span>
$ ssh-keygen -t ed25519 -f ~/.ssh/work_key -C <span class="hljs-string">"work access"</span>
$ ssh-keygen -t ed25519 -f ~/.ssh/personal_key -C <span class="hljs-string">"personal servers"</span>
$ ssh-keygen -t ed25519 -f ~/.ssh/github_key -C <span class="hljs-string">"github access"</span>

<span class="hljs-comment"># Configure specific keys in ~/.ssh/config</span>
Host work-server
    HostName work.example.com
    User admin
    IdentityFile ~/.ssh/work_key
    IdentitiesOnly yes

Host github.com
    User git
    IdentityFile ~/.ssh/github_key
    IdentitiesOnly yes

<span class="hljs-comment"># Rotate keys regularly</span>
$ ssh-keygen -t ed25519 -f ~/.ssh/new_key
$ ssh-copy-id -i ~/.ssh/new_key.pub user@hostname
<span class="hljs-comment"># Test new key, then remove old key from server</span>

<span class="hljs-comment"># Backup keys securely</span>
$ tar -czf ssh_keys_backup.tar.gz ~/.ssh/
$ gpg -c ssh_keys_backup.tar.gz  <span class="hljs-comment"># Encrypt backup</span>
</div></code></pre>
<h2 id="%F0%9F%94%8D-troubleshooting-ssh">üîç Troubleshooting SSH</h2>
<h3 id="common-ssh-issues">Common SSH Issues</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Connection refused</span>
$ ssh -v user@hostname
<span class="hljs-comment"># Check if SSH service is running on target</span>
$ sudo systemctl status sshd
$ sudo netstat -tlnp | grep :22

<span class="hljs-comment"># Permission denied (publickey)</span>
<span class="hljs-comment"># Check key permissions</span>
$ ls -la ~/.ssh/
$ chmod 700 ~/.ssh
$ chmod 600 ~/.ssh/id_ed25519
$ chmod 644 ~/.ssh/id_ed25519.pub

<span class="hljs-comment"># Check server-side authorized_keys</span>
$ ssh user@hostname
$ ls -la ~/.ssh/authorized_keys
$ chmod 600 ~/.ssh/authorized_keys

<span class="hljs-comment"># Host key verification failed</span>
$ ssh-keygen -R hostname        <span class="hljs-comment"># Remove old host key</span>
$ ssh-keyscan hostname &gt;&gt; ~/.ssh/known_hosts  <span class="hljs-comment"># Add new key</span>

<span class="hljs-comment"># Connection timeout</span>
<span class="hljs-comment"># Check firewall rules</span>
$ sudo ufw status
$ sudo iptables -L

<span class="hljs-comment"># Check network connectivity</span>
$ ping hostname
$ telnet hostname 22
$ nmap -p 22 hostname

<span class="hljs-comment"># Too many authentication failures</span>
$ ssh -o IdentitiesOnly=yes -i ~/.ssh/specific_key user@hostname

<span class="hljs-comment"># Debug SSH connection</span>
$ ssh -vvv user@hostname 2&gt;&amp;1 | tee ssh_debug.log
</div></code></pre>
<h3 id="ssh-server-troubleshooting">SSH Server Troubleshooting</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Check SSH server configuration</span>
$ sudo sshd -t                  <span class="hljs-comment"># Test config syntax</span>
$ sudo sshd -T                  <span class="hljs-comment"># Show effective config</span>

<span class="hljs-comment"># Check SSH server logs</span>
$ sudo journalctl -u sshd -f
$ sudo tail -f /var/<span class="hljs-built_in">log</span>/auth.log | grep sshd

<span class="hljs-comment"># Check listening ports</span>
$ sudo netstat -tlnp | grep sshd
$ sudo ss -tlnp | grep sshd

<span class="hljs-comment"># Restart SSH service</span>
$ sudo systemctl restart sshd
$ sudo systemctl status sshd

<span class="hljs-comment"># Check SSH process</span>
$ ps aux | grep sshd

<span class="hljs-comment"># Test SSH from localhost</span>
$ ssh localhost
$ ssh -p 22 127.0.0.1
</div></code></pre>
<h3 id="network-diagnostics">Network Diagnostics</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Test SSH port connectivity</span>
$ nc -zv hostname 22
$ telnet hostname 22
$ nmap -p 22 hostname

<span class="hljs-comment"># Trace route to SSH server</span>
$ traceroute hostname
$ mtr hostname

<span class="hljs-comment"># Check DNS resolution</span>
$ nslookup hostname
$ dig hostname

<span class="hljs-comment"># Test with different SSH client options</span>
$ ssh -o ConnectTimeout=10 user@hostname
$ ssh -o ServerAliveInterval=60 user@hostname
$ ssh -4 user@hostname          <span class="hljs-comment"># Force IPv4</span>
$ ssh -6 user@hostname          <span class="hljs-comment"># Force IPv6</span>
</div></code></pre>
<h2 id="%F0%9F%A7%A0-knowledge-check">üß† Knowledge Check</h2>
<h3 id="quick-quiz">Quick Quiz</h3>
<ol>
<li>
<p><strong>What's the difference between SSH local and remote port forwarding?</strong></p>
<details>
<summary>Answer</summary>
<p>Local forwarding (<code>-L</code>) forwards a local port to a remote service, while remote forwarding (<code>-R</code>) forwards a remote port to a local service.</p>
</details>
</li>
<li>
<p><strong>How do you create an SSH tunnel that runs in the background?</strong></p>
<details>
<summary>Answer</summary>
<p>Use <code>ssh -f -N -L localport:remotehost:remoteport user@hostname</code> where <code>-f</code> runs in background and <code>-N</code> doesn't execute commands.</p>
</details>
</li>
<li>
<p><strong>What's the most secure SSH key type to use?</strong></p>
<details>
<summary>Answer</summary>
<p>Ed25519 (<code>ssh-keygen -t ed25519</code>) is currently the most secure and efficient option.</p>
</details>
</li>
<li>
<p><strong>How do you disable password authentication and only allow key-based auth?</strong></p>
<details>
<summary>Answer</summary>
<p>Set <code>PasswordAuthentication no</code> and <code>PubkeyAuthentication yes</code> in <code>/etc/ssh/sshd_config</code>, then restart sshd.</p>
</details>
</li>
</ol>
<h3 id="hands-on-challenges">Hands-On Challenges</h3>
<p><strong>Challenge 1: SSH Hardening</strong></p>
<pre class="hljs"><code><div><span class="hljs-comment"># Secure an SSH server by:</span>
<span class="hljs-comment"># - Changing the default port</span>
<span class="hljs-comment"># - Disabling root login</span>
<span class="hljs-comment"># - Setting up key-based authentication only</span>
<span class="hljs-comment"># - Configuring fail2ban</span>
<span class="hljs-comment"># - Setting up proper logging and monitoring</span>
</div></code></pre>
<p><strong>Challenge 2: SSH Tunnel Setup</strong></p>
<pre class="hljs"><code><div><span class="hljs-comment"># Create a setup where:</span>
<span class="hljs-comment"># - You access an internal web application through SSH tunnel</span>
<span class="hljs-comment"># - Set up a SOCKS proxy for browsing internal networks</span>
<span class="hljs-comment"># - Configure persistent tunnels that auto-reconnect</span>
<span class="hljs-comment"># - Use jump hosts to reach internal servers</span>
</div></code></pre>
<p><strong>Challenge 3: Automated File Sync</strong></p>
<pre class="hljs"><code><div><span class="hljs-comment"># Create a system that:</span>
<span class="hljs-comment"># - Syncs files between multiple servers using rsync over SSH</span>
<span class="hljs-comment"># - Implements proper error handling and logging</span>
<span class="hljs-comment"># - Runs automatically via cron</span>
<span class="hljs-comment"># - Sends notifications on success/failure</span>
<span class="hljs-comment"># - Handles network interruptions gracefully</span>
</div></code></pre>
<h2 id="%F0%9F%9A%80-next-steps">üöÄ Next Steps</h2>
<p>Excellent! You've mastered SSH and secure remote access. You can now:</p>
<ul>
<li>Set up secure SSH connections with key-based authentication</li>
<li>Configure and harden SSH servers</li>
<li>Transfer files securely using SCP, SFTP, and rsync</li>
<li>Create SSH tunnels for secure access to internal services</li>
<li>Troubleshoot SSH connection issues</li>
<li>Manage SSH keys and agents effectively</li>
</ul>
<p><strong>Ready for web services?</strong> Continue to <a href="08-web-services.md">08-web-services.md</a> to learn about setting up and managing web servers and services.</p>
<hr>
<blockquote>
<p><strong>Pro Tip</strong>: Always use key-based authentication, keep your SSH keys secure, and regularly rotate them. Use SSH agent forwarding carefully and only with trusted hosts. Monitor SSH logs for security threats and implement proper access controls! üîê</p>
</blockquote>
<h1 id="%F0%9F%8C%90-web-services-http-https-and-server-management">üåê Web Services: HTTP, HTTPS, and Server Management</h1>
<blockquote>
<p><strong>Master web server setup, SSL/TLS configuration, and HTTP protocol fundamentals</strong></p>
</blockquote>
<h2 id="%F0%9F%93%96-what-youll-learn">üìñ What You'll Learn</h2>
<p>Web services are the backbone of modern internet infrastructure. This chapter covers everything from basic HTTP concepts to advanced web server management:</p>
<ul>
<li>HTTP/HTTPS protocol fundamentals</li>
<li>Web server installation and configuration (Apache, Nginx)</li>
<li>SSL/TLS certificate management</li>
<li>Virtual hosts and domain configuration</li>
<li>Load balancing and reverse proxying</li>
<li>Web server security and hardening</li>
<li>Performance optimization</li>
<li>Troubleshooting web services</li>
</ul>
<h2 id="%F0%9F%8C%8D-why-this-matters">üåç Why This Matters</h2>
<p><strong>Critical applications:</strong></p>
<ul>
<li><strong>Web Development</strong>: Host websites and web applications</li>
<li><strong>API Services</strong>: Serve REST APIs and microservices</li>
<li><strong>Content Delivery</strong>: Serve static and dynamic content efficiently</li>
<li><strong>Security</strong>: Implement HTTPS and secure web communications</li>
<li><strong>DevOps</strong>: Deploy and manage web infrastructure</li>
</ul>
<h2 id="%F0%9F%94%97-httphttps-protocol-fundamentals">üîó HTTP/HTTPS Protocol Fundamentals</h2>
<h3 id="understanding-http">Understanding HTTP</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Basic HTTP request with curl</span>
$ curl -v http://example.com
* Trying 93.184.216.34:80...
* Connected to example.com (93.184.216.34) port 80 (<span class="hljs-comment">#0)</span>
&gt; GET / HTTP/1.1
&gt; Host: example.com
&gt; User-Agent: curl/7.68.0
&gt; Accept: */*
&gt;
&lt; HTTP/1.1 200 OK
&lt; Content-Type: text/html; charset=UTF-8
&lt; Content-Length: 1256
&lt; Server: ECS (dcb/7F83)
&lt;
&lt;!doctype html&gt;
&lt;html&gt;
...

<span class="hljs-comment"># HTTP methods demonstration</span>
$ curl -X GET http://api.example.com/users
$ curl -X POST -H <span class="hljs-string">"Content-Type: application/json"</span> -d <span class="hljs-string">'{"name":"John"}'</span> http://api.example.com/users
$ curl -X PUT -H <span class="hljs-string">"Content-Type: application/json"</span> -d <span class="hljs-string">'{"name":"Jane"}'</span> http://api.example.com/users/1
$ curl -X DELETE http://api.example.com/users/1

<span class="hljs-comment"># HTTP headers</span>
$ curl -H <span class="hljs-string">"Authorization: Bearer token123"</span> http://api.example.com/protected
$ curl -H <span class="hljs-string">"Accept: application/json"</span> http://api.example.com/data
$ curl -H <span class="hljs-string">"User-Agent: MyApp/1.0"</span> http://example.com

<span class="hljs-comment"># View response headers only</span>
$ curl -I http://example.com
HTTP/1.1 200 OK
Content-Type: text/html; charset=UTF-8
Content-Length: 1256
Server: ECS (dcb/7F83)
Date: Mon, 15 Dec 2023 10:30:00 GMT
Last-Modified: Thu, 17 Oct 2019 07:18:26 GMT
ETag: <span class="hljs-string">"3147526947+gzip"</span>
Expires: Mon, 22 Dec 2023 10:30:00 GMT
Cache-Control: max-age=604800

<span class="hljs-comment"># HTTP status codes</span>
$ curl -w <span class="hljs-string">"%{http_code}"</span> -s -o /dev/null http://example.com
200

$ curl -w <span class="hljs-string">"%{http_code}"</span> -s -o /dev/null http://example.com/nonexistent
404
</div></code></pre>
<h3 id="https-and-ssltls">HTTPS and SSL/TLS</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># HTTPS request</span>
$ curl -v https://example.com
* TLSv1.3 (OUT), TLS handshake, Client hello (1):
* TLSv1.3 (IN), TLS handshake, Server hello (2):
* TLSv1.3 (IN), TLS handshake, Encrypted Extensions (8):
* TLSv1.3 (IN), TLS handshake, Certificate (11):
* TLSv1.3 (IN), TLS handshake, CERT verify (15):
* TLSv1.3 (IN), TLS handshake, Finished (20):
* TLSv1.3 (OUT), TLS handshake, Finished (20):
* SSL connection using TLSv1.3 / TLS_AES_256_GCM_SHA384

<span class="hljs-comment"># Check SSL certificate</span>
$ openssl s_client -connect example.com:443 -servername example.com
$ openssl s_client -connect example.com:443 -showcerts

<span class="hljs-comment"># Check certificate expiration</span>
$ <span class="hljs-built_in">echo</span> | openssl s_client -connect example.com:443 2&gt;/dev/null | openssl x509 -noout -dates
notBefore=Oct 22 12:00:00 2023 GMT
notAfter=Oct 22 12:00:00 2024 GMT

<span class="hljs-comment"># Test SSL configuration</span>
$ curl --tlsv1.2 https://example.com
$ curl --tlsv1.3 https://example.com

<span class="hljs-comment"># Ignore SSL certificate errors (for testing)</span>
$ curl -k https://self-signed.example.com
$ curl --insecure https://self-signed.example.com
</div></code></pre>
<h2 id="%F0%9F%94%A7-apache-web-server">üîß Apache Web Server</h2>
<h3 id="apache-installation-and-basic-configuration">Apache Installation and Basic Configuration</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Install Apache</span>
$ sudo apt update
$ sudo apt install apache2

<span class="hljs-comment"># Start and enable Apache</span>
$ sudo systemctl start apache2
$ sudo systemctl <span class="hljs-built_in">enable</span> apache2
$ sudo systemctl status apache2

<span class="hljs-comment"># Check Apache version</span>
$ apache2 -v
Server version: Apache/2.4.41 (Ubuntu)
Server built:   2023-10-10T19:35:51

<span class="hljs-comment"># Test Apache installation</span>
$ curl http://localhost
$ curl http://$(hostname -I | awk <span class="hljs-string">'{print $1}'</span>)

<span class="hljs-comment"># Apache configuration files</span>
/etc/apache2/
‚îú‚îÄ‚îÄ apache2.conf          <span class="hljs-comment"># Main configuration</span>
‚îú‚îÄ‚îÄ sites-available/      <span class="hljs-comment"># Available sites</span>
‚îú‚îÄ‚îÄ sites-enabled/        <span class="hljs-comment"># Enabled sites</span>
‚îú‚îÄ‚îÄ mods-available/       <span class="hljs-comment"># Available modules</span>
‚îú‚îÄ‚îÄ mods-enabled/         <span class="hljs-comment"># Enabled modules</span>
‚îú‚îÄ‚îÄ conf-available/       <span class="hljs-comment"># Available configurations</span>
‚îî‚îÄ‚îÄ conf-enabled/         <span class="hljs-comment"># Enabled configurations</span>

<span class="hljs-comment"># Enable/disable sites</span>
$ sudo a2ensite default-ssl
$ sudo a2dissite 000-default
$ sudo systemctl reload apache2

<span class="hljs-comment"># Enable/disable modules</span>
$ sudo a2enmod ssl
$ sudo a2enmod rewrite
$ sudo a2dismod autoindex
$ sudo systemctl reload apache2

<span class="hljs-comment"># Check enabled modules</span>
$ apache2ctl -M
</div></code></pre>
<h3 id="apache-virtual-hosts">Apache Virtual Hosts</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Create virtual host configuration</span>
$ sudo nano /etc/apache2/sites-available/example.com.conf

&lt;VirtualHost *:80&gt;
    ServerName example.com
    ServerAlias www.example.com
    DocumentRoot /var/www/example.com
    ErrorLog <span class="hljs-variable">${APACHE_LOG_DIR}</span>/example.com_error.log
    CustomLog <span class="hljs-variable">${APACHE_LOG_DIR}</span>/example.com_access.log combined

    &lt;Directory /var/www/example.com&gt;
        Options -Indexes +FollowSymLinks
        AllowOverride All
        Require all granted
    &lt;/Directory&gt;
&lt;/VirtualHost&gt;

<span class="hljs-comment"># HTTPS virtual host</span>
$ sudo nano /etc/apache2/sites-available/example.com-ssl.conf

&lt;VirtualHost *:443&gt;
    ServerName example.com
    ServerAlias www.example.com
    DocumentRoot /var/www/example.com

    SSLEngine on
    SSLCertificateFile /etc/ssl/certs/example.com.crt
    SSLCertificateKeyFile /etc/ssl/private/example.com.key
    SSLCertificateChainFile /etc/ssl/certs/example.com-chain.crt

    <span class="hljs-comment"># Security headers</span>
    Header always <span class="hljs-built_in">set</span> Strict-Transport-Security <span class="hljs-string">"max-age=31536000; includeSubDomains"</span>
    Header always <span class="hljs-built_in">set</span> X-Content-Type-Options nosniff
    Header always <span class="hljs-built_in">set</span> X-Frame-Options DENY
    Header always <span class="hljs-built_in">set</span> X-XSS-Protection <span class="hljs-string">"1; mode=block"</span>

    ErrorLog <span class="hljs-variable">${APACHE_LOG_DIR}</span>/example.com_ssl_error.log
    CustomLog <span class="hljs-variable">${APACHE_LOG_DIR}</span>/example.com_ssl_access.log combined
&lt;/VirtualHost&gt;

<span class="hljs-comment"># Create document root</span>
$ sudo mkdir -p /var/www/example.com
$ sudo chown -R www-data:www-data /var/www/example.com
$ sudo chmod -R 755 /var/www/example.com

<span class="hljs-comment"># Create test page</span>
$ sudo nano /var/www/example.com/index.html
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Welcome to example.com&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;Hello from example.com!&lt;/h1&gt;
    &lt;p&gt;This is a <span class="hljs-built_in">test</span> page.&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;

<span class="hljs-comment"># Enable site</span>
$ sudo a2ensite example.com
$ sudo systemctl reload apache2
</div></code></pre>
<h3 id="apache-security-and-performance">Apache Security and Performance</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Security configuration</span>
$ sudo nano /etc/apache2/conf-available/security.conf

<span class="hljs-comment"># Hide Apache version</span>
ServerTokens Prod
ServerSignature Off

<span class="hljs-comment"># Disable server-info and server-status</span>
&lt;Location <span class="hljs-string">"/server-info"</span>&gt;
    Require all denied
&lt;/Location&gt;

&lt;Location <span class="hljs-string">"/server-status"</span>&gt;
    Require all denied
&lt;/Location&gt;

<span class="hljs-comment"># Prevent access to .htaccess files</span>
&lt;FilesMatch <span class="hljs-string">"^\.ht"</span>&gt;
    Require all denied
&lt;/FilesMatch&gt;

<span class="hljs-comment"># Enable security configuration</span>
$ sudo a2enconf security
$ sudo systemctl reload apache2

<span class="hljs-comment"># Performance tuning</span>
$ sudo nano /etc/apache2/mods-available/mpm_prefork.conf

&lt;IfModule mpm_prefork_module&gt;
    StartServers             4
    MinSpareServers          20
    MaxSpareServers          40
    MaxRequestWorkers        200
    MaxConnectionsPerChild   4500
&lt;/IfModule&gt;

<span class="hljs-comment"># Enable compression</span>
$ sudo a2enmod deflate
$ sudo nano /etc/apache2/mods-available/deflate.conf

&lt;IfModule mod_deflate.c&gt;
    AddOutputFilterByType DEFLATE text/plain
    AddOutputFilterByType DEFLATE text/html
    AddOutputFilterByType DEFLATE text/xml
    AddOutputFilterByType DEFLATE text/css
    AddOutputFilterByType DEFLATE application/xml
    AddOutputFilterByType DEFLATE application/xhtml+xml
    AddOutputFilterByType DEFLATE application/rss+xml
    AddOutputFilterByType DEFLATE application/javascript
    AddOutputFilterByType DEFLATE application/x-javascript
&lt;/IfModule&gt;

<span class="hljs-comment"># Enable caching</span>
$ sudo a2enmod expires
$ sudo a2enmod headers
$ sudo nano /etc/apache2/mods-available/expires.conf

&lt;IfModule mod_expires.c&gt;
    ExpiresActive On
    ExpiresByType text/css <span class="hljs-string">"access plus 1 month"</span>
    ExpiresByType application/javascript <span class="hljs-string">"access plus 1 month"</span>
    ExpiresByType image/png <span class="hljs-string">"access plus 1 year"</span>
    ExpiresByType image/jpg <span class="hljs-string">"access plus 1 year"</span>
    ExpiresByType image/jpeg <span class="hljs-string">"access plus 1 year"</span>
    ExpiresByType image/gif <span class="hljs-string">"access plus 1 year"</span>
    ExpiresByType image/ico <span class="hljs-string">"access plus 1 year"</span>
&lt;/IfModule&gt;
</div></code></pre>
<h2 id="%E2%9A%A1-nginx-web-server">‚ö° Nginx Web Server</h2>
<h3 id="nginx-installation-and-basic-configuration">Nginx Installation and Basic Configuration</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Install Nginx</span>
$ sudo apt update
$ sudo apt install nginx

<span class="hljs-comment"># Start and enable Nginx</span>
$ sudo systemctl start nginx
$ sudo systemctl <span class="hljs-built_in">enable</span> nginx
$ sudo systemctl status nginx

<span class="hljs-comment"># Check Nginx version</span>
$ nginx -v
nginx version: nginx/1.18.0 (Ubuntu)

<span class="hljs-comment"># Test Nginx configuration</span>
$ sudo nginx -t
nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
nginx: configuration file /etc/nginx/nginx.conf <span class="hljs-built_in">test</span> is successful

<span class="hljs-comment"># Reload Nginx configuration</span>
$ sudo systemctl reload nginx
$ sudo nginx -s reload

<span class="hljs-comment"># Nginx configuration structure</span>
/etc/nginx/
‚îú‚îÄ‚îÄ nginx.conf            <span class="hljs-comment"># Main configuration</span>
‚îú‚îÄ‚îÄ sites-available/      <span class="hljs-comment"># Available sites</span>
‚îú‚îÄ‚îÄ sites-enabled/        <span class="hljs-comment"># Enabled sites (symlinks)</span>
‚îú‚îÄ‚îÄ conf.d/              <span class="hljs-comment"># Additional configurations</span>
‚îî‚îÄ‚îÄ snippets/            <span class="hljs-comment"># Configuration snippets</span>
</div></code></pre>
<h3 id="nginx-server-blocks-virtual-hosts">Nginx Server Blocks (Virtual Hosts)</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Create server block configuration</span>
$ sudo nano /etc/nginx/sites-available/example.com

server {
    listen 80;
    listen [::]:80;
    server_name example.com www.example.com;
    root /var/www/example.com;
    index index.html index.htm index.nginx-debian.html;

    location / {
        try_files <span class="hljs-variable">$uri</span> <span class="hljs-variable">$uri</span>/ =404;
    }

    <span class="hljs-comment"># Security headers</span>
    add_header X-Frame-Options <span class="hljs-string">"SAMEORIGIN"</span> always;
    add_header X-XSS-Protection <span class="hljs-string">"1; mode=block"</span> always;
    add_header X-Content-Type-Options <span class="hljs-string">"nosniff"</span> always;
    add_header Referrer-Policy <span class="hljs-string">"no-referrer-when-downgrade"</span> always;
    add_header Content-Security-Policy <span class="hljs-string">"default-src 'self' http: https: data: blob: 'unsafe-inline'"</span> always;

    <span class="hljs-comment"># Gzip compression</span>
    gzip on;
    gzip_vary on;
    gzip_min_length 1024;
    gzip_proxied expired no-cache no-store private must-revalidate auth;
    gzip_types text/plain text/css text/xml text/javascript application/x-javascript application/xml+rss;

    <span class="hljs-comment"># Logging</span>
    access_log /var/<span class="hljs-built_in">log</span>/nginx/example.com.access.log;
    error_log /var/<span class="hljs-built_in">log</span>/nginx/example.com.error.log;
}

<span class="hljs-comment"># HTTPS server block</span>
$ sudo nano /etc/nginx/sites-available/example.com-ssl

server {
    listen 443 ssl http2;
    listen [::]:443 ssl http2;
    server_name example.com www.example.com;
    root /var/www/example.com;
    index index.html index.htm;

    <span class="hljs-comment"># SSL configuration</span>
    ssl_certificate /etc/ssl/certs/example.com.crt;
    ssl_certificate_key /etc/ssl/private/example.com.key;
    ssl_session_timeout 1d;
    ssl_session_cache shared:MozTLS:10m;
    ssl_session_tickets off;

    <span class="hljs-comment"># Modern configuration</span>
    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384;
    ssl_prefer_server_ciphers off;

    <span class="hljs-comment"># HSTS</span>
    add_header Strict-Transport-Security <span class="hljs-string">"max-age=63072000"</span> always;

    location / {
        try_files <span class="hljs-variable">$uri</span> <span class="hljs-variable">$uri</span>/ =404;
    }

    access_log /var/<span class="hljs-built_in">log</span>/nginx/example.com-ssl.access.log;
    error_log /var/<span class="hljs-built_in">log</span>/nginx/example.com-ssl.error.log;
}

<span class="hljs-comment"># Redirect HTTP to HTTPS</span>
server {
    listen 80;
    listen [::]:80;
    server_name example.com www.example.com;
    <span class="hljs-built_in">return</span> 301 https://<span class="hljs-variable">$server_name</span><span class="hljs-variable">$request_uri</span>;
}

<span class="hljs-comment"># Enable site</span>
$ sudo ln -s /etc/nginx/sites-available/example.com /etc/nginx/sites-enabled/
$ sudo nginx -t
$ sudo systemctl reload nginx
</div></code></pre>
<h3 id="nginx-as-reverse-proxy">Nginx as Reverse Proxy</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Reverse proxy configuration</span>
$ sudo nano /etc/nginx/sites-available/app.example.com

upstream backend {
    server 127.0.0.1:3000;
    server 127.0.0.1:3001;
    server 127.0.0.1:3002;
}

server {
    listen 80;
    server_name app.example.com;

    location / {
        proxy_pass http://backend;
        proxy_http_version 1.1;
        proxy_set_header Upgrade <span class="hljs-variable">$http_upgrade</span>;
        proxy_set_header Connection <span class="hljs-string">'upgrade'</span>;
        proxy_set_header Host <span class="hljs-variable">$host</span>;
        proxy_set_header X-Real-IP <span class="hljs-variable">$remote_addr</span>;
        proxy_set_header X-Forwarded-For <span class="hljs-variable">$proxy_add_x_forwarded_for</span>;
        proxy_set_header X-Forwarded-Proto <span class="hljs-variable">$scheme</span>;
        proxy_cache_bypass <span class="hljs-variable">$http_upgrade</span>;

        <span class="hljs-comment"># Timeouts</span>
        proxy_connect_timeout 60s;
        proxy_send_timeout 60s;
        proxy_read_timeout 60s;
    }

    <span class="hljs-comment"># Static files</span>
    location /static/ {
        <span class="hljs-built_in">alias</span> /var/www/app/static/;
        expires 1y;
        add_header Cache-Control <span class="hljs-string">"public, immutable"</span>;
    }

    <span class="hljs-comment"># API rate limiting</span>
    location /api/ {
        limit_req zone=api burst=10 nodelay;
        proxy_pass http://backend;
        <span class="hljs-comment"># ... other proxy settings</span>
    }
}

<span class="hljs-comment"># Rate limiting configuration</span>
$ sudo nano /etc/nginx/nginx.conf

http {
    <span class="hljs-comment"># Rate limiting</span>
    limit_req_zone <span class="hljs-variable">$binary_remote_addr</span> zone=api:10m rate=10r/s;
    limit_req_zone <span class="hljs-variable">$binary_remote_addr</span> zone=login:10m rate=1r/s;

    <span class="hljs-comment"># Connection limiting</span>
    limit_conn_zone <span class="hljs-variable">$binary_remote_addr</span> zone=conn_limit_per_ip:10m;
    limit_conn conn_limit_per_ip 20;

    <span class="hljs-comment"># ... rest of configuration</span>
}
</div></code></pre>
<h2 id="%F0%9F%94%92-ssltls-certificate-management">üîí SSL/TLS Certificate Management</h2>
<h3 id="lets-encrypt-with-certbot">Let's Encrypt with Certbot</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Install Certbot</span>
$ sudo apt install certbot python3-certbot-apache  <span class="hljs-comment"># For Apache</span>
$ sudo apt install certbot python3-certbot-nginx   <span class="hljs-comment"># For Nginx</span>

<span class="hljs-comment"># Obtain certificate (Apache)</span>
$ sudo certbot --apache -d example.com -d www.example.com

<span class="hljs-comment"># Obtain certificate (Nginx)</span>
$ sudo certbot --nginx -d example.com -d www.example.com

<span class="hljs-comment"># Manual certificate generation</span>
$ sudo certbot certonly --standalone -d example.com -d www.example.com
$ sudo certbot certonly --webroot -w /var/www/example.com -d example.com

<span class="hljs-comment"># List certificates</span>
$ sudo certbot certificates
Found the following certs:
  Certificate Name: example.com
    Serial Number: 3a2b1c4d5e6f7890abcdef1234567890
    Key Type: RSA
    Domains: example.com www.example.com
    Expiry Date: 2024-03-15 10:30:00+00:00 (VALID: 89 days)
    Certificate Path: /etc/letsencrypt/live/example.com/fullchain.pem
    Private Key Path: /etc/letsencrypt/live/example.com/privkey.pem

<span class="hljs-comment"># Renew certificates</span>
$ sudo certbot renew
$ sudo certbot renew --dry-run  <span class="hljs-comment"># Test renewal</span>

<span class="hljs-comment"># Auto-renewal with cron</span>
$ sudo crontab -e
0 12 * * * /usr/bin/certbot renew --quiet

<span class="hljs-comment"># Revoke certificate</span>
$ sudo certbot revoke --cert-path /etc/letsencrypt/live/example.com/cert.pem
</div></code></pre>
<h3 id="self-signed-certificates">Self-Signed Certificates</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Generate private key</span>
$ sudo openssl genrsa -out /etc/ssl/private/example.com.key 2048

<span class="hljs-comment"># Generate certificate signing request</span>
$ sudo openssl req -new -key /etc/ssl/private/example.com.key -out /tmp/example.com.csr
Country Name (2 letter code) [AU]: US
State or Province Name (full name) [Some-State]: California
Locality Name (eg, city) []: San Francisco
Organization Name (eg, company) [Internet Widgits Pty Ltd]: Example Corp
Organizational Unit Name (eg, section) []: IT Department
Common Name (e.g. server FQDN or YOUR name) []: example.com
Email Address []: admin@example.com

<span class="hljs-comment"># Generate self-signed certificate</span>
$ sudo openssl x509 -req -days 365 -<span class="hljs-keyword">in</span> /tmp/example.com.csr -signkey /etc/ssl/private/example.com.key -out /etc/ssl/certs/example.com.crt

<span class="hljs-comment"># Generate certificate and key in one command</span>
$ sudo openssl req -x509 -nodes -days 365 -newkey rsa:2048 -keyout /etc/ssl/private/example.com.key -out /etc/ssl/certs/example.com.crt

<span class="hljs-comment"># Set proper permissions</span>
$ sudo chmod 600 /etc/ssl/private/example.com.key
$ sudo chmod 644 /etc/ssl/certs/example.com.crt

<span class="hljs-comment"># Verify certificate</span>
$ openssl x509 -<span class="hljs-keyword">in</span> /etc/ssl/certs/example.com.crt -text -noout
</div></code></pre>
<h2 id="%F0%9F%93%8A-web-server-monitoring-and-troubleshooting">üìä Web Server Monitoring and Troubleshooting</h2>
<h3 id="apache-monitoring">Apache Monitoring</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Enable server status module</span>
$ sudo a2enmod status
$ sudo nano /etc/apache2/mods-available/status.conf

&lt;Location <span class="hljs-string">"/server-status"</span>&gt;
    SetHandler server-status
    Require <span class="hljs-built_in">local</span>
    Require ip 192.168.1
&lt;/Location&gt;

&lt;Location <span class="hljs-string">"/server-info"</span>&gt;
    SetHandler server-info
    Require <span class="hljs-built_in">local</span>
    Require ip 192.168.1
&lt;/Location&gt;

<span class="hljs-comment"># View server status</span>
$ curl http://localhost/server-status
$ curl http://localhost/server-status?auto  <span class="hljs-comment"># Machine readable</span>

<span class="hljs-comment"># Monitor Apache logs</span>
$ sudo tail -f /var/<span class="hljs-built_in">log</span>/apache2/access.log
$ sudo tail -f /var/<span class="hljs-built_in">log</span>/apache2/error.log

<span class="hljs-comment"># Analyze Apache logs</span>
$ sudo grep <span class="hljs-string">"404"</span> /var/<span class="hljs-built_in">log</span>/apache2/access.log | head -10
$ sudo awk <span class="hljs-string">'{print $1}'</span> /var/<span class="hljs-built_in">log</span>/apache2/access.log | sort | uniq -c | sort -nr | head -10

<span class="hljs-comment"># Check Apache processes</span>
$ ps aux | grep apache2
$ sudo apache2ctl status
</div></code></pre>
<h3 id="nginx-monitoring">Nginx Monitoring</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Enable stub status module</span>
$ sudo nano /etc/nginx/sites-available/default

server {
    listen 80;
    server_name localhost;

    location /nginx_status {
        stub_status on;
        access_log off;
        allow 127.0.0.1;
        allow 192.168.1.0/24;
        deny all;
    }
}

<span class="hljs-comment"># View Nginx status</span>
$ curl http://localhost/nginx_status
Active connections: 2
server accepts handled requests
 1000 1000 2000
Reading: 0 Writing: 1 Waiting: 1

<span class="hljs-comment"># Monitor Nginx logs</span>
$ sudo tail -f /var/<span class="hljs-built_in">log</span>/nginx/access.log
$ sudo tail -f /var/<span class="hljs-built_in">log</span>/nginx/error.log

<span class="hljs-comment"># Analyze Nginx logs</span>
$ sudo awk <span class="hljs-string">'{print $1}'</span> /var/<span class="hljs-built_in">log</span>/nginx/access.log | sort | uniq -c | sort -nr | head -10
$ sudo grep <span class="hljs-string">"error"</span> /var/<span class="hljs-built_in">log</span>/nginx/error.log | tail -10

<span class="hljs-comment"># Check Nginx processes</span>
$ ps aux | grep nginx
$ sudo nginx -T  <span class="hljs-comment"># Show complete configuration</span>
</div></code></pre>
<h3 id="performance-testing">Performance Testing</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Apache Bench (ab)</span>
$ ab -n 1000 -c 10 http://example.com/
This is ApacheBench, Version 2.3
Copyright 1996 Adam Twiss, Zeus Technology Ltd
...
Server Software:        nginx/1.18.0
Server Hostname:        example.com
Server Port:            80

Document Path:          /
Document Length:        612 bytes

Concurrency Level:      10
Time taken <span class="hljs-keyword">for</span> tests:   0.123 seconds
Complete requests:      1000
Failed requests:        0
Total transferred:      853000 bytes
HTML transferred:       612000 bytes
Requests per second:    8130.08 [<span class="hljs-comment">#/sec] (mean)</span>
Time per request:       1.230 [ms] (mean)
Time per request:       0.123 [ms] (mean, across all concurrent requests)
Transfer rate:          6767.89 [Kbytes/sec] received

<span class="hljs-comment"># wrk (modern alternative)</span>
$ sudo apt install wrk
$ wrk -t12 -c400 -d30s http://example.com/
Running 30s <span class="hljs-built_in">test</span> @ http://example.com/
  12 threads and 400 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    15.50ms   10.23ms 200.00ms   89.12%
    Req/Sec     2.15k   500.23     3.50k    68.75%
  774000 requests <span class="hljs-keyword">in</span> 30.00s, 1.23GB <span class="hljs-built_in">read</span>
Requests/sec:  25800.00
Transfer/sec:   42.00MB

<span class="hljs-comment"># curl timing</span>
$ curl -w <span class="hljs-string">"@curl-format.txt"</span> -o /dev/null -s http://example.com/
<span class="hljs-comment"># curl-format.txt:</span>
     time_namelookup:  %{time_namelookup}\n
        time_connect:  %{time_connect}\n
     time_appconnect:  %{time_appconnect}\n
    time_pretransfer:  %{time_pretransfer}\n
       time_redirect:  %{time_redirect}\n
  time_starttransfer:  %{time_starttransfer}\n
                     ----------\n
          time_total:  %{time_total}\n
</div></code></pre>
<h3 id="common-troubleshooting">Common Troubleshooting</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Check if web server is running</span>
$ sudo systemctl status apache2
$ sudo systemctl status nginx

<span class="hljs-comment"># Check listening ports</span>
$ sudo netstat -tlnp | grep :80
$ sudo ss -tlnp | grep :80

<span class="hljs-comment"># Test configuration</span>
$ sudo apache2ctl configtest
$ sudo nginx -t

<span class="hljs-comment"># Check disk space</span>
$ df -h /var/<span class="hljs-built_in">log</span>
$ df -h /var/www

<span class="hljs-comment"># Check file permissions</span>
$ ls -la /var/www/example.com/
$ sudo find /var/www/example.com -<span class="hljs-built_in">type</span> f -<span class="hljs-built_in">exec</span> chmod 644 {} \;
$ sudo find /var/www/example.com -<span class="hljs-built_in">type</span> d -<span class="hljs-built_in">exec</span> chmod 755 {} \;

<span class="hljs-comment"># Check DNS resolution</span>
$ nslookup example.com
$ dig example.com

<span class="hljs-comment"># Test SSL certificate</span>
$ openssl s_client -connect example.com:443 -servername example.com
$ curl -I https://example.com

<span class="hljs-comment"># Check firewall</span>
$ sudo ufw status
$ sudo iptables -L

<span class="hljs-comment"># Monitor real-time connections</span>
$ sudo netstat -an | grep :80 | wc -l
$ watch <span class="hljs-string">'sudo netstat -an | grep :80 | wc -l'</span>
</div></code></pre>
<h2 id="%F0%9F%A7%A0-knowledge-check">üß† Knowledge Check</h2>
<h3 id="quick-quiz">Quick Quiz</h3>
<ol>
<li>
<p><strong>What's the difference between Apache and Nginx architecture?</strong></p>
<details>
<summary>Answer</summary>
<p>Apache uses a process/thread-based model where each request is handled by a separate process or thread, while Nginx uses an event-driven, asynchronous architecture that can handle many connections with fewer resources.</p>
</details>
</li>
<li>
<p><strong>How do you redirect HTTP to HTTPS in Nginx?</strong></p>
<details>
<summary>Answer</summary>
<pre class="hljs"><code><div><span class="hljs-section">server</span> {
    <span class="hljs-attribute">listen</span> <span class="hljs-number">80</span>;
    <span class="hljs-attribute">server_name</span> example.com;
    <span class="hljs-attribute">return</span> <span class="hljs-number">301</span> https://<span class="hljs-variable">$server_name</span><span class="hljs-variable">$request_uri</span>;
}
</div></code></pre>
</details>
</li>
<li>
<p><strong>What does the HTTP status code 502 mean?</strong></p>
<details>
<summary>Answer</summary>
<p>502 Bad Gateway means the server acting as a gateway or proxy received an invalid response from the upstream server.</p>
</details>
</li>
<li>
<p><strong>How do you check SSL certificate expiration from command line?</strong></p>
<details>
<summary>Answer</summary>
<pre class="hljs"><code><div><span class="hljs-built_in">echo</span> | openssl s_client -connect example.com:443 2&gt;/dev/null | openssl x509 -noout -dates
</div></code></pre>
</details>
</li>
</ol>
<h3 id="hands-on-challenges">Hands-On Challenges</h3>
<p><strong>Challenge 1: Complete Web Server Setup</strong></p>
<pre class="hljs"><code><div><span class="hljs-comment"># Set up a web server that:</span>
<span class="hljs-comment"># - Serves multiple domains with virtual hosts</span>
<span class="hljs-comment"># - Implements SSL/TLS with Let's Encrypt</span>
<span class="hljs-comment"># - Includes security headers and hardening</span>
<span class="hljs-comment"># - Has proper logging and monitoring</span>
<span class="hljs-comment"># - Implements caching and compression</span>
</div></code></pre>
<p><strong>Challenge 2: Load Balancer Configuration</strong></p>
<pre class="hljs"><code><div><span class="hljs-comment"># Create a load balancer setup that:</span>
<span class="hljs-comment"># - Distributes traffic across multiple backend servers</span>
<span class="hljs-comment"># - Implements health checks</span>
<span class="hljs-comment"># - Handles SSL termination</span>
<span class="hljs-comment"># - Includes rate limiting</span>
<span class="hljs-comment"># - Provides failover capabilities</span>
</div></code></pre>
<p><strong>Challenge 3: Web Performance Optimization</strong></p>
<pre class="hljs"><code><div><span class="hljs-comment"># Optimize a web server for:</span>
<span class="hljs-comment"># - Maximum concurrent connections</span>
<span class="hljs-comment"># - Fastest response times</span>
<span class="hljs-comment"># - Efficient resource usage</span>
<span class="hljs-comment"># - Proper caching strategies</span>
<span class="hljs-comment"># - Security without performance impact</span>
</div></code></pre>
<h2 id="%F0%9F%9A%80-next-steps">üöÄ Next Steps</h2>
<p>Excellent! You've mastered web services and HTTP/HTTPS. You can now:</p>
<ul>
<li>Set up and configure Apache and Nginx web servers</li>
<li>Implement SSL/TLS certificates and HTTPS</li>
<li>Create virtual hosts for multiple domains</li>
<li>Configure reverse proxies and load balancing</li>
<li>Monitor and troubleshoot web services</li>
<li>Optimize web server performance</li>
<li>Implement security best practices</li>
</ul>
<p><strong>Ready for advanced networking tools?</strong> Continue to <a href="12-security-firewalls.md">12-security-firewalls.md</a> to learn about network security, firewalls, and intrusion detection.</p>
<hr>
<blockquote>
<p><strong>Pro Tip</strong>: Always use HTTPS in production, keep your web server software updated, monitor logs regularly, and implement proper security headers. Performance and security go hand in hand - optimize for both! üåê</p>
</blockquote>
<h1 id="%F0%9F%9B%A0%EF%B8%8F-basic-network-tools-essential-commands">üõ†Ô∏è Basic Network Tools: Essential Commands</h1>
<blockquote>
<p><strong>Master ping, traceroute, nslookup, dig, netstat, and ip commands for network diagnostics</strong></p>
</blockquote>
<h2 id="%F0%9F%93%96-what-youll-learn">üìñ What You'll Learn</h2>
<p>Network troubleshooting requires the right tools. This chapter covers the essential command-line utilities that every network administrator, developer, and system administrator must know:</p>
<ul>
<li>Connectivity testing with <code>ping</code> and <code>traceroute</code></li>
<li>DNS troubleshooting with <code>nslookup</code> and <code>dig</code></li>
<li>Network interface management with <code>ip</code> and <code>ifconfig</code></li>
<li>Connection monitoring with <code>netstat</code> and <code>ss</code></li>
<li>Basic network scanning and testing</li>
<li>Real-world troubleshooting workflows</li>
</ul>
<h2 id="%F0%9F%8C%8D-why-this-matters">üåç Why This Matters</h2>
<p><strong>Real-world applications:</strong></p>
<ul>
<li><strong>Troubleshooting</strong>: Diagnose network connectivity issues quickly</li>
<li><strong>Monitoring</strong>: Check network performance and identify bottlenecks</li>
<li><strong>Security</strong>: Identify open ports and suspicious connections</li>
<li><strong>Administration</strong>: Configure network interfaces and routing</li>
<li><strong>Development</strong>: Test API endpoints and service connectivity</li>
</ul>
<h2 id="%F0%9F%8F%93-connectivity-testing-with-ping">üèì Connectivity Testing with <code>ping</code></h2>
<h3 id="basic-ping-usage">Basic <code>ping</code> Usage</h3>
<p><code>ping</code> sends ICMP Echo Request packets to test connectivity:</p>
<pre class="hljs"><code><div><span class="hljs-comment"># Basic ping</span>
$ ping google.com
PING google.com (142.250.191.14) 56(84) bytes of data.
64 bytes from lga25s62-in-f14.1e100.net (142.250.191.14): icmp_seq=1 ttl=117 time=12.3 ms
64 bytes from lga25s62-in-f14.1e100.net (142.250.191.14): icmp_seq=2 ttl=117 time=11.8 ms
64 bytes from lga25s62-in-f14.1e100.net (142.250.191.14): icmp_seq=3 ttl=117 time=12.1 ms
^C
--- google.com ping statistics ---
3 packets transmitted, 3 received, 0% packet loss
time 2003ms
rtt min/avg/max/mdev = 11.8/12.1/12.3/0.2 ms
</div></code></pre>
<h3 id="understanding-ping-output">Understanding <code>ping</code> Output</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Analyzing ping results:</span>
<span class="hljs-comment"># 64 bytes: packet size</span>
<span class="hljs-comment"># icmp_seq: sequence number</span>
<span class="hljs-comment"># ttl: Time To Live (hops remaining)</span>
<span class="hljs-comment"># time: round-trip time in milliseconds</span>

<span class="hljs-comment"># Packet loss indicates network issues:</span>
<span class="hljs-comment"># 0% = Perfect connectivity</span>
<span class="hljs-comment"># 1-5% = Minor issues</span>
<span class="hljs-comment"># &gt;10% = Significant problems</span>
<span class="hljs-comment"># 100% = No connectivity</span>
</div></code></pre>
<h3 id="advanced-ping-options">Advanced <code>ping</code> Options</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Ping specific number of times</span>
$ ping -c 4 google.com

<span class="hljs-comment"># Ping with larger packet size</span>
$ ping -s 1000 google.com

<span class="hljs-comment"># Ping with specific interval (default is 1 second)</span>
$ ping -i 0.5 google.com  <span class="hljs-comment"># Every 0.5 seconds</span>

<span class="hljs-comment"># Ping IPv6</span>
$ ping6 google.com
$ ping6 2001:4860:4860::8888

<span class="hljs-comment"># Flood ping (be careful!)</span>
$ sudo ping -f google.com

<span class="hljs-comment"># Ping with timestamp</span>
$ ping -D google.com
[1702636200.123456] 64 bytes from google.com: icmp_seq=1 ttl=117 time=12.3 ms

<span class="hljs-comment"># Set TTL value</span>
$ ping -t 10 google.com

<span class="hljs-comment"># Ping broadcast address (local network discovery)</span>
$ ping -b 192.168.1.255
</div></code></pre>
<h3 id="ping-troubleshooting-scenarios">Ping Troubleshooting Scenarios</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Scenario 1: No response</span>
$ ping 192.168.1.999
PING 192.168.1.999 (192.168.1.999) 56(84) bytes of data.
^C
--- 192.168.1.999 ping statistics ---
5 packets transmitted, 0 received, 100% packet loss
<span class="hljs-comment"># Possible causes: Wrong IP, firewall, device down</span>

<span class="hljs-comment"># Scenario 2: High latency</span>
$ ping google.com
64 bytes from google.com: icmp_seq=1 ttl=117 time=500.3 ms
<span class="hljs-comment"># Possible causes: Network congestion, poor connection</span>

<span class="hljs-comment"># Scenario 3: Intermittent loss</span>
64 bytes from google.com: icmp_seq=1 ttl=117 time=12.3 ms
Request timeout <span class="hljs-keyword">for</span> icmp_seq 2
64 bytes from google.com: icmp_seq=3 ttl=117 time=11.8 ms
<span class="hljs-comment"># Possible causes: Unstable connection, interference</span>
</div></code></pre>
<h2 id="%F0%9F%97%BA%EF%B8%8F-path-tracing-with-traceroute">üó∫Ô∏è Path Tracing with <code>traceroute</code></h2>
<h3 id="basic-traceroute-usage">Basic <code>traceroute</code> Usage</h3>
<p><code>traceroute</code> shows the path packets take to reach a destination:</p>
<pre class="hljs"><code><div><span class="hljs-comment"># Trace route to destination</span>
$ traceroute google.com
traceroute to google.com (142.250.191.14), 30 hops max, 60 byte packets
 1  192.168.1.1 (192.168.1.1)  1.234 ms  1.123 ms  1.045 ms
 2  10.0.0.1 (10.0.0.1)  5.678 ms  5.432 ms  5.234 ms
 3  203.0.113.1 (203.0.113.1)  12.345 ms  12.123 ms  12.456 ms
 4  * * *
 5  142.250.191.14 (142.250.191.14)  15.678 ms  15.432 ms  15.234 ms
</div></code></pre>
<h3 id="understanding-traceroute-output">Understanding <code>traceroute</code> Output</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Each line represents a "hop" (router) in the path:</span>
<span class="hljs-comment"># 1. Hop number</span>
<span class="hljs-comment"># 2. Hostname/IP address</span>
<span class="hljs-comment"># 3. Three round-trip times (3 packets sent)</span>

<span class="hljs-comment"># Special symbols:</span>
<span class="hljs-comment"># * = No response (timeout)</span>
<span class="hljs-comment"># !H = Host unreachable</span>
<span class="hljs-comment"># !N = Network unreachable</span>
<span class="hljs-comment"># !P = Protocol unreachable</span>
</div></code></pre>
<h3 id="advanced-traceroute-options">Advanced <code>traceroute</code> Options</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Use ICMP instead of UDP</span>
$ traceroute -I google.com

<span class="hljs-comment"># Use TCP (useful when UDP is blocked)</span>
$ sudo traceroute -T -p 80 google.com

<span class="hljs-comment"># IPv6 traceroute</span>
$ traceroute6 google.com

<span class="hljs-comment"># Set maximum hops</span>
$ traceroute -m 15 google.com

<span class="hljs-comment"># Set packet size</span>
$ traceroute -s 1000 google.com

<span class="hljs-comment"># Don't resolve hostnames (faster)</span>
$ traceroute -n google.com
1  192.168.1.1  1.234 ms  1.123 ms  1.045 ms
2  10.0.0.1  5.678 ms  5.432 ms  5.234 ms
</div></code></pre>
<h3 id="traceroute-analysis">Traceroute Analysis</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Identifying network issues:</span>

<span class="hljs-comment"># High latency at specific hop:</span>
 3  slow-router.isp.com  150.345 ms  149.123 ms  151.456 ms
 4  fast-router.isp.com  25.678 ms  25.432 ms  25.234 ms
<span class="hljs-comment"># Problem: Hop 3 is slow (bottleneck)</span>

<span class="hljs-comment"># Timeouts in middle of path:</span>
 5  * * *
 6  destination.com  15.678 ms  15.432 ms  15.234 ms
<span class="hljs-comment"># Problem: Hop 5 doesn't respond but traffic gets through</span>

<span class="hljs-comment"># Complete failure:</span>
 3  router.isp.com  12.345 ms  12.123 ms  12.456 ms
 4  * * *
 5  * * *
<span class="hljs-comment"># Problem: Traffic blocked after hop 3</span>
</div></code></pre>
<h2 id="%F0%9F%94%8D-dns-troubleshooting">üîç DNS Troubleshooting</h2>
<h3 id="using-nslookup">Using <code>nslookup</code></h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Basic DNS lookup</span>
$ nslookup google.com
Server:		8.8.8.8
Address:	8.8.8.8<span class="hljs-comment">#53</span>

Non-authoritative answer:
Name:	google.com
Address: 142.250.191.14

<span class="hljs-comment"># Reverse DNS lookup</span>
$ nslookup 8.8.8.8
Server:		8.8.8.8
Address:	8.8.8.8<span class="hljs-comment">#53</span>

Non-authoritative answer:
8.8.8.8.in-addr.arpa	name = dns.google.

<span class="hljs-comment"># Query specific DNS server</span>
$ nslookup google.com 1.1.1.1
Server:		1.1.1.1
Address:	1.1.1.1<span class="hljs-comment">#53</span>

<span class="hljs-comment"># Interactive mode</span>
$ nslookup
&gt; google.com
&gt; <span class="hljs-built_in">set</span> <span class="hljs-built_in">type</span>=MX
&gt; google.com
&gt; <span class="hljs-built_in">exit</span>
</div></code></pre>
<h3 id="advanced-nslookup-queries">Advanced <code>nslookup</code> Queries</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Query different record types</span>
$ nslookup -<span class="hljs-built_in">type</span>=MX google.com
google.com	mail exchanger = 10 smtp.google.com.

$ nslookup -<span class="hljs-built_in">type</span>=NS google.com
google.com	nameserver = ns1.google.com.
google.com	nameserver = ns2.google.com.

$ nslookup -<span class="hljs-built_in">type</span>=TXT google.com
google.com	text = <span class="hljs-string">"v=spf1 include:_spf.google.com ~all"</span>

$ nslookup -<span class="hljs-built_in">type</span>=AAAA google.com
google.com	has AAAA address 2607:f8b0:4004:c1b::65
</div></code></pre>
<h3 id="using-dig-more-powerful">Using <code>dig</code> (More Powerful)</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Basic dig query</span>
$ dig google.com

; &lt;&lt;&gt;&gt; DiG 9.16.1-Ubuntu &lt;&lt;&gt;&gt; google.com
;; global options: +cmd
;; Got answer:
;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 12345
;; flags: qr rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 1

;; QUESTION SECTION:
;google.com.			IN	A

;; ANSWER SECTION:
google.com.		300	IN	A	142.250.191.14

;; Query time: 12 msec
;; SERVER: 8.8.8.8<span class="hljs-comment">#53(8.8.8.8)</span>
;; WHEN: Fri Dec 15 10:30:00 UTC 2023
;; MSG SIZE  rcvd: 55

<span class="hljs-comment"># Short answer only</span>
$ dig +short google.com
142.250.191.14

<span class="hljs-comment"># Query specific record type</span>
$ dig MX google.com
$ dig NS google.com
$ dig TXT google.com
$ dig AAAA google.com

<span class="hljs-comment"># Reverse DNS lookup</span>
$ dig -x 8.8.8.8
$ dig +short -x 8.8.8.8
dns.google.
</div></code></pre>
<h3 id="advanced-dig-usage">Advanced <code>dig</code> Usage</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Query specific DNS server</span>
$ dig @1.1.1.1 google.com

<span class="hljs-comment"># Trace DNS resolution path</span>
$ dig +trace google.com

<span class="hljs-comment"># Show all record types</span>
$ dig ANY google.com

<span class="hljs-comment"># Query with TCP (instead of UDP)</span>
$ dig +tcp google.com

<span class="hljs-comment"># Batch queries from file</span>
$ <span class="hljs-built_in">echo</span> -e <span class="hljs-string">"google.com\nfacebook.com\ntwitter.com"</span> | dig -f -

<span class="hljs-comment"># Check DNSSEC validation</span>
$ dig +dnssec google.com
</div></code></pre>
<h3 id="dns-troubleshooting-scenarios">DNS Troubleshooting Scenarios</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Scenario 1: Domain doesn't resolve</span>
$ dig nonexistent.example.com
;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NXDOMAIN
<span class="hljs-comment"># NXDOMAIN = Domain doesn't exist</span>

<span class="hljs-comment"># Scenario 2: DNS server timeout</span>
$ dig @192.168.1.999 google.com
;; connection timed out; no servers could be reached

<span class="hljs-comment"># Scenario 3: Different results from different servers</span>
$ dig @8.8.8.8 example.com
$ dig @1.1.1.1 example.com
<span class="hljs-comment"># Compare results for consistency</span>
</div></code></pre>
<h2 id="%F0%9F%94%A7-network-interface-management">üîß Network Interface Management</h2>
<h3 id="using-ip-command-modern">Using <code>ip</code> Command (Modern)</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Show all network interfaces</span>
$ ip addr show
<span class="hljs-comment"># or</span>
$ ip a

1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP group default qlen 1000
    link/ether 00:1b:44:11:3a:b7 brd ff:ff:ff:ff:ff:ff
    inet 192.168.1.100/24 brd 192.168.1.255 scope global dynamic eth0
       valid_lft 86395sec preferred_lft 86395sec

<span class="hljs-comment"># Show specific interface</span>
$ ip addr show eth0

<span class="hljs-comment"># Show only IPv4 addresses</span>
$ ip -4 addr show

<span class="hljs-comment"># Show only IPv6 addresses</span>
$ ip -6 addr show
</div></code></pre>
<h3 id="interface-configuration-with-ip">Interface Configuration with <code>ip</code></h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Bring interface up/down</span>
$ sudo ip link <span class="hljs-built_in">set</span> eth0 up
$ sudo ip link <span class="hljs-built_in">set</span> eth0 down

<span class="hljs-comment"># Add IP address to interface</span>
$ sudo ip addr add 192.168.1.200/24 dev eth0

<span class="hljs-comment"># Remove IP address from interface</span>
$ sudo ip addr del 192.168.1.200/24 dev eth0

<span class="hljs-comment"># Change MAC address</span>
$ sudo ip link <span class="hljs-built_in">set</span> dev eth0 address 00:1b:44:11:3a:b8

<span class="hljs-comment"># Set MTU</span>
$ sudo ip link <span class="hljs-built_in">set</span> dev eth0 mtu 1400
</div></code></pre>
<h3 id="routing-with-ip">Routing with <code>ip</code></h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Show routing table</span>
$ ip route show
<span class="hljs-comment"># or</span>
$ ip r

default via 192.168.1.1 dev eth0 proto dhcp metric 100
192.168.1.0/24 dev eth0 proto kernel scope link src 192.168.1.100 metric 100

<span class="hljs-comment"># Add static route</span>
$ sudo ip route add 10.0.0.0/8 via 192.168.1.1

<span class="hljs-comment"># Delete route</span>
$ sudo ip route del 10.0.0.0/8

<span class="hljs-comment"># Add default gateway</span>
$ sudo ip route add default via 192.168.1.1

<span class="hljs-comment"># Show route to specific destination</span>
$ ip route get 8.8.8.8
8.8.8.8 via 192.168.1.1 dev eth0 src 192.168.1.100 uid 1000
</div></code></pre>
<h3 id="using-ifconfig-legacy-but-common">Using <code>ifconfig</code> (Legacy but Common)</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Show all interfaces</span>
$ ifconfig

<span class="hljs-comment"># Show specific interface</span>
$ ifconfig eth0
eth0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500
        inet 192.168.1.100  netmask 255.255.255.0  broadcast 192.168.1.255
        ether 00:1b:44:11:3a:b7  txqueuelen 1000  (Ethernet)
        RX packets 12345  bytes 1234567 (1.2 MB)
        TX packets 6789   bytes 789012 (789.0 KB)

<span class="hljs-comment"># Configure interface</span>
$ sudo ifconfig eth0 192.168.1.200 netmask 255.255.255.0
$ sudo ifconfig eth0 up
$ sudo ifconfig eth0 down
</div></code></pre>
<h2 id="%F0%9F%93%8A-connection-monitoring">üìä Connection Monitoring</h2>
<h3 id="using-netstat">Using <code>netstat</code></h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Show all connections</span>
$ netstat -a

<span class="hljs-comment"># Show listening ports</span>
$ netstat -l
Active Internet connections (only servers)
Proto Recv-Q Send-Q Local Address           Foreign Address         State
tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN
tcp        0      0 127.0.0.1:25            0.0.0.0:*               LISTEN

<span class="hljs-comment"># Show TCP connections</span>
$ netstat -t

<span class="hljs-comment"># Show UDP connections</span>
$ netstat -u

<span class="hljs-comment"># Show with process information</span>
$ netstat -p

<span class="hljs-comment"># Show numerical addresses (don't resolve)</span>
$ netstat -n

<span class="hljs-comment"># Common combinations</span>
$ netstat -tulpn  <span class="hljs-comment"># TCP, UDP, Listening, Process, Numerical</span>
$ netstat -an     <span class="hljs-comment"># All connections, Numerical</span>
</div></code></pre>
<h3 id="advanced-netstat-usage">Advanced <code>netstat</code> Usage</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Show routing table</span>
$ netstat -r
Kernel IP routing table
Destination     Gateway         Genmask         Flags   MSS Window  irtt Iface
default         192.168.1.1     0.0.0.0         UG        0 0          0 eth0
192.168.1.0     0.0.0.0         255.255.255.0   U         0 0          0 eth0

<span class="hljs-comment"># Show interface statistics</span>
$ netstat -i
Kernel Interface table
Iface      MTU    RX-OK RX-ERR RX-DRP RX-OVR    TX-OK TX-ERR TX-DRP TX-OVR Flg
eth0      1500    12345      0      0 0          6789      0      0      0 BMRU
lo       65536      100      0      0 0           100      0      0      0 LRU

<span class="hljs-comment"># Show network statistics</span>
$ netstat -s
</div></code></pre>
<h3 id="using-ss-modern-alternative">Using <code>ss</code> (Modern Alternative)</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Show all sockets</span>
$ ss -a

<span class="hljs-comment"># Show listening sockets</span>
$ ss -l

<span class="hljs-comment"># Show TCP sockets</span>
$ ss -t

<span class="hljs-comment"># Show UDP sockets</span>
$ ss -u

<span class="hljs-comment"># Show with process information</span>
$ ss -p

<span class="hljs-comment"># Common combination</span>
$ ss -tulpn

<span class="hljs-comment"># Show sockets for specific port</span>
$ ss -tulpn | grep :80
$ ss -tulpn | grep :22

<span class="hljs-comment"># Show established connections</span>
$ ss -o state established
</div></code></pre>
<h3 id="practical-connection-analysis">Practical Connection Analysis</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Find what's using port 80</span>
$ ss -tulpn | grep :80
tcp   LISTEN 0      128          0.0.0.0:80        0.0.0.0:*    users:((<span class="hljs-string">"nginx"</span>,pid=1234,fd=6))

<span class="hljs-comment"># Find all connections to specific IP</span>
$ ss -an | grep 192.168.1.100

<span class="hljs-comment"># Count connections by state</span>
$ ss -an | awk <span class="hljs-string">'{print $2}'</span> | sort | uniq -c
     10 ESTAB
      5 LISTEN
      2 TIME-WAIT

<span class="hljs-comment"># Monitor connections in real-time</span>
$ watch -n 1 <span class="hljs-string">'ss -tulpn'</span>
</div></code></pre>
<h2 id="%F0%9F%8E%AF-practical-troubleshooting-workflow">üéØ Practical Troubleshooting Workflow</h2>
<h3 id="complete-network-diagnostic">Complete Network Diagnostic</h3>
<pre class="hljs"><code><div><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># network-check.sh - Comprehensive network diagnostic</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"=== Network Diagnostic Report ==="</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Date: <span class="hljs-variable">$(date)</span>"</span>
<span class="hljs-built_in">echo</span>

<span class="hljs-comment"># 1. Check network interfaces</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"1. Network Interfaces:"</span>
ip addr show | grep -E <span class="hljs-string">'^[0-9]+:|inet '</span>
<span class="hljs-built_in">echo</span>

<span class="hljs-comment"># 2. Check routing</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"2. Default Gateway:"</span>
ip route | grep default
<span class="hljs-built_in">echo</span>

<span class="hljs-comment"># 3. Check DNS</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"3. DNS Servers:"</span>
cat /etc/resolv.conf | grep nameserver
<span class="hljs-built_in">echo</span>

<span class="hljs-comment"># 4. Test local connectivity</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"4. Local Connectivity:"</span>
ping -c 1 127.0.0.1 &gt; /dev/null &amp;&amp; <span class="hljs-built_in">echo</span> <span class="hljs-string">"‚úÖ Loopback OK"</span> || <span class="hljs-built_in">echo</span> <span class="hljs-string">"‚ùå Loopback FAIL"</span>
GATEWAY=$(ip route | grep default | awk <span class="hljs-string">'{print $3}'</span>)
<span class="hljs-keyword">if</span> [ ! -z <span class="hljs-string">"<span class="hljs-variable">$GATEWAY</span>"</span> ]; <span class="hljs-keyword">then</span>
    ping -c 1 <span class="hljs-variable">$GATEWAY</span> &gt; /dev/null &amp;&amp; <span class="hljs-built_in">echo</span> <span class="hljs-string">"‚úÖ Gateway OK"</span> || <span class="hljs-built_in">echo</span> <span class="hljs-string">"‚ùå Gateway FAIL"</span>
<span class="hljs-keyword">fi</span>
<span class="hljs-built_in">echo</span>

<span class="hljs-comment"># 5. Test DNS resolution</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"5. DNS Resolution:"</span>
nslookup google.com &gt; /dev/null &amp;&amp; <span class="hljs-built_in">echo</span> <span class="hljs-string">"‚úÖ DNS OK"</span> || <span class="hljs-built_in">echo</span> <span class="hljs-string">"‚ùå DNS FAIL"</span>
<span class="hljs-built_in">echo</span>

<span class="hljs-comment"># 6. Test internet connectivity</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"6. Internet Connectivity:"</span>
ping -c 1 8.8.8.8 &gt; /dev/null &amp;&amp; <span class="hljs-built_in">echo</span> <span class="hljs-string">"‚úÖ Internet OK"</span> || <span class="hljs-built_in">echo</span> <span class="hljs-string">"‚ùå Internet FAIL"</span>
<span class="hljs-built_in">echo</span>

<span class="hljs-comment"># 7. Show listening services</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"7. Listening Services:"</span>
ss -tulpn | grep LISTEN | head -10
<span class="hljs-built_in">echo</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"=== End Report ==="</span>
</div></code></pre>
<h3 id="web-service-testing">Web Service Testing</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Test HTTP connectivity</span>
$ curl -I http://example.com
HTTP/1.1 200 OK
Date: Fri, 15 Dec 2023 10:30:00 GMT
Server: Apache/2.4.41

<span class="hljs-comment"># Test HTTPS with timing</span>
$ curl -w <span class="hljs-string">"@curl-format.txt"</span> -o /dev/null -s https://google.com

<span class="hljs-comment"># Create curl-format.txt:</span>
$ cat &gt; curl-format.txt &lt;&lt; EOF
     time_namelookup:  %{time_namelookup}\n
        time_connect:  %{time_connect}\n
     time_appconnect:  %{time_appconnect}\n
    time_pretransfer:  %{time_pretransfer}\n
       time_redirect:  %{time_redirect}\n
  time_starttransfer:  %{time_starttransfer}\n
                     ----------\n
          time_total:  %{time_total}\n
EOF

<span class="hljs-comment"># Test specific port connectivity</span>
$ telnet google.com 80
$ nc -zv google.com 80
Connection to google.com 80 port [tcp/http] succeeded!
</div></code></pre>
<h2 id="%E2%9A%A0%EF%B8%8F-common-tool-limitations-and-alternatives">‚ö†Ô∏è Common Tool Limitations and Alternatives</h2>
<h3 id="when-tools-dont-work">When Tools Don't Work</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># ICMP might be blocked</span>
$ ping google.com
<span class="hljs-comment"># No response doesn't always mean the host is down</span>

<span class="hljs-comment"># Try TCP ping instead</span>
$ nc -zv google.com 80
$ telnet google.com 80

<span class="hljs-comment"># Some routers don't respond to traceroute</span>
$ traceroute google.com
<span class="hljs-comment"># Use different protocols</span>
$ traceroute -I google.com  <span class="hljs-comment"># ICMP</span>
$ traceroute -T google.com  <span class="hljs-comment"># TCP</span>

<span class="hljs-comment"># DNS might be cached</span>
$ dig google.com
<span class="hljs-comment"># Clear DNS cache</span>
$ sudo systemctl flush-dns  <span class="hljs-comment"># systemd-resolved</span>
$ sudo service nscd restart  <span class="hljs-comment"># nscd</span>
</div></code></pre>
<h3 id="tool-alternatives">Tool Alternatives</h3>
<table>
<thead>
<tr>
<th>Traditional</th>
<th>Modern</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ifconfig</code></td>
<td><code>ip</code></td>
<td>Interface management</td>
</tr>
<tr>
<td><code>route</code></td>
<td><code>ip route</code></td>
<td>Routing table</td>
</tr>
<tr>
<td><code>netstat</code></td>
<td><code>ss</code></td>
<td>Socket statistics</td>
</tr>
<tr>
<td><code>arp</code></td>
<td><code>ip neigh</code></td>
<td>ARP table</td>
</tr>
<tr>
<td><code>iwconfig</code></td>
<td><code>iw</code></td>
<td>Wireless configuration</td>
</tr>
</tbody>
</table>
<h2 id="%F0%9F%A7%A0-knowledge-check">üß† Knowledge Check</h2>
<h3 id="quick-quiz">Quick Quiz</h3>
<ol>
<li>
<p><strong>What does a TTL of 1 in a ping response indicate?</strong></p>
<details>
<summary>Answer</summary>
<p>The packet has only 1 hop remaining before it's discarded. This usually means the responding device is very close (possibly the next router).</p>
</details>
</li>
<li>
<p><strong>How do you test if port 443 is open on google.com without using a web browser?</strong></p>
<details>
<summary>Answer</summary>
<pre class="hljs"><code><div>nc -zv google.com 443
<span class="hljs-comment"># or</span>
telnet google.com 443
<span class="hljs-comment"># or</span>
curl -I https://google.com
</div></code></pre>
</details>
</li>
<li>
<p><strong>What's the difference between <code>dig +short</code> and regular <code>dig</code>?</strong></p>
<details>
<summary>Answer</summary>
<p><code>dig +short</code> returns only the answer (IP address), while regular <code>dig</code> returns the full DNS response including headers, query details, and timing information.</p>
</details>
</li>
<li>
<p><strong>How do you find which process is listening on port 80?</strong></p>
<details>
<summary>Answer</summary>
<pre class="hljs"><code><div>ss -tulpn | grep :80
<span class="hljs-comment"># or</span>
netstat -tulpn | grep :80
<span class="hljs-comment"># or</span>
lsof -i :80
</div></code></pre>
</details>
</li>
</ol>
<h3 id="hands-on-challenges">Hands-On Challenges</h3>
<p><strong>Challenge 1: Network Path Analysis</strong></p>
<pre class="hljs"><code><div><span class="hljs-comment"># Trace the route to 3 different websites</span>
<span class="hljs-comment"># Compare the paths and identify common routers</span>
<span class="hljs-comment"># Measure and compare latencies</span>
</div></code></pre>
<p><strong>Challenge 2: DNS Investigation</strong></p>
<pre class="hljs"><code><div><span class="hljs-comment"># Find all DNS record types for your domain</span>
<span class="hljs-comment"># Compare results from different DNS servers</span>
<span class="hljs-comment"># Identify the authoritative name servers</span>
</div></code></pre>
<p><strong>Challenge 3: Service Discovery</strong></p>
<pre class="hljs"><code><div><span class="hljs-comment"># Find all listening services on your system</span>
<span class="hljs-comment"># Identify which processes are using the network</span>
<span class="hljs-comment"># Create a summary report of open ports</span>
</div></code></pre>
<h2 id="%F0%9F%9A%80-next-steps">üöÄ Next Steps</h2>
<p>Excellent! You've mastered the essential network diagnostic tools. You can now:</p>
<ul>
<li>Test connectivity and diagnose network issues</li>
<li>Troubleshoot DNS problems effectively</li>
<li>Monitor network connections and services</li>
<li>Analyze network paths and performance</li>
</ul>
<p><strong>Ready for advanced techniques?</strong> Continue to <a href="10-advanced-network-tools.md">10-advanced-network-tools.md</a> to learn about <code>nmap</code>, <code>tcpdump</code>, <code>wireshark</code>, and advanced network analysis.</p>
<hr>
<blockquote>
<p><strong>Pro Tip</strong>: Create aliases for commonly used command combinations like <code>alias netcheck='ss -tulpn'</code> and <code>alias myip='curl -s ifconfig.me'</code>. Build a personal toolkit of network diagnostic scripts that you can run quickly during troubleshooting sessions! üîß</p>
</blockquote>
<h1 id="%F0%9F%94%AC-advanced-network-tools-professional-diagnostics">üî¨ Advanced Network Tools: Professional Diagnostics</h1>
<blockquote>
<p><strong>Master nmap, tcpdump, wireshark, iptables, and advanced network analysis techniques</strong></p>
</blockquote>
<h2 id="%F0%9F%93%96-what-youll-learn">üìñ What You'll Learn</h2>
<p>Advanced network tools provide deep insights into network behavior, security, and performance. This chapter covers professional-grade utilities used by network administrators, security professionals, and system engineers:</p>
<ul>
<li>Network scanning and discovery with <code>nmap</code></li>
<li>Packet capture and analysis with <code>tcpdump</code> and <code>wireshark</code></li>
<li>Firewall management with <code>iptables</code> and <code>ufw</code></li>
<li>Network performance testing with <code>iperf3</code> and <code>mtr</code></li>
<li>Advanced troubleshooting techniques</li>
<li>Security scanning and vulnerability assessment</li>
</ul>
<h2 id="%F0%9F%8C%8D-why-this-matters">üåç Why This Matters</h2>
<p><strong>Professional applications:</strong></p>
<ul>
<li><strong>Security</strong>: Identify open ports, services, and vulnerabilities</li>
<li><strong>Performance</strong>: Analyze network bottlenecks and optimize traffic</li>
<li><strong>Troubleshooting</strong>: Deep packet inspection for complex issues</li>
<li><strong>Monitoring</strong>: Real-time network traffic analysis</li>
<li><strong>Compliance</strong>: Network security auditing and documentation</li>
</ul>
<h2 id="%F0%9F%97%BA%EF%B8%8F-network-discovery-with-nmap">üó∫Ô∏è Network Discovery with <code>nmap</code></h2>
<h3 id="basic-nmap-usage">Basic <code>nmap</code> Usage</h3>
<p><code>nmap</code> (Network Mapper) is the most powerful network discovery and security auditing tool:</p>
<pre class="hljs"><code><div><span class="hljs-comment"># Basic host discovery</span>
$ nmap 192.168.1.1
Starting Nmap 7.80 ( https://nmap.org )
Nmap scan report <span class="hljs-keyword">for</span> router.local (192.168.1.1)
Host is up (0.001s latency).
Not shown: 996 closed ports
PORT     STATE SERVICE
22/tcp   open  ssh
53/tcp   open  domain
80/tcp   open  http
443/tcp  open  https

<span class="hljs-comment"># Scan multiple hosts</span>
$ nmap 192.168.1.1-10
$ nmap 192.168.1.0/24
$ nmap google.com facebook.com

<span class="hljs-comment"># Quick scan (top 100 ports)</span>
$ nmap -F 192.168.1.1

<span class="hljs-comment"># Scan all 65535 ports</span>
$ nmap -p- 192.168.1.1

<span class="hljs-comment"># Scan specific ports</span>
$ nmap -p 22,80,443 192.168.1.1
$ nmap -p 1-1000 192.168.1.1
</div></code></pre>
<h3 id="advanced-nmap-scanning">Advanced <code>nmap</code> Scanning</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># TCP SYN scan (default, fast and stealthy)</span>
$ nmap -sS 192.168.1.1

<span class="hljs-comment"># TCP connect scan (when SYN scan not possible)</span>
$ nmap -sT 192.168.1.1

<span class="hljs-comment"># UDP scan (slower but important)</span>
$ nmap -sU 192.168.1.1

<span class="hljs-comment"># Service version detection</span>
$ nmap -sV 192.168.1.1
PORT   STATE SERVICE VERSION
22/tcp open  ssh     OpenSSH 8.2p1 Ubuntu 4ubuntu0.5
80/tcp open  http    Apache httpd 2.4.41

<span class="hljs-comment"># Operating system detection</span>
$ nmap -O 192.168.1.1
Running: Linux 4.X|5.X
OS CPE: cpe:/o:linux:linux_kernel:4 cpe:/o:linux:linux_kernel:5
OS details: Linux 4.15 - 5.6

<span class="hljs-comment"># Aggressive scan (OS, version, script, traceroute)</span>
$ nmap -A 192.168.1.1

<span class="hljs-comment"># Script scanning</span>
$ nmap --script vuln 192.168.1.1
$ nmap --script http-enum 192.168.1.1
$ nmap --script ssl-cert 192.168.1.1
</div></code></pre>
<h3 id="network-discovery-techniques">Network Discovery Techniques</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Ping scan (discover live hosts)</span>
$ nmap -sn 192.168.1.0/24
Nmap scan report <span class="hljs-keyword">for</span> 192.168.1.1
Host is up (0.001s latency).
Nmap scan report <span class="hljs-keyword">for</span> 192.168.1.100
Host is up (0.002s latency).
Nmap scan report <span class="hljs-keyword">for</span> 192.168.1.150
Host is up (0.003s latency).

<span class="hljs-comment"># ARP scan (local network only)</span>
$ nmap -PR 192.168.1.0/24

<span class="hljs-comment"># List scan (just list targets, no scanning)</span>
$ nmap -sL 192.168.1.0/24

<span class="hljs-comment"># Top ports scan</span>
$ nmap --top-ports 1000 192.168.1.1

<span class="hljs-comment"># Fast scan with service detection</span>
$ nmap -sV -T4 -F 192.168.1.1

<span class="hljs-comment"># Stealth scan (avoid detection)</span>
$ nmap -sS -T2 -f 192.168.1.1
</div></code></pre>
<h3 id="practical-nmap-examples">Practical <code>nmap</code> Examples</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Web server analysis</span>
$ nmap -p 80,443 --script http-title,http-headers google.com

<span class="hljs-comment"># SSH server analysis</span>
$ nmap -p 22 --script ssh-hostkey,ssh-auth-methods 192.168.1.1

<span class="hljs-comment"># SMB/NetBIOS analysis</span>
$ nmap -p 139,445 --script smb-os-discovery 192.168.1.1

<span class="hljs-comment"># Database server scan</span>
$ nmap -p 3306,5432,1433 --script mysql-info,pgsql-info 192.168.1.1

<span class="hljs-comment"># Vulnerability scanning</span>
$ nmap --script vuln --script-args=unsafe=1 192.168.1.1

<span class="hljs-comment"># Save results to file</span>
$ nmap -oN scan_results.txt 192.168.1.0/24
$ nmap -oX scan_results.xml 192.168.1.0/24
</div></code></pre>
<h2 id="%F0%9F%93%A6-packet-capture-with-tcpdump">üì¶ Packet Capture with <code>tcpdump</code></h2>
<h3 id="basic-tcpdump-usage">Basic <code>tcpdump</code> Usage</h3>
<p><code>tcpdump</code> captures and analyzes network packets in real-time:</p>
<pre class="hljs"><code><div><span class="hljs-comment"># Capture all traffic on interface</span>
$ sudo tcpdump -i eth0
tcpdump: verbose output suppressed, use -v or -vv <span class="hljs-keyword">for</span> full protocol decode
listening on eth0, link-type EN10MB (Ethernet), capture size 262144 bytes
10:30:00.123456 IP 192.168.1.100.54321 &gt; 8.8.8.8.53: UDP, length 32
10:30:00.125678 IP 8.8.8.8.53 &gt; 192.168.1.100.54321: UDP, length 48

<span class="hljs-comment"># Capture specific number of packets</span>
$ sudo tcpdump -i eth0 -c 10

<span class="hljs-comment"># Capture to file</span>
$ sudo tcpdump -i eth0 -w capture.pcap

<span class="hljs-comment"># Read from file</span>
$ tcpdump -r capture.pcap

<span class="hljs-comment"># More verbose output</span>
$ sudo tcpdump -i eth0 -v
$ sudo tcpdump -i eth0 -vv
$ sudo tcpdump -i eth0 -vvv
</div></code></pre>
<h3 id="advanced-tcpdump-filtering">Advanced <code>tcpdump</code> Filtering</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Filter by host</span>
$ sudo tcpdump -i eth0 host 192.168.1.100
$ sudo tcpdump -i eth0 src 192.168.1.100
$ sudo tcpdump -i eth0 dst 192.168.1.100

<span class="hljs-comment"># Filter by port</span>
$ sudo tcpdump -i eth0 port 80
$ sudo tcpdump -i eth0 src port 80
$ sudo tcpdump -i eth0 dst port 80

<span class="hljs-comment"># Filter by protocol</span>
$ sudo tcpdump -i eth0 tcp
$ sudo tcpdump -i eth0 udp
$ sudo tcpdump -i eth0 icmp

<span class="hljs-comment"># Complex filters</span>
$ sudo tcpdump -i eth0 <span class="hljs-string">'tcp port 80 and host 192.168.1.100'</span>
$ sudo tcpdump -i eth0 <span class="hljs-string">'udp port 53 or tcp port 80'</span>
$ sudo tcpdump -i eth0 <span class="hljs-string">'not port 22'</span>

<span class="hljs-comment"># HTTP traffic analysis</span>
$ sudo tcpdump -i eth0 -A <span class="hljs-string">'tcp port 80'</span>
$ sudo tcpdump -i eth0 -s 0 -A <span class="hljs-string">'tcp port 80 and (tcp[tcpflags] &amp; tcp-push != 0)'</span>
</div></code></pre>
<h3 id="practical-tcpdump-examples">Practical <code>tcpdump</code> Examples</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Monitor DNS queries</span>
$ sudo tcpdump -i eth0 -n <span class="hljs-string">'udp port 53'</span>
10:30:00.123 IP 192.168.1.100.54321 &gt; 8.8.8.8.53: 12345+ A? google.com. (28)
10:30:00.125 IP 8.8.8.8.53 &gt; 192.168.1.100.54321: 12345 1/0/0 A 142.250.191.14 (44)

<span class="hljs-comment"># Monitor HTTP requests</span>
$ sudo tcpdump -i eth0 -A -s 1500 <span class="hljs-string">'tcp port 80 and (tcp[tcpflags] &amp; tcp-push != 0)'</span>

<span class="hljs-comment"># Monitor SSH connections</span>
$ sudo tcpdump -i eth0 <span class="hljs-string">'tcp port 22'</span>

<span class="hljs-comment"># Monitor specific subnet</span>
$ sudo tcpdump -i eth0 <span class="hljs-string">'net 192.168.1.0/24'</span>

<span class="hljs-comment"># Monitor large packets (potential issues)</span>
$ sudo tcpdump -i eth0 <span class="hljs-string">'greater 1000'</span>

<span class="hljs-comment"># Monitor SYN packets (connection attempts)</span>
$ sudo tcpdump -i eth0 <span class="hljs-string">'tcp[tcpflags] &amp; tcp-syn != 0'</span>

<span class="hljs-comment"># Save and rotate capture files</span>
$ sudo tcpdump -i eth0 -w capture-%Y%m%d-%H%M%S.pcap -G 3600 -C 100
</div></code></pre>
<h3 id="analyzing-captured-traffic">Analyzing Captured Traffic</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Basic statistics</span>
$ tcpdump -r capture.pcap | wc -l  <span class="hljs-comment"># Count packets</span>

<span class="hljs-comment"># Protocol distribution</span>
$ tcpdump -r capture.pcap -n | awk <span class="hljs-string">'{print $3}'</span> | cut -d<span class="hljs-string">'.'</span> -f1-4 | sort | uniq -c | sort -nr

<span class="hljs-comment"># Top talkers</span>
$ tcpdump -r capture.pcap -n | awk <span class="hljs-string">'{print $3}'</span> | cut -d<span class="hljs-string">'.'</span> -f1-4 | sort | uniq -c | sort -nr | head -10

<span class="hljs-comment"># Extract HTTP requests</span>
$ tcpdump -r capture.pcap -A | grep -E <span class="hljs-string">'GET|POST|PUT|DELETE'</span>

<span class="hljs-comment"># Find specific patterns</span>
$ tcpdump -r capture.pcap -A | grep -i <span class="hljs-string">'password\|login\|auth'</span>
</div></code></pre>
<h2 id="%F0%9F%94%8D-advanced-analysis-with-wireshark">üîç Advanced Analysis with <code>wireshark</code></h2>
<h3 id="command-line-wireshark-tshark">Command-line Wireshark (<code>tshark</code>)</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Basic capture</span>
$ tshark -i eth0

<span class="hljs-comment"># Capture with display filter</span>
$ tshark -i eth0 -f <span class="hljs-string">"tcp port 80"</span>

<span class="hljs-comment"># Capture to file</span>
$ tshark -i eth0 -w capture.pcapng

<span class="hljs-comment"># Read and analyze file</span>
$ tshark -r capture.pcapng

<span class="hljs-comment"># Protocol statistics</span>
$ tshark -r capture.pcapng -q -z io,phs

<span class="hljs-comment"># Conversation statistics</span>
$ tshark -r capture.pcapng -q -z conv,tcp
$ tshark -r capture.pcapng -q -z conv,udp

<span class="hljs-comment"># HTTP statistics</span>
$ tshark -r capture.pcapng -q -z http,<span class="hljs-built_in">stat</span>
$ tshark -r capture.pcapng -q -z http,tree
</div></code></pre>
<h3 id="advanced-tshark-analysis">Advanced <code>tshark</code> Analysis</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Extract specific fields</span>
$ tshark -r capture.pcapng -T fields -e ip.src -e ip.dst -e tcp.port

<span class="hljs-comment"># Filter and extract HTTP data</span>
$ tshark -r capture.pcapng -Y <span class="hljs-string">"http.request"</span> -T fields -e http.host -e http.request.uri

<span class="hljs-comment"># DNS analysis</span>
$ tshark -r capture.pcapng -Y <span class="hljs-string">"dns"</span> -T fields -e dns.qry.name -e dns.resp.addr

<span class="hljs-comment"># SSL/TLS analysis</span>
$ tshark -r capture.pcapng -Y <span class="hljs-string">"ssl.handshake.type == 1"</span> -T fields -e ip.src -e ssl.handshake.extensions_server_name

<span class="hljs-comment"># Export objects</span>
$ tshark -r capture.pcapng --<span class="hljs-built_in">export</span>-objects http,/tmp/http_objects/

<span class="hljs-comment"># Follow TCP streams</span>
$ tshark -r capture.pcapng -q -z follow,tcp,ascii,0
</div></code></pre>
<h2 id="%F0%9F%9B%A1%EF%B8%8F-firewall-management">üõ°Ô∏è Firewall Management</h2>
<h3 id="using-iptables">Using <code>iptables</code></h3>
<pre class="hljs"><code><div><span class="hljs-comment"># View current rules</span>
$ sudo iptables -L
$ sudo iptables -L -n -v  <span class="hljs-comment"># Numerical, verbose</span>

Chain INPUT (policy ACCEPT)
target     prot opt <span class="hljs-built_in">source</span>               destination
ACCEPT     all  --  anywhere             anywhere             ctstate RELATED,ESTABLISHED
ACCEPT     all  --  anywhere             anywhere
INPUT_direct  all  --  anywhere             anywhere

<span class="hljs-comment"># View specific chain</span>
$ sudo iptables -L INPUT
$ sudo iptables -L OUTPUT
$ sudo iptables -L FORWARD

<span class="hljs-comment"># View with line numbers</span>
$ sudo iptables -L --line-numbers
</div></code></pre>
<h3 id="basic-iptables-rules">Basic <code>iptables</code> Rules</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Allow SSH (port 22)</span>
$ sudo iptables -A INPUT -p tcp --dport 22 -j ACCEPT

<span class="hljs-comment"># Allow HTTP and HTTPS</span>
$ sudo iptables -A INPUT -p tcp --dport 80 -j ACCEPT
$ sudo iptables -A INPUT -p tcp --dport 443 -j ACCEPT

<span class="hljs-comment"># Allow from specific IP</span>
$ sudo iptables -A INPUT -s 192.168.1.100 -j ACCEPT

<span class="hljs-comment"># Block specific IP</span>
$ sudo iptables -A INPUT -s 192.168.1.200 -j DROP

<span class="hljs-comment"># Allow loopback</span>
$ sudo iptables -A INPUT -i lo -j ACCEPT

<span class="hljs-comment"># Allow established connections</span>
$ sudo iptables -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT

<span class="hljs-comment"># Set default policies</span>
$ sudo iptables -P INPUT DROP
$ sudo iptables -P FORWARD DROP
$ sudo iptables -P OUTPUT ACCEPT
</div></code></pre>
<h3 id="advanced-iptables-usage">Advanced <code>iptables</code> Usage</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Rate limiting (prevent DoS)</span>
$ sudo iptables -A INPUT -p tcp --dport 22 -m <span class="hljs-built_in">limit</span> --<span class="hljs-built_in">limit</span> 3/min --<span class="hljs-built_in">limit</span>-burst 3 -j ACCEPT

<span class="hljs-comment"># Port forwarding</span>
$ sudo iptables -t nat -A PREROUTING -p tcp --dport 8080 -j REDIRECT --to-port 80

<span class="hljs-comment"># NAT (masquerading)</span>
$ sudo iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE

<span class="hljs-comment"># Log dropped packets</span>
$ sudo iptables -A INPUT -j LOG --<span class="hljs-built_in">log</span>-prefix <span class="hljs-string">"DROPPED: "</span>
$ sudo iptables -A INPUT -j DROP

<span class="hljs-comment"># Delete specific rule</span>
$ sudo iptables -D INPUT 3  <span class="hljs-comment"># Delete rule number 3</span>
$ sudo iptables -D INPUT -p tcp --dport 80 -j ACCEPT  <span class="hljs-comment"># Delete specific rule</span>

<span class="hljs-comment"># Flush all rules</span>
$ sudo iptables -F
$ sudo iptables -t nat -F

<span class="hljs-comment"># Save and restore rules</span>
$ sudo iptables-save &gt; /etc/iptables/rules.v4
$ sudo iptables-restore &lt; /etc/iptables/rules.v4
</div></code></pre>
<h3 id="using-ufw-uncomplicated-firewall">Using <code>ufw</code> (Uncomplicated Firewall)</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Enable/disable firewall</span>
$ sudo ufw <span class="hljs-built_in">enable</span>
$ sudo ufw <span class="hljs-built_in">disable</span>

<span class="hljs-comment"># Check status</span>
$ sudo ufw status
$ sudo ufw status verbose
$ sudo ufw status numbered

<span class="hljs-comment"># Basic rules</span>
$ sudo ufw allow 22
$ sudo ufw allow ssh
$ sudo ufw allow 80/tcp
$ sudo ufw allow 443/tcp

<span class="hljs-comment"># Allow from specific IP</span>
$ sudo ufw allow from 192.168.1.100
$ sudo ufw allow from 192.168.1.0/24

<span class="hljs-comment"># Allow to specific port from specific IP</span>
$ sudo ufw allow from 192.168.1.100 to any port 22

<span class="hljs-comment"># Deny rules</span>
$ sudo ufw deny 23
$ sudo ufw deny from 192.168.1.200

<span class="hljs-comment"># Delete rules</span>
$ sudo ufw delete allow 80
$ sudo ufw delete 3  <span class="hljs-comment"># Delete rule number 3</span>

<span class="hljs-comment"># Reset firewall</span>
$ sudo ufw --force reset
</div></code></pre>
<h2 id="%F0%9F%93%8A-network-performance-testing">üìä Network Performance Testing</h2>
<h3 id="using-iperf3">Using <code>iperf3</code></h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Server mode (on target machine)</span>
$ iperf3 -s
-----------------------------------------------------------
Server listening on 5201
-----------------------------------------------------------

<span class="hljs-comment"># Client mode (test bandwidth)</span>
$ iperf3 -c 192.168.1.100
Connecting to host 192.168.1.100, port 5201
[  5] <span class="hljs-built_in">local</span> 192.168.1.200 port 54321 connected to 192.168.1.100 port 5201
[ ID] Interval           Transfer     Bitrate         Retr  Cwnd
[  5]   0.00-1.00   sec  112 MBytes   941 Mbits/sec    0    408 KBytes
[  5]   1.00-2.00   sec  112 MBytes   941 Mbits/sec    0    408 KBytes
...
[  5]   0.00-10.00  sec  1.10 GBytes   941 Mbits/sec    0             sender
[  5]   0.00-10.04  sec  1.10 GBytes   938 Mbits/sec                  receiver

<span class="hljs-comment"># UDP test</span>
$ iperf3 -c 192.168.1.100 -u

<span class="hljs-comment"># Reverse test (server sends to client)</span>
$ iperf3 -c 192.168.1.100 -R

<span class="hljs-comment"># Bidirectional test</span>
$ iperf3 -c 192.168.1.100 --bidir

<span class="hljs-comment"># Custom duration and parallel streams</span>
$ iperf3 -c 192.168.1.100 -t 60 -P 4

<span class="hljs-comment"># Test specific bandwidth</span>
$ iperf3 -c 192.168.1.100 -u -b 100M
</div></code></pre>
<h3 id="using-mtr-my-traceroute">Using <code>mtr</code> (My Traceroute)</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Real-time traceroute with statistics</span>
$ mtr google.com
                             My traceroute  [v0.93]
host (192.168.1.100)                    2023-12-15T10:30:00+0000
Keys:  Help   Display mode   Restart statistics   Order of fields   quit
                                           Packets               Pings
 Host                                    Loss%   Snt   Last   Avg  Best  Wrst StDev
 1. 192.168.1.1                          0.0%    10    1.2   1.3   1.1   1.8   0.2
 2. 10.0.0.1                             0.0%    10    5.4   5.6   5.2   6.1   0.3
 3. 203.0.113.1                          0.0%    10   12.3  12.5  12.1  13.2   0.4
 4. google.com                           0.0%    10   15.6  15.8  15.4  16.5   0.3

<span class="hljs-comment"># Report mode (non-interactive)</span>
$ mtr --report --report-cycles 10 google.com

<span class="hljs-comment"># Show IP addresses only</span>
$ mtr -n google.com

<span class="hljs-comment"># Show both hostnames and IPs</span>
$ mtr -b google.com

<span class="hljs-comment"># UDP mode</span>
$ mtr -u google.com

<span class="hljs-comment"># TCP mode</span>
$ mtr -T google.com
</div></code></pre>
<h2 id="%F0%9F%94%A7-advanced-troubleshooting-techniques">üîß Advanced Troubleshooting Techniques</h2>
<h3 id="network-latency-analysis">Network Latency Analysis</h3>
<pre class="hljs"><code><div><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># latency-test.sh - Comprehensive latency analysis</span>

TARGET=<span class="hljs-string">"<span class="hljs-variable">$1</span>"</span>
<span class="hljs-keyword">if</span> [ -z <span class="hljs-string">"<span class="hljs-variable">$TARGET</span>"</span> ]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Usage: <span class="hljs-variable">$0</span> &lt;target&gt;"</span>
    <span class="hljs-built_in">exit</span> 1
<span class="hljs-keyword">fi</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"=== Latency Analysis for <span class="hljs-variable">$TARGET</span> ==="</span>
<span class="hljs-built_in">echo</span>

<span class="hljs-comment"># Basic ping test</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"1. Basic Connectivity:"</span>
ping -c 4 <span class="hljs-string">"<span class="hljs-variable">$TARGET</span>"</span> | tail -1
<span class="hljs-built_in">echo</span>

<span class="hljs-comment"># Detailed ping statistics</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"2. Detailed Ping Statistics:"</span>
ping -c 20 <span class="hljs-string">"<span class="hljs-variable">$TARGET</span>"</span> | grep -E <span class="hljs-string">'min/avg/max'</span>
<span class="hljs-built_in">echo</span>

<span class="hljs-comment"># MTR analysis</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"3. Path Analysis (MTR):"</span>
mtr --report --report-cycles 5 <span class="hljs-string">"<span class="hljs-variable">$TARGET</span>"</span>
<span class="hljs-built_in">echo</span>

<span class="hljs-comment"># Traceroute comparison</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"4. Traceroute Analysis:"</span>
traceroute <span class="hljs-string">"<span class="hljs-variable">$TARGET</span>"</span> 2&gt;/dev/null | tail -5
<span class="hljs-built_in">echo</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"=== Analysis Complete ==="</span>
</div></code></pre>
<h3 id="bandwidth-testing-script">Bandwidth Testing Script</h3>
<pre class="hljs"><code><div><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># bandwidth-test.sh - Multi-target bandwidth testing</span>

TEST_SERVERS=(
    <span class="hljs-string">"iperf.scottlinux.com"</span>
    <span class="hljs-string">"ping.online.net"</span>
    <span class="hljs-string">"bouygues.iperf.fr"</span>
)

<span class="hljs-built_in">echo</span> <span class="hljs-string">"=== Bandwidth Testing ==="</span>
<span class="hljs-built_in">echo</span>

<span class="hljs-keyword">for</span> server <span class="hljs-keyword">in</span> <span class="hljs-string">"<span class="hljs-variable">${TEST_SERVERS[@]}</span>"</span>; <span class="hljs-keyword">do</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Testing against <span class="hljs-variable">$server</span>:"</span>
    timeout 15 iperf3 -c <span class="hljs-string">"<span class="hljs-variable">$server</span>"</span> -t 10 2&gt;/dev/null | grep -E <span class="hljs-string">'sender|receiver'</span> || <span class="hljs-built_in">echo</span> <span class="hljs-string">"Failed to connect"</span>
    <span class="hljs-built_in">echo</span>
    sleep 2
<span class="hljs-keyword">done</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"=== Testing Complete ==="</span>
</div></code></pre>
<h3 id="security-scanning-script">Security Scanning Script</h3>
<pre class="hljs"><code><div><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># security-scan.sh - Basic security assessment</span>

TARGET=<span class="hljs-string">"<span class="hljs-variable">$1</span>"</span>
<span class="hljs-keyword">if</span> [ -z <span class="hljs-string">"<span class="hljs-variable">$TARGET</span>"</span> ]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Usage: <span class="hljs-variable">$0</span> &lt;target&gt;"</span>
    <span class="hljs-built_in">exit</span> 1
<span class="hljs-keyword">fi</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"=== Security Scan for <span class="hljs-variable">$TARGET</span> ==="</span>
<span class="hljs-built_in">echo</span>

<span class="hljs-comment"># Host discovery</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"1. Host Discovery:"</span>
nmap -sn <span class="hljs-string">"<span class="hljs-variable">$TARGET</span>"</span> 2&gt;/dev/null | grep -E <span class="hljs-string">'Nmap scan report|Host is up'</span>
<span class="hljs-built_in">echo</span>

<span class="hljs-comment"># Port scan</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"2. Open Ports:"</span>
nmap -F <span class="hljs-string">"<span class="hljs-variable">$TARGET</span>"</span> 2&gt;/dev/null | grep -E <span class="hljs-string">'open|filtered'</span>
<span class="hljs-built_in">echo</span>

<span class="hljs-comment"># Service detection</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"3. Service Detection:"</span>
nmap -sV --top-ports 100 <span class="hljs-string">"<span class="hljs-variable">$TARGET</span>"</span> 2&gt;/dev/null | grep -E <span class="hljs-string">'open.*tcp'</span>
<span class="hljs-built_in">echo</span>

<span class="hljs-comment"># Basic vulnerability check</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"4. Basic Vulnerability Check:"</span>
nmap --script vuln --top-ports 100 <span class="hljs-string">"<span class="hljs-variable">$TARGET</span>"</span> 2&gt;/dev/null | grep -E <span class="hljs-string">'VULNERABLE|CVE'</span>
<span class="hljs-built_in">echo</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"=== Scan Complete ==="</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Note: This is a basic scan. Use professional tools for comprehensive security assessment."</span>
</div></code></pre>
<h2 id="%F0%9F%A7%A0-knowledge-check">üß† Knowledge Check</h2>
<h3 id="quick-quiz">Quick Quiz</h3>
<ol>
<li>
<p><strong>What's the difference between <code>nmap -sS</code> and <code>nmap -sT</code>?</strong></p>
<details>
<summary>Answer</summary>
<p><code>-sS</code> performs a SYN scan (half-open scan) which is faster and more stealthy, while <code>-sT</code> performs a full TCP connect scan which completes the three-way handshake.</p>
</details>
</li>
<li>
<p><strong>How do you capture only HTTP traffic with tcpdump?</strong></p>
<details>
<summary>Answer</summary>
<pre class="hljs"><code><div>sudo tcpdump -i eth0 <span class="hljs-string">'tcp port 80'</span>
<span class="hljs-comment"># or for both HTTP and HTTPS</span>
sudo tcpdump -i eth0 <span class="hljs-string">'tcp port 80 or tcp port 443'</span>
</div></code></pre>
</details>
</li>
<li>
<p><strong>What iptables command blocks all traffic from IP 192.168.1.100?</strong></p>
<details>
<summary>Answer</summary>
<pre class="hljs"><code><div>sudo iptables -A INPUT -s 192.168.1.100 -j DROP
</div></code></pre>
</details>
</li>
<li>
<p><strong>How do you test bidirectional bandwidth with iperf3?</strong></p>
<details>
<summary>Answer</summary>
<pre class="hljs"><code><div>iperf3 -c server_ip --bidir
</div></code></pre>
</details>
</li>
</ol>
<h3 id="hands-on-challenges">Hands-On Challenges</h3>
<p><strong>Challenge 1: Network Mapping</strong></p>
<pre class="hljs"><code><div><span class="hljs-comment"># Map your local network</span>
<span class="hljs-comment"># Identify all active hosts and their open ports</span>
<span class="hljs-comment"># Create a network diagram with services</span>
</div></code></pre>
<p><strong>Challenge 2: Traffic Analysis</strong></p>
<pre class="hljs"><code><div><span class="hljs-comment"># Capture network traffic for 5 minutes</span>
<span class="hljs-comment"># Analyze the most active connections</span>
<span class="hljs-comment"># Identify the protocols being used</span>
</div></code></pre>
<p><strong>Challenge 3: Security Assessment</strong></p>
<pre class="hljs"><code><div><span class="hljs-comment"># Perform a security scan of a test system</span>
<span class="hljs-comment"># Identify potential vulnerabilities</span>
<span class="hljs-comment"># Create a basic security report</span>
</div></code></pre>
<h2 id="%F0%9F%9A%80-next-steps">üöÄ Next Steps</h2>
<p>Excellent! You've mastered advanced network tools and techniques. You can now:</p>
<ul>
<li>Perform comprehensive network discovery and mapping</li>
<li>Capture and analyze network traffic</li>
<li>Manage firewalls and security policies</li>
<li>Test network performance and diagnose issues</li>
<li>Conduct basic security assessments</li>
</ul>
<p><strong>Ready for real-world applications?</strong> Continue to <a href="11-dns-deep-dive.md">11-dns-deep-dive.md</a> to master DNS configuration, troubleshooting, and security.</p>
<hr>
<blockquote>
<p><strong>Pro Tip</strong>: Always get proper authorization before scanning networks or systems you don't own. Create a lab environment for practicing these tools safely. Consider setting up virtual machines or containers to practice advanced techniques without affecting production systems! üîí</p>
</blockquote>
<h1 id="%F0%9F%8C%90-dns-deep-dive-domain-name-system-mastery">üåê DNS Deep Dive: Domain Name System Mastery</h1>
<blockquote>
<p><strong>Master DNS configuration, troubleshooting, security, and advanced DNS concepts</strong></p>
</blockquote>
<h2 id="%F0%9F%93%96-what-youll-learn">üìñ What You'll Learn</h2>
<p>DNS is the backbone of the internet, translating human-readable domain names into IP addresses. This chapter provides comprehensive coverage of DNS from basic concepts to advanced administration:</p>
<ul>
<li>DNS hierarchy and record types</li>
<li>DNS server configuration and management</li>
<li>Advanced DNS troubleshooting techniques</li>
<li>DNS security (DNSSEC, DoH, DoT)</li>
<li>DNS performance optimization</li>
<li>Common DNS attacks and mitigation</li>
<li>Setting up your own DNS server</li>
</ul>
<h2 id="%F0%9F%8C%8D-why-this-matters">üåç Why This Matters</h2>
<p><strong>Critical applications:</strong></p>
<ul>
<li><strong>Web Services</strong>: Every website depends on DNS resolution</li>
<li><strong>Email</strong>: MX records route email to correct servers</li>
<li><strong>Security</strong>: DNS filtering and threat protection</li>
<li><strong>Performance</strong>: DNS optimization affects user experience</li>
<li><strong>Infrastructure</strong>: Service discovery and load balancing</li>
<li><strong>Troubleshooting</strong>: DNS issues cause 80% of connectivity problems</li>
</ul>
<h2 id="%F0%9F%8F%97%EF%B8%8F-dns-hierarchy-and-architecture">üèóÔ∏è DNS Hierarchy and Architecture</h2>
<h3 id="understanding-dns-structure">Understanding DNS Structure</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># DNS hierarchy visualization</span>
<span class="hljs-comment">#                    . (root)</span>
<span class="hljs-comment">#                   / | \</span>
<span class="hljs-comment">#                 com org net</span>
<span class="hljs-comment">#                /   |   \</span>
<span class="hljs-comment">#           google  |    cloudflare</span>
<span class="hljs-comment">#           /   \   |    /</span>
<span class="hljs-comment">#         www   mail |  1.1.1.1</span>
<span class="hljs-comment">#              /    |</span>
<span class="hljs-comment">#           gmail   |</span>
<span class="hljs-comment">#                wikipedia</span>

<span class="hljs-comment"># Full Qualified Domain Name (FQDN) breakdown:</span>
<span class="hljs-comment"># www.google.com.</span>
<span class="hljs-comment"># |   |      |  |</span>
<span class="hljs-comment"># |   |      |  +-- Root (implicit)</span>
<span class="hljs-comment"># |   |      +-- Top Level Domain (TLD)</span>
<span class="hljs-comment"># |   +-- Second Level Domain (SLD)</span>
<span class="hljs-comment"># +-- Subdomain/Host</span>
</div></code></pre>
<h3 id="dns-record-types">DNS Record Types</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># A Record - IPv4 address</span>
$ dig A google.com
google.com.		300	IN	A	142.250.191.14

<span class="hljs-comment"># AAAA Record - IPv6 address</span>
$ dig AAAA google.com
google.com.		300	IN	AAAA	2607:f8b0:4004:c1b::65

<span class="hljs-comment"># CNAME Record - Canonical name (alias)</span>
$ dig CNAME www.github.com
www.github.com.		3600	IN	CNAME	github.com.

<span class="hljs-comment"># MX Record - Mail exchange</span>
$ dig MX google.com
google.com.		600	IN	MX	10 smtp.google.com.
google.com.		600	IN	MX	20 smtp2.google.com.
google.com.		600	IN	MX	30 smtp3.google.com.

<span class="hljs-comment"># NS Record - Name server</span>
$ dig NS google.com
google.com.		172800	IN	NS	ns1.google.com.
google.com.		172800	IN	NS	ns2.google.com.

<span class="hljs-comment"># TXT Record - Text information</span>
$ dig TXT google.com
google.com.		300	IN	TXT	<span class="hljs-string">"v=spf1 include:_spf.google.com ~all"</span>
google.com.		300	IN	TXT	<span class="hljs-string">"google-site-verification=..."</span>

<span class="hljs-comment"># PTR Record - Reverse DNS</span>
$ dig -x 8.8.8.8
8.8.8.8.in-addr.arpa.	86400	IN	PTR	dns.google.

<span class="hljs-comment"># SOA Record - Start of Authority</span>
$ dig SOA google.com
google.com.		60	IN	SOA	ns1.google.com. dns-admin.google.com. 2023121501 7200 3600 1209600 3600

<span class="hljs-comment"># SRV Record - Service location</span>
$ dig SRV _sip._tcp.example.com
_sip._tcp.example.com.	300	IN	SRV	10 5 5060 sip.example.com.
</div></code></pre>
<h3 id="dns-resolution-process">DNS Resolution Process</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Step-by-step DNS resolution for www.google.com</span>

<span class="hljs-comment"># 1. Check local cache</span>
$ systemd-resolve --status | grep -A 20 <span class="hljs-string">"DNS Servers"</span>

<span class="hljs-comment"># 2. Query recursive resolver</span>
$ dig +trace www.google.com

; &lt;&lt;&gt;&gt; DiG 9.16.1-Ubuntu &lt;&lt;&gt;&gt; +trace www.google.com
;; global options: +cmd
.			518400	IN	NS	a.root-servers.net.
.			518400	IN	NS	b.root-servers.net.
;; Received 228 bytes from 8.8.8.8<span class="hljs-comment">#53(8.8.8.8) in 12 ms</span>

com.			172800	IN	NS	a.gtld-servers.net.
com.			172800	IN	NS	b.gtld-servers.net.
;; Received 1173 bytes from 198.41.0.4<span class="hljs-comment">#53(a.root-servers.net) in 89 ms</span>

google.com.		172800	IN	NS	ns1.google.com.
google.com.		172800	IN	NS	ns2.google.com.
;; Received 839 bytes from 192.5.6.30<span class="hljs-comment">#53(a.gtld-servers.net) in 45 ms</span>

www.google.com.		300	IN	A	142.250.191.147
;; Received 62 bytes from 216.239.32.10<span class="hljs-comment">#53(ns1.google.com) in 23 ms</span>

<span class="hljs-comment"># 3. Understanding the trace:</span>
<span class="hljs-comment"># Root servers (.) -&gt; TLD servers (.com) -&gt; Authoritative servers (google.com)</span>
</div></code></pre>
<h2 id="%F0%9F%94%A7-dns-server-configuration">üîß DNS Server Configuration</h2>
<h3 id="setting-up-bind9-dns-server">Setting up BIND9 DNS Server</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Install BIND9</span>
$ sudo apt update
$ sudo apt install bind9 bind9utils bind9-doc

<span class="hljs-comment"># Main configuration file</span>
$ sudo nano /etc/<span class="hljs-built_in">bind</span>/named.conf.local

<span class="hljs-comment"># Add zone configuration</span>
zone <span class="hljs-string">"example.local"</span> {
    <span class="hljs-built_in">type</span> master;
    file <span class="hljs-string">"/etc/bind/db.example.local"</span>;
};

zone <span class="hljs-string">"1.168.192.in-addr.arpa"</span> {
    <span class="hljs-built_in">type</span> master;
    file <span class="hljs-string">"/etc/bind/db.192.168.1"</span>;
};

<span class="hljs-comment"># Create forward zone file</span>
$ sudo nano /etc/<span class="hljs-built_in">bind</span>/db.example.local

;
; BIND data file <span class="hljs-keyword">for</span> example.local
;
<span class="hljs-variable">$TTL</span>    604800
@       IN      SOA     ns1.example.local. admin.example.local. (
                              2023121501         ; Serial
                                 604800         ; Refresh
                                  86400         ; Retry
                                2419200         ; Expire
                                 604800 )       ; Negative Cache TTL
;
@       IN      NS      ns1.example.local.
@       IN      A       192.168.1.10
ns1     IN      A       192.168.1.10
www     IN      A       192.168.1.20
mail    IN      A       192.168.1.30
ftp     IN      A       192.168.1.40
@       IN      MX  10  mail.example.local.

<span class="hljs-comment"># Create reverse zone file</span>
$ sudo nano /etc/<span class="hljs-built_in">bind</span>/db.192.168.1

;
; BIND reverse data file <span class="hljs-keyword">for</span> 192.168.1.x
;
<span class="hljs-variable">$TTL</span>    604800
@       IN      SOA     ns1.example.local. admin.example.local. (
                              2023121501         ; Serial
                                 604800         ; Refresh
                                  86400         ; Retry
                                2419200         ; Expire
                                 604800 )       ; Negative Cache TTL
;
@       IN      NS      ns1.example.local.
10      IN      PTR     ns1.example.local.
20      IN      PTR     www.example.local.
30      IN      PTR     mail.example.local.
40      IN      PTR     ftp.example.local.

<span class="hljs-comment"># Check configuration</span>
$ sudo named-checkconf
$ sudo named-checkzone example.local /etc/<span class="hljs-built_in">bind</span>/db.example.local
$ sudo named-checkzone 1.168.192.in-addr.arpa /etc/<span class="hljs-built_in">bind</span>/db.192.168.1

<span class="hljs-comment"># Restart BIND9</span>
$ sudo systemctl restart bind9
$ sudo systemctl <span class="hljs-built_in">enable</span> bind9

<span class="hljs-comment"># Test the DNS server</span>
$ dig @localhost example.local
$ dig @localhost www.example.local
$ dig @localhost -x 192.168.1.20
</div></code></pre>
<h3 id="dns-forwarders-and-caching">DNS Forwarders and Caching</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Configure DNS forwarders</span>
$ sudo nano /etc/<span class="hljs-built_in">bind</span>/named.conf.options

options {
        directory <span class="hljs-string">"/var/cache/bind"</span>;

        // Forwarders
        forwarders {
                8.8.8.8;
                1.1.1.1;
        };

        // Forward only (don<span class="hljs-string">'t do recursive queries)
        forward only;

        // Allow queries from local network
        allow-query { localhost; 192.168.1.0/24; };

        // Allow recursion for local network
        allow-recursion { localhost; 192.168.1.0/24; };

        // DNS security
        dnssec-validation auto;

        // Listen on specific interfaces
        listen-on { 127.0.0.1; 192.168.1.10; };
        listen-on-v6 { ::1; };
};

# View DNS cache
$ sudo rndc dumpdb -cache
$ sudo cat /var/cache/bind/named_dump.db | grep google.com

# Clear DNS cache
$ sudo rndc flush

# Reload configuration
$ sudo rndc reload

# View DNS statistics
$ sudo rndc stats
$ sudo cat /var/cache/bind/named.stats
</span></div></code></pre>
<h3 id="dns-load-balancing">DNS Load Balancing</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Round-robin DNS (multiple A records)</span>
$ sudo nano /etc/<span class="hljs-built_in">bind</span>/db.example.local

www     IN      A       192.168.1.20
www     IN      A       192.168.1.21
www     IN      A       192.168.1.22

<span class="hljs-comment"># Test round-robin</span>
$ <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> {1..6}; <span class="hljs-keyword">do</span> dig +short www.example.local; <span class="hljs-keyword">done</span>
192.168.1.20
192.168.1.21
192.168.1.22
192.168.1.20
192.168.1.21
192.168.1.22

<span class="hljs-comment"># Weighted records (using SRV)</span>
$ sudo nano /etc/<span class="hljs-built_in">bind</span>/db.example.local

_http._tcp.www  IN  SRV  10  60  80  server1.example.local.
_http._tcp.www  IN  SRV  10  30  80  server2.example.local.
_http._tcp.www  IN  SRV  10  10  80  server3.example.local.

<span class="hljs-comment"># Geographic DNS (views)</span>
$ sudo nano /etc/<span class="hljs-built_in">bind</span>/named.conf.local

acl <span class="hljs-string">"us-clients"</span> {
    192.168.1.0/24;
};

acl <span class="hljs-string">"eu-clients"</span> {
    10.0.0.0/8;
};

view <span class="hljs-string">"us"</span> {
    match-clients { <span class="hljs-string">"us-clients"</span>; };
    zone <span class="hljs-string">"example.com"</span> {
        <span class="hljs-built_in">type</span> master;
        file <span class="hljs-string">"/etc/bind/db.example.com.us"</span>;
    };
};

view <span class="hljs-string">"eu"</span> {
    match-clients { <span class="hljs-string">"eu-clients"</span>; };
    zone <span class="hljs-string">"example.com"</span> {
        <span class="hljs-built_in">type</span> master;
        file <span class="hljs-string">"/etc/bind/db.example.com.eu"</span>;
    };
};
</div></code></pre>
<h2 id="%F0%9F%94%8D-advanced-dns-troubleshooting">üîç Advanced DNS Troubleshooting</h2>
<h3 id="comprehensive-dns-diagnostics">Comprehensive DNS Diagnostics</h3>
<pre class="hljs"><code><div><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># dns-troubleshoot.sh - Complete DNS diagnostic tool</span>

DOMAIN=<span class="hljs-string">"<span class="hljs-variable">$1</span>"</span>
<span class="hljs-keyword">if</span> [ -z <span class="hljs-string">"<span class="hljs-variable">$DOMAIN</span>"</span> ]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Usage: <span class="hljs-variable">$0</span> &lt;domain&gt;"</span>
    <span class="hljs-built_in">exit</span> 1
<span class="hljs-keyword">fi</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"=== DNS Troubleshooting for <span class="hljs-variable">$DOMAIN</span> ==="</span>
<span class="hljs-built_in">echo</span>

<span class="hljs-comment"># 1. Basic resolution test</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"1. Basic Resolution:"</span>
dig +short <span class="hljs-string">"<span class="hljs-variable">$DOMAIN</span>"</span> || <span class="hljs-built_in">echo</span> <span class="hljs-string">"‚ùå Resolution failed"</span>
<span class="hljs-built_in">echo</span>

<span class="hljs-comment"># 2. Authoritative servers</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"2. Authoritative Name Servers:"</span>
dig +short NS <span class="hljs-string">"<span class="hljs-variable">$DOMAIN</span>"</span>
<span class="hljs-built_in">echo</span>

<span class="hljs-comment"># 3. SOA record analysis</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"3. SOA Record:"</span>
dig +short SOA <span class="hljs-string">"<span class="hljs-variable">$DOMAIN</span>"</span>
<span class="hljs-built_in">echo</span>

<span class="hljs-comment"># 4. TTL analysis</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"4. TTL Values:"</span>
dig <span class="hljs-string">"<span class="hljs-variable">$DOMAIN</span>"</span> | grep -E <span class="hljs-string">"^<span class="hljs-variable">$DOMAIN</span>.*IN.*A"</span> | awk <span class="hljs-string">'{print "A record TTL: " $2}'</span>
<span class="hljs-built_in">echo</span>

<span class="hljs-comment"># 5. Test multiple DNS servers</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"5. Resolution from Different Servers:"</span>
<span class="hljs-keyword">for</span> server <span class="hljs-keyword">in</span> 8.8.8.8 1.1.1.1 208.67.222.222; <span class="hljs-keyword">do</span>
    <span class="hljs-built_in">echo</span> -n <span class="hljs-string">"<span class="hljs-variable">$server</span>: "</span>
    dig @<span class="hljs-string">"<span class="hljs-variable">$server</span>"</span> +short <span class="hljs-string">"<span class="hljs-variable">$DOMAIN</span>"</span> | head -1 || <span class="hljs-built_in">echo</span> <span class="hljs-string">"Failed"</span>
<span class="hljs-keyword">done</span>
<span class="hljs-built_in">echo</span>

<span class="hljs-comment"># 6. Reverse DNS</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"6. Reverse DNS:"</span>
IP=$(dig +short <span class="hljs-string">"<span class="hljs-variable">$DOMAIN</span>"</span> | head -1)
<span class="hljs-keyword">if</span> [ ! -z <span class="hljs-string">"<span class="hljs-variable">$IP</span>"</span> ]; <span class="hljs-keyword">then</span>
    dig +short -x <span class="hljs-string">"<span class="hljs-variable">$IP</span>"</span> || <span class="hljs-built_in">echo</span> <span class="hljs-string">"No reverse DNS"</span>
<span class="hljs-keyword">else</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"No IP to reverse lookup"</span>
<span class="hljs-keyword">fi</span>
<span class="hljs-built_in">echo</span>

<span class="hljs-comment"># 7. DNS propagation check</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"7. DNS Propagation (Root Servers):"</span>
<span class="hljs-keyword">for</span> root <span class="hljs-keyword">in</span> a.root-servers.net b.root-servers.net c.root-servers.net; <span class="hljs-keyword">do</span>
    <span class="hljs-built_in">echo</span> -n <span class="hljs-string">"<span class="hljs-variable">$root</span>: "</span>
    timeout 5 dig @<span class="hljs-string">"<span class="hljs-variable">$root</span>"</span> <span class="hljs-string">"<span class="hljs-variable">$DOMAIN</span>"</span> +short 2&gt;/dev/null | head -1 || <span class="hljs-built_in">echo</span> <span class="hljs-string">"Timeout/No response"</span>
<span class="hljs-keyword">done</span>
<span class="hljs-built_in">echo</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"=== Troubleshooting Complete ==="</span>
</div></code></pre>
<h3 id="dns-performance-analysis">DNS Performance Analysis</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># DNS response time testing</span>
$ dig +stats google.com | grep <span class="hljs-string">"Query time"</span>
;; Query time: 12 msec

<span class="hljs-comment"># Batch DNS performance test</span>
<span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># dns-performance.sh</span>

DOMAINS=(<span class="hljs-string">"google.com"</span> <span class="hljs-string">"facebook.com"</span> <span class="hljs-string">"amazon.com"</span> <span class="hljs-string">"microsoft.com"</span> <span class="hljs-string">"apple.com"</span>)
SERVERS=(<span class="hljs-string">"8.8.8.8"</span> <span class="hljs-string">"1.1.1.1"</span> <span class="hljs-string">"208.67.222.222"</span> <span class="hljs-string">"9.9.9.9"</span>)

<span class="hljs-built_in">echo</span> <span class="hljs-string">"DNS Performance Test"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"==================="</span>
<span class="hljs-built_in">printf</span> <span class="hljs-string">"%-15s"</span> <span class="hljs-string">"Server"</span>
<span class="hljs-keyword">for</span> domain <span class="hljs-keyword">in</span> <span class="hljs-string">"<span class="hljs-variable">${DOMAINS[@]}</span>"</span>; <span class="hljs-keyword">do</span>
    <span class="hljs-built_in">printf</span> <span class="hljs-string">"%-15s"</span> <span class="hljs-string">"<span class="hljs-variable">$domain</span>"</span>
<span class="hljs-keyword">done</span>
<span class="hljs-built_in">echo</span>

<span class="hljs-keyword">for</span> server <span class="hljs-keyword">in</span> <span class="hljs-string">"<span class="hljs-variable">${SERVERS[@]}</span>"</span>; <span class="hljs-keyword">do</span>
    <span class="hljs-built_in">printf</span> <span class="hljs-string">"%-15s"</span> <span class="hljs-string">"<span class="hljs-variable">$server</span>"</span>
    <span class="hljs-keyword">for</span> domain <span class="hljs-keyword">in</span> <span class="hljs-string">"<span class="hljs-variable">${DOMAINS[@]}</span>"</span>; <span class="hljs-keyword">do</span>
        time=$(dig @<span class="hljs-string">"<span class="hljs-variable">$server</span>"</span> <span class="hljs-string">"<span class="hljs-variable">$domain</span>"</span> | grep <span class="hljs-string">"Query time"</span> | awk <span class="hljs-string">'{print $4}'</span>)
        <span class="hljs-built_in">printf</span> <span class="hljs-string">"%-15s"</span> <span class="hljs-string">"<span class="hljs-variable">${time}</span>ms"</span>
    <span class="hljs-keyword">done</span>
    <span class="hljs-built_in">echo</span>
<span class="hljs-keyword">done</span>

<span class="hljs-comment"># DNS cache analysis</span>
$ systemd-resolve --statistics
DNSSEC supported by current servers: no
Transactions
Current Transactions: 0
Total Transactions: 12345

Cache
Current Cache Size: 150
Cache Hits: 8901
Cache Misses: 3444

<span class="hljs-comment"># Clear system DNS cache</span>
$ sudo systemd-resolve --flush-caches
$ sudo systemctl restart systemd-resolved
</div></code></pre>
<h3 id="dns-debugging-tools">DNS Debugging Tools</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Verbose dig output</span>
$ dig +trace +additional +answer google.com

<span class="hljs-comment"># Show all record types</span>
$ dig ANY google.com

<span class="hljs-comment"># Query specific DNS server with debugging</span>
$ dig @8.8.8.8 +debug google.com

<span class="hljs-comment"># DNS over HTTPS testing</span>
$ curl -H <span class="hljs-string">"accept: application/dns-json"</span> <span class="hljs-string">"https://cloudflare-dns.com/dns-query?name=google.com&amp;type=A"</span>

<span class="hljs-comment"># DNS over TLS testing</span>
$ kdig @1.1.1.1 +tls google.com

<span class="hljs-comment"># Monitor DNS queries in real-time</span>
$ sudo tcpdump -i any -n port 53

<span class="hljs-comment"># DNS query logging with named</span>
$ sudo nano /etc/<span class="hljs-built_in">bind</span>/named.conf.local

logging {
    channel query_log {
        file <span class="hljs-string">"/var/log/bind/query.log"</span> versions 3 size 5m;
        severity info;
        <span class="hljs-built_in">print</span>-category yes;
        <span class="hljs-built_in">print</span>-severity yes;
        <span class="hljs-built_in">print</span>-time yes;
    };
    category queries { query_log; };
};

<span class="hljs-comment"># View DNS query logs</span>
$ sudo tail -f /var/<span class="hljs-built_in">log</span>/<span class="hljs-built_in">bind</span>/query.log
</div></code></pre>
<h2 id="%F0%9F%94%92-dns-security">üîí DNS Security</h2>
<h3 id="dnssec-implementation">DNSSEC Implementation</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Generate DNSSEC keys</span>
$ sudo dnssec-keygen -a RSASHA256 -b 2048 -n ZONE example.local
$ sudo dnssec-keygen -a RSASHA256 -b 2048 -n ZONE -f KSK example.local

<span class="hljs-comment"># Sign the zone</span>
$ sudo dnssec-signzone -o example.local -k Kexample.local.+008+12345.key db.example.local Kexample.local.+008+54321.key

<span class="hljs-comment"># Update BIND configuration for DNSSEC</span>
$ sudo nano /etc/<span class="hljs-built_in">bind</span>/named.conf.local

zone <span class="hljs-string">"example.local"</span> {
    <span class="hljs-built_in">type</span> master;
    file <span class="hljs-string">"/etc/bind/db.example.local.signed"</span>;
    key-directory <span class="hljs-string">"/etc/bind"</span>;
    auto-dnssec maintain;
    inline-signing yes;
};

<span class="hljs-comment"># Verify DNSSEC</span>
$ dig +dnssec example.local
$ dig +dnssec +multiline example.local

<span class="hljs-comment"># Check DNSSEC validation</span>
$ dig @8.8.8.8 +dnssec google.com | grep -E <span class="hljs-string">"ad|RRSIG"</span>
</div></code></pre>
<h3 id="dns-filtering-and-security">DNS Filtering and Security</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Configure DNS filtering with Pi-hole</span>
$ curl -sSL https://install.pi-hole.net | bash

<span class="hljs-comment"># Manual DNS blacklist configuration</span>
$ sudo nano /etc/<span class="hljs-built_in">bind</span>/named.conf.local

<span class="hljs-comment"># Blackhole zone for malicious domains</span>
zone <span class="hljs-string">"malicious.com"</span> {
    <span class="hljs-built_in">type</span> master;
    file <span class="hljs-string">"/etc/bind/db.blackhole"</span>;
};

<span class="hljs-comment"># Create blackhole zone file</span>
$ sudo nano /etc/<span class="hljs-built_in">bind</span>/db.blackhole

<span class="hljs-variable">$TTL</span> 86400
@   IN  SOA localhost. root.localhost. (
        2023121501
        3600
        1800
        604800
        86400 )
@   IN  NS  localhost.
@   IN  A   127.0.0.1
*   IN  A   127.0.0.1

<span class="hljs-comment"># DNS over HTTPS (DoH) configuration</span>
$ sudo nano /etc/systemd/resolved.conf

[Resolve]
DNS=1.1.1.1<span class="hljs-comment">#cloudflare-dns.com 8.8.8.8#dns.google</span>
DNSOverTLS=yes
DNSSEC=yes

<span class="hljs-comment"># Test DoH</span>
$ systemd-resolve --status | grep -A 5 <span class="hljs-string">"DNS Servers"</span>

<span class="hljs-comment"># DNS monitoring for security</span>
$ sudo tcpdump -i any -n <span class="hljs-string">'port 53 and host not 127.0.0.1'</span> | grep -E <span class="hljs-string">'suspicious|malware|phishing'</span>
</div></code></pre>
<h3 id="dns-attack-detection">DNS Attack Detection</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># DNS amplification attack detection</span>
$ sudo netstat -nu | awk <span class="hljs-string">'/^udp/ &amp;&amp; $4 ~ /:53$/ {print $2}'</span> | sort -n

<span class="hljs-comment"># Monitor DNS query patterns</span>
<span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># dns-monitor.sh - Detect suspicious DNS activity</span>

LOGFILE=<span class="hljs-string">"/var/log/bind/query.log"</span>
THRESHOLD=100

<span class="hljs-built_in">echo</span> <span class="hljs-string">"DNS Security Monitor"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"==================="</span>

<span class="hljs-comment"># Check for high query volume from single IP</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"High Volume Queries (last hour):"</span>
tail -n 10000 <span class="hljs-string">"<span class="hljs-variable">$LOGFILE</span>"</span> | grep <span class="hljs-string">"<span class="hljs-variable">$(date '+%d-%b-%Y %H')</span>"</span> | \
    awk <span class="hljs-string">'{print $7}'</span> | sort | uniq -c | sort -nr | head -10

<span class="hljs-comment"># Check for suspicious domains</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"\nSuspicious Domain Queries:"</span>
tail -n 10000 <span class="hljs-string">"<span class="hljs-variable">$LOGFILE</span>"</span> | grep -E <span class="hljs-string">'(bit\.ly|tinyurl|suspicious)'</span> | \
    awk <span class="hljs-string">'{print $9}'</span> | sort | uniq -c | sort -nr

<span class="hljs-comment"># Check for DNS tunneling indicators</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"\nPotential DNS Tunneling:"</span>
tail -n 10000 <span class="hljs-string">"<span class="hljs-variable">$LOGFILE</span>"</span> | grep -E <span class="hljs-string">'TXT|NULL'</span> | \
    awk <span class="hljs-string">'length($9) &gt; 50 {print $7, $9}'</span> | head -10

<span class="hljs-built_in">echo</span> <span class="hljs-string">"\n=== Monitor Complete ==="</span>
</div></code></pre>
<h2 id="%F0%9F%9A%80-dns-performance-optimization">üöÄ DNS Performance Optimization</h2>
<h3 id="caching-strategies">Caching Strategies</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Optimize BIND cache settings</span>
$ sudo nano /etc/<span class="hljs-built_in">bind</span>/named.conf.options

options {
    // Increase cache size
    max-cache-size 512M;

    // Optimize cache TTL
    max-cache-ttl 86400;        // 1 day
    max-ncache-ttl 3600;        // 1 hour <span class="hljs-keyword">for</span> negative cache

    // Prefetch expiring records
    prefetch 2 9;

    // Optimize recursion
    recursive-clients 10000;
    tcp-clients 1000;

    // Rate limiting
    rate-limit {
        responses-per-second 20;
        window 5;
    };
};

<span class="hljs-comment"># Monitor cache performance</span>
$ sudo rndc stats
$ grep -E <span class="hljs-string">"cache|queries"</span> /var/cache/<span class="hljs-built_in">bind</span>/named.stats

<span class="hljs-comment"># DNS cache warming script</span>
<span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># dns-warm.sh - Warm DNS cache with popular domains</span>

POPULAR_DOMAINS=(
    <span class="hljs-string">"google.com"</span> <span class="hljs-string">"youtube.com"</span> <span class="hljs-string">"facebook.com"</span> <span class="hljs-string">"amazon.com"</span>
    <span class="hljs-string">"wikipedia.org"</span> <span class="hljs-string">"twitter.com"</span> <span class="hljs-string">"instagram.com"</span> <span class="hljs-string">"linkedin.com"</span>
    <span class="hljs-string">"netflix.com"</span> <span class="hljs-string">"microsoft.com"</span> <span class="hljs-string">"apple.com"</span> <span class="hljs-string">"github.com"</span>
)

<span class="hljs-built_in">echo</span> <span class="hljs-string">"Warming DNS cache..."</span>
<span class="hljs-keyword">for</span> domain <span class="hljs-keyword">in</span> <span class="hljs-string">"<span class="hljs-variable">${POPULAR_DOMAINS[@]}</span>"</span>; <span class="hljs-keyword">do</span>
    dig <span class="hljs-string">"<span class="hljs-variable">$domain</span>"</span> &gt; /dev/null 2&gt;&amp;1
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Cached: <span class="hljs-variable">$domain</span>"</span>
<span class="hljs-keyword">done</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Cache warming complete!"</span>
</div></code></pre>
<h3 id="dns-load-testing">DNS Load Testing</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Install dnsperf for load testing</span>
$ sudo apt install dnsperf

<span class="hljs-comment"># Create query file</span>
$ cat &gt; queries.txt &lt;&lt; EOF
google.com A
facebook.com A
amazon.com A
microsoft.com A
apple.com A
EOF

<span class="hljs-comment"># Run DNS performance test</span>
$ dnsperf -s 8.8.8.8 -d queries.txt -l 30

DNS Performance Testing Tool
Version 2.3.2

[Status] Command line: dnsperf -s 8.8.8.8 -d queries.txt -l 30
[Status] Sending queries (to 8.8.8.8:53)
[Status] Started at: Mon Dec 15 10:30:00 2023
[Status] Stopping after 30.000000 seconds
[Timeout] Query timed out: msg id 1234
[Status] Testing complete (time <span class="hljs-built_in">limit</span>)

Statistics:

  Queries sent:         1500
  Queries completed:    1485 (99.00%)
  Queries lost:         15 (1.00%)

  Response codes:       NOERROR 1485 (100.00%)
  Average packet size:  request 28, response 44
  Run time (s):         30.000000
  Queries per second:   49.500000

  Average Latency (s):  0.012345 (min 0.001234, max 0.098765)
  Latency StdDev (s):   0.005678

<span class="hljs-comment"># Concurrent DNS testing</span>
$ <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> {1..10}; <span class="hljs-keyword">do</span>
    (dnsperf -s 8.8.8.8 -d queries.txt -l 10 &amp;)
<span class="hljs-keyword">done</span>
<span class="hljs-built_in">wait</span>
</div></code></pre>
<h2 id="%F0%9F%A7%A0-knowledge-check">üß† Knowledge Check</h2>
<h3 id="quick-quiz">Quick Quiz</h3>
<ol>
<li>
<p><strong>What's the difference between recursive and iterative DNS queries?</strong></p>
<details>
<summary>Answer</summary>
<p>Recursive: DNS server does all the work, querying other servers until it gets the final answer. Iterative: DNS server returns referrals, and the client must query each server in the chain.</p>
</details>
</li>
<li>
<p><strong>What does a TTL of 300 seconds mean in a DNS record?</strong></p>
<details>
<summary>Answer</summary>
<p>The record can be cached for 300 seconds (5 minutes) before it should be refreshed from the authoritative server.</p>
</details>
</li>
<li>
<p><strong>How do you check if DNSSEC is working for a domain?</strong></p>
<details>
<summary>Answer</summary>
<pre class="hljs"><code><div>dig +dnssec domain.com
<span class="hljs-comment"># Look for RRSIG records and the 'ad' (authenticated data) flag</span>
</div></code></pre>
</details>
</li>
<li>
<p><strong>What's the purpose of an MX record's priority number?</strong></p>
<details>
<summary>Answer</summary>
<p>Lower numbers have higher priority. Mail servers try the lowest priority first, using higher priority servers as backups.</p>
</details>
</li>
</ol>
<h3 id="hands-on-challenges">Hands-On Challenges</h3>
<p><strong>Challenge 1: DNS Server Setup</strong></p>
<pre class="hljs"><code><div><span class="hljs-comment"># Set up a complete DNS server for a test domain</span>
<span class="hljs-comment"># Include forward and reverse zones</span>
<span class="hljs-comment"># Test all record types</span>
</div></code></pre>
<p><strong>Challenge 2: DNS Security Implementation</strong></p>
<pre class="hljs"><code><div><span class="hljs-comment"># Implement DNSSEC for your test domain</span>
<span class="hljs-comment"># Set up DNS filtering</span>
<span class="hljs-comment"># Monitor for suspicious activity</span>
</div></code></pre>
<p><strong>Challenge 3: DNS Performance Optimization</strong></p>
<pre class="hljs"><code><div><span class="hljs-comment"># Optimize DNS server performance</span>
<span class="hljs-comment"># Implement caching strategies</span>
<span class="hljs-comment"># Conduct load testing</span>
</div></code></pre>
<h2 id="%F0%9F%9A%80-next-steps">üöÄ Next Steps</h2>
<p>Excellent! You've mastered DNS from basic concepts to advanced administration. You can now:</p>
<ul>
<li>Configure and manage DNS servers</li>
<li>Troubleshoot complex DNS issues</li>
<li>Implement DNS security measures</li>
<li>Optimize DNS performance</li>
<li>Detect and prevent DNS attacks</li>
</ul>
<p><strong>Ready for web technologies?</strong> Continue to <a href="12-web-servers-nginx.md">12-web-servers-nginx.md</a> to learn web server configuration and management.</p>
<hr>
<blockquote>
<p><strong>Pro Tip</strong>: DNS changes can take time to propagate globally (up to 48 hours). Always test DNS changes thoroughly in a lab environment first. Keep DNS records simple and well-documented - complex DNS setups are harder to troubleshoot! üåê</p>
</blockquote>
<h1 id="%F0%9F%9B%A1%EF%B8%8F-security--firewalls-network-protection-and-intrusion-detection">üõ°Ô∏è Security &amp; Firewalls: Network Protection and Intrusion Detection</h1>
<blockquote>
<p><strong>Master network security, firewall configuration, and intrusion detection systems</strong></p>
</blockquote>
<h2 id="%F0%9F%93%96-what-youll-learn">üìñ What You'll Learn</h2>
<p>Network security is critical for protecting systems and data. This chapter covers comprehensive security measures from basic firewalls to advanced intrusion detection:</p>
<ul>
<li>Firewall fundamentals and types</li>
<li>iptables and UFW configuration</li>
<li>Network security scanning and assessment</li>
<li>Intrusion detection and prevention systems</li>
<li>Log analysis and security monitoring</li>
<li>VPN setup and configuration</li>
<li>Security hardening best practices</li>
<li>Incident response and forensics basics</li>
</ul>
<h2 id="%F0%9F%8C%8D-why-this-matters">üåç Why This Matters</h2>
<p><strong>Critical applications:</strong></p>
<ul>
<li><strong>System Protection</strong>: Defend against network attacks and intrusions</li>
<li><strong>Compliance</strong>: Meet security standards and regulations</li>
<li><strong>Data Security</strong>: Protect sensitive information in transit</li>
<li><strong>Network Monitoring</strong>: Detect and respond to security threats</li>
<li><strong>Access Control</strong>: Manage who can access what resources</li>
</ul>
<h2 id="%F0%9F%94%A5-firewall-fundamentals">üî• Firewall Fundamentals</h2>
<h3 id="understanding-firewalls">Understanding Firewalls</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Check current firewall status</span>
$ sudo ufw status
Status: inactive

$ sudo iptables -L
Chain INPUT (policy ACCEPT)
target     prot opt <span class="hljs-built_in">source</span>               destination

Chain FORWARD (policy ACCEPT)
target     prot opt <span class="hljs-built_in">source</span>               destination

Chain OUTPUT (policy ACCEPT)
target     prot opt <span class="hljs-built_in">source</span>               destination

<span class="hljs-comment"># Check if firewall is running</span>
$ sudo systemctl status ufw
$ sudo systemctl status iptables

<span class="hljs-comment"># View network connections</span>
$ sudo netstat -tuln
Active Internet connections (only servers)
Proto Recv-Q Send-Q Local Address           Foreign Address         State
tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN
tcp        0      0 127.0.0.1:3306          0.0.0.0:*               LISTEN
tcp6       0      0 :::22                   :::*                    LISTEN
tcp6       0      0 :::80                   :::*                    LISTEN

<span class="hljs-comment"># Modern alternative with ss</span>
$ sudo ss -tuln
Netid  State   Recv-Q  Send-Q    Local Address:Port    Peer Address:Port
tcp    LISTEN  0       128             0.0.0.0:22           0.0.0.0:*
tcp    LISTEN  0       80            127.0.0.1:3306         0.0.0.0:*
tcp    LISTEN  0       128                [::]:22              [::]:*
tcp    LISTEN  0       128                [::]:80              [::]:*
</div></code></pre>
<h3 id="ufw-uncomplicated-firewall">UFW (Uncomplicated Firewall)</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Enable UFW</span>
$ sudo ufw <span class="hljs-built_in">enable</span>
Command may disrupt existing ssh connections. Proceed with operation (y|n)? y
Firewall is active and enabled on system startup

<span class="hljs-comment"># Check status</span>
$ sudo ufw status verbose
Status: active
Logging: on (low)
Default: deny (incoming), allow (outgoing), disabled (routed)
New profiles: skip

<span class="hljs-comment"># Basic rules</span>
$ sudo ufw default deny incoming
$ sudo ufw default allow outgoing
$ sudo ufw default deny forward

<span class="hljs-comment"># Allow specific services</span>
$ sudo ufw allow ssh
$ sudo ufw allow 22/tcp
$ sudo ufw allow 80/tcp
$ sudo ufw allow 443/tcp
$ sudo ufw allow 53/udp

<span class="hljs-comment"># Allow from specific IP</span>
$ sudo ufw allow from 192.168.1.100
$ sudo ufw allow from 192.168.1.0/24
$ sudo ufw allow from 192.168.1.100 to any port 22

<span class="hljs-comment"># Allow specific protocols</span>
$ sudo ufw allow out 53/udp
$ sudo ufw allow <span class="hljs-keyword">in</span> on eth0 to any port 80

<span class="hljs-comment"># Deny rules</span>
$ sudo ufw deny 23/tcp
$ sudo ufw deny from 10.0.0.0/8

<span class="hljs-comment"># Delete rules</span>
$ sudo ufw status numbered
Status: active

     To                         Action      From
     --                         ------      ----
[ 1] 22/tcp                     ALLOW IN    Anywhere
[ 2] 80/tcp                     ALLOW IN    Anywhere
[ 3] 443/tcp                    ALLOW IN    Anywhere

$ sudo ufw delete 2
$ sudo ufw delete allow 80/tcp

<span class="hljs-comment"># Advanced rules</span>
$ sudo ufw <span class="hljs-built_in">limit</span> ssh                    <span class="hljs-comment"># Rate limiting</span>
$ sudo ufw allow from 192.168.1.0/24 to any app OpenSSH

<span class="hljs-comment"># Application profiles</span>
$ sudo ufw app list
Available applications:
  Apache
  Apache Full
  Apache Secure
  OpenSSH
  Postfix
  Postfix SMTPS
  Postfix Submission

$ sudo ufw allow <span class="hljs-string">'Apache Full'</span>
$ sudo ufw app info <span class="hljs-string">'Apache Full'</span>
Profile: Apache Full
Title: Web Server (HTTP,HTTPS)
Description: Apache v2 is the next generation of the omnipresent Apache web
server.

Ports:
  80,443/tcp

<span class="hljs-comment"># Logging</span>
$ sudo ufw logging on
$ sudo ufw logging medium
$ sudo tail -f /var/<span class="hljs-built_in">log</span>/ufw.log

<span class="hljs-comment"># Reset UFW</span>
$ sudo ufw --force reset
</div></code></pre>
<h3 id="iptables-advanced-configuration">iptables Advanced Configuration</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># View current rules</span>
$ sudo iptables -L -n -v
Chain INPUT (policy ACCEPT 0 packets, 0 bytes)
 pkts bytes target     prot opt <span class="hljs-keyword">in</span>     out     <span class="hljs-built_in">source</span>               destination

<span class="hljs-comment"># Save current rules</span>
$ sudo iptables-save &gt; /tmp/iptables-backup.rules

<span class="hljs-comment"># Basic iptables rules</span>
<span class="hljs-comment"># Allow loopback</span>
$ sudo iptables -A INPUT -i lo -j ACCEPT
$ sudo iptables -A OUTPUT -o lo -j ACCEPT

<span class="hljs-comment"># Allow established connections</span>
$ sudo iptables -A INPUT -m conntrack --ctstate ESTABLISHED,RELATED -j ACCEPT

<span class="hljs-comment"># Allow SSH</span>
$ sudo iptables -A INPUT -p tcp --dport 22 -j ACCEPT

<span class="hljs-comment"># Allow HTTP and HTTPS</span>
$ sudo iptables -A INPUT -p tcp --dport 80 -j ACCEPT
$ sudo iptables -A INPUT -p tcp --dport 443 -j ACCEPT

<span class="hljs-comment"># Allow DNS</span>
$ sudo iptables -A INPUT -p udp --dport 53 -j ACCEPT
$ sudo iptables -A INPUT -p tcp --dport 53 -j ACCEPT

<span class="hljs-comment"># Allow from specific network</span>
$ sudo iptables -A INPUT -s 192.168.1.0/24 -j ACCEPT

<span class="hljs-comment"># Rate limiting SSH</span>
$ sudo iptables -A INPUT -p tcp --dport 22 -m conntrack --ctstate NEW -m recent --<span class="hljs-built_in">set</span>
$ sudo iptables -A INPUT -p tcp --dport 22 -m conntrack --ctstate NEW -m recent --update --seconds 60 --hitcount 4 -j DROP

<span class="hljs-comment"># Drop invalid packets</span>
$ sudo iptables -A INPUT -m conntrack --ctstate INVALID -j DROP

<span class="hljs-comment"># Log dropped packets</span>
$ sudo iptables -A INPUT -j LOG --<span class="hljs-built_in">log</span>-prefix <span class="hljs-string">"iptables-dropped: "</span>

<span class="hljs-comment"># Default policies</span>
$ sudo iptables -P INPUT DROP
$ sudo iptables -P FORWARD DROP
$ sudo iptables -P OUTPUT ACCEPT

<span class="hljs-comment"># Save rules (Ubuntu/Debian)</span>
$ sudo apt install iptables-persistent
$ sudo netfilter-persistent save
$ sudo netfilter-persistent reload

<span class="hljs-comment"># Advanced iptables script</span>
<span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># /etc/iptables/firewall.sh</span>

<span class="hljs-comment"># Flush existing rules</span>
iptables -F
iptables -X
iptables -t nat -F
iptables -t nat -X
iptables -t mangle -F
iptables -t mangle -X

<span class="hljs-comment"># Default policies</span>
iptables -P INPUT DROP
iptables -P FORWARD DROP
iptables -P OUTPUT ACCEPT

<span class="hljs-comment"># Allow loopback</span>
iptables -A INPUT -i lo -j ACCEPT
iptables -A OUTPUT -o lo -j ACCEPT

<span class="hljs-comment"># Allow established connections</span>
iptables -A INPUT -m conntrack --ctstate ESTABLISHED,RELATED -j ACCEPT

<span class="hljs-comment"># Allow SSH with rate limiting</span>
iptables -A INPUT -p tcp --dport 22 -m conntrack --ctstate NEW -m recent --<span class="hljs-built_in">set</span> --name SSH
iptables -A INPUT -p tcp --dport 22 -m conntrack --ctstate NEW -m recent --update --seconds 60 --hitcount 4 --name SSH -j DROP
iptables -A INPUT -p tcp --dport 22 -j ACCEPT

<span class="hljs-comment"># Allow web services</span>
iptables -A INPUT -p tcp --dport 80 -j ACCEPT
iptables -A INPUT -p tcp --dport 443 -j ACCEPT

<span class="hljs-comment"># Allow DNS</span>
iptables -A INPUT -p udp --dport 53 -j ACCEPT
iptables -A INPUT -p tcp --dport 53 -j ACCEPT

<span class="hljs-comment"># Allow ICMP (ping)</span>
iptables -A INPUT -p icmp --icmp-type <span class="hljs-built_in">echo</span>-request -j ACCEPT

<span class="hljs-comment"># Log and drop everything else</span>
iptables -A INPUT -j LOG --<span class="hljs-built_in">log</span>-prefix <span class="hljs-string">"iptables-dropped: "</span> --<span class="hljs-built_in">log</span>-level 4
iptables -A INPUT -j DROP

<span class="hljs-built_in">echo</span> <span class="hljs-string">"Firewall rules applied"</span>
</div></code></pre>
<h2 id="%F0%9F%94%8D-network-security-scanning">üîç Network Security Scanning</h2>
<h3 id="nmap-security-scanning">Nmap Security Scanning</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Basic host discovery</span>
$ nmap -sn 192.168.1.0/24
Starting Nmap 7.80 ( https://nmap.org )
Nmap scan report <span class="hljs-keyword">for</span> 192.168.1.1
Host is up (0.001s latency).
Nmap scan report <span class="hljs-keyword">for</span> 192.168.1.100
Host is up (0.002s latency).
Nmap scan report <span class="hljs-keyword">for</span> 192.168.1.150
Host is up (0.001s latency).
Nmap <span class="hljs-keyword">done</span>: 256 IP addresses (3 hosts up) scanned <span class="hljs-keyword">in</span> 2.5 seconds

<span class="hljs-comment"># Port scanning</span>
$ nmap -sS 192.168.1.100          <span class="hljs-comment"># SYN scan</span>
$ nmap -sT 192.168.1.100          <span class="hljs-comment"># TCP connect scan</span>
$ nmap -sU 192.168.1.100          <span class="hljs-comment"># UDP scan</span>
$ nmap -sA 192.168.1.100          <span class="hljs-comment"># ACK scan</span>

<span class="hljs-comment"># Comprehensive scan</span>
$ nmap -A 192.168.1.100
Starting Nmap 7.80 ( https://nmap.org )
Nmap scan report <span class="hljs-keyword">for</span> server.local (192.168.1.100)
Host is up (0.001s latency).
Not shown: 996 closed ports
PORT     STATE SERVICE VERSION
22/tcp   open  ssh     OpenSSH 8.2p1 Ubuntu 4ubuntu0.5
80/tcp   open  http    Apache httpd 2.4.41
443/tcp  open  https   Apache httpd 2.4.41
3306/tcp open  mysql   MySQL 8.0.28-0ubuntu0.20.04.3

<span class="hljs-comment"># Vulnerability scanning</span>
$ nmap --script vuln 192.168.1.100
$ nmap --script ssl-enum-ciphers -p 443 192.168.1.100

<span class="hljs-comment"># OS detection</span>
$ sudo nmap -O 192.168.1.100

<span class="hljs-comment"># Service version detection</span>
$ nmap -sV 192.168.1.100

<span class="hljs-comment"># Stealth scanning</span>
$ sudo nmap -sS -T2 192.168.1.100  <span class="hljs-comment"># Slow and stealthy</span>
$ sudo nmap -f 192.168.1.100       <span class="hljs-comment"># Fragment packets</span>

<span class="hljs-comment"># Scan specific ports</span>
$ nmap -p 22,80,443 192.168.1.100
$ nmap -p 1-1000 192.168.1.100
$ nmap -p- 192.168.1.100           <span class="hljs-comment"># All ports</span>

<span class="hljs-comment"># Output formats</span>
$ nmap -oN scan_results.txt 192.168.1.100
$ nmap -oX scan_results.xml 192.168.1.100
$ nmap -oG scan_results.gnmap 192.168.1.100
$ nmap -oA scan_results 192.168.1.100  <span class="hljs-comment"># All formats</span>
</div></code></pre>
<h3 id="security-assessment-tools">Security Assessment Tools</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Nikto web vulnerability scanner</span>
$ sudo apt install nikto
$ nikto -h http://192.168.1.100
- Nikto v2.1.6
---------------------------------------------------------------------------
+ Target IP:          192.168.1.100
+ Target Hostname:    192.168.1.100
+ Target Port:        80
+ Start Time:         2023-12-15 10:30:00 (GMT0)
---------------------------------------------------------------------------
+ Server: Apache/2.4.41 (Ubuntu)
+ The anti-clickjacking X-Frame-Options header is not present.
+ The X-XSS-Protection header is not defined.
+ The X-Content-Type-Options header is not <span class="hljs-built_in">set</span>.

<span class="hljs-comment"># OpenVAS vulnerability scanner</span>
$ sudo apt install openvas
$ sudo gvm-setup
$ sudo gvm-start
<span class="hljs-comment"># Access web interface at https://localhost:9392</span>

<span class="hljs-comment"># Lynis system auditing</span>
$ sudo apt install lynis
$ sudo lynis audit system

<span class="hljs-comment"># Chkrootkit rootkit detection</span>
$ sudo apt install chkrootkit
$ sudo chkrootkit

<span class="hljs-comment"># rkhunter rootkit detection</span>
$ sudo apt install rkhunter
$ sudo rkhunter --update
$ sudo rkhunter --check

<span class="hljs-comment"># ClamAV antivirus</span>
$ sudo apt install clamav clamav-daemon
$ sudo freshclam                    <span class="hljs-comment"># Update virus definitions</span>
$ sudo clamscan -r /home            <span class="hljs-comment"># Scan directory</span>
$ sudo clamscan -r --infected /     <span class="hljs-comment"># Scan for infected files only</span>
</div></code></pre>
<h2 id="%F0%9F%9A%A8-intrusion-detection-systems">üö® Intrusion Detection Systems</h2>
<h3 id="fail2ban-configuration">Fail2ban Configuration</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Install Fail2ban</span>
$ sudo apt install fail2ban

<span class="hljs-comment"># Check status</span>
$ sudo systemctl status fail2ban
$ sudo fail2ban-client status
Status
|- Number of jail:      1
`- Jail list:   sshd

<span class="hljs-comment"># Configuration files</span>
/etc/fail2ban/
‚îú‚îÄ‚îÄ jail.conf         <span class="hljs-comment"># Default configuration (don't edit)</span>
‚îú‚îÄ‚îÄ jail.local        <span class="hljs-comment"># Local overrides</span>
‚îú‚îÄ‚îÄ filter.d/         <span class="hljs-comment"># Filter definitions</span>
‚îî‚îÄ‚îÄ action.d/         <span class="hljs-comment"># Action definitions</span>

<span class="hljs-comment"># Create local configuration</span>
$ sudo nano /etc/fail2ban/jail.local

[DEFAULT]
<span class="hljs-comment"># Ban time in seconds (10 minutes)</span>
bantime = 600

<span class="hljs-comment"># Find time window (10 minutes)</span>
findtime = 600

<span class="hljs-comment"># Number of failures before ban</span>
maxretry = 3

<span class="hljs-comment"># Ignore local IPs</span>
ignoreip = 127.0.0.1/8 192.168.1.0/24

<span class="hljs-comment"># Email notifications</span>
destemail = admin@example.com
sender = fail2ban@example.com
mta = sendmail
action = %(action_mwl)s

[sshd]
enabled = <span class="hljs-literal">true</span>
port = ssh
filter = sshd
logpath = /var/<span class="hljs-built_in">log</span>/auth.log
maxretry = 3
bantime = 3600

[apache-auth]
enabled = <span class="hljs-literal">true</span>
port = http,https
filter = apache-auth
logpath = /var/<span class="hljs-built_in">log</span>/apache2/error.log
maxretry = 3

[apache-badbots]
enabled = <span class="hljs-literal">true</span>
port = http,https
filter = apache-badbots
logpath = /var/<span class="hljs-built_in">log</span>/apache2/access.log
maxretry = 2

[nginx-http-auth]
enabled = <span class="hljs-literal">true</span>
filter = nginx-http-auth
logpath = /var/<span class="hljs-built_in">log</span>/nginx/error.log
maxretry = 3

<span class="hljs-comment"># Restart Fail2ban</span>
$ sudo systemctl restart fail2ban

<span class="hljs-comment"># Check jail status</span>
$ sudo fail2ban-client status sshd
Status <span class="hljs-keyword">for</span> the jail: sshd
|- Filter
|  |- Currently failed: 0
|  |- Total failed:     5
|  `- File list:        /var/<span class="hljs-built_in">log</span>/auth.log
`- Actions
   |- Currently banned: 1
   |- Total banned:     2
   `- Banned IP list:   192.168.1.200

<span class="hljs-comment"># Unban IP</span>
$ sudo fail2ban-client <span class="hljs-built_in">set</span> sshd unbanip 192.168.1.200

<span class="hljs-comment"># Ban IP manually</span>
$ sudo fail2ban-client <span class="hljs-built_in">set</span> sshd banip 192.168.1.200

<span class="hljs-comment"># Custom filter example</span>
$ sudo nano /etc/fail2ban/filter.d/custom-app.conf

[Definition]
failregex = ^.*Failed login attempt from &lt;HOST&gt;.*$
ignoreregex =

<span class="hljs-comment"># Test filter</span>
$ fail2ban-regex /var/<span class="hljs-built_in">log</span>/custom-app.log /etc/fail2ban/filter.d/custom-app.conf
</div></code></pre>
<h3 id="ossec-host-based-ids">OSSEC Host-based IDS</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Install OSSEC</span>
$ wget https://github.com/ossec/ossec-hids/archive/3.7.0.tar.gz
$ tar -xzf 3.7.0.tar.gz
$ <span class="hljs-built_in">cd</span> ossec-hids-3.7.0
$ sudo ./install.sh

<span class="hljs-comment"># Configuration</span>
$ sudo nano /var/ossec/etc/ossec.conf

&lt;ossec_config&gt;
  &lt;global&gt;
    &lt;email_notification&gt;yes&lt;/email_notification&gt;
    &lt;email_to&gt;admin@example.com&lt;/email_to&gt;
    &lt;smtp_server&gt;localhost&lt;/smtp_server&gt;
    &lt;email_from&gt;ossec@example.com&lt;/email_from&gt;
  &lt;/global&gt;

  &lt;rules&gt;
    &lt;include&gt;rules_config.xml&lt;/include&gt;
    &lt;include&gt;pam_rules.xml&lt;/include&gt;
    &lt;include&gt;sshd_rules.xml&lt;/include&gt;
    &lt;include&gt;telnetd_rules.xml&lt;/include&gt;
    &lt;include&gt;syslog_rules.xml&lt;/include&gt;
    &lt;include&gt;arpwatch_rules.xml&lt;/include&gt;
    &lt;include&gt;symantec-av_rules.xml&lt;/include&gt;
    &lt;include&gt;symantec-ws_rules.xml&lt;/include&gt;
    &lt;include&gt;pix_rules.xml&lt;/include&gt;
    &lt;include&gt;named_rules.xml&lt;/include&gt;
    &lt;include&gt;smbd_rules.xml&lt;/include&gt;
    &lt;include&gt;vsftpd_rules.xml&lt;/include&gt;
    &lt;include&gt;pure-ftpd_rules.xml&lt;/include&gt;
    &lt;include&gt;proftpd_rules.xml&lt;/include&gt;
    &lt;include&gt;ms_ftpd_rules.xml&lt;/include&gt;
    &lt;include&gt;ftpd_rules.xml&lt;/include&gt;
    &lt;include&gt;hordeimp_rules.xml&lt;/include&gt;
    &lt;include&gt;roundcube_rules.xml&lt;/include&gt;
    &lt;include&gt;wordpress_rules.xml&lt;/include&gt;
    &lt;include&gt;cimserver_rules.xml&lt;/include&gt;
    &lt;include&gt;vpopmail_rules.xml&lt;/include&gt;
    &lt;include&gt;vmpop3d_rules.xml&lt;/include&gt;
    &lt;include&gt;courier_rules.xml&lt;/include&gt;
    &lt;include&gt;web_rules.xml&lt;/include&gt;
    &lt;include&gt;web_appsec_rules.xml&lt;/include&gt;
    &lt;include&gt;apache_rules.xml&lt;/include&gt;
    &lt;include&gt;nginx_rules.xml&lt;/include&gt;
    &lt;include&gt;php_rules.xml&lt;/include&gt;
    &lt;include&gt;mysql_rules.xml&lt;/include&gt;
    &lt;include&gt;postgresql_rules.xml&lt;/include&gt;
    &lt;include&gt;ids_rules.xml&lt;/include&gt;
    &lt;include&gt;squid_rules.xml&lt;/include&gt;
    &lt;include&gt;firewall_rules.xml&lt;/include&gt;
    &lt;include&gt;cisco-ios_rules.xml&lt;/include&gt;
    &lt;include&gt;netscreenfw_rules.xml&lt;/include&gt;
    &lt;include&gt;sonicwall_rules.xml&lt;/include&gt;
    &lt;include&gt;postfix_rules.xml&lt;/include&gt;
    &lt;include&gt;sendmail_rules.xml&lt;/include&gt;
    &lt;include&gt;imapd_rules.xml&lt;/include&gt;
    &lt;include&gt;mailscanner_rules.xml&lt;/include&gt;
    &lt;include&gt;dovecot_rules.xml&lt;/include&gt;
    &lt;include&gt;ms-exchange_rules.xml&lt;/include&gt;
    &lt;include&gt;racoon_rules.xml&lt;/include&gt;
    &lt;include&gt;vpn_concentrator_rules.xml&lt;/include&gt;
    &lt;include&gt;spamd_rules.xml&lt;/include&gt;
    &lt;include&gt;msauth_rules.xml&lt;/include&gt;
    &lt;include&gt;mcafee_av_rules.xml&lt;/include&gt;
    &lt;include&gt;trend-osce_rules.xml&lt;/include&gt;
    &lt;include&gt;ms-se_rules.xml&lt;/include&gt;
    &lt;include&gt;zeus_rules.xml&lt;/include&gt;
    &lt;include&gt;solaris_bsm_rules.xml&lt;/include&gt;
    &lt;include&gt;vmware_rules.xml&lt;/include&gt;
    &lt;include&gt;ms_dhcp_rules.xml&lt;/include&gt;
    &lt;include&gt;asterisk_rules.xml&lt;/include&gt;
    &lt;include&gt;ossec_rules.xml&lt;/include&gt;
    &lt;include&gt;attack_rules.xml&lt;/include&gt;
    &lt;include&gt;local_rules.xml&lt;/include&gt;
  &lt;/rules&gt;

  &lt;syscheck&gt;
    &lt;!-- Frequency that syscheck is executed -- default every 22 hours --&gt;
    &lt;frequency&gt;79200&lt;/frequency&gt;

    &lt;!-- Directories to check  (perform all possible verifications) --&gt;
    &lt;directories check_all=<span class="hljs-string">"yes"</span>&gt;/etc,/usr/bin,/usr/sbin&lt;/directories&gt;
    &lt;directories check_all=<span class="hljs-string">"yes"</span>&gt;/bin,/sbin,/boot&lt;/directories&gt;

    &lt;!-- Files/directories to ignore --&gt;
    &lt;ignore&gt;/etc/mtab&lt;/ignore&gt;
    &lt;ignore&gt;/etc/hosts.deny&lt;/ignore&gt;
    &lt;ignore&gt;/etc/mail/statistics&lt;/ignore&gt;
    &lt;ignore&gt;/etc/random-seed&lt;/ignore&gt;
    &lt;ignore&gt;/etc/random.seed&lt;/ignore&gt;
    &lt;ignore&gt;/etc/adjtime&lt;/ignore&gt;
    &lt;ignore&gt;/etc/httpd/logs&lt;/ignore&gt;
    &lt;ignore&gt;/etc/utmpx&lt;/ignore&gt;
    &lt;ignore&gt;/etc/wtmpx&lt;/ignore&gt;
    &lt;ignore&gt;/etc/cups/certs&lt;/ignore&gt;
    &lt;ignore&gt;/etc/dumpdates&lt;/ignore&gt;
    &lt;ignore&gt;/etc/svc/volatile&lt;/ignore&gt;
  &lt;/syscheck&gt;

  &lt;rootcheck&gt;
    &lt;rootkit_files&gt;/var/ossec/etc/shared/rootkit_files.txt&lt;/rootkit_files&gt;
    &lt;rootkit_trojans&gt;/var/ossec/etc/shared/rootkit_trojans.txt&lt;/rootkit_trojans&gt;
    &lt;system_audit&gt;/var/ossec/etc/shared/system_audit_rcl.txt&lt;/system_audit&gt;
    &lt;system_audit&gt;/var/ossec/etc/shared/cis_debian_linux_rcl.txt&lt;/system_audit&gt;
    &lt;system_audit&gt;/var/ossec/etc/shared/cis_rhel_linux_rcl.txt&lt;/system_audit&gt;
    &lt;system_audit&gt;/var/ossec/etc/shared/cis_rhel5_linux_rcl.txt&lt;/system_audit&gt;
  &lt;/rootcheck&gt;

  &lt;localfile&gt;
    &lt;log_format&gt;syslog&lt;/log_format&gt;
    &lt;location&gt;/var/<span class="hljs-built_in">log</span>/messages&lt;/location&gt;
  &lt;/localfile&gt;

  &lt;localfile&gt;
    &lt;log_format&gt;syslog&lt;/log_format&gt;
    &lt;location&gt;/var/<span class="hljs-built_in">log</span>/auth.log&lt;/location&gt;
  &lt;/localfile&gt;

  &lt;localfile&gt;
    &lt;log_format&gt;syslog&lt;/log_format&gt;
    &lt;location&gt;/var/<span class="hljs-built_in">log</span>/syslog&lt;/location&gt;
  &lt;/localfile&gt;

  &lt;localfile&gt;
    &lt;log_format&gt;apache&lt;/log_format&gt;
    &lt;location&gt;/var/<span class="hljs-built_in">log</span>/apache2/access.log&lt;/location&gt;
  &lt;/localfile&gt;

  &lt;localfile&gt;
    &lt;log_format&gt;apache&lt;/log_format&gt;
    &lt;location&gt;/var/<span class="hljs-built_in">log</span>/apache2/error.log&lt;/location&gt;
  &lt;/localfile&gt;
&lt;/ossec_config&gt;

<span class="hljs-comment"># Start OSSEC</span>
$ sudo /var/ossec/bin/ossec-control start

<span class="hljs-comment"># Check status</span>
$ sudo /var/ossec/bin/ossec-control status
ossec-monitord is running...
ossec-logcollector is running...
ossec-syscheckd is running...
ossec-analysisd is running...
ossec-maild is running...
ossec-execd is running...

<span class="hljs-comment"># View alerts</span>
$ sudo tail -f /var/ossec/logs/alerts/alerts.log
</div></code></pre>
<h2 id="%F0%9F%93%8A-log-analysis-and-security-monitoring">üìä Log Analysis and Security Monitoring</h2>
<h3 id="centralized-logging-with-rsyslog">Centralized Logging with rsyslog</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Configure rsyslog server</span>
$ sudo nano /etc/rsyslog.conf

<span class="hljs-comment"># Uncomment these lines to enable UDP syslog reception</span>
<span class="hljs-variable">$ModLoad</span> imudp
<span class="hljs-variable">$UDPServerRun</span> 514
<span class="hljs-variable">$UDPServerAddress</span> 0.0.0.0

<span class="hljs-comment"># Uncomment these lines to enable TCP syslog reception</span>
<span class="hljs-variable">$ModLoad</span> imtcp
<span class="hljs-variable">$InputTCPServerRun</span> 514

<span class="hljs-comment"># Template for remote logs</span>
<span class="hljs-variable">$template</span> RemoteLogs,<span class="hljs-string">"/var/log/remote/%HOSTNAME%/%PROGRAMNAME%.log"</span>
*.* ?RemoteLogs
&amp; stop

<span class="hljs-comment"># Restart rsyslog</span>
$ sudo systemctl restart rsyslog

<span class="hljs-comment"># Configure rsyslog client</span>
$ sudo nano /etc/rsyslog.conf

<span class="hljs-comment"># Add at the end</span>
*.* @@192.168.1.100:514  <span class="hljs-comment"># TCP</span>
*.* @192.168.1.100:514   <span class="hljs-comment"># UDP</span>

<span class="hljs-comment"># Restart client rsyslog</span>
$ sudo systemctl restart rsyslog

<span class="hljs-comment"># Test logging</span>
$ logger <span class="hljs-string">"Test message from <span class="hljs-variable">$(hostname)</span>"</span>
</div></code></pre>
<h3 id="log-analysis-tools">Log Analysis Tools</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Basic log analysis with grep and awk</span>
$ sudo grep <span class="hljs-string">"Failed password"</span> /var/<span class="hljs-built_in">log</span>/auth.log | awk <span class="hljs-string">'{print $11}'</span> | sort | uniq -c | sort -nr
     15 192.168.1.200
      8 10.0.0.50
      3 172.16.1.100

<span class="hljs-comment"># Find successful SSH logins</span>
$ sudo grep <span class="hljs-string">"Accepted password"</span> /var/<span class="hljs-built_in">log</span>/auth.log | awk <span class="hljs-string">'{print $1, $2, $3, $9, $11}'</span>

<span class="hljs-comment"># Analyze Apache access logs</span>
$ sudo awk <span class="hljs-string">'{print $1}'</span> /var/<span class="hljs-built_in">log</span>/apache2/access.log | sort | uniq -c | sort -nr | head -10
$ sudo awk <span class="hljs-string">'{print $7}'</span> /var/<span class="hljs-built_in">log</span>/apache2/access.log | sort | uniq -c | sort -nr | head -10

<span class="hljs-comment"># Find 404 errors</span>
$ sudo awk <span class="hljs-string">'$9 == 404 {print $7}'</span> /var/<span class="hljs-built_in">log</span>/apache2/access.log | sort | uniq -c | sort -nr

<span class="hljs-comment"># GoAccess web log analyzer</span>
$ sudo apt install goaccess
$ sudo goaccess /var/<span class="hljs-built_in">log</span>/apache2/access.log -c
$ sudo goaccess /var/<span class="hljs-built_in">log</span>/apache2/access.log -o /var/www/html/report.html --<span class="hljs-built_in">log</span>-format=COMBINED

<span class="hljs-comment"># Logwatch for automated log analysis</span>
$ sudo apt install logwatch
$ sudo nano /etc/logwatch/conf/logwatch.conf

LogDir = /var/<span class="hljs-built_in">log</span>
TmpDir = /var/cache/logwatch
Output = mail
Format = html
Encode = none
MailTo = admin@example.com
MailFrom = logwatch@example.com
Subject = Logwatch Report
Detail = Med
Service = All
Range = yesterday

<span class="hljs-comment"># Run logwatch manually</span>
$ sudo logwatch --detail Med --mailto admin@example.com --range yesterday

<span class="hljs-comment"># Automated logwatch via cron</span>
$ sudo nano /etc/cron.daily/00logwatch
<span class="hljs-meta">#!/bin/bash</span>
/usr/sbin/logwatch --output mail --mailto admin@example.com --detail high
</div></code></pre>
<h3 id="security-information-and-event-management-siem">Security Information and Event Management (SIEM)</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># ELK Stack installation (Elasticsearch, Logstash, Kibana)</span>
<span class="hljs-comment"># Add Elastic repository</span>
$ wget -qO - https://artifacts.elastic.co/GPG-KEY-elasticsearch | sudo apt-key add -
$ <span class="hljs-built_in">echo</span> <span class="hljs-string">"deb https://artifacts.elastic.co/packages/7.x/apt stable main"</span> | sudo tee /etc/apt/sources.list.d/elastic-7.x.list
$ sudo apt update

<span class="hljs-comment"># Install Elasticsearch</span>
$ sudo apt install elasticsearch
$ sudo systemctl <span class="hljs-built_in">enable</span> elasticsearch
$ sudo systemctl start elasticsearch

<span class="hljs-comment"># Test Elasticsearch</span>
$ curl -X GET <span class="hljs-string">"localhost:9200/"</span>

<span class="hljs-comment"># Install Logstash</span>
$ sudo apt install logstash

<span class="hljs-comment"># Configure Logstash</span>
$ sudo nano /etc/logstash/conf.d/syslog.conf

input {
  file {
    path =&gt; <span class="hljs-string">"/var/log/syslog"</span>
    <span class="hljs-built_in">type</span> =&gt; <span class="hljs-string">"syslog"</span>
  }
  file {
    path =&gt; <span class="hljs-string">"/var/log/auth.log"</span>
    <span class="hljs-built_in">type</span> =&gt; <span class="hljs-string">"auth"</span>
  }
}

filter {
  <span class="hljs-keyword">if</span> [<span class="hljs-built_in">type</span>] == <span class="hljs-string">"syslog"</span> {
    grok {
      match =&gt; { <span class="hljs-string">"message"</span> =&gt; <span class="hljs-string">"%{SYSLOGTIMESTAMP:timestamp} %{IPORHOST:host} %{DATA:program}(?:\[%{POSINT:pid}\])?: %{GREEDYDATA:message}"</span> }
    }
  }
  <span class="hljs-keyword">if</span> [<span class="hljs-built_in">type</span>] == <span class="hljs-string">"auth"</span> {
    grok {
      match =&gt; { <span class="hljs-string">"message"</span> =&gt; <span class="hljs-string">"%{SYSLOGTIMESTAMP:timestamp} %{IPORHOST:host} %{DATA:program}(?:\[%{POSINT:pid}\])?: %{GREEDYDATA:message}"</span> }
    }
  }
}

output {
  elasticsearch {
    hosts =&gt; [<span class="hljs-string">"localhost:9200"</span>]
    index =&gt; <span class="hljs-string">"logstash-%{+YYYY.MM.dd}"</span>
  }
}

<span class="hljs-comment"># Start Logstash</span>
$ sudo systemctl <span class="hljs-built_in">enable</span> logstash
$ sudo systemctl start logstash

<span class="hljs-comment"># Install Kibana</span>
$ sudo apt install kibana
$ sudo systemctl <span class="hljs-built_in">enable</span> kibana
$ sudo systemctl start kibana

<span class="hljs-comment"># Access Kibana at http://localhost:5601</span>
</div></code></pre>
<h2 id="%F0%9F%94%90-vpn-configuration">üîê VPN Configuration</h2>
<h3 id="openvpn-server-setup">OpenVPN Server Setup</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Install OpenVPN and Easy-RSA</span>
$ sudo apt install openvpn easy-rsa

<span class="hljs-comment"># Set up CA directory</span>
$ make-cadir ~/openvpn-ca
$ <span class="hljs-built_in">cd</span> ~/openvpn-ca

<span class="hljs-comment"># Configure CA variables</span>
$ nano vars

<span class="hljs-built_in">export</span> KEY_COUNTRY=<span class="hljs-string">"US"</span>
<span class="hljs-built_in">export</span> KEY_PROVINCE=<span class="hljs-string">"CA"</span>
<span class="hljs-built_in">export</span> KEY_CITY=<span class="hljs-string">"SanFrancisco"</span>
<span class="hljs-built_in">export</span> KEY_ORG=<span class="hljs-string">"Example Corp"</span>
<span class="hljs-built_in">export</span> KEY_EMAIL=<span class="hljs-string">"admin@example.com"</span>
<span class="hljs-built_in">export</span> KEY_OU=<span class="hljs-string">"IT Department"</span>
<span class="hljs-built_in">export</span> KEY_NAME=<span class="hljs-string">"server"</span>

<span class="hljs-comment"># Source variables and build CA</span>
$ <span class="hljs-built_in">source</span> vars
$ ./clean-all
$ ./build-ca

<span class="hljs-comment"># Generate server certificate</span>
$ ./build-key-server server

<span class="hljs-comment"># Generate Diffie-Hellman parameters</span>
$ ./build-dh

<span class="hljs-comment"># Generate client certificate</span>
$ ./build-key client1

<span class="hljs-comment"># Copy certificates to OpenVPN directory</span>
$ sudo cp ~/openvpn-ca/keys/{server.crt,server.key,ca.crt,dh2048.pem} /etc/openvpn/

<span class="hljs-comment"># Generate TLS auth key</span>
$ sudo openvpn --genkey --secret /etc/openvpn/ta.key

<span class="hljs-comment"># Configure OpenVPN server</span>
$ sudo nano /etc/openvpn/server.conf

port 1194
proto udp
dev tun
ca ca.crt
cert server.crt
key server.key
dh dh2048.pem
server 10.8.0.0 255.255.255.0
ifconfig-pool-persist ipp.txt
push <span class="hljs-string">"redirect-gateway def1 bypass-dhcp"</span>
push <span class="hljs-string">"dhcp-option DNS 8.8.8.8"</span>
push <span class="hljs-string">"dhcp-option DNS 8.8.4.4"</span>
keepalive 10 120
tls-auth ta.key 0
cipher AES-256-CBC
user nobody
group nogroup
persist-key
persist-tun
status openvpn-status.log
verb 3
explicit-exit-notify 1

<span class="hljs-comment"># Enable IP forwarding</span>
$ sudo nano /etc/sysctl.conf
<span class="hljs-comment"># Uncomment:</span>
net.ipv4.ip_forward=1

$ sudo sysctl -p

<span class="hljs-comment"># Configure firewall for VPN</span>
$ sudo ufw allow 1194/udp
$ sudo ufw allow OpenSSH

<span class="hljs-comment"># Add NAT rules</span>
$ sudo nano /etc/ufw/before.rules
<span class="hljs-comment"># Add at the top:</span>
*nat
:POSTROUTING ACCEPT [0:0]
-A POSTROUTING -s 10.8.0.0/8 -o eth0 -j MASQUERADE
COMMIT

<span class="hljs-comment"># Start OpenVPN</span>
$ sudo systemctl <span class="hljs-built_in">enable</span> openvpn@server
$ sudo systemctl start openvpn@server

<span class="hljs-comment"># Create client configuration</span>
$ nano ~/client1.ovpn

client
dev tun
proto udp
remote YOUR_SERVER_IP 1194
resolv-retry infinite
nobind
user nobody
group nogroup
persist-key
persist-tun
remote-cert-tls server
cipher AES-256-CBC
verb 3

&lt;ca&gt;
[Insert ca.crt contents]
&lt;/ca&gt;

&lt;cert&gt;
[Insert client1.crt contents]
&lt;/cert&gt;

&lt;key&gt;
[Insert client1.key contents]
&lt;/key&gt;

&lt;tls-auth&gt;
[Insert ta.key contents]
&lt;/tls-auth&gt;
key-direction 1
</div></code></pre>
<h3 id="wireguard-vpn-modern-alternative">WireGuard VPN (Modern Alternative)</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Install WireGuard</span>
$ sudo apt install wireguard

<span class="hljs-comment"># Generate server keys</span>
$ wg genkey | sudo tee /etc/wireguard/private.key
$ sudo chmod 600 /etc/wireguard/private.key
$ sudo cat /etc/wireguard/private.key | wg pubkey | sudo tee /etc/wireguard/public.key

<span class="hljs-comment"># Configure WireGuard server</span>
$ sudo nano /etc/wireguard/wg0.conf

[Interface]
PrivateKey = [SERVER_PRIVATE_KEY]
Address = 10.0.0.1/24
ListenPort = 51820
PostUp = iptables -A FORWARD -i %i -j ACCEPT; iptables -A FORWARD -o %i -j ACCEPT; iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE
PostDown = iptables -D FORWARD -i %i -j ACCEPT; iptables -D FORWARD -o %i -j ACCEPT; iptables -t nat -D POSTROUTING -o eth0 -j MASQUERADE

[Peer]
PublicKey = [CLIENT_PUBLIC_KEY]
AllowedIPs = 10.0.0.2/32

<span class="hljs-comment"># Generate client keys</span>
$ wg genkey | tee client_private.key | wg pubkey &gt; client_public.key

<span class="hljs-comment"># Client configuration</span>
$ nano client.conf

[Interface]
PrivateKey = [CLIENT_PRIVATE_KEY]
Address = 10.0.0.2/24
DNS = 8.8.8.8

[Peer]
PublicKey = [SERVER_PUBLIC_KEY]
Endpoint = YOUR_SERVER_IP:51820
AllowedIPs = 0.0.0.0/0
PersistentKeepalive = 25

<span class="hljs-comment"># Start WireGuard</span>
$ sudo systemctl <span class="hljs-built_in">enable</span> wg-quick@wg0
$ sudo systemctl start wg-quick@wg0

<span class="hljs-comment"># Check status</span>
$ sudo wg show
</div></code></pre>
<h2 id="%F0%9F%A7%A0-knowledge-check">üß† Knowledge Check</h2>
<h3 id="quick-quiz">Quick Quiz</h3>
<ol>
<li>
<p><strong>What's the difference between UFW and iptables?</strong></p>
<details>
<summary>Answer</summary>
<p>UFW (Uncomplicated Firewall) is a user-friendly frontend for iptables, making firewall management easier with simpler commands, while iptables provides more granular control but with more complex syntax.</p>
</details>
</li>
<li>
<p><strong>How does Fail2ban protect against brute force attacks?</strong></p>
<details>
<summary>Answer</summary>
<p>Fail2ban monitors log files for failed authentication attempts and automatically bans IP addresses that exceed the configured failure threshold for a specified time period.</p>
</details>
</li>
<li>
<p><strong>What's the purpose of a SIEM system?</strong></p>
<details>
<summary>Answer</summary>
<p>SIEM (Security Information and Event Management) systems collect, analyze, and correlate security events from multiple sources to provide real-time security monitoring and incident response capabilities.</p>
</details>
</li>
<li>
<p><strong>Why is WireGuard considered better than OpenVPN?</strong></p>
<details>
<summary>Answer</summary>
<p>WireGuard is simpler to configure, has better performance, uses modern cryptography, has a smaller codebase (easier to audit), and provides better battery life on mobile devices.</p>
</details>
</li>
</ol>
<h3 id="hands-on-challenges">Hands-On Challenges</h3>
<p><strong>Challenge 1: Complete Security Hardening</strong></p>
<pre class="hljs"><code><div><span class="hljs-comment"># Implement comprehensive security for a server:</span>
<span class="hljs-comment"># - Configure advanced firewall rules with iptables</span>
<span class="hljs-comment"># - Set up Fail2ban with custom filters</span>
<span class="hljs-comment"># - Install and configure an IDS (OSSEC or Suricata)</span>
<span class="hljs-comment"># - Implement centralized logging</span>
<span class="hljs-comment"># - Set up automated security monitoring and alerting</span>
</div></code></pre>
<p><strong>Challenge 2: Network Security Assessment</strong></p>
<pre class="hljs"><code><div><span class="hljs-comment"># Perform a complete security assessment:</span>
<span class="hljs-comment"># - Use Nmap for network discovery and port scanning</span>
<span class="hljs-comment"># - Run vulnerability scans with OpenVAS or Nessus</span>
<span class="hljs-comment"># - Analyze web applications with Nikto and OWASP ZAP</span>
<span class="hljs-comment"># - Check for rootkits and malware</span>
<span class="hljs-comment"># - Generate a comprehensive security report</span>
</div></code></pre>
<p><strong>Challenge 3: VPN Infrastructure</strong></p>
<pre class="hljs"><code><div><span class="hljs-comment"># Set up a complete VPN infrastructure:</span>
<span class="hljs-comment"># - Deploy OpenVPN or WireGuard server</span>
<span class="hljs-comment"># - Configure multiple client access</span>
<span class="hljs-comment"># - Implement proper certificate management</span>
<span class="hljs-comment"># - Set up monitoring and logging</span>
<span class="hljs-comment"># - Create automated client provisioning</span>
</div></code></pre>
<h2 id="%F0%9F%9A%80-next-steps">üöÄ Next Steps</h2>
<p>Excellent! You've mastered network security and firewalls. You can now:</p>
<ul>
<li>Configure and manage firewalls (UFW, iptables)</li>
<li>Perform security assessments and vulnerability scanning</li>
<li>Set up intrusion detection and prevention systems</li>
<li>Implement centralized logging and SIEM solutions</li>
<li>Configure VPN services for secure remote access</li>
<li>Monitor and analyze security events</li>
<li>Respond to security incidents effectively</li>
</ul>
<p><strong>Ready for performance optimization?</strong> Continue to <a href="13-performance-monitoring.md">13-performance-monitoring.md</a> to learn about system performance monitoring, optimization, and troubleshooting.</p>
<hr>
<blockquote>
<p><strong>Pro Tip</strong>: Security is a continuous process, not a one-time setup. Regularly update your systems, monitor logs, perform security assessments, and stay informed about new threats. Defense in depth - use multiple layers of security! üõ°Ô∏è</p>
</blockquote>
<h1 id="%F0%9F%93%8A-performance-monitoring-system-optimization-and-troubleshooting">üìä Performance Monitoring: System Optimization and Troubleshooting</h1>
<blockquote>
<p><strong>Master system performance analysis, monitoring tools, and optimization techniques</strong></p>
</blockquote>
<h2 id="%F0%9F%93%96-what-youll-learn">üìñ What You'll Learn</h2>
<p>System performance monitoring is crucial for maintaining efficient and reliable systems. This chapter covers comprehensive performance analysis and optimization:</p>
<ul>
<li>System resource monitoring (CPU, Memory, Disk, Network)</li>
<li>Performance monitoring tools and utilities</li>
<li>Bottleneck identification and analysis</li>
<li>System optimization techniques</li>
<li>Automated monitoring and alerting</li>
<li>Performance tuning best practices</li>
<li>Capacity planning and scaling</li>
<li>Troubleshooting performance issues</li>
</ul>
<h2 id="%F0%9F%8C%8D-why-this-matters">üåç Why This Matters</h2>
<p><strong>Critical applications:</strong></p>
<ul>
<li><strong>System Reliability</strong>: Ensure systems run smoothly and efficiently</li>
<li><strong>Cost Optimization</strong>: Maximize resource utilization and reduce costs</li>
<li><strong>User Experience</strong>: Maintain fast response times and availability</li>
<li><strong>Capacity Planning</strong>: Predict and plan for future resource needs</li>
<li><strong>Troubleshooting</strong>: Quickly identify and resolve performance issues</li>
</ul>
<h2 id="%F0%9F%96%A5%EF%B8%8F-system-resource-monitoring">üñ•Ô∏è System Resource Monitoring</h2>
<h3 id="cpu-monitoring">CPU Monitoring</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Real-time CPU usage</span>
$ top
top - 10:30:15 up 5 days,  2:15,  3 users,  load average: 0.45, 0.32, 0.28
Tasks: 234 total,   1 running, 233 sleeping,   0 stopped,   0 zombie
%Cpu(s):  5.2 us,  2.1 sy,  0.0 ni, 92.1 id,  0.6 wa,  0.0 hi,  0.0 si,  0.0 st
MiB Mem :   7982.1 total,   1234.5 free,   3456.7 used,   3290.9 buff/cache
MiB Swap:   2048.0 total,   2048.0 free,      0.0 used.   4123.8 avail Mem

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU  %MEM     TIME+ COMMAND
 1234 www-data  20   0  123456  45678  12345 S  15.3   5.7   1:23.45 apache2
 5678 mysql     20   0  987654 234567  56789 S  12.1  29.4  12:34.56 mysqld

<span class="hljs-comment"># Enhanced top with htop</span>
$ htop
<span class="hljs-comment"># Interactive process viewer with better visualization</span>

<span class="hljs-comment"># CPU usage per core</span>
$ nproc                           <span class="hljs-comment"># Number of CPU cores</span>
4

$ lscpu                           <span class="hljs-comment"># Detailed CPU information</span>
Architecture:                    x86_64
CPU op-mode(s):                  32-bit, 64-bit
Byte Order:                      Little Endian
CPU(s):                          4
On-line CPU(s) list:             0-3
Thread(s) per core:              2
Core(s) per socket:              2
Socket(s):                       1
NUMA node(s):                    1
Vendor ID:                       GenuineIntel
CPU family:                      6
Model:                           142
Model name:                      Intel(R) Core(TM) i5-8250U CPU @ 1.60GHz
Stepping:                        10
CPU MHz:                         1800.000
CPU max MHz:                     3400.0000
CPU min MHz:                     400.0000
BogoMIPS:                        3600.00

<span class="hljs-comment"># CPU usage statistics</span>
$ vmstat 1 5                     <span class="hljs-comment"># Every 1 second, 5 times</span>
procs -----------memory---------- ---swap-- -----io---- -system-- ------cpu-----
 r  b   swpd   free   buff  cache   si   so    bi    bo   <span class="hljs-keyword">in</span>   cs us sy id wa st
 1  0      0 1234567  89012 3456789    0    0    12    45  123  456  5  2 92  1  0
 0  0      0 1234567  89012 3456789    0    0     0     8  134  467  3  1 96  0  0

<span class="hljs-comment"># Detailed CPU statistics with sar</span>
$ sar -u 1 5                     <span class="hljs-comment"># CPU utilization</span>
Linux 5.4.0-74-generic (hostname)      12/15/2023      _x86_64_        (4 CPU)

10:30:16 AM     CPU     %user     %nice   %system   %iowait    %steal     %idle
10:30:17 AM     all      5.25      0.00      2.13      0.63      0.00     91.99
10:30:18 AM     all      4.87      0.00      1.89      0.25      0.00     92.99

<span class="hljs-comment"># Per-CPU statistics</span>
$ sar -P ALL 1 3                 <span class="hljs-comment"># All CPUs</span>

<span class="hljs-comment"># CPU load average</span>
$ uptime
 10:30:15 up 5 days,  2:15,  3 users,  load average: 0.45, 0.32, 0.28

$ cat /proc/loadavg
0.45 0.32 0.28 2/234 12345

<span class="hljs-comment"># Process CPU usage</span>
$ ps aux --sort=-%cpu | head -10
USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
www-data  1234 15.3  5.7 123456 45678 ?        S    09:15   1:23 apache2
mysql     5678 12.1 29.4 987654 234567 ?       Sl   08:30  12:34 mysqld

<span class="hljs-comment"># CPU usage by process over time</span>
$ pidstat -u 1 5                 <span class="hljs-comment"># All processes</span>
$ pidstat -u -p 1234 1 5         <span class="hljs-comment"># Specific process</span>
</div></code></pre>
<h3 id="memory-monitoring">Memory Monitoring</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Memory usage overview</span>
$ free -h
              total        used        free      shared  buff/cache   available
Mem:          7.8Gi       3.4Gi       1.2Gi       234Mi       3.2Gi       4.0Gi
Swap:         2.0Gi          0B       2.0Gi

<span class="hljs-comment"># Detailed memory information</span>
$ cat /proc/meminfo
MemTotal:        8165432 kB
MemFree:         1264532 kB
MemAvailable:    4123456 kB
Buffers:          89012 kB
Cached:         3201234 kB
SwapCached:            0 kB
Active:         4567890 kB
Inactive:       2345678 kB
Active(anon):   2123456 kB
Inactive(anon):  123456 kB
Active(file):   2444434 kB
Inactive(file): 2222222 kB

<span class="hljs-comment"># Memory usage by process</span>
$ ps aux --sort=-%mem | head -10
USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
mysql     5678 12.1 29.4 987654 234567 ?       Sl   08:30  12:34 mysqld
apache    1234 15.3  5.7 123456 45678 ?        S    09:15   1:23 apache2

<span class="hljs-comment"># Memory statistics with sar</span>
$ sar -r 1 5                     <span class="hljs-comment"># Memory utilization</span>
Linux 5.4.0-74-generic (hostname)      12/15/2023      _x86_64_        (4 CPU)

10:30:16 AM kbmemfree kbmemused  %memused kbbuffers  kbcached  kbcommit   %commit  kbactive   kbinact   kbdirty
10:30:17 AM   1264532   6900900     84.51     89012   3201234   4567890     55.93   4567890   2345678      1234

<span class="hljs-comment"># Memory usage per process with smem</span>
$ sudo apt install smem
$ smem -t
  PID User     Command                         Swap      USS      PSS      RSS
 1234 apache   apache2                            0    12345    23456    45678
 5678 mysql    mysqld                             0   123456   234567   456789
-------------------------------------------------------------------------------
   15 2        2 processes                        0   135801   258023   502467

<span class="hljs-comment"># Memory mapping of a process</span>
$ pmap -x 1234                   <span class="hljs-comment"># Process memory map</span>
$ cat /proc/1234/smaps           <span class="hljs-comment"># Detailed memory mapping</span>

<span class="hljs-comment"># Check for memory leaks</span>
$ valgrind --tool=memcheck --leak-check=full ./your_program

<span class="hljs-comment"># Monitor swap usage</span>
$ swapon --show
NAME      TYPE      SIZE USED PRIO
/dev/sda2 partition   2G   0B   -2

$ cat /proc/swaps
Filename                                Type            Size    Used    Priority
/dev/sda2                               partition       2097148 0       -2
</div></code></pre>
<h3 id="disk-io-monitoring">Disk I/O Monitoring</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Disk usage</span>
$ df -h
Filesystem      Size  Used Avail Use% Mounted on
/dev/sda1        20G   12G  7.2G  63% /
/dev/sda2       100G   45G   50G  48% /home
tmpfs           3.9G     0  3.9G   0% /dev/shm

<span class="hljs-comment"># Inode usage</span>
$ df -i
Filesystem      Inodes   IUsed   IFree IUse% Mounted on
/dev/sda1      1310720  123456 1187264   10% /
/dev/sda2      6553600  234567 6319033    4% /home

<span class="hljs-comment"># Directory sizes</span>
$ du -sh /var/<span class="hljs-built_in">log</span>/*
1.2G    /var/<span class="hljs-built_in">log</span>/apache2
456M    /var/<span class="hljs-built_in">log</span>/mysql
123M    /var/<span class="hljs-built_in">log</span>/syslog
89M     /var/<span class="hljs-built_in">log</span>/auth.log

<span class="hljs-comment"># Find large files</span>
$ find / -<span class="hljs-built_in">type</span> f -size +100M 2&gt;/dev/null | head -10
/var/<span class="hljs-built_in">log</span>/apache2/access.log
/var/lib/mysql/ibdata1
/home/user/large_file.iso

<span class="hljs-comment"># Real-time disk I/O</span>
$ iostat -x 1 5
Linux 5.4.0-74-generic (hostname)      12/15/2023      _x86_64_        (4 CPU)

avg-cpu:  %user   %nice %system %iowait  %steal   %idle
           5.25    0.00    2.13    0.63    0.00   91.99

Device            r/s     w/s     rkB/s     wkB/s   rrqm/s   wrqm/s  %rrqm  %wrqm     await    r_await    w_await  svctm  %util
sda              12.34    5.67    123.45     67.89     0.12     2.34   0.96  29.23      8.45       6.78      12.34   2.45   4.32

<span class="hljs-comment"># I/O statistics per process</span>
$ iotop
Total DISK READ :       1.23 M/s | Total DISK WRITE :       456.78 K/s
Actual DISK READ:       1.23 M/s | Actual DISK WRITE:       456.78 K/s
  TID  PRIO  USER     DISK READ  DISK WRITE  SWAPIN     IO&gt;    COMMAND
 1234 be/4 mysql       123.45 K/s   67.89 K/s  0.00 % 12.34 % mysqld
 5678 be/4 apache       45.67 K/s   23.45 K/s  0.00 %  5.67 % apache2

<span class="hljs-comment"># Disk I/O per process with pidstat</span>
$ pidstat -d 1 5                 <span class="hljs-comment"># All processes</span>
$ pidstat -d -p 1234 1 5         <span class="hljs-comment"># Specific process</span>

<span class="hljs-comment"># Block device statistics</span>
$ cat /proc/diskstats
   8       0 sda 123456 789 1234567 8901 234567 890 2345678 9012 0 12345 67890
   8       1 sda1 12345 67 123456 789 23456 78 234567 890 0 1234 5678

<span class="hljs-comment"># Check disk health</span>
$ sudo smartctl -a /dev/sda
$ sudo smartctl -H /dev/sda       <span class="hljs-comment"># Health status only</span>
</div></code></pre>
<h3 id="network-monitoring">Network Monitoring</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Network interface statistics</span>
$ ip -s link
1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    RX: bytes  packets  errors  dropped overrun mcast
    1234567    8901     0       0       0       0
    TX: bytes  packets  errors  dropped carrier collsns
    1234567    8901     0       0       0       0

2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP mode DEFAULT group default qlen 1000
    link/ether aa:bb:cc:dd:ee:ff brd ff:ff:ff:ff:ff:ff
    RX: bytes  packets  errors  dropped overrun mcast
    12345678901 8901234  0       0       0       123
    TX: bytes  packets  errors  dropped carrier collsns
    9876543210  7654321  0       0       0       0

<span class="hljs-comment"># Network statistics with sar</span>
$ sar -n DEV 1 5                 <span class="hljs-comment"># Network device statistics</span>
Linux 5.4.0-74-generic (hostname)      12/15/2023      _x86_64_        (4 CPU)

10:30:16 AM     IFACE   rxpck/s   txpck/s    rxkB/s    txkB/s   rxcmp/s   txcmp/s  rxmcst/s   %ifutil
10:30:17 AM        lo      1.23      1.23      0.12      0.12      0.00      0.00      0.00      0.00
10:30:17 AM      eth0     45.67     34.56     67.89     45.67      0.00      0.00      0.12      0.05

<span class="hljs-comment"># Real-time network usage</span>
$ iftop                          <span class="hljs-comment"># Interactive network usage</span>
$ nethogs                        <span class="hljs-comment"># Network usage per process</span>
$ nload                          <span class="hljs-comment"># Network load monitor</span>

<span class="hljs-comment"># Network connections</span>
$ netstat -tuln                  <span class="hljs-comment"># Listening ports</span>
$ netstat -tun                   <span class="hljs-comment"># All connections</span>
$ ss -tuln                       <span class="hljs-comment"># Modern alternative</span>
$ ss -tun                        <span class="hljs-comment"># All connections with ss</span>

<span class="hljs-comment"># Network connection statistics</span>
$ netstat -s
Ip:
    123456 total packets received
    0 forwarded
    0 incoming packets discarded
    123456 incoming packets delivered
    98765 requests sent out
Tcp:
    1234 active connections openings
    567 passive connection openings
    89 failed connection attempts
    12 connection resets received

<span class="hljs-comment"># Bandwidth monitoring</span>
$ vnstat                         <span class="hljs-comment"># Network traffic statistics</span>
$ vnstat -d                      <span class="hljs-comment"># Daily statistics</span>
$ vnstat -m                      <span class="hljs-comment"># Monthly statistics</span>

<span class="hljs-comment"># Network latency and packet loss</span>
$ ping -c 10 8.8.8.8
PING 8.8.8.8 (8.8.8.8) 56(84) bytes of data.
64 bytes from 8.8.8.8: icmp_seq=1 time=12.3 ms
64 bytes from 8.8.8.8: icmp_seq=2 time=11.8 ms
...
--- 8.8.8.8 ping statistics ---
10 packets transmitted, 10 received, 0% packet loss, time 9012ms
rtt min/avg/max/mdev = 11.234/12.567/13.890/0.789 ms

<span class="hljs-comment"># Continuous network monitoring</span>
$ mtr 8.8.8.8                   <span class="hljs-comment"># My traceroute (combines ping and traceroute)</span>
</div></code></pre>
<h2 id="%F0%9F%94%A7-advanced-monitoring-tools">üîß Advanced Monitoring Tools</h2>
<h3 id="system-activity-reporter-sar">System Activity Reporter (SAR)</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Install sysstat package</span>
$ sudo apt install sysstat

<span class="hljs-comment"># Enable data collection</span>
$ sudo systemctl <span class="hljs-built_in">enable</span> sysstat
$ sudo systemctl start sysstat

<span class="hljs-comment"># Configure data collection interval</span>
$ sudo nano /etc/cron.d/sysstat
<span class="hljs-comment"># Collect data every 10 minutes</span>
*/10 * * * * root /usr/lib/sysstat/debian-sa1 1 1

<span class="hljs-comment"># Generate daily reports</span>
5 19 * * * root /usr/lib/sysstat/debian-sa2 -A

<span class="hljs-comment"># View historical data</span>
$ sar -u                         <span class="hljs-comment"># CPU usage (today)</span>
$ sar -u -f /var/<span class="hljs-built_in">log</span>/sysstat/sa15  <span class="hljs-comment"># CPU usage (15th of month)</span>
$ sar -r                         <span class="hljs-comment"># Memory usage</span>
$ sar -d                         <span class="hljs-comment"># Disk activity</span>
$ sar -n DEV                     <span class="hljs-comment"># Network statistics</span>
$ sar -q                         <span class="hljs-comment"># Load average and run queue</span>
$ sar -w                         <span class="hljs-comment"># Context switches and interrupts</span>

<span class="hljs-comment"># Generate comprehensive report</span>
$ sar -A                         <span class="hljs-comment"># All statistics</span>

<span class="hljs-comment"># Custom time range</span>
$ sar -u -s 09:00:00 -e 17:00:00  <span class="hljs-comment"># Business hours only</span>

<span class="hljs-comment"># Export data for analysis</span>
$ sadf -d /var/<span class="hljs-built_in">log</span>/sysstat/sa15 &gt; sar_data.csv
</div></code></pre>
<h3 id="nagios-monitoring">Nagios Monitoring</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Install Nagios</span>
$ sudo apt update
$ sudo apt install nagios3 nagios-plugins

<span class="hljs-comment"># Configure Nagios</span>
$ sudo nano /etc/nagios3/nagios.cfg

<span class="hljs-comment"># Main configuration file</span>
cfg_file=/etc/nagios3/commands.cfg
cfg_dir=/etc/nagios3/conf.d
log_file=/var/<span class="hljs-built_in">log</span>/nagios3/nagios.log
object_cache_file=/var/cache/nagios3/objects.cache
precached_object_file=/var/lib/nagios3/objects.precache
resource_file=/etc/nagios3/resource.cfg
status_file=/var/lib/nagios3/status.dat
status_update_interval=10
nagios_user=nagios
nagios_group=nagios
check_external_commands=1
command_check_interval=-1
command_file=/var/lib/nagios3/rw/nagios.cmd

<span class="hljs-comment"># Define host</span>
$ sudo nano /etc/nagios3/conf.d/localhost.cfg

define host {
    use                     linux-server
    host_name               localhost
    <span class="hljs-built_in">alias</span>                   localhost
    address                 127.0.0.1
    max_check_attempts      5
    check_period            24x7
    notification_interval   30
    notification_period     24x7
}

<span class="hljs-comment"># Define services</span>
define service {
    use                     generic-service
    host_name               localhost
    service_description     CPU Load
    check_command           check_load!5.0!4.0!3.0!10.0!6.0!4.0
}

define service {
    use                     generic-service
    host_name               localhost
    service_description     Disk Space
    check_command           check_all_disks!20%!10%
}

define service {
    use                     generic-service
    host_name               localhost
    service_description     Memory Usage
    check_command           check_memory!80!90
}

<span class="hljs-comment"># Custom check commands</span>
$ sudo nano /etc/nagios3/commands.cfg

define <span class="hljs-built_in">command</span> {
    command_name    check_memory
    command_line    /usr/lib/nagios/plugins/check_memory.sh -w <span class="hljs-variable">$ARG1</span>$ -c <span class="hljs-variable">$ARG2</span>$
}

<span class="hljs-comment"># Memory check script</span>
$ sudo nano /usr/lib/nagios/plugins/check_memory.sh

<span class="hljs-meta">#!/bin/bash</span>
WARNING=<span class="hljs-variable">$1</span>
CRITICAL=<span class="hljs-variable">$2</span>

MEMORY_USAGE=$(free | grep Mem | awk <span class="hljs-string">'{printf("%.1f", $3/$2 * 100.0)}'</span>)

<span class="hljs-keyword">if</span> (( $(<span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$MEMORY_USAGE</span> &gt; <span class="hljs-variable">$CRITICAL</span>"</span> | bc -l) )); <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"CRITICAL - Memory usage is <span class="hljs-variable">${MEMORY_USAGE}</span>%"</span>
    <span class="hljs-built_in">exit</span> 2
<span class="hljs-keyword">elif</span> (( $(<span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$MEMORY_USAGE</span> &gt; <span class="hljs-variable">$WARNING</span>"</span> | bc -l) )); <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"WARNING - Memory usage is <span class="hljs-variable">${MEMORY_USAGE}</span>%"</span>
    <span class="hljs-built_in">exit</span> 1
<span class="hljs-keyword">else</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"OK - Memory usage is <span class="hljs-variable">${MEMORY_USAGE}</span>%"</span>
    <span class="hljs-built_in">exit</span> 0
<span class="hljs-keyword">fi</span>

$ sudo chmod +x /usr/lib/nagios/plugins/check_memory.sh

<span class="hljs-comment"># Restart Nagios</span>
$ sudo systemctl restart nagios3

<span class="hljs-comment"># Access web interface at http://localhost/nagios3</span>
<span class="hljs-comment"># Default credentials: nagiosadmin / nagiosadmin</span>
</div></code></pre>
<h3 id="zabbix-monitoring">Zabbix Monitoring</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Install Zabbix repository</span>
$ wget https://repo.zabbix.com/zabbix/5.4/ubuntu/pool/main/z/zabbix-release/zabbix-release_5.4-1+ubuntu20.04_all.deb
$ sudo dpkg -i zabbix-release_5.4-1+ubuntu20.04_all.deb
$ sudo apt update

<span class="hljs-comment"># Install Zabbix server, frontend, and agent</span>
$ sudo apt install zabbix-server-mysql zabbix-frontend-php zabbix-apache-conf zabbix-agent

<span class="hljs-comment"># Install and configure MySQL</span>
$ sudo apt install mysql-server
$ sudo mysql_secure_installation

<span class="hljs-comment"># Create Zabbix database</span>
$ sudo mysql -uroot -p
mysql&gt; create database zabbix character <span class="hljs-built_in">set</span> utf8 collate utf8_bin;
mysql&gt; create user zabbix@localhost identified by <span class="hljs-string">'password'</span>;
mysql&gt; grant all privileges on zabbix.* to zabbix@localhost;
mysql&gt; quit;

<span class="hljs-comment"># Import initial schema</span>
$ zcat /usr/share/doc/zabbix-server-mysql*/create.sql.gz | mysql -uzabbix -p zabbix

<span class="hljs-comment"># Configure Zabbix server</span>
$ sudo nano /etc/zabbix/zabbix_server.conf

DBPassword=password

<span class="hljs-comment"># Configure PHP for Zabbix frontend</span>
$ sudo nano /etc/zabbix/apache.conf

php_value max_execution_time 300
php_value memory_limit 128M
php_value post_max_size 16M
php_value upload_max_filesize 2M
php_value max_input_time 300
php_value max_input_vars 10000
php_value always_populate_raw_post_data -1
php_value date.timezone Europe/London

<span class="hljs-comment"># Start Zabbix services</span>
$ sudo systemctl restart zabbix-server zabbix-agent apache2
$ sudo systemctl <span class="hljs-built_in">enable</span> zabbix-server zabbix-agent

<span class="hljs-comment"># Access web interface at http://localhost/zabbix</span>
<span class="hljs-comment"># Default credentials: Admin / zabbix</span>
</div></code></pre>
<h3 id="prometheus-and-grafana">Prometheus and Grafana</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Install Prometheus</span>
$ sudo useradd --no-create-home --shell /bin/<span class="hljs-literal">false</span> prometheus
$ sudo mkdir /etc/prometheus /var/lib/prometheus
$ sudo chown prometheus:prometheus /etc/prometheus /var/lib/prometheus

$ <span class="hljs-built_in">cd</span> /tmp
$ wget https://github.com/prometheus/prometheus/releases/download/v2.30.3/prometheus-2.30.3.linux-amd64.tar.gz
$ tar xvf prometheus-2.30.3.linux-amd64.tar.gz
$ sudo cp prometheus-2.30.3.linux-amd64/prometheus /usr/<span class="hljs-built_in">local</span>/bin/
$ sudo cp prometheus-2.30.3.linux-amd64/promtool /usr/<span class="hljs-built_in">local</span>/bin/
$ sudo chown prometheus:prometheus /usr/<span class="hljs-built_in">local</span>/bin/prometheus /usr/<span class="hljs-built_in">local</span>/bin/promtool

<span class="hljs-comment"># Configure Prometheus</span>
$ sudo nano /etc/prometheus/prometheus.yml

global:
  scrape_interval: 15s
  evaluation_interval: 15s

rule_files:
  <span class="hljs-comment"># - "first_rules.yml"</span>
  <span class="hljs-comment"># - "second_rules.yml"</span>

scrape_configs:
  - job_name: <span class="hljs-string">'prometheus'</span>
    static_configs:
      - targets: [<span class="hljs-string">'localhost:9090'</span>]

  - job_name: <span class="hljs-string">'node'</span>
    static_configs:
      - targets: [<span class="hljs-string">'localhost:9100'</span>]

<span class="hljs-comment"># Create systemd service</span>
$ sudo nano /etc/systemd/system/prometheus.service

[Unit]
Description=Prometheus
Wants=network-online.target
After=network-online.target

[Service]
User=prometheus
Group=prometheus
Type=simple
ExecStart=/usr/<span class="hljs-built_in">local</span>/bin/prometheus \
    --config.file /etc/prometheus/prometheus.yml \
    --storage.tsdb.path /var/lib/prometheus/ \
    --web.console.templates=/etc/prometheus/consoles \
    --web.console.libraries=/etc/prometheus/console_libraries

[Install]
WantedBy=multi-user.target

<span class="hljs-comment"># Install Node Exporter</span>
$ wget https://github.com/prometheus/node_exporter/releases/download/v1.2.2/node_exporter-1.2.2.linux-amd64.tar.gz
$ tar xvf node_exporter-1.2.2.linux-amd64.tar.gz
$ sudo cp node_exporter-1.2.2.linux-amd64/node_exporter /usr/<span class="hljs-built_in">local</span>/bin/
$ sudo useradd --no-create-home --shell /bin/<span class="hljs-literal">false</span> node_exporter
$ sudo chown node_exporter:node_exporter /usr/<span class="hljs-built_in">local</span>/bin/node_exporter

<span class="hljs-comment"># Create Node Exporter service</span>
$ sudo nano /etc/systemd/system/node_exporter.service

[Unit]
Description=Node Exporter
Wants=network-online.target
After=network-online.target

[Service]
User=node_exporter
Group=node_exporter
Type=simple
ExecStart=/usr/<span class="hljs-built_in">local</span>/bin/node_exporter

[Install]
WantedBy=multi-user.target

<span class="hljs-comment"># Start services</span>
$ sudo systemctl daemon-reload
$ sudo systemctl start prometheus node_exporter
$ sudo systemctl <span class="hljs-built_in">enable</span> prometheus node_exporter

<span class="hljs-comment"># Install Grafana</span>
$ sudo apt-get install -y software-properties-common
$ sudo add-apt-repository <span class="hljs-string">"deb https://packages.grafana.com/oss/deb stable main"</span>
$ wget -q -O - https://packages.grafana.com/gpg.key | sudo apt-key add -
$ sudo apt-get update
$ sudo apt-get install grafana

<span class="hljs-comment"># Start Grafana</span>
$ sudo systemctl start grafana-server
$ sudo systemctl <span class="hljs-built_in">enable</span> grafana-server

<span class="hljs-comment"># Access Grafana at http://localhost:3000</span>
<span class="hljs-comment"># Default credentials: admin / admin</span>
</div></code></pre>
<h2 id="%E2%9A%A1-performance-optimization">‚ö° Performance Optimization</h2>
<h3 id="cpu-optimization">CPU Optimization</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Check CPU governor</span>
$ cat /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor
powersave

<span class="hljs-comment"># Set performance governor</span>
$ sudo cpupower frequency-set -g performance
$ <span class="hljs-built_in">echo</span> performance | sudo tee /sys/devices/system/cpu/cpu*/cpufreq/scaling_governor

<span class="hljs-comment"># Install and configure cpufrequtils</span>
$ sudo apt install cpufrequtils
$ sudo nano /etc/default/cpufrequtils
GOVERNOR=<span class="hljs-string">"performance"</span>
MAX_SPEED=<span class="hljs-string">"0"</span>
MIN_SPEED=<span class="hljs-string">"0"</span>

<span class="hljs-comment"># CPU affinity for processes</span>
$ taskset -c 0,1 <span class="hljs-built_in">command</span>              <span class="hljs-comment"># Run on CPUs 0 and 1</span>
$ taskset -p 0x3 1234                 <span class="hljs-comment"># Set CPU affinity for PID 1234</span>

<span class="hljs-comment"># Process priority (nice values)</span>
$ nice -n -10 <span class="hljs-built_in">command</span>                 <span class="hljs-comment"># Higher priority</span>
$ renice -10 1234                     <span class="hljs-comment"># Change priority of running process</span>

<span class="hljs-comment"># Real-time scheduling</span>
$ chrt -f 99 <span class="hljs-built_in">command</span>                  <span class="hljs-comment"># FIFO real-time scheduling</span>
$ chrt -r 50 <span class="hljs-built_in">command</span>                  <span class="hljs-comment"># Round-robin real-time scheduling</span>

<span class="hljs-comment"># Disable CPU mitigations for performance (security trade-off)</span>
$ sudo nano /etc/default/grub
GRUB_CMDLINE_LINUX_DEFAULT=<span class="hljs-string">"quiet splash mitigations=off"</span>
$ sudo update-grub
</div></code></pre>
<h3 id="memory-optimization">Memory Optimization</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Tune virtual memory settings</span>
$ sudo nano /etc/sysctl.conf

<span class="hljs-comment"># Reduce swappiness (prefer RAM over swap)</span>
vm.swappiness=10

<span class="hljs-comment"># Increase dirty page cache</span>
vm.dirty_ratio=15
vm.dirty_background_ratio=5

<span class="hljs-comment"># Optimize for database workloads</span>
vm.dirty_expire_centisecs=500
vm.dirty_writeback_centisecs=100

<span class="hljs-comment"># Increase shared memory</span>
kernel.shmmax=68719476736
kernel.shmall=4294967296

<span class="hljs-comment"># Apply changes</span>
$ sudo sysctl -p

<span class="hljs-comment"># Huge pages configuration</span>
$ <span class="hljs-built_in">echo</span> 1024 | sudo tee /sys/kernel/mm/hugepages/hugepages-2048kB/nr_hugepages
$ sudo nano /etc/sysctl.conf
vm.nr_hugepages=1024

<span class="hljs-comment"># Memory compaction</span>
$ <span class="hljs-built_in">echo</span> 1 | sudo tee /proc/sys/vm/compact_memory

<span class="hljs-comment"># Drop caches (for testing)</span>
$ sudo sync
$ <span class="hljs-built_in">echo</span> 3 | sudo tee /proc/sys/vm/drop_caches

<span class="hljs-comment"># Memory allocation policies</span>
$ numactl --hardware                  <span class="hljs-comment"># Show NUMA topology</span>
$ numactl --cpubind=0 --membind=0 <span class="hljs-built_in">command</span>  <span class="hljs-comment"># Bind to specific NUMA node</span>
</div></code></pre>
<h3 id="disk-io-optimization">Disk I/O Optimization</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Check current I/O scheduler</span>
$ cat /sys/block/sda/queue/scheduler
none mq-deadline [kyber] bfq

<span class="hljs-comment"># Change I/O scheduler</span>
$ <span class="hljs-built_in">echo</span> mq-deadline | sudo tee /sys/block/sda/queue/scheduler

<span class="hljs-comment"># Permanent I/O scheduler change</span>
$ sudo nano /etc/default/grub
GRUB_CMDLINE_LINUX_DEFAULT=<span class="hljs-string">"quiet splash elevator=mq-deadline"</span>
$ sudo update-grub

<span class="hljs-comment"># Optimize mount options</span>
$ sudo nano /etc/fstab
/dev/sda1 / ext4 defaults,noatime,nodiratime 0 1
/dev/sda2 /home ext4 defaults,noatime,nodiratime 0 2

<span class="hljs-comment"># SSD optimizations</span>
/dev/ssd1 /data ext4 defaults,noatime,discard 0 2

<span class="hljs-comment"># Tune filesystem parameters</span>
$ sudo tune2fs -o journal_data_writeback /dev/sda1
$ sudo tune2fs -O ^has_journal /dev/sda1  <span class="hljs-comment"># Remove journal (risky)</span>

<span class="hljs-comment"># Adjust read-ahead</span>
$ sudo blockdev --setra 4096 /dev/sda

<span class="hljs-comment"># Configure I/O limits with cgroups</span>
$ sudo nano /etc/systemd/system/myapp.service
[Service]
IOWeight=500
IODeviceWeight=/dev/sda 750
IOReadBandwidthMax=/dev/sda 100M
IOWriteBandwidthMax=/dev/sda 50M

<span class="hljs-comment"># Optimize database storage</span>
$ sudo nano /etc/mysql/mysql.conf.d/mysqld.cnf
[mysqld]
innodb_buffer_pool_size=2G
innodb_log_file_size=256M
innodb_flush_log_at_trx_commit=2
innodb_flush_method=O_DIRECT
</div></code></pre>
<h3 id="network-optimization">Network Optimization</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Network buffer tuning</span>
$ sudo nano /etc/sysctl.conf

<span class="hljs-comment"># Increase network buffers</span>
net.core.rmem_default=262144
net.core.rmem_max=16777216
net.core.wmem_default=262144
net.core.wmem_max=16777216

<span class="hljs-comment"># TCP buffer tuning</span>
net.ipv4.tcp_rmem=4096 65536 16777216
net.ipv4.tcp_wmem=4096 65536 16777216

<span class="hljs-comment"># TCP congestion control</span>
net.ipv4.tcp_congestion_control=bbr

<span class="hljs-comment"># Increase connection tracking</span>
net.netfilter.nf_conntrack_max=1048576

<span class="hljs-comment"># Optimize for high-performance networking</span>
net.core.netdev_max_backlog=5000
net.ipv4.tcp_window_scaling=1
net.ipv4.tcp_timestamps=1
net.ipv4.tcp_sack=1
net.ipv4.tcp_no_metrics_save=1

<span class="hljs-comment"># Apply changes</span>
$ sudo sysctl -p

<span class="hljs-comment"># Network interface optimization</span>
$ sudo ethtool -G eth0 rx 4096 tx 4096  <span class="hljs-comment"># Increase ring buffers</span>
$ sudo ethtool -K eth0 gro on           <span class="hljs-comment"># Generic receive offload</span>
$ sudo ethtool -K eth0 tso on           <span class="hljs-comment"># TCP segmentation offload</span>

<span class="hljs-comment"># CPU affinity for network interrupts</span>
$ sudo nano /etc/rc.local
<span class="hljs-built_in">echo</span> 2 &gt; /proc/irq/24/smp_affinity     <span class="hljs-comment"># Bind network IRQ to CPU 1</span>
</div></code></pre>
<h2 id="%F0%9F%93%88-automated-monitoring-and-alerting">üìà Automated Monitoring and Alerting</h2>
<h3 id="custom-monitoring-scripts">Custom Monitoring Scripts</h3>
<pre class="hljs"><code><div><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># /usr/local/bin/system-monitor.sh</span>

LOGFILE=<span class="hljs-string">"/var/log/system-monitor.log"</span>
ALERT_EMAIL=<span class="hljs-string">"admin@example.com"</span>
HOSTNAME=$(hostname)
DATE=$(date <span class="hljs-string">'+%Y-%m-%d %H:%M:%S'</span>)

<span class="hljs-comment"># Function to send alerts</span>
<span class="hljs-function"><span class="hljs-title">send_alert</span></span>() {
    <span class="hljs-built_in">local</span> subject=<span class="hljs-string">"<span class="hljs-variable">$1</span>"</span>
    <span class="hljs-built_in">local</span> message=<span class="hljs-string">"<span class="hljs-variable">$2</span>"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"[<span class="hljs-variable">$DATE</span>] ALERT: <span class="hljs-variable">$subject</span>"</span> &gt;&gt; <span class="hljs-variable">$LOGFILE</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$message</span>"</span> | mail -s <span class="hljs-string">"[<span class="hljs-variable">$HOSTNAME</span>] <span class="hljs-variable">$subject</span>"</span> <span class="hljs-variable">$ALERT_EMAIL</span>
}

<span class="hljs-comment"># Check CPU load</span>
LOAD_AVG=$(uptime | awk -F<span class="hljs-string">'load average:'</span> <span class="hljs-string">'{print $2}'</span> | awk <span class="hljs-string">'{print $1}'</span> | sed <span class="hljs-string">'s/,//'</span>)
LOAD_THRESHOLD=<span class="hljs-string">"4.0"</span>
<span class="hljs-keyword">if</span> (( $(<span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$LOAD_AVG</span> &gt; <span class="hljs-variable">$LOAD_THRESHOLD</span>"</span> | bc -l) )); <span class="hljs-keyword">then</span>
    send_alert <span class="hljs-string">"High CPU Load"</span> <span class="hljs-string">"Current load average: <span class="hljs-variable">$LOAD_AVG</span> (threshold: <span class="hljs-variable">$LOAD_THRESHOLD</span>)"</span>
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># Check memory usage</span>
MEM_USAGE=$(free | awk <span class="hljs-string">'NR==2{printf "%.1f", $3*100/$2}'</span>)
MEM_THRESHOLD=<span class="hljs-string">"90"</span>
<span class="hljs-keyword">if</span> (( $(<span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$MEM_USAGE</span> &gt; <span class="hljs-variable">$MEM_THRESHOLD</span>"</span> | bc -l) )); <span class="hljs-keyword">then</span>
    send_alert <span class="hljs-string">"High Memory Usage"</span> <span class="hljs-string">"Current memory usage: <span class="hljs-variable">${MEM_USAGE}</span>% (threshold: <span class="hljs-variable">${MEM_THRESHOLD}</span>%)"</span>
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># Check disk usage</span>
<span class="hljs-keyword">while</span> <span class="hljs-built_in">read</span> output; <span class="hljs-keyword">do</span>
    usage=$(<span class="hljs-built_in">echo</span> <span class="hljs-variable">$output</span> | awk <span class="hljs-string">'{print $5}'</span> | sed <span class="hljs-string">'s/%//g'</span>)
    partition=$(<span class="hljs-built_in">echo</span> <span class="hljs-variable">$output</span> | awk <span class="hljs-string">'{print $6}'</span>)
    <span class="hljs-keyword">if</span> [ <span class="hljs-variable">$usage</span> -ge 90 ]; <span class="hljs-keyword">then</span>
        send_alert <span class="hljs-string">"High Disk Usage"</span> <span class="hljs-string">"Partition <span class="hljs-variable">$partition</span> is <span class="hljs-variable">${usage}</span>% full"</span>
    <span class="hljs-keyword">fi</span>
<span class="hljs-keyword">done</span> &lt;&lt;&lt; <span class="hljs-string">"<span class="hljs-variable">$(df -h | grep -vE '^Filesystem|tmpfs|cdrom')</span>"</span>

<span class="hljs-comment"># Check service status</span>
SERVICES=(<span class="hljs-string">"apache2"</span> <span class="hljs-string">"mysql"</span> <span class="hljs-string">"ssh"</span>)
<span class="hljs-keyword">for</span> service <span class="hljs-keyword">in</span> <span class="hljs-string">"<span class="hljs-variable">${SERVICES[@]}</span>"</span>; <span class="hljs-keyword">do</span>
    <span class="hljs-keyword">if</span> ! systemctl is-active --quiet <span class="hljs-variable">$service</span>; <span class="hljs-keyword">then</span>
        send_alert <span class="hljs-string">"Service Down"</span> <span class="hljs-string">"Service <span class="hljs-variable">$service</span> is not running"</span>
    <span class="hljs-keyword">fi</span>
<span class="hljs-keyword">done</span>

<span class="hljs-comment"># Check network connectivity</span>
<span class="hljs-keyword">if</span> ! ping -c 1 8.8.8.8 &amp;&gt; /dev/null; <span class="hljs-keyword">then</span>
    send_alert <span class="hljs-string">"Network Connectivity"</span> <span class="hljs-string">"Cannot reach external network (8.8.8.8)"</span>
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># Log successful check</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"[<span class="hljs-variable">$DATE</span>] System check completed"</span> &gt;&gt; <span class="hljs-variable">$LOGFILE</span>

<span class="hljs-comment"># Schedule with cron</span>
<span class="hljs-comment"># */5 * * * * /usr/local/bin/system-monitor.sh</span>
</div></code></pre>
<h3 id="performance-baseline-script">Performance Baseline Script</h3>
<pre class="hljs"><code><div><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># /usr/local/bin/performance-baseline.sh</span>

OUTPUT_DIR=<span class="hljs-string">"/var/log/performance-baseline"</span>
DATE=$(date <span class="hljs-string">'+%Y%m%d_%H%M%S'</span>)
REPORT_FILE=<span class="hljs-string">"<span class="hljs-variable">$OUTPUT_DIR</span>/baseline_<span class="hljs-variable">$DATE</span>.txt"</span>

mkdir -p <span class="hljs-variable">$OUTPUT_DIR</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"Performance Baseline Report - <span class="hljs-variable">$DATE</span>"</span> &gt; <span class="hljs-variable">$REPORT_FILE</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"========================================="</span> &gt;&gt; <span class="hljs-variable">$REPORT_FILE</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">""</span> &gt;&gt; <span class="hljs-variable">$REPORT_FILE</span>

<span class="hljs-comment"># System information</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"SYSTEM INFORMATION:"</span> &gt;&gt; <span class="hljs-variable">$REPORT_FILE</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Hostname: <span class="hljs-variable">$(hostname)</span>"</span> &gt;&gt; <span class="hljs-variable">$REPORT_FILE</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Uptime: <span class="hljs-variable">$(uptime)</span>"</span> &gt;&gt; <span class="hljs-variable">$REPORT_FILE</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Kernel: <span class="hljs-variable">$(uname -r)</span>"</span> &gt;&gt; <span class="hljs-variable">$REPORT_FILE</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">""</span> &gt;&gt; <span class="hljs-variable">$REPORT_FILE</span>

<span class="hljs-comment"># CPU information</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"CPU INFORMATION:"</span> &gt;&gt; <span class="hljs-variable">$REPORT_FILE</span>
lscpu &gt;&gt; <span class="hljs-variable">$REPORT_FILE</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">""</span> &gt;&gt; <span class="hljs-variable">$REPORT_FILE</span>

<span class="hljs-comment"># Memory information</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"MEMORY INFORMATION:"</span> &gt;&gt; <span class="hljs-variable">$REPORT_FILE</span>
free -h &gt;&gt; <span class="hljs-variable">$REPORT_FILE</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">""</span> &gt;&gt; <span class="hljs-variable">$REPORT_FILE</span>

<span class="hljs-comment"># Disk information</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"DISK INFORMATION:"</span> &gt;&gt; <span class="hljs-variable">$REPORT_FILE</span>
df -h &gt;&gt; <span class="hljs-variable">$REPORT_FILE</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">""</span> &gt;&gt; <span class="hljs-variable">$REPORT_FILE</span>

<span class="hljs-comment"># Network information</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"NETWORK INFORMATION:"</span> &gt;&gt; <span class="hljs-variable">$REPORT_FILE</span>
ip addr show &gt;&gt; <span class="hljs-variable">$REPORT_FILE</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">""</span> &gt;&gt; <span class="hljs-variable">$REPORT_FILE</span>

<span class="hljs-comment"># Performance metrics</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"PERFORMANCE METRICS:"</span> &gt;&gt; <span class="hljs-variable">$REPORT_FILE</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Load Average: <span class="hljs-variable">$(cat /proc/loadavg)</span>"</span> &gt;&gt; <span class="hljs-variable">$REPORT_FILE</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Memory Usage: <span class="hljs-variable">$(free | awk 'NR==2{printf "%.1f%%", $3*100/$2}')</span>"</span> &gt;&gt; <span class="hljs-variable">$REPORT_FILE</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Disk I/O: <span class="hljs-variable">$(iostat -x 1 1 | tail -n +4)</span>"</span> &gt;&gt; <span class="hljs-variable">$REPORT_FILE</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">""</span> &gt;&gt; <span class="hljs-variable">$REPORT_FILE</span>

<span class="hljs-comment"># Top processes</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"TOP PROCESSES (CPU):"</span> &gt;&gt; <span class="hljs-variable">$REPORT_FILE</span>
ps aux --sort=-%cpu | head -10 &gt;&gt; <span class="hljs-variable">$REPORT_FILE</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">""</span> &gt;&gt; <span class="hljs-variable">$REPORT_FILE</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"TOP PROCESSES (Memory):"</span> &gt;&gt; <span class="hljs-variable">$REPORT_FILE</span>
ps aux --sort=-%mem | head -10 &gt;&gt; <span class="hljs-variable">$REPORT_FILE</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">""</span> &gt;&gt; <span class="hljs-variable">$REPORT_FILE</span>

<span class="hljs-comment"># Network connections</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"NETWORK CONNECTIONS:"</span> &gt;&gt; <span class="hljs-variable">$REPORT_FILE</span>
netstat -tuln &gt;&gt; <span class="hljs-variable">$REPORT_FILE</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">""</span> &gt;&gt; <span class="hljs-variable">$REPORT_FILE</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"Baseline report saved to: <span class="hljs-variable">$REPORT_FILE</span>"</span>
</div></code></pre>
<h2 id="%F0%9F%A7%A0-knowledge-check">üß† Knowledge Check</h2>
<h3 id="quick-quiz">Quick Quiz</h3>
<ol>
<li>
<p><strong>What does a load average of 2.0 mean on a 4-core system?</strong></p>
<details>
<summary>Answer</summary>
<p>A load average of 2.0 on a 4-core system means the system is 50% utilized on average. The system can handle up to 4.0 before being fully utilized.</p>
</details>
</li>
<li>
<p><strong>What's the difference between buffer and cache in memory usage?</strong></p>
<details>
<summary>Answer</summary>
<p>Buffers are used for block device I/O operations, while cache stores frequently accessed file contents. Both can be freed when applications need more memory.</p>
</details>
</li>
<li>
<p><strong>What does %iowait in CPU statistics indicate?</strong></p>
<details>
<summary>Answer</summary>
<p>%iowait shows the percentage of time the CPU is idle while waiting for I/O operations to complete. High iowait indicates disk or network bottlenecks.</p>
</details>
</li>
<li>
<p><strong>How do you identify which process is causing high disk I/O?</strong></p>
<details>
<summary>Answer</summary>
<p>Use <code>iotop</code> for real-time I/O monitoring or <code>pidstat -d</code> to see per-process disk statistics.</p>
</details>
</li>
</ol>
<h3 id="hands-on-challenges">Hands-On Challenges</h3>
<p><strong>Challenge 1: Complete Monitoring Setup</strong></p>
<pre class="hljs"><code><div><span class="hljs-comment"># Set up comprehensive monitoring:</span>
<span class="hljs-comment"># - Install and configure Prometheus + Grafana</span>
<span class="hljs-comment"># - Create custom dashboards for system metrics</span>
<span class="hljs-comment"># - Set up alerting rules for critical thresholds</span>
<span class="hljs-comment"># - Implement automated reporting</span>
<span class="hljs-comment"># - Configure log aggregation and analysis</span>
</div></code></pre>
<p><strong>Challenge 2: Performance Optimization</strong></p>
<pre class="hljs"><code><div><span class="hljs-comment"># Optimize a system for specific workload:</span>
<span class="hljs-comment"># - Identify performance bottlenecks</span>
<span class="hljs-comment"># - Tune kernel parameters for the workload</span>
<span class="hljs-comment"># - Optimize application configurations</span>
<span class="hljs-comment"># - Implement caching strategies</span>
<span class="hljs-comment"># - Measure and document improvements</span>
</div></code></pre>
<p><strong>Challenge 3: Capacity Planning</strong></p>
<pre class="hljs"><code><div><span class="hljs-comment"># Create a capacity planning system:</span>
<span class="hljs-comment"># - Collect historical performance data</span>
<span class="hljs-comment"># - Analyze growth trends</span>
<span class="hljs-comment"># - Predict future resource requirements</span>
<span class="hljs-comment"># - Create scaling recommendations</span>
<span class="hljs-comment"># - Implement automated scaling triggers</span>
</div></code></pre>
<h2 id="%F0%9F%9A%80-next-steps">üöÄ Next Steps</h2>
<p>Excellent! You've mastered performance monitoring and optimization. You can now:</p>
<ul>
<li>Monitor all system resources (CPU, memory, disk, network)</li>
<li>Use advanced monitoring tools (SAR, Nagios, Prometheus, Grafana)</li>
<li>Identify and resolve performance bottlenecks</li>
<li>Optimize system performance for specific workloads</li>
<li>Set up automated monitoring and alerting</li>
<li>Plan for future capacity requirements</li>
<li>Troubleshoot complex performance issues</li>
</ul>
<p><strong>Ready for automation and scripting?</strong> Continue to <a href="14-automation-scripting.md">14-automation-scripting.md</a> to learn about automating system administration tasks and creating powerful scripts.</p>
<hr>
<blockquote>
<p><strong>Pro Tip</strong>: Performance monitoring is an ongoing process. Establish baselines, monitor trends, and optimize proactively rather than reactively. Always measure before and after changes to validate improvements! üìä</p>
</blockquote>
<h1 id="%F0%9F%A4%96-automation--scripting-mastering-system-administration-automation">ü§ñ Automation &amp; Scripting: Mastering System Administration Automation</h1>
<blockquote>
<p><strong>Automate repetitive tasks, create powerful scripts, and build efficient workflows</strong></p>
</blockquote>
<h2 id="%F0%9F%93%96-what-youll-learn">üìñ What You'll Learn</h2>
<p>Automation is the key to efficient system administration. This chapter covers comprehensive automation techniques and scripting:</p>
<ul>
<li>Bash scripting fundamentals and advanced techniques</li>
<li>Task automation with cron and systemd timers</li>
<li>Configuration management with Ansible</li>
<li>Infrastructure as Code (IaC) concepts</li>
<li>Log management and rotation automation</li>
<li>Backup automation strategies</li>
<li>System maintenance automation</li>
<li>Monitoring and alerting automation</li>
<li>Error handling and debugging scripts</li>
</ul>
<h2 id="%F0%9F%8C%8D-why-this-matters">üåç Why This Matters</h2>
<p><strong>Critical applications:</strong></p>
<ul>
<li><strong>Efficiency</strong>: Automate repetitive tasks to save time and reduce errors</li>
<li><strong>Consistency</strong>: Ensure tasks are performed the same way every time</li>
<li><strong>Scalability</strong>: Manage multiple systems efficiently</li>
<li><strong>Reliability</strong>: Reduce human error and improve system reliability</li>
<li><strong>Cost Reduction</strong>: Minimize manual intervention and operational costs</li>
</ul>
<h2 id="%F0%9F%93%9D-bash-scripting-fundamentals">üìù Bash Scripting Fundamentals</h2>
<h3 id="script-structure-and-best-practices">Script Structure and Best Practices</h3>
<pre class="hljs"><code><div><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># script-template.sh - Professional script template</span>

<span class="hljs-comment"># Script metadata</span>
SCRIPT_NAME=<span class="hljs-string">"<span class="hljs-variable">$(basename "$0")</span>"</span>
SCRIPT_DIR=<span class="hljs-string">"<span class="hljs-variable">$(cd "$(dirname "${BASH_SOURCE[0]}")</span>"</span> &amp;&amp; <span class="hljs-built_in">pwd</span>)<span class="hljs-string">"
SCRIPT_VERSION="</span>1.0.0<span class="hljs-string">"
SCRIPT_AUTHOR="</span>Your Name<span class="hljs-string">"
SCRIPT_DATE="</span>$(date <span class="hljs-string">'+%Y-%m-%d'</span>)<span class="hljs-string">"

# Configuration
LOG_FILE="</span>/var/<span class="hljs-built_in">log</span>/<span class="hljs-variable">${SCRIPT_NAME%.sh}</span>.<span class="hljs-built_in">log</span><span class="hljs-string">"
CONFIG_FILE="</span><span class="hljs-variable">${SCRIPT_DIR}</span>/<span class="hljs-variable">${SCRIPT_NAME%.sh}</span>.conf<span class="hljs-string">"
LOCK_FILE="</span>/var/run/<span class="hljs-variable">${SCRIPT_NAME%.sh}</span>.lock<span class="hljs-string">"
DEBUG=<span class="hljs-variable">${DEBUG:-0}</span>
VERBOSE=<span class="hljs-variable">${VERBOSE:-0}</span>

# Colors for output
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
BLUE='\033[0;34m'
NC='\033[0m' # No Color

# Logging functions
log() {
    local level="</span><span class="hljs-variable">$1</span><span class="hljs-string">"
    shift
    local message="</span>$*<span class="hljs-string">"
    local timestamp="</span>$(date <span class="hljs-string">'+%Y-%m-%d %H:%M:%S'</span>)<span class="hljs-string">"
    echo "</span>[<span class="hljs-variable">$timestamp</span>] [<span class="hljs-variable">$level</span>] <span class="hljs-variable">$message</span><span class="hljs-string">" | tee -a "</span><span class="hljs-variable">$LOG_FILE</span><span class="hljs-string">"
}

log_info() { log "</span>INFO<span class="hljs-string">" "</span><span class="hljs-variable">$@</span><span class="hljs-string">"; }
log_warn() { log "</span>WARN<span class="hljs-string">" "</span><span class="hljs-variable">$@</span><span class="hljs-string">"; }
log_error() { log "</span>ERROR<span class="hljs-string">" "</span><span class="hljs-variable">$@</span><span class="hljs-string">"; }
log_debug() { [[ <span class="hljs-variable">$DEBUG</span> -eq 1 ]] &amp;&amp; log "</span>DEBUG<span class="hljs-string">" "</span><span class="hljs-variable">$@</span><span class="hljs-string">"; }

# Output functions
print_info() { echo -e "</span><span class="hljs-variable">${BLUE}</span>[INFO]<span class="hljs-variable">${NC}</span> $*<span class="hljs-string">"; }
print_success() { echo -e "</span><span class="hljs-variable">${GREEN}</span>[SUCCESS]<span class="hljs-variable">${NC}</span> $*<span class="hljs-string">"; }
print_warning() { echo -e "</span><span class="hljs-variable">${YELLOW}</span>[WARNING]<span class="hljs-variable">${NC}</span> $*<span class="hljs-string">"; }
print_error() { echo -e "</span><span class="hljs-variable">${RED}</span>[ERROR]<span class="hljs-variable">${NC}</span> $*<span class="hljs-string">" &gt;&amp;2; }

# Error handling
set -euo pipefail  # Exit on error, undefined vars, pipe failures

error_handler() {
    local line_number="</span><span class="hljs-variable">$1</span><span class="hljs-string">"
    local error_code="</span><span class="hljs-variable">$2</span><span class="hljs-string">"
    log_error "</span>Script failed at line <span class="hljs-variable">$line_number</span> with <span class="hljs-built_in">exit</span> code <span class="hljs-variable">$error_code</span><span class="hljs-string">"
    cleanup
    exit "</span><span class="hljs-variable">$error_code</span><span class="hljs-string">"
}

trap 'error_handler <span class="hljs-variable">${LINENO}</span> $?' ERR

# Cleanup function
cleanup() {
    log_info "</span>Performing cleanup...<span class="hljs-string">"
    [[ -f "</span><span class="hljs-variable">$LOCK_FILE</span><span class="hljs-string">" ]] &amp;&amp; rm -f "</span><span class="hljs-variable">$LOCK_FILE</span><span class="hljs-string">"
    # Add other cleanup tasks here
}

trap cleanup EXIT

# Lock mechanism to prevent multiple instances
acquire_lock() {
    if [[ -f "</span><span class="hljs-variable">$LOCK_FILE</span><span class="hljs-string">" ]]; then
        local pid=<span class="hljs-variable">$(cat "$LOCK_FILE")</span>
        if kill -0 "</span><span class="hljs-variable">$pid</span><span class="hljs-string">" 2&gt;/dev/null; then
            log_error "</span>Script is already running (PID: <span class="hljs-variable">$pid</span>)<span class="hljs-string">"
            exit 1
        else
            log_warn "</span>Removing stale lock file<span class="hljs-string">"
            rm -f "</span><span class="hljs-variable">$LOCK_FILE</span><span class="hljs-string">"
        fi
    fi
    echo $$ &gt; "</span><span class="hljs-variable">$LOCK_FILE</span><span class="hljs-string">"
    log_info "</span>Lock acquired (PID: $$)<span class="hljs-string">"
}

# Usage function
usage() {
    cat &lt;&lt; EOF
Usage: <span class="hljs-variable">$SCRIPT_NAME</span> [OPTIONS]

Description:
    Professional script template with logging, error handling, and best practices.

Options:
    -h, --help          Show this help message
    -v, --verbose       Enable verbose output
    -d, --debug         Enable debug mode
    -c, --config FILE   Use custom config file
    --version           Show version information

Examples:
    <span class="hljs-variable">$SCRIPT_NAME</span> --verbose
    <span class="hljs-variable">$SCRIPT_NAME</span> --config /path/to/config.conf
    <span class="hljs-variable">$SCRIPT_NAME</span> --debug

Author: <span class="hljs-variable">$SCRIPT_AUTHOR</span>
Version: <span class="hljs-variable">$SCRIPT_VERSION</span>
Date: <span class="hljs-variable">$SCRIPT_DATE</span>
EOF
}

# Configuration loading
load_config() {
    if [[ -f "</span><span class="hljs-variable">$CONFIG_FILE</span><span class="hljs-string">" ]]; then
        log_info "</span>Loading configuration from <span class="hljs-variable">$CONFIG_FILE</span><span class="hljs-string">"
        source "</span><span class="hljs-variable">$CONFIG_FILE</span><span class="hljs-string">"
    else
        log_warn "</span>Configuration file not found: <span class="hljs-variable">$CONFIG_FILE</span><span class="hljs-string">"
    fi
}

# Argument parsing
parse_arguments() {
    while [[ <span class="hljs-variable">$#</span> -gt 0 ]]; do
        case <span class="hljs-variable">$1</span> in
            -h|--help)
                usage
                exit 0
                ;;
            -v|--verbose)
                VERBOSE=1
                shift
                ;;
            -d|--debug)
                DEBUG=1
                shift
                ;;
            -c|--config)
                CONFIG_FILE="</span><span class="hljs-variable">$2</span><span class="hljs-string">"
                shift 2
                ;;
            --version)
                echo "</span><span class="hljs-variable">$SCRIPT_NAME</span> version <span class="hljs-variable">$SCRIPT_VERSION</span><span class="hljs-string">"
                exit 0
                ;;
            *)
                print_error "</span>Unknown option: <span class="hljs-variable">$1</span><span class="hljs-string">"
                usage
                exit 1
                ;;
        esac
    done
}

# Validation functions
validate_requirements() {
    local required_commands=("</span>curl<span class="hljs-string">" "</span>jq<span class="hljs-string">" "</span>awk<span class="hljs-string">")
    local missing_commands=()

    for cmd in "</span><span class="hljs-variable">${required_commands[@]}</span><span class="hljs-string">"; do
        if ! command -v "</span><span class="hljs-variable">$cmd</span><span class="hljs-string">" &amp;&gt; /dev/null; then
            missing_commands+=("</span><span class="hljs-variable">$cmd</span><span class="hljs-string">")
        fi
    done

    if [[ <span class="hljs-variable">${#missing_commands[@]}</span> -gt 0 ]]; then
        log_error "</span>Missing required commands: <span class="hljs-variable">${missing_commands[*]}</span><span class="hljs-string">"
        exit 1
    fi
}

validate_permissions() {
    if [[ <span class="hljs-variable">$EUID</span> -eq 0 ]]; then
        log_warn "</span>Running as root user<span class="hljs-string">"
    fi

    if [[ ! -w "</span>$(dirname <span class="hljs-string">"<span class="hljs-variable">$LOG_FILE</span>"</span>)<span class="hljs-string">" ]]; then
        log_error "</span>Cannot write to <span class="hljs-built_in">log</span> directory: $(dirname <span class="hljs-string">"<span class="hljs-variable">$LOG_FILE</span>"</span>)<span class="hljs-string">"
        exit 1
    fi
}

# Main function
main() {
    log_info "</span>Starting <span class="hljs-variable">$SCRIPT_NAME</span> v<span class="hljs-variable">$SCRIPT_VERSION</span><span class="hljs-string">"

    # Your main script logic here
    print_info "</span>Script execution started<span class="hljs-string">"

    # Example operations
    if [[ <span class="hljs-variable">$VERBOSE</span> -eq 1 ]]; then
        print_info "</span>Verbose mode enabled<span class="hljs-string">"
    fi

    if [[ <span class="hljs-variable">$DEBUG</span> -eq 1 ]]; then
        print_info "</span>Debug mode enabled<span class="hljs-string">"
        set -x  # Enable command tracing
    fi

    # Simulate some work
    sleep 2

    print_success "</span>Script completed successfully<span class="hljs-string">"
    log_info "</span><span class="hljs-variable">$SCRIPT_NAME</span> completed successfully<span class="hljs-string">"
}

# Script execution
if [[ "</span><span class="hljs-variable">${BASH_SOURCE[0]}</span><span class="hljs-string">" == "</span><span class="hljs-variable">${0}</span><span class="hljs-string">" ]]; then
    parse_arguments "</span><span class="hljs-variable">$@</span><span class="hljs-string">"
    acquire_lock
    load_config
    validate_requirements
    validate_permissions
    main
fi
</span></div></code></pre>
<h3 id="advanced-bash-techniques">Advanced Bash Techniques</h3>
<pre class="hljs"><code><div><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># advanced-bash-examples.sh</span>

<span class="hljs-comment"># Arrays and associative arrays</span>
<span class="hljs-built_in">declare</span> -a servers=(<span class="hljs-string">"web1"</span> <span class="hljs-string">"web2"</span> <span class="hljs-string">"db1"</span>)
<span class="hljs-built_in">declare</span> -A server_ips=(
    [<span class="hljs-string">"web1"</span>]=<span class="hljs-string">"192.168.1.10"</span>
    [<span class="hljs-string">"web2"</span>]=<span class="hljs-string">"192.168.1.11"</span>
    [<span class="hljs-string">"db1"</span>]=<span class="hljs-string">"192.168.1.20"</span>
)

<span class="hljs-comment"># Function with return values</span>
<span class="hljs-function"><span class="hljs-title">check_service</span></span>() {
    <span class="hljs-built_in">local</span> service=<span class="hljs-string">"<span class="hljs-variable">$1</span>"</span>
    <span class="hljs-built_in">local</span> host=<span class="hljs-string">"<span class="hljs-variable">$2</span>"</span>

    <span class="hljs-keyword">if</span> ssh <span class="hljs-string">"<span class="hljs-variable">$host</span>"</span> <span class="hljs-string">"systemctl is-active --quiet <span class="hljs-variable">$service</span>"</span>; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">return</span> 0  <span class="hljs-comment"># Service is running</span>
    <span class="hljs-keyword">else</span>
        <span class="hljs-built_in">return</span> 1  <span class="hljs-comment"># Service is not running</span>
    <span class="hljs-keyword">fi</span>
}

<span class="hljs-comment"># Process arrays</span>
<span class="hljs-keyword">for</span> server <span class="hljs-keyword">in</span> <span class="hljs-string">"<span class="hljs-variable">${servers[@]}</span>"</span>; <span class="hljs-keyword">do</span>
    ip=<span class="hljs-string">"<span class="hljs-variable">${server_ips[$server]}</span>"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Checking server: <span class="hljs-variable">$server</span> (<span class="hljs-variable">$ip</span>)"</span>

    <span class="hljs-keyword">if</span> check_service <span class="hljs-string">"apache2"</span> <span class="hljs-string">"<span class="hljs-variable">$ip</span>"</span>; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"‚úì Apache is running on <span class="hljs-variable">$server</span>"</span>
    <span class="hljs-keyword">else</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"‚úó Apache is not running on <span class="hljs-variable">$server</span>"</span>
    <span class="hljs-keyword">fi</span>
<span class="hljs-keyword">done</span>

<span class="hljs-comment"># Here documents for multi-line strings</span>
<span class="hljs-function"><span class="hljs-title">generate_config</span></span>() {
    <span class="hljs-built_in">local</span> server_name=<span class="hljs-string">"<span class="hljs-variable">$1</span>"</span>
    <span class="hljs-built_in">local</span> server_ip=<span class="hljs-string">"<span class="hljs-variable">$2</span>"</span>

    cat &lt;&lt; EOF &gt; <span class="hljs-string">"/etc/nginx/sites-available/<span class="hljs-variable">$server_name</span>"</span>
server {
    listen 80;
    server_name <span class="hljs-variable">$server_name</span>;

    location / {
        proxy_pass http://<span class="hljs-variable">$server_ip</span>:8080;
        proxy_set_header Host \<span class="hljs-variable">$host</span>;
        proxy_set_header X-Real-IP \<span class="hljs-variable">$remote_addr</span>;
    }
}
EOF
}

<span class="hljs-comment"># Parameter expansion and string manipulation</span>
<span class="hljs-function"><span class="hljs-title">process_filename</span></span>() {
    <span class="hljs-built_in">local</span> filepath=<span class="hljs-string">"<span class="hljs-variable">$1</span>"</span>

    <span class="hljs-comment"># Extract components</span>
    <span class="hljs-built_in">local</span> filename=<span class="hljs-string">"<span class="hljs-variable">${filepath##*/}</span>"</span>          <span class="hljs-comment"># basename</span>
    <span class="hljs-built_in">local</span> directory=<span class="hljs-string">"<span class="hljs-variable">${filepath%/*}</span>"</span>          <span class="hljs-comment"># dirname</span>
    <span class="hljs-built_in">local</span> extension=<span class="hljs-string">"<span class="hljs-variable">${filename##*.}</span>"</span>         <span class="hljs-comment"># file extension</span>
    <span class="hljs-built_in">local</span> basename=<span class="hljs-string">"<span class="hljs-variable">${filename%.*}</span>"</span>           <span class="hljs-comment"># filename without extension</span>

    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Full path: <span class="hljs-variable">$filepath</span>"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Directory: <span class="hljs-variable">$directory</span>"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Filename: <span class="hljs-variable">$filename</span>"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Basename: <span class="hljs-variable">$basename</span>"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Extension: <span class="hljs-variable">$extension</span>"</span>

    <span class="hljs-comment"># String replacement</span>
    <span class="hljs-built_in">local</span> new_filename=<span class="hljs-string">"<span class="hljs-variable">${filename/old/new}</span>"</span>  <span class="hljs-comment"># Replace first occurrence</span>
    <span class="hljs-built_in">local</span> all_replaced=<span class="hljs-string">"<span class="hljs-variable">${filename//old/new}</span>"</span> <span class="hljs-comment"># Replace all occurrences</span>

    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Modified: <span class="hljs-variable">$new_filename</span>"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"All replaced: <span class="hljs-variable">$all_replaced</span>"</span>
}

<span class="hljs-comment"># Process substitution</span>
<span class="hljs-function"><span class="hljs-title">compare_processes</span></span>() {
    <span class="hljs-comment"># Compare running processes on two servers</span>
    diff &lt;(ssh server1 <span class="hljs-string">"ps aux | sort"</span>) &lt;(ssh server2 <span class="hljs-string">"ps aux | sort"</span>)
}

<span class="hljs-comment"># Command substitution and arithmetic</span>
<span class="hljs-function"><span class="hljs-title">calculate_disk_usage</span></span>() {
    <span class="hljs-built_in">local</span> path=<span class="hljs-string">"<span class="hljs-variable">$1</span>"</span>
    <span class="hljs-built_in">local</span> size_bytes=$(du -sb <span class="hljs-string">"<span class="hljs-variable">$path</span>"</span> | cut -f1)
    <span class="hljs-built_in">local</span> size_mb=$((size_bytes / 1024 / 1024))
    <span class="hljs-built_in">local</span> size_gb=$((size_mb / 1024))

    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Path: <span class="hljs-variable">$path</span>"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Size: <span class="hljs-variable">${size_bytes}</span> bytes"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Size: <span class="hljs-variable">${size_mb}</span> MB"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Size: <span class="hljs-variable">${size_gb}</span> GB"</span>
}

<span class="hljs-comment"># Conditional expressions</span>
<span class="hljs-function"><span class="hljs-title">validate_input</span></span>() {
    <span class="hljs-built_in">local</span> input=<span class="hljs-string">"<span class="hljs-variable">$1</span>"</span>

    <span class="hljs-comment"># Multiple conditions</span>
    <span class="hljs-keyword">if</span> [[ -n <span class="hljs-string">"<span class="hljs-variable">$input</span>"</span> &amp;&amp; <span class="hljs-string">"<span class="hljs-variable">$input</span>"</span> =~ ^[0-9]+$ &amp;&amp; <span class="hljs-variable">$input</span> -gt 0 &amp;&amp; <span class="hljs-variable">$input</span> -lt 100 ]]; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"Valid input: <span class="hljs-variable">$input</span>"</span>
        <span class="hljs-built_in">return</span> 0
    <span class="hljs-keyword">else</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"Invalid input: <span class="hljs-variable">$input</span>"</span>
        <span class="hljs-built_in">return</span> 1
    <span class="hljs-keyword">fi</span>
}

<span class="hljs-comment"># File operations with error checking</span>
<span class="hljs-function"><span class="hljs-title">safe_file_operations</span></span>() {
    <span class="hljs-built_in">local</span> <span class="hljs-built_in">source</span>=<span class="hljs-string">"<span class="hljs-variable">$1</span>"</span>
    <span class="hljs-built_in">local</span> destination=<span class="hljs-string">"<span class="hljs-variable">$2</span>"</span>

    <span class="hljs-comment"># Check if source exists and is readable</span>
    <span class="hljs-keyword">if</span> [[ ! -r <span class="hljs-string">"<span class="hljs-variable">$source</span>"</span> ]]; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"Error: Cannot read source file: <span class="hljs-variable">$source</span>"</span> &gt;&amp;2
        <span class="hljs-built_in">return</span> 1
    <span class="hljs-keyword">fi</span>

    <span class="hljs-comment"># Create destination directory if it doesn't exist</span>
    <span class="hljs-built_in">local</span> dest_dir=<span class="hljs-string">"<span class="hljs-variable">$(dirname "$destination")</span>"</span>
    <span class="hljs-keyword">if</span> [[ ! -d <span class="hljs-string">"<span class="hljs-variable">$dest_dir</span>"</span> ]]; <span class="hljs-keyword">then</span>
        mkdir -p <span class="hljs-string">"<span class="hljs-variable">$dest_dir</span>"</span> || {
            <span class="hljs-built_in">echo</span> <span class="hljs-string">"Error: Cannot create directory: <span class="hljs-variable">$dest_dir</span>"</span> &gt;&amp;2
            <span class="hljs-built_in">return</span> 1
        }
    <span class="hljs-keyword">fi</span>

    <span class="hljs-comment"># Copy with verification</span>
    <span class="hljs-keyword">if</span> cp <span class="hljs-string">"<span class="hljs-variable">$source</span>"</span> <span class="hljs-string">"<span class="hljs-variable">$destination</span>"</span>; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"Successfully copied <span class="hljs-variable">$source</span> to <span class="hljs-variable">$destination</span>"</span>

        <span class="hljs-comment"># Verify copy</span>
        <span class="hljs-keyword">if</span> cmp -s <span class="hljs-string">"<span class="hljs-variable">$source</span>"</span> <span class="hljs-string">"<span class="hljs-variable">$destination</span>"</span>; <span class="hljs-keyword">then</span>
            <span class="hljs-built_in">echo</span> <span class="hljs-string">"Copy verified successfully"</span>
        <span class="hljs-keyword">else</span>
            <span class="hljs-built_in">echo</span> <span class="hljs-string">"Warning: Copy verification failed"</span> &gt;&amp;2
            <span class="hljs-built_in">return</span> 1
        <span class="hljs-keyword">fi</span>
    <span class="hljs-keyword">else</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"Error: Failed to copy <span class="hljs-variable">$source</span> to <span class="hljs-variable">$destination</span>"</span> &gt;&amp;2
        <span class="hljs-built_in">return</span> 1
    <span class="hljs-keyword">fi</span>
}

<span class="hljs-comment"># Parallel processing</span>
<span class="hljs-function"><span class="hljs-title">parallel_ping</span></span>() {
    <span class="hljs-built_in">local</span> hosts=(<span class="hljs-string">"8.8.8.8"</span> <span class="hljs-string">"1.1.1.1"</span> <span class="hljs-string">"208.67.222.222"</span>)
    <span class="hljs-built_in">local</span> pids=()

    <span class="hljs-comment"># Start background processes</span>
    <span class="hljs-keyword">for</span> host <span class="hljs-keyword">in</span> <span class="hljs-string">"<span class="hljs-variable">${hosts[@]}</span>"</span>; <span class="hljs-keyword">do</span>
        {
            <span class="hljs-keyword">if</span> ping -c 3 <span class="hljs-string">"<span class="hljs-variable">$host</span>"</span> &amp;&gt;/dev/null; <span class="hljs-keyword">then</span>
                <span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$host</span>: REACHABLE"</span>
            <span class="hljs-keyword">else</span>
                <span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$host</span>: UNREACHABLE"</span>
            <span class="hljs-keyword">fi</span>
        } &amp;
        pids+=(<span class="hljs-string">"$!"</span>)
    <span class="hljs-keyword">done</span>

    <span class="hljs-comment"># Wait for all processes to complete</span>
    <span class="hljs-keyword">for</span> pid <span class="hljs-keyword">in</span> <span class="hljs-string">"<span class="hljs-variable">${pids[@]}</span>"</span>; <span class="hljs-keyword">do</span>
        <span class="hljs-built_in">wait</span> <span class="hljs-string">"<span class="hljs-variable">$pid</span>"</span>
    <span class="hljs-keyword">done</span>
}

<span class="hljs-comment"># Signal handling</span>
<span class="hljs-function"><span class="hljs-title">handle_signals</span></span>() {
    <span class="hljs-built_in">local</span> cleanup_needed=<span class="hljs-literal">false</span>

    <span class="hljs-function"><span class="hljs-title">cleanup_handler</span></span>() {
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"Received signal, cleaning up..."</span>
        cleanup_needed=<span class="hljs-literal">true</span>
        <span class="hljs-comment"># Perform cleanup operations</span>
        <span class="hljs-built_in">exit</span> 0
    }

    <span class="hljs-built_in">trap</span> cleanup_handler SIGINT SIGTERM

    <span class="hljs-comment"># Long-running operation</span>
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> {1..60}; <span class="hljs-keyword">do</span>
        <span class="hljs-keyword">if</span> [[ <span class="hljs-variable">$cleanup_needed</span> == <span class="hljs-literal">true</span> ]]; <span class="hljs-keyword">then</span>
            <span class="hljs-built_in">break</span>
        <span class="hljs-keyword">fi</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"Working... <span class="hljs-variable">$i</span>/60"</span>
        sleep 1
    <span class="hljs-keyword">done</span>
}
</div></code></pre>
<h2 id="%E2%8F%B0-task-scheduling-and-automation">‚è∞ Task Scheduling and Automation</h2>
<h3 id="cron-jobs">Cron Jobs</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># View current cron jobs</span>
$ crontab -l

<span class="hljs-comment"># Edit cron jobs</span>
$ crontab -e

<span class="hljs-comment"># Cron syntax: minute hour day month weekday command</span>
<span class="hljs-comment"># * * * * * command</span>
<span class="hljs-comment"># | | | | |</span>
<span class="hljs-comment"># | | | | +-- Day of week (0-7, Sunday = 0 or 7)</span>
<span class="hljs-comment"># | | | +---- Month (1-12)</span>
<span class="hljs-comment"># | | +------ Day of month (1-31)</span>
<span class="hljs-comment"># | +-------- Hour (0-23)</span>
<span class="hljs-comment"># +---------- Minute (0-59)</span>

<span class="hljs-comment"># Common cron examples</span>
<span class="hljs-comment"># Run every minute</span>
* * * * * /usr/<span class="hljs-built_in">local</span>/bin/check-services.sh

<span class="hljs-comment"># Run every 5 minutes</span>
*/5 * * * * /usr/<span class="hljs-built_in">local</span>/bin/monitor-disk.sh

<span class="hljs-comment"># Run every hour at minute 0</span>
0 * * * * /usr/<span class="hljs-built_in">local</span>/bin/cleanup-logs.sh

<span class="hljs-comment"># Run daily at 2:30 AM</span>
30 2 * * * /usr/<span class="hljs-built_in">local</span>/bin/backup-database.sh

<span class="hljs-comment"># Run weekly on Sunday at 3:00 AM</span>
0 3 * * 0 /usr/<span class="hljs-built_in">local</span>/bin/weekly-maintenance.sh

<span class="hljs-comment"># Run monthly on the 1st at 4:00 AM</span>
0 4 1 * * /usr/<span class="hljs-built_in">local</span>/bin/monthly-report.sh

<span class="hljs-comment"># Run on weekdays at 9:00 AM</span>
0 9 * * 1-5 /usr/<span class="hljs-built_in">local</span>/bin/business-hours-check.sh

<span class="hljs-comment"># Multiple times per day</span>
0 6,12,18 * * * /usr/<span class="hljs-built_in">local</span>/bin/three-times-daily.sh

<span class="hljs-comment"># System-wide cron jobs</span>
$ sudo nano /etc/crontab

<span class="hljs-comment"># Example system crontab</span>
SHELL=/bin/bash
PATH=/usr/<span class="hljs-built_in">local</span>/sbin:/usr/<span class="hljs-built_in">local</span>/bin:/sbin:/bin:/usr/sbin:/usr/bin
MAILTO=admin@example.com

<span class="hljs-comment"># m h dom mon dow user  command</span>
17 *    * * *   root    <span class="hljs-built_in">cd</span> / &amp;&amp; run-parts --report /etc/cron.hourly
25 6    * * *   root    <span class="hljs-built_in">test</span> -x /usr/sbin/anacron || ( <span class="hljs-built_in">cd</span> / &amp;&amp; run-parts --report /etc/cron.daily )
47 6    * * 7   root    <span class="hljs-built_in">test</span> -x /usr/sbin/anacron || ( <span class="hljs-built_in">cd</span> / &amp;&amp; run-parts --report /etc/cron.weekly )
52 6    1 * *   root    <span class="hljs-built_in">test</span> -x /usr/sbin/anacron || ( <span class="hljs-built_in">cd</span> / &amp;&amp; run-parts --report /etc/cron.monthly )

<span class="hljs-comment"># Cron directories for different intervals</span>
/etc/cron.hourly/
/etc/cron.daily/
/etc/cron.weekly/
/etc/cron.monthly/

<span class="hljs-comment"># Example cron script with logging</span>
<span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># /etc/cron.daily/system-maintenance</span>

LOGFILE=<span class="hljs-string">"/var/log/system-maintenance.log"</span>
DATE=$(date <span class="hljs-string">'+%Y-%m-%d %H:%M:%S'</span>)

<span class="hljs-built_in">echo</span> <span class="hljs-string">"[<span class="hljs-variable">$DATE</span>] Starting system maintenance"</span> &gt;&gt; <span class="hljs-variable">$LOGFILE</span>

<span class="hljs-comment"># Update package database</span>
apt update &gt;&gt; <span class="hljs-variable">$LOGFILE</span> 2&gt;&amp;1

<span class="hljs-comment"># Clean package cache</span>
apt autoclean &gt;&gt; <span class="hljs-variable">$LOGFILE</span> 2&gt;&amp;1

<span class="hljs-comment"># Remove orphaned packages</span>
apt autoremove -y &gt;&gt; <span class="hljs-variable">$LOGFILE</span> 2&gt;&amp;1

<span class="hljs-comment"># Clean temporary files</span>
find /tmp -<span class="hljs-built_in">type</span> f -atime +7 -delete &gt;&gt; <span class="hljs-variable">$LOGFILE</span> 2&gt;&amp;1

<span class="hljs-comment"># Rotate logs</span>
logrotate /etc/logrotate.conf &gt;&gt; <span class="hljs-variable">$LOGFILE</span> 2&gt;&amp;1

<span class="hljs-built_in">echo</span> <span class="hljs-string">"[<span class="hljs-variable">$DATE</span>] System maintenance completed"</span> &gt;&gt; <span class="hljs-variable">$LOGFILE</span>
</div></code></pre>
<h3 id="systemd-timers">Systemd Timers</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Create a systemd service</span>
$ sudo nano /etc/systemd/system/backup.service

[Unit]
Description=Database Backup Service
Wants=backup.timer

[Service]
Type=oneshot
User=backup
Group=backup
ExecStart=/usr/<span class="hljs-built_in">local</span>/bin/backup-database.sh
StandardOutput=journal
StandardError=journal

[Install]
WantedBy=multi-user.target

<span class="hljs-comment"># Create a systemd timer</span>
$ sudo nano /etc/systemd/system/backup.timer

[Unit]
Description=Run backup service daily
Requires=backup.service

[Timer]
<span class="hljs-comment"># Run daily at 2:00 AM</span>
OnCalendar=daily
Persistent=<span class="hljs-literal">true</span>
RandomizedDelaySec=300

[Install]
WantedBy=timers.target

<span class="hljs-comment"># Enable and start the timer</span>
$ sudo systemctl daemon-reload
$ sudo systemctl <span class="hljs-built_in">enable</span> backup.timer
$ sudo systemctl start backup.timer

<span class="hljs-comment"># Check timer status</span>
$ sudo systemctl status backup.timer
$ sudo systemctl list-timers

<span class="hljs-comment"># Advanced timer examples</span>
<span class="hljs-comment"># /etc/systemd/system/monitoring.timer</span>
[Timer]
<span class="hljs-comment"># Every 5 minutes</span>
OnCalendar=*:0/5

<span class="hljs-comment"># /etc/systemd/system/weekly-report.timer</span>
[Timer]
<span class="hljs-comment"># Every Monday at 9:00 AM</span>
OnCalendar=Mon *-*-* 09:00:00

<span class="hljs-comment"># /etc/systemd/system/hourly-check.timer</span>
[Timer]
<span class="hljs-comment"># Every hour, 10 minutes after the hour</span>
OnCalendar=*-*-* *:10:00

<span class="hljs-comment"># /etc/systemd/system/business-hours.timer</span>
[Timer]
<span class="hljs-comment"># Weekdays from 9 AM to 5 PM, every hour</span>
OnCalendar=Mon..Fri 09..17:00:00
</div></code></pre>
<h2 id="%F0%9F%94%A7-configuration-management-with-ansible">üîß Configuration Management with Ansible</h2>
<h3 id="ansible-installation-and-setup">Ansible Installation and Setup</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Install Ansible</span>
$ sudo apt update
$ sudo apt install ansible

<span class="hljs-comment"># Or install via pip</span>
$ pip3 install ansible

<span class="hljs-comment"># Verify installation</span>
$ ansible --version
ansible [core 2.12.1]
  config file = /etc/ansible/ansible.cfg
  configured module search path = [<span class="hljs-string">'/home/user/.ansible/plugins/modules'</span>, <span class="hljs-string">'/usr/share/ansible/plugins/modules'</span>]
  ansible python module location = /usr/lib/python3/dist-packages/ansible
  ansible collection location = /home/user/.ansible/collections:/usr/share/ansible/collections
  executable location = /usr/bin/ansible
  python version = 3.9.2 (default, Feb 28 2021, 17:03:44) [GCC 10.2.1 20210110]
  jinja version = 2.11.3
  libyaml = True

<span class="hljs-comment"># Create Ansible directory structure</span>
$ mkdir -p ~/ansible/{inventories,playbooks,roles,group_vars,host_vars}
$ <span class="hljs-built_in">cd</span> ~/ansible

<span class="hljs-comment"># Create inventory file</span>
$ nano inventories/production

[webservers]
web1 ansible_host=192.168.1.10 ansible_user=ubuntu
web2 ansible_host=192.168.1.11 ansible_user=ubuntu

[databases]
db1 ansible_host=192.168.1.20 ansible_user=ubuntu

[loadbalancers]
lb1 ansible_host=192.168.1.5 ansible_user=ubuntu

[production:children]
webservers
databases
loadbalancers

[production:vars]
ansible_ssh_private_key_file=~/.ssh/id_rsa
ansible_python_interpreter=/usr/bin/python3

<span class="hljs-comment"># Test connectivity</span>
$ ansible all -i inventories/production -m ping
web1 | SUCCESS =&gt; {
    <span class="hljs-string">"ansible_facts"</span>: {
        <span class="hljs-string">"discovered_interpreter_python"</span>: <span class="hljs-string">"/usr/bin/python3"</span>
    },
    <span class="hljs-string">"changed"</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-string">"ping"</span>: <span class="hljs-string">"pong"</span>
}
</div></code></pre>
<h3 id="ansible-playbooks">Ansible Playbooks</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># playbooks/webserver-setup.yml</span>
<span class="hljs-meta">---</span>
<span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Configure</span> <span class="hljs-string">Web</span> <span class="hljs-string">Servers</span>
  <span class="hljs-attr">hosts:</span> <span class="hljs-string">webservers</span>
  <span class="hljs-attr">become:</span> <span class="hljs-literal">yes</span>
  <span class="hljs-attr">vars:</span>
    <span class="hljs-attr">nginx_port:</span> <span class="hljs-number">80</span>
    <span class="hljs-attr">app_user:</span> <span class="hljs-string">webapp</span>
    <span class="hljs-attr">app_dir:</span> <span class="hljs-string">/var/www/html</span>

  <span class="hljs-attr">tasks:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Update</span> <span class="hljs-string">package</span> <span class="hljs-string">cache</span>
      <span class="hljs-attr">apt:</span>
        <span class="hljs-attr">update_cache:</span> <span class="hljs-literal">yes</span>
        <span class="hljs-attr">cache_valid_time:</span> <span class="hljs-number">3600</span>

    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Install</span> <span class="hljs-string">required</span> <span class="hljs-string">packages</span>
      <span class="hljs-attr">apt:</span>
        <span class="hljs-attr">name:</span>
          <span class="hljs-bullet">-</span> <span class="hljs-string">nginx</span>
          <span class="hljs-bullet">-</span> <span class="hljs-string">ufw</span>
          <span class="hljs-bullet">-</span> <span class="hljs-string">certbot</span>
          <span class="hljs-bullet">-</span> <span class="hljs-string">python3-certbot-nginx</span>
        <span class="hljs-attr">state:</span> <span class="hljs-string">present</span>

    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Create</span> <span class="hljs-string">application</span> <span class="hljs-string">user</span>
      <span class="hljs-attr">user:</span>
        <span class="hljs-attr">name:</span> <span class="hljs-string">"<span class="hljs-template-variable">{{ app_user }}</span>"</span>
        <span class="hljs-attr">system:</span> <span class="hljs-literal">yes</span>
        <span class="hljs-attr">shell:</span> <span class="hljs-string">/bin/bash</span>
        <span class="hljs-attr">home:</span> <span class="hljs-string">"<span class="hljs-template-variable">{{ app_dir }}</span>"</span>
        <span class="hljs-attr">create_home:</span> <span class="hljs-literal">yes</span>

    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Configure</span> <span class="hljs-string">nginx</span>
      <span class="hljs-attr">template:</span>
        <span class="hljs-attr">src:</span> <span class="hljs-string">nginx.conf.j2</span>
        <span class="hljs-attr">dest:</span> <span class="hljs-string">/etc/nginx/sites-available/default</span>
        <span class="hljs-attr">backup:</span> <span class="hljs-literal">yes</span>
      <span class="hljs-attr">notify:</span> <span class="hljs-string">restart</span> <span class="hljs-string">nginx</span>

    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Enable</span> <span class="hljs-string">nginx</span> <span class="hljs-string">site</span>
      <span class="hljs-attr">file:</span>
        <span class="hljs-attr">src:</span> <span class="hljs-string">/etc/nginx/sites-available/default</span>
        <span class="hljs-attr">dest:</span> <span class="hljs-string">/etc/nginx/sites-enabled/default</span>
        <span class="hljs-attr">state:</span> <span class="hljs-string">link</span>
      <span class="hljs-attr">notify:</span> <span class="hljs-string">restart</span> <span class="hljs-string">nginx</span>

    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Configure</span> <span class="hljs-string">firewall</span>
      <span class="hljs-attr">ufw:</span>
        <span class="hljs-attr">rule:</span> <span class="hljs-string">allow</span>
        <span class="hljs-attr">port:</span> <span class="hljs-string">"<span class="hljs-template-variable">{{ item }}</span>"</span>
        <span class="hljs-attr">proto:</span> <span class="hljs-string">tcp</span>
      <span class="hljs-attr">loop:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">"22"</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">"80"</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">"443"</span>

    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Enable</span> <span class="hljs-string">firewall</span>
      <span class="hljs-attr">ufw:</span>
        <span class="hljs-attr">state:</span> <span class="hljs-string">enabled</span>
        <span class="hljs-attr">policy:</span> <span class="hljs-string">deny</span>
        <span class="hljs-attr">direction:</span> <span class="hljs-string">incoming</span>

    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Start</span> <span class="hljs-string">and</span> <span class="hljs-string">enable</span> <span class="hljs-string">services</span>
      <span class="hljs-attr">systemd:</span>
        <span class="hljs-attr">name:</span> <span class="hljs-string">"<span class="hljs-template-variable">{{ item }}</span>"</span>
        <span class="hljs-attr">state:</span> <span class="hljs-string">started</span>
        <span class="hljs-attr">enabled:</span> <span class="hljs-literal">yes</span>
      <span class="hljs-attr">loop:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">nginx</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">ufw</span>

    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Deploy</span> <span class="hljs-string">application</span> <span class="hljs-string">files</span>
      <span class="hljs-attr">copy:</span>
        <span class="hljs-attr">src:</span> <span class="hljs-string">"<span class="hljs-template-variable">{{ item.src }}</span>"</span>
        <span class="hljs-attr">dest:</span> <span class="hljs-string">"<span class="hljs-template-variable">{{ app_dir }}</span>/<span class="hljs-template-variable">{{ item.dest }}</span>"</span>
        <span class="hljs-attr">owner:</span> <span class="hljs-string">"<span class="hljs-template-variable">{{ app_user }}</span>"</span>
        <span class="hljs-attr">group:</span> <span class="hljs-string">"<span class="hljs-template-variable">{{ app_user }}</span>"</span>
        <span class="hljs-attr">mode:</span> <span class="hljs-string">"0644"</span>
      <span class="hljs-attr">loop:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">{</span> <span class="hljs-attr">src:</span> <span class="hljs-string">"index.html"</span><span class="hljs-string">,</span> <span class="hljs-attr">dest:</span> <span class="hljs-string">"index.html"</span> <span class="hljs-string">}</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">{</span> <span class="hljs-attr">src:</span> <span class="hljs-string">"style.css"</span><span class="hljs-string">,</span> <span class="hljs-attr">dest:</span> <span class="hljs-string">"css/style.css"</span> <span class="hljs-string">}</span>
      <span class="hljs-attr">notify:</span> <span class="hljs-string">restart</span> <span class="hljs-string">nginx</span>

  <span class="hljs-attr">handlers:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">restart</span> <span class="hljs-string">nginx</span>
      <span class="hljs-attr">systemd:</span>
        <span class="hljs-attr">name:</span> <span class="hljs-string">nginx</span>
        <span class="hljs-attr">state:</span> <span class="hljs-string">restarted</span>
</div></code></pre>
<pre class="hljs"><code><div><span class="hljs-comment"># playbooks/database-setup.yml</span>
<span class="hljs-meta">---</span>
<span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Configure</span> <span class="hljs-string">Database</span> <span class="hljs-string">Servers</span>
  <span class="hljs-attr">hosts:</span> <span class="hljs-string">databases</span>
  <span class="hljs-attr">become:</span> <span class="hljs-literal">yes</span>
  <span class="hljs-attr">vars:</span>
    <span class="hljs-attr">mysql_root_password:</span> <span class="hljs-string">"<span class="hljs-template-variable">{{ vault_mysql_root_password }}</span>"</span>
    <span class="hljs-attr">mysql_databases:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">webapp_prod</span>
        <span class="hljs-attr">encoding:</span> <span class="hljs-string">utf8mb4</span>
        <span class="hljs-attr">collation:</span> <span class="hljs-string">utf8mb4_unicode_ci</span>
    <span class="hljs-attr">mysql_users:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">webapp_user</span>
        <span class="hljs-attr">password:</span> <span class="hljs-string">"<span class="hljs-template-variable">{{ vault_mysql_webapp_password }}</span>"</span>
        <span class="hljs-attr">priv:</span> <span class="hljs-string">"webapp_prod.*:ALL"</span>
        <span class="hljs-attr">host:</span> <span class="hljs-string">"%"</span>

  <span class="hljs-attr">tasks:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Install</span> <span class="hljs-string">MySQL</span> <span class="hljs-string">server</span>
      <span class="hljs-attr">apt:</span>
        <span class="hljs-attr">name:</span>
          <span class="hljs-bullet">-</span> <span class="hljs-string">mysql-server</span>
          <span class="hljs-bullet">-</span> <span class="hljs-string">mysql-client</span>
          <span class="hljs-bullet">-</span> <span class="hljs-string">python3-pymysql</span>
        <span class="hljs-attr">state:</span> <span class="hljs-string">present</span>

    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Start</span> <span class="hljs-string">and</span> <span class="hljs-string">enable</span> <span class="hljs-string">MySQL</span>
      <span class="hljs-attr">systemd:</span>
        <span class="hljs-attr">name:</span> <span class="hljs-string">mysql</span>
        <span class="hljs-attr">state:</span> <span class="hljs-string">started</span>
        <span class="hljs-attr">enabled:</span> <span class="hljs-literal">yes</span>

    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Set</span> <span class="hljs-string">MySQL</span> <span class="hljs-string">root</span> <span class="hljs-string">password</span>
      <span class="hljs-attr">mysql_user:</span>
        <span class="hljs-attr">name:</span> <span class="hljs-string">root</span>
        <span class="hljs-attr">password:</span> <span class="hljs-string">"<span class="hljs-template-variable">{{ mysql_root_password }}</span>"</span>
        <span class="hljs-attr">login_unix_socket:</span> <span class="hljs-string">/var/run/mysqld/mysqld.sock</span>

    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Create</span> <span class="hljs-string">MySQL</span> <span class="hljs-string">databases</span>
      <span class="hljs-attr">mysql_db:</span>
        <span class="hljs-attr">name:</span> <span class="hljs-string">"<span class="hljs-template-variable">{{ item.name }}</span>"</span>
        <span class="hljs-attr">encoding:</span> <span class="hljs-string">"<span class="hljs-template-variable">{{ item.encoding }}</span>"</span>
        <span class="hljs-attr">collation:</span> <span class="hljs-string">"<span class="hljs-template-variable">{{ item.collation }}</span>"</span>
        <span class="hljs-attr">state:</span> <span class="hljs-string">present</span>
        <span class="hljs-attr">login_user:</span> <span class="hljs-string">root</span>
        <span class="hljs-attr">login_password:</span> <span class="hljs-string">"<span class="hljs-template-variable">{{ mysql_root_password }}</span>"</span>
      <span class="hljs-attr">loop:</span> <span class="hljs-string">"<span class="hljs-template-variable">{{ mysql_databases }}</span>"</span>

    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Create</span> <span class="hljs-string">MySQL</span> <span class="hljs-string">users</span>
      <span class="hljs-attr">mysql_user:</span>
        <span class="hljs-attr">name:</span> <span class="hljs-string">"<span class="hljs-template-variable">{{ item.name }}</span>"</span>
        <span class="hljs-attr">password:</span> <span class="hljs-string">"<span class="hljs-template-variable">{{ item.password }}</span>"</span>
        <span class="hljs-attr">priv:</span> <span class="hljs-string">"<span class="hljs-template-variable">{{ item.priv }}</span>"</span>
        <span class="hljs-attr">host:</span> <span class="hljs-string">"<span class="hljs-template-variable">{{ item.host }}</span>"</span>
        <span class="hljs-attr">state:</span> <span class="hljs-string">present</span>
        <span class="hljs-attr">login_user:</span> <span class="hljs-string">root</span>
        <span class="hljs-attr">login_password:</span> <span class="hljs-string">"<span class="hljs-template-variable">{{ mysql_root_password }}</span>"</span>
      <span class="hljs-attr">loop:</span> <span class="hljs-string">"<span class="hljs-template-variable">{{ mysql_users }}</span>"</span>

    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Configure</span> <span class="hljs-string">MySQL</span>
      <span class="hljs-attr">template:</span>
        <span class="hljs-attr">src:</span> <span class="hljs-string">my.cnf.j2</span>
        <span class="hljs-attr">dest:</span> <span class="hljs-string">/etc/mysql/mysql.conf.d/mysqld.cnf</span>
        <span class="hljs-attr">backup:</span> <span class="hljs-literal">yes</span>
      <span class="hljs-attr">notify:</span> <span class="hljs-string">restart</span> <span class="hljs-string">mysql</span>

    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Configure</span> <span class="hljs-string">firewall</span> <span class="hljs-string">for</span> <span class="hljs-string">MySQL</span>
      <span class="hljs-attr">ufw:</span>
        <span class="hljs-attr">rule:</span> <span class="hljs-string">allow</span>
        <span class="hljs-attr">port:</span> <span class="hljs-string">"3306"</span>
        <span class="hljs-attr">src:</span> <span class="hljs-string">"<span class="hljs-template-variable">{{ hostvars[item]['ansible_default_ipv4']['address'] }}</span>"</span>
      <span class="hljs-attr">loop:</span> <span class="hljs-string">"<span class="hljs-template-variable">{{ groups['webservers'] }}</span>"</span>

  <span class="hljs-attr">handlers:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">restart</span> <span class="hljs-string">mysql</span>
      <span class="hljs-attr">systemd:</span>
        <span class="hljs-attr">name:</span> <span class="hljs-string">mysql</span>
        <span class="hljs-attr">state:</span> <span class="hljs-string">restarted</span>
</div></code></pre>
<h3 id="ansible-roles">Ansible Roles</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Create role structure</span>
$ ansible-galaxy init roles/common
$ ansible-galaxy init roles/webserver
$ ansible-galaxy init roles/database

<span class="hljs-comment"># Role structure</span>
roles/
‚îú‚îÄ‚îÄ common/
‚îÇ   ‚îú‚îÄ‚îÄ tasks/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ main.yml
‚îÇ   ‚îú‚îÄ‚îÄ handlers/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ main.yml
‚îÇ   ‚îú‚îÄ‚îÄ templates/
‚îÇ   ‚îú‚îÄ‚îÄ files/
‚îÇ   ‚îú‚îÄ‚îÄ vars/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ main.yml
‚îÇ   ‚îú‚îÄ‚îÄ defaults/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ main.yml
‚îÇ   ‚îî‚îÄ‚îÄ meta/
‚îÇ       ‚îî‚îÄ‚îÄ main.yml
</div></code></pre>
<pre class="hljs"><code><div><span class="hljs-comment"># roles/common/tasks/main.yml</span>
<span class="hljs-meta">---</span>
<span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Update</span> <span class="hljs-string">package</span> <span class="hljs-string">cache</span>
  <span class="hljs-attr">apt:</span>
    <span class="hljs-attr">update_cache:</span> <span class="hljs-literal">yes</span>
    <span class="hljs-attr">cache_valid_time:</span> <span class="hljs-number">3600</span>

<span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Install</span> <span class="hljs-string">common</span> <span class="hljs-string">packages</span>
  <span class="hljs-attr">apt:</span>
    <span class="hljs-attr">name:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">curl</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">wget</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">vim</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">htop</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">git</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">unzip</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">software-properties-common</span>
    <span class="hljs-attr">state:</span> <span class="hljs-string">present</span>

<span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Configure</span> <span class="hljs-string">timezone</span>
  <span class="hljs-attr">timezone:</span>
    <span class="hljs-attr">name:</span> <span class="hljs-string">"<span class="hljs-template-variable">{{ system_timezone | default('UTC') }}</span>"</span>

<span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Configure</span> <span class="hljs-string">NTP</span>
  <span class="hljs-attr">apt:</span>
    <span class="hljs-attr">name:</span> <span class="hljs-string">ntp</span>
    <span class="hljs-attr">state:</span> <span class="hljs-string">present</span>

<span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Start</span> <span class="hljs-string">and</span> <span class="hljs-string">enable</span> <span class="hljs-string">NTP</span>
  <span class="hljs-attr">systemd:</span>
    <span class="hljs-attr">name:</span> <span class="hljs-string">ntp</span>
    <span class="hljs-attr">state:</span> <span class="hljs-string">started</span>
    <span class="hljs-attr">enabled:</span> <span class="hljs-literal">yes</span>

<span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Create</span> <span class="hljs-string">admin</span> <span class="hljs-string">user</span>
  <span class="hljs-attr">user:</span>
    <span class="hljs-attr">name:</span> <span class="hljs-string">"<span class="hljs-template-variable">{{ admin_user }}</span>"</span>
    <span class="hljs-attr">groups:</span> <span class="hljs-string">sudo</span>
    <span class="hljs-attr">shell:</span> <span class="hljs-string">/bin/bash</span>
    <span class="hljs-attr">create_home:</span> <span class="hljs-literal">yes</span>

<span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Add</span> <span class="hljs-string">SSH</span> <span class="hljs-string">key</span> <span class="hljs-string">for</span> <span class="hljs-string">admin</span> <span class="hljs-string">user</span>
  <span class="hljs-attr">authorized_key:</span>
    <span class="hljs-attr">user:</span> <span class="hljs-string">"<span class="hljs-template-variable">{{ admin_user }}</span>"</span>
    <span class="hljs-attr">key:</span> <span class="hljs-string">"<span class="hljs-template-variable">{{ admin_ssh_key }}</span>"</span>
    <span class="hljs-attr">state:</span> <span class="hljs-string">present</span>

<span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Configure</span> <span class="hljs-string">SSH</span>
  <span class="hljs-attr">template:</span>
    <span class="hljs-attr">src:</span> <span class="hljs-string">sshd_config.j2</span>
    <span class="hljs-attr">dest:</span> <span class="hljs-string">/etc/ssh/sshd_config</span>
    <span class="hljs-attr">backup:</span> <span class="hljs-literal">yes</span>
  <span class="hljs-attr">notify:</span> <span class="hljs-string">restart</span> <span class="hljs-string">ssh</span>

<span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Disable</span> <span class="hljs-string">root</span> <span class="hljs-string">login</span>
  <span class="hljs-attr">lineinfile:</span>
    <span class="hljs-attr">path:</span> <span class="hljs-string">/etc/ssh/sshd_config</span>
    <span class="hljs-attr">regexp:</span> <span class="hljs-string">"^PermitRootLogin"</span>
    <span class="hljs-attr">line:</span> <span class="hljs-string">"PermitRootLogin no"</span>
  <span class="hljs-attr">notify:</span> <span class="hljs-string">restart</span> <span class="hljs-string">ssh</span>
</div></code></pre>
<pre class="hljs"><code><div><span class="hljs-comment"># playbooks/site.yml - Main playbook using roles</span>
<span class="hljs-meta">---</span>
<span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Configure</span> <span class="hljs-string">all</span> <span class="hljs-string">servers</span>
  <span class="hljs-attr">hosts:</span> <span class="hljs-string">all</span>
  <span class="hljs-attr">become:</span> <span class="hljs-literal">yes</span>
  <span class="hljs-attr">roles:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">common</span>

<span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Configure</span> <span class="hljs-string">web</span> <span class="hljs-string">servers</span>
  <span class="hljs-attr">hosts:</span> <span class="hljs-string">webservers</span>
  <span class="hljs-attr">become:</span> <span class="hljs-literal">yes</span>
  <span class="hljs-attr">roles:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">webserver</span>

<span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Configure</span> <span class="hljs-string">database</span> <span class="hljs-string">servers</span>
  <span class="hljs-attr">hosts:</span> <span class="hljs-string">databases</span>
  <span class="hljs-attr">become:</span> <span class="hljs-literal">yes</span>
  <span class="hljs-attr">roles:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">database</span>
</div></code></pre>
<h2 id="%F0%9F%93%8A-log-management-automation">üìä Log Management Automation</h2>
<h3 id="automated-log-rotation">Automated Log Rotation</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Configure logrotate</span>
$ sudo nano /etc/logrotate.d/webapp

/var/<span class="hljs-built_in">log</span>/webapp/*.<span class="hljs-built_in">log</span> {
    daily
    missingok
    rotate 30
    compress
    delaycompress
    notifempty
    create 0644 webapp webapp
    postrotate
        systemctl reload webapp
    endscript
}

<span class="hljs-comment"># Custom logrotate configuration</span>
/var/<span class="hljs-built_in">log</span>/nginx/*.<span class="hljs-built_in">log</span> {
    daily
    missingok
    rotate 52
    compress
    delaycompress
    notifempty
    create 0644 www-data adm
    sharedscripts
    prerotate
        <span class="hljs-keyword">if</span> [ -d /etc/logrotate.d/httpd-prerotate ]; <span class="hljs-keyword">then</span> \
            run-parts /etc/logrotate.d/httpd-prerotate; \
        <span class="hljs-keyword">fi</span> \
    endscript
    postrotate
        invoke-rc.d nginx rotate &gt;/dev/null 2&gt;&amp;1
    endscript
}

<span class="hljs-comment"># Test logrotate configuration</span>
$ sudo logrotate -d /etc/logrotate.d/webapp
$ sudo logrotate -f /etc/logrotate.d/webapp  <span class="hljs-comment"># Force rotation</span>

<span class="hljs-comment"># Custom log rotation script</span>
<span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># /usr/local/bin/custom-log-rotate.sh</span>

LOG_DIR=<span class="hljs-string">"/var/log/myapp"</span>
RETENTION_DAYS=30
COMPRESS_AFTER_DAYS=1

<span class="hljs-comment"># Rotate logs</span>
find <span class="hljs-string">"<span class="hljs-variable">$LOG_DIR</span>"</span> -name <span class="hljs-string">"*.log"</span> -<span class="hljs-built_in">type</span> f | <span class="hljs-keyword">while</span> <span class="hljs-built_in">read</span> logfile; <span class="hljs-keyword">do</span>
    <span class="hljs-comment"># Get file modification time</span>
    file_age=$(<span class="hljs-built_in">stat</span> -c %Y <span class="hljs-string">"<span class="hljs-variable">$logfile</span>"</span>)
    current_time=$(date +%s)
    age_days=$(( (current_time - file_age) / 86400 ))

    <span class="hljs-comment"># Compress old logs</span>
    <span class="hljs-keyword">if</span> [[ <span class="hljs-variable">$age_days</span> -gt <span class="hljs-variable">$COMPRESS_AFTER_DAYS</span> ]] &amp;&amp; [[ ! <span class="hljs-string">"<span class="hljs-variable">$logfile</span>"</span> =~ \.gz$ ]]; <span class="hljs-keyword">then</span>
        gzip <span class="hljs-string">"<span class="hljs-variable">$logfile</span>"</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"Compressed: <span class="hljs-variable">$logfile</span>"</span>
    <span class="hljs-keyword">fi</span>

    <span class="hljs-comment"># Remove very old logs</span>
    <span class="hljs-keyword">if</span> [[ <span class="hljs-variable">$age_days</span> -gt <span class="hljs-variable">$RETENTION_DAYS</span> ]]; <span class="hljs-keyword">then</span>
        rm -f <span class="hljs-string">"<span class="hljs-variable">$logfile</span>"</span> <span class="hljs-string">"<span class="hljs-variable">${logfile}</span>.gz"</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"Removed: <span class="hljs-variable">$logfile</span>"</span>
    <span class="hljs-keyword">fi</span>
<span class="hljs-keyword">done</span>

<span class="hljs-comment"># Restart application to release file handles</span>
systemctl reload myapp
</div></code></pre>
<h3 id="centralized-logging-with-rsyslog">Centralized Logging with rsyslog</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Configure rsyslog server</span>
$ sudo nano /etc/rsyslog.conf

<span class="hljs-comment"># Enable UDP reception</span>
<span class="hljs-variable">$ModLoad</span> imudp
<span class="hljs-variable">$UDPServerRun</span> 514
<span class="hljs-variable">$UDPServerAddress</span> 0.0.0.0

<span class="hljs-comment"># Enable TCP reception</span>
<span class="hljs-variable">$ModLoad</span> imtcp
<span class="hljs-variable">$InputTCPServerRun</span> 514

<span class="hljs-comment"># Template for remote logs</span>
<span class="hljs-variable">$template</span> RemoteLogs,<span class="hljs-string">"/var/log/remote/%HOSTNAME%/%PROGRAMNAME%.log"</span>
*.* ?RemoteLogs
&amp; stop

<span class="hljs-comment"># Configure rsyslog client</span>
$ sudo nano /etc/rsyslog.d/50-remote.conf

<span class="hljs-comment"># Send all logs to remote server</span>
*.* @@<span class="hljs-built_in">log</span>-server.example.com:514

<span class="hljs-comment"># Send specific logs</span>
mail.* @@<span class="hljs-built_in">log</span>-server.example.com:514
auth.* @@<span class="hljs-built_in">log</span>-server.example.com:514

<span class="hljs-comment"># Restart rsyslog</span>
$ sudo systemctl restart rsyslog

<span class="hljs-comment"># Automated log analysis script</span>
<span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># /usr/local/bin/log-analyzer.sh</span>

LOG_FILE=<span class="hljs-string">"/var/log/auth.log"</span>
ALERT_EMAIL=<span class="hljs-string">"admin@example.com"</span>
FAILED_LOGIN_THRESHOLD=5
TIME_WINDOW=300  <span class="hljs-comment"># 5 minutes</span>

<span class="hljs-comment"># Check for failed login attempts</span>
<span class="hljs-function"><span class="hljs-title">check_failed_logins</span></span>() {
    <span class="hljs-built_in">local</span> current_time=$(date +%s)
    <span class="hljs-built_in">local</span> start_time=$((current_time - TIME_WINDOW))

    <span class="hljs-comment"># Get recent failed login attempts</span>
    <span class="hljs-built_in">local</span> failed_attempts=$(awk -v start=<span class="hljs-string">"<span class="hljs-variable">$start_time</span>"</span> <span class="hljs-string">'
        BEGIN {
            "date -d \"" $1 " " $2 " " $3 "\" +%s" | getline timestamp
            if (timestamp &gt;= start &amp;&amp; /Failed password/) {
                print $0
            }
        }
    '</span> <span class="hljs-string">"<span class="hljs-variable">$LOG_FILE</span>"</span> | wc -l)

    <span class="hljs-keyword">if</span> [[ <span class="hljs-variable">$failed_attempts</span> -gt <span class="hljs-variable">$FAILED_LOGIN_THRESHOLD</span> ]]; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">local</span> message=<span class="hljs-string">"Warning: <span class="hljs-variable">$failed_attempts</span> failed login attempts in the last <span class="hljs-variable">$((TIME_WINDOW/60)</span>) minutes"</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$message</span>"</span> | mail -s <span class="hljs-string">"Security Alert: Failed Logins"</span> <span class="hljs-string">"<span class="hljs-variable">$ALERT_EMAIL</span>"</span>
        logger <span class="hljs-string">"SECURITY_ALERT: <span class="hljs-variable">$message</span>"</span>
    <span class="hljs-keyword">fi</span>
}

<span class="hljs-comment"># Check for suspicious activities</span>
<span class="hljs-function"><span class="hljs-title">check_suspicious_activity</span></span>() {
    <span class="hljs-comment"># Check for privilege escalation</span>
    <span class="hljs-keyword">if</span> grep -q <span class="hljs-string">"sudo.*COMMAND"</span> <span class="hljs-string">"<span class="hljs-variable">$LOG_FILE</span>"</span>; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">local</span> sudo_commands=$(grep <span class="hljs-string">"sudo.*COMMAND"</span> <span class="hljs-string">"<span class="hljs-variable">$LOG_FILE</span>"</span> | tail -10)
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"Recent sudo commands:"</span> | mail -s <span class="hljs-string">"Sudo Activity Report"</span> <span class="hljs-string">"<span class="hljs-variable">$ALERT_EMAIL</span>"</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$sudo_commands</span>"</span> | mail -s <span class="hljs-string">"Sudo Activity Report"</span> <span class="hljs-string">"<span class="hljs-variable">$ALERT_EMAIL</span>"</span>
    <span class="hljs-keyword">fi</span>

    <span class="hljs-comment"># Check for new user creation</span>
    <span class="hljs-keyword">if</span> grep -q <span class="hljs-string">"useradd"</span> <span class="hljs-string">"<span class="hljs-variable">$LOG_FILE</span>"</span>; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">local</span> new_users=$(grep <span class="hljs-string">"useradd"</span> <span class="hljs-string">"<span class="hljs-variable">$LOG_FILE</span>"</span> | tail -5)
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"New user accounts created:"</span> | mail -s <span class="hljs-string">"New User Alert"</span> <span class="hljs-string">"<span class="hljs-variable">$ALERT_EMAIL</span>"</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$new_users</span>"</span> | mail -s <span class="hljs-string">"New User Alert"</span> <span class="hljs-string">"<span class="hljs-variable">$ALERT_EMAIL</span>"</span>
    <span class="hljs-keyword">fi</span>
}

check_failed_logins
check_suspicious_activity
</div></code></pre>
<h2 id="%F0%9F%92%BE-backup-automation">üíæ Backup Automation</h2>
<h3 id="database-backup-script">Database Backup Script</h3>
<pre class="hljs"><code><div><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># /usr/local/bin/backup-database.sh</span>

<span class="hljs-comment"># Configuration</span>
DB_USER=<span class="hljs-string">"backup_user"</span>
DB_PASS=<span class="hljs-string">"backup_password"</span>
DB_HOST=<span class="hljs-string">"localhost"</span>
BACKUP_DIR=<span class="hljs-string">"/backup/mysql"</span>
RETENTION_DAYS=30
S3_BUCKET=<span class="hljs-string">"my-backup-bucket"</span>
ENCRYPTION_KEY=<span class="hljs-string">"/etc/backup/encryption.key"</span>

<span class="hljs-comment"># Logging</span>
LOG_FILE=<span class="hljs-string">"/var/log/backup-database.log"</span>
<span class="hljs-built_in">exec</span> 1&gt; &gt;(tee -a <span class="hljs-string">"<span class="hljs-variable">$LOG_FILE</span>"</span>)
<span class="hljs-built_in">exec</span> 2&gt;&amp;1

<span class="hljs-function"><span class="hljs-title">log</span></span>() {
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"[<span class="hljs-variable">$(date '+%Y-%m-%d %H:%M:%S')</span>] $*"</span>
}

<span class="hljs-comment"># Create backup directory</span>
mkdir -p <span class="hljs-string">"<span class="hljs-variable">$BACKUP_DIR</span>"</span>

<span class="hljs-comment"># Get list of databases</span>
DATABASES=$(mysql -u<span class="hljs-string">"<span class="hljs-variable">$DB_USER</span>"</span> -p<span class="hljs-string">"<span class="hljs-variable">$DB_PASS</span>"</span> -h<span class="hljs-string">"<span class="hljs-variable">$DB_HOST</span>"</span> -e <span class="hljs-string">"SHOW DATABASES;"</span> | grep -Ev <span class="hljs-string">"^(Database|information_schema|performance_schema|mysql|sys)$"</span>)

<span class="hljs-built_in">log</span> <span class="hljs-string">"Starting database backup"</span>

<span class="hljs-keyword">for</span> db <span class="hljs-keyword">in</span> <span class="hljs-variable">$DATABASES</span>; <span class="hljs-keyword">do</span>
    <span class="hljs-built_in">log</span> <span class="hljs-string">"Backing up database: <span class="hljs-variable">$db</span>"</span>

    <span class="hljs-comment"># Create backup filename</span>
    BACKUP_FILE=<span class="hljs-string">"<span class="hljs-variable">$BACKUP_DIR</span>/<span class="hljs-variable">${db}</span>_<span class="hljs-variable">$(date +%Y%m%d_%H%M%S)</span>.sql"</span>

    <span class="hljs-comment"># Create database dump</span>
    <span class="hljs-keyword">if</span> mysqldump -u<span class="hljs-string">"<span class="hljs-variable">$DB_USER</span>"</span> -p<span class="hljs-string">"<span class="hljs-variable">$DB_PASS</span>"</span> -h<span class="hljs-string">"<span class="hljs-variable">$DB_HOST</span>"</span> \
        --single-transaction \
        --routines \
        --triggers \
        --events \
        <span class="hljs-string">"<span class="hljs-variable">$db</span>"</span> &gt; <span class="hljs-string">"<span class="hljs-variable">$BACKUP_FILE</span>"</span>; <span class="hljs-keyword">then</span>

        <span class="hljs-built_in">log</span> <span class="hljs-string">"Database dump created: <span class="hljs-variable">$BACKUP_FILE</span>"</span>

        <span class="hljs-comment"># Compress backup</span>
        <span class="hljs-keyword">if</span> gzip <span class="hljs-string">"<span class="hljs-variable">$BACKUP_FILE</span>"</span>; <span class="hljs-keyword">then</span>
            BACKUP_FILE=<span class="hljs-string">"<span class="hljs-variable">${BACKUP_FILE}</span>.gz"</span>
            <span class="hljs-built_in">log</span> <span class="hljs-string">"Backup compressed: <span class="hljs-variable">$BACKUP_FILE</span>"</span>
        <span class="hljs-keyword">else</span>
            <span class="hljs-built_in">log</span> <span class="hljs-string">"ERROR: Failed to compress backup"</span>
            <span class="hljs-built_in">continue</span>
        <span class="hljs-keyword">fi</span>

        <span class="hljs-comment"># Encrypt backup</span>
        <span class="hljs-keyword">if</span> [[ -f <span class="hljs-string">"<span class="hljs-variable">$ENCRYPTION_KEY</span>"</span> ]]; <span class="hljs-keyword">then</span>
            <span class="hljs-keyword">if</span> openssl enc -aes-256-cbc -salt -<span class="hljs-keyword">in</span> <span class="hljs-string">"<span class="hljs-variable">$BACKUP_FILE</span>"</span> -out <span class="hljs-string">"<span class="hljs-variable">${BACKUP_FILE}</span>.enc"</span> -pass file:<span class="hljs-string">"<span class="hljs-variable">$ENCRYPTION_KEY</span>"</span>; <span class="hljs-keyword">then</span>
                rm <span class="hljs-string">"<span class="hljs-variable">$BACKUP_FILE</span>"</span>
                BACKUP_FILE=<span class="hljs-string">"<span class="hljs-variable">${BACKUP_FILE}</span>.enc"</span>
                <span class="hljs-built_in">log</span> <span class="hljs-string">"Backup encrypted: <span class="hljs-variable">$BACKUP_FILE</span>"</span>
            <span class="hljs-keyword">else</span>
                <span class="hljs-built_in">log</span> <span class="hljs-string">"ERROR: Failed to encrypt backup"</span>
            <span class="hljs-keyword">fi</span>
        <span class="hljs-keyword">fi</span>

        <span class="hljs-comment"># Upload to S3</span>
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">command</span> -v aws &amp;&gt; /dev/null; <span class="hljs-keyword">then</span>
            <span class="hljs-keyword">if</span> aws s3 cp <span class="hljs-string">"<span class="hljs-variable">$BACKUP_FILE</span>"</span> <span class="hljs-string">"s3://<span class="hljs-variable">$S3_BUCKET</span>/mysql/<span class="hljs-variable">$(basename "$BACKUP_FILE")</span>"</span>; <span class="hljs-keyword">then</span>
                <span class="hljs-built_in">log</span> <span class="hljs-string">"Backup uploaded to S3: <span class="hljs-variable">$BACKUP_FILE</span>"</span>
            <span class="hljs-keyword">else</span>
                <span class="hljs-built_in">log</span> <span class="hljs-string">"ERROR: Failed to upload backup to S3"</span>
            <span class="hljs-keyword">fi</span>
        <span class="hljs-keyword">fi</span>

    <span class="hljs-keyword">else</span>
        <span class="hljs-built_in">log</span> <span class="hljs-string">"ERROR: Failed to create database dump for <span class="hljs-variable">$db</span>"</span>
    <span class="hljs-keyword">fi</span>
<span class="hljs-keyword">done</span>

<span class="hljs-comment"># Clean up old backups</span>
<span class="hljs-built_in">log</span> <span class="hljs-string">"Cleaning up old backups (older than <span class="hljs-variable">$RETENTION_DAYS</span> days)"</span>
find <span class="hljs-string">"<span class="hljs-variable">$BACKUP_DIR</span>"</span> -name <span class="hljs-string">"*.sql.gz*"</span> -mtime +<span class="hljs-variable">$RETENTION_DAYS</span> -delete

<span class="hljs-comment"># Clean up old S3 backups</span>
<span class="hljs-keyword">if</span> <span class="hljs-built_in">command</span> -v aws &amp;&gt; /dev/null; <span class="hljs-keyword">then</span>
    aws s3 ls <span class="hljs-string">"s3://<span class="hljs-variable">$S3_BUCKET</span>/mysql/"</span> | <span class="hljs-keyword">while</span> <span class="hljs-built_in">read</span> -r line; <span class="hljs-keyword">do</span>
        file_date=$(<span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$line</span>"</span> | awk <span class="hljs-string">'{print $1}'</span>)
        file_name=$(<span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$line</span>"</span> | awk <span class="hljs-string">'{print $4}'</span>)

        <span class="hljs-keyword">if</span> [[ -n <span class="hljs-string">"<span class="hljs-variable">$file_date</span>"</span> &amp;&amp; -n <span class="hljs-string">"<span class="hljs-variable">$file_name</span>"</span> ]]; <span class="hljs-keyword">then</span>
            file_timestamp=$(date -d <span class="hljs-string">"<span class="hljs-variable">$file_date</span>"</span> +%s)
            cutoff_timestamp=$(date -d <span class="hljs-string">"<span class="hljs-variable">$RETENTION_DAYS</span> days ago"</span> +%s)

            <span class="hljs-keyword">if</span> [[ <span class="hljs-variable">$file_timestamp</span> -lt <span class="hljs-variable">$cutoff_timestamp</span> ]]; <span class="hljs-keyword">then</span>
                aws s3 rm <span class="hljs-string">"s3://<span class="hljs-variable">$S3_BUCKET</span>/mysql/<span class="hljs-variable">$file_name</span>"</span>
                <span class="hljs-built_in">log</span> <span class="hljs-string">"Removed old S3 backup: <span class="hljs-variable">$file_name</span>"</span>
            <span class="hljs-keyword">fi</span>
        <span class="hljs-keyword">fi</span>
    <span class="hljs-keyword">done</span>
<span class="hljs-keyword">fi</span>

<span class="hljs-built_in">log</span> <span class="hljs-string">"Database backup completed"</span>

<span class="hljs-comment"># Send notification</span>
<span class="hljs-keyword">if</span> <span class="hljs-built_in">command</span> -v mail &amp;&gt; /dev/null; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Database backup completed successfully at <span class="hljs-variable">$(date)</span>"</span> | \
        mail -s <span class="hljs-string">"Database Backup Report"</span> admin@example.com
<span class="hljs-keyword">fi</span>
</div></code></pre>
<h3 id="file-system-backup-script">File System Backup Script</h3>
<pre class="hljs"><code><div><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># /usr/local/bin/backup-filesystem.sh</span>

<span class="hljs-comment"># Configuration</span>
SOURCE_DIRS=(<span class="hljs-string">"/etc"</span> <span class="hljs-string">"/home"</span> <span class="hljs-string">"/var/www"</span> <span class="hljs-string">"/opt"</span>)
BACKUP_DEST=<span class="hljs-string">"/backup/filesystem"</span>
REMOTE_DEST=<span class="hljs-string">"backup@backup-server:/backup/<span class="hljs-variable">$(hostname)</span>"</span>
EXCLUDE_FILE=<span class="hljs-string">"/etc/backup/exclude.txt"</span>
RETENTION_DAYS=14
MAX_BACKUP_SIZE=<span class="hljs-string">"10G"</span>

<span class="hljs-comment"># Logging</span>
LOG_FILE=<span class="hljs-string">"/var/log/backup-filesystem.log"</span>
<span class="hljs-built_in">exec</span> 1&gt; &gt;(tee -a <span class="hljs-string">"<span class="hljs-variable">$LOG_FILE</span>"</span>)
<span class="hljs-built_in">exec</span> 2&gt;&amp;1

<span class="hljs-function"><span class="hljs-title">log</span></span>() {
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"[<span class="hljs-variable">$(date '+%Y-%m-%d %H:%M:%S')</span>] $*"</span>
}

<span class="hljs-comment"># Create exclude file if it doesn't exist</span>
<span class="hljs-keyword">if</span> [[ ! -f <span class="hljs-string">"<span class="hljs-variable">$EXCLUDE_FILE</span>"</span> ]]; <span class="hljs-keyword">then</span>
    cat &gt; <span class="hljs-string">"<span class="hljs-variable">$EXCLUDE_FILE</span>"</span> &lt;&lt; EOF
*.tmp
*.cache
*.<span class="hljs-built_in">log</span>
/home/*/.cache/
/var/cache/
/var/tmp/
/tmp/
*.iso
*.img
EOF
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># Create backup directory</span>
mkdir -p <span class="hljs-string">"<span class="hljs-variable">$BACKUP_DEST</span>"</span>

<span class="hljs-built_in">log</span> <span class="hljs-string">"Starting filesystem backup"</span>

<span class="hljs-comment"># Create backup filename</span>
BACKUP_FILE=<span class="hljs-string">"<span class="hljs-variable">$BACKUP_DEST</span>/filesystem_<span class="hljs-variable">$(date +%Y%m%d_%H%M%S)</span>.tar.gz"</span>

<span class="hljs-comment"># Create tar archive with compression</span>
<span class="hljs-built_in">log</span> <span class="hljs-string">"Creating compressed archive: <span class="hljs-variable">$BACKUP_FILE</span>"</span>

<span class="hljs-keyword">if</span> tar -czf <span class="hljs-string">"<span class="hljs-variable">$BACKUP_FILE</span>"</span> \
    --exclude-from=<span class="hljs-string">"<span class="hljs-variable">$EXCLUDE_FILE</span>"</span> \
    --one-file-system \
    --preserve-permissions \
    --preserve-order \
    --totals \
    <span class="hljs-string">"<span class="hljs-variable">${SOURCE_DIRS[@]}</span>"</span> 2&gt;&amp;1; <span class="hljs-keyword">then</span>

    <span class="hljs-built_in">log</span> <span class="hljs-string">"Archive created successfully: <span class="hljs-variable">$BACKUP_FILE</span>"</span>

    <span class="hljs-comment"># Check backup size</span>
    BACKUP_SIZE=$(du -h <span class="hljs-string">"<span class="hljs-variable">$BACKUP_FILE</span>"</span> | cut -f1)
    <span class="hljs-built_in">log</span> <span class="hljs-string">"Backup size: <span class="hljs-variable">$BACKUP_SIZE</span>"</span>

    <span class="hljs-comment"># Verify archive integrity</span>
    <span class="hljs-keyword">if</span> tar -tzf <span class="hljs-string">"<span class="hljs-variable">$BACKUP_FILE</span>"</span> &gt;/dev/null 2&gt;&amp;1; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">log</span> <span class="hljs-string">"Archive integrity verified"</span>
    <span class="hljs-keyword">else</span>
        <span class="hljs-built_in">log</span> <span class="hljs-string">"ERROR: Archive integrity check failed"</span>
        <span class="hljs-built_in">exit</span> 1
    <span class="hljs-keyword">fi</span>

    <span class="hljs-comment"># Copy to remote location</span>
    <span class="hljs-keyword">if</span> [[ -n <span class="hljs-string">"<span class="hljs-variable">$REMOTE_DEST</span>"</span> ]]; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">log</span> <span class="hljs-string">"Copying backup to remote location: <span class="hljs-variable">$REMOTE_DEST</span>"</span>
        <span class="hljs-keyword">if</span> rsync -avz --progress <span class="hljs-string">"<span class="hljs-variable">$BACKUP_FILE</span>"</span> <span class="hljs-string">"<span class="hljs-variable">$REMOTE_DEST</span>/"</span>; <span class="hljs-keyword">then</span>
            <span class="hljs-built_in">log</span> <span class="hljs-string">"Backup copied to remote location successfully"</span>
        <span class="hljs-keyword">else</span>
            <span class="hljs-built_in">log</span> <span class="hljs-string">"ERROR: Failed to copy backup to remote location"</span>
        <span class="hljs-keyword">fi</span>
    <span class="hljs-keyword">fi</span>

<span class="hljs-keyword">else</span>
    <span class="hljs-built_in">log</span> <span class="hljs-string">"ERROR: Failed to create archive"</span>
    <span class="hljs-built_in">exit</span> 1
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># Clean up old backups</span>
<span class="hljs-built_in">log</span> <span class="hljs-string">"Cleaning up old backups (older than <span class="hljs-variable">$RETENTION_DAYS</span> days)"</span>
find <span class="hljs-string">"<span class="hljs-variable">$BACKUP_DEST</span>"</span> -name <span class="hljs-string">"filesystem_*.tar.gz"</span> -mtime +<span class="hljs-variable">$RETENTION_DAYS</span> -delete

<span class="hljs-comment"># Clean up remote backups</span>
<span class="hljs-keyword">if</span> [[ -n <span class="hljs-string">"<span class="hljs-variable">$REMOTE_DEST</span>"</span> ]]; <span class="hljs-keyword">then</span>
    ssh <span class="hljs-string">"<span class="hljs-variable">${REMOTE_DEST%:*}</span>"</span> <span class="hljs-string">"find <span class="hljs-variable">${REMOTE_DEST#*:}</span> -name 'filesystem_*.tar.gz' -mtime +<span class="hljs-variable">$RETENTION_DAYS</span> -delete"</span>
<span class="hljs-keyword">fi</span>

<span class="hljs-built_in">log</span> <span class="hljs-string">"Filesystem backup completed"</span>

<span class="hljs-comment"># Generate backup report</span>
REPORT_FILE=<span class="hljs-string">"/tmp/backup-report-<span class="hljs-variable">$(date +%Y%m%d)</span>.txt"</span>
cat &gt; <span class="hljs-string">"<span class="hljs-variable">$REPORT_FILE</span>"</span> &lt;&lt; EOF
Filesystem Backup Report
========================
Date: $(date)
Hostname: $(hostname)
Backup File: <span class="hljs-variable">$BACKUP_FILE</span>
Backup Size: <span class="hljs-variable">$BACKUP_SIZE</span>
Source Directories: <span class="hljs-variable">${SOURCE_DIRS[*]}</span>
Retention: <span class="hljs-variable">$RETENTION_DAYS</span> days
Remote Destination: <span class="hljs-variable">$REMOTE_DEST</span>

Backup Status: SUCCESS
EOF

<span class="hljs-comment"># Send email report</span>
<span class="hljs-keyword">if</span> <span class="hljs-built_in">command</span> -v mail &amp;&gt; /dev/null; <span class="hljs-keyword">then</span>
    mail -s <span class="hljs-string">"Filesystem Backup Report - <span class="hljs-variable">$(hostname)</span>"</span> admin@example.com &lt; <span class="hljs-string">"<span class="hljs-variable">$REPORT_FILE</span>"</span>
<span class="hljs-keyword">fi</span>

rm -f <span class="hljs-string">"<span class="hljs-variable">$REPORT_FILE</span>"</span>
</div></code></pre>
<h2 id="%F0%9F%A7%A0-knowledge-check">üß† Knowledge Check</h2>
<h3 id="quick-quiz">Quick Quiz</h3>
<ol>
<li>
<p><strong>What's the difference between cron and systemd timers?</strong></p>
<details>
<summary>Answer</summary>
<p>Systemd timers offer better logging, dependency management, and integration with systemd services. They also support more flexible scheduling options and better error handling compared to traditional cron jobs.</p>
</details>
</li>
<li>
<p><strong>How do you ensure a script runs only one instance at a time?</strong></p>
<details>
<summary>Answer</summary>
<p>Use a lock file mechanism with PID checking, or use <code>flock</code> command to create file locks that prevent multiple instances from running simultaneously.</p>
</details>
</li>
<li>
<p><strong>What's the purpose of the <code>set -euo pipefail</code> command in bash scripts?</strong></p>
<details>
<summary>Answer</summary>
<ul>
<li><code>set -e</code>: Exit immediately if any command fails</li>
<li><code>set -u</code>: Treat unset variables as errors</li>
<li><code>set -o pipefail</code>: Make pipelines fail if any command in the pipeline fails</li>
</ul>
</details>
</li>
<li>
<p><strong>How do you securely store passwords in Ansible?</strong></p>
<details>
<summary>Answer</summary>
<p>Use Ansible Vault to encrypt sensitive data: <code>ansible-vault create secrets.yml</code> or <code>ansible-vault encrypt_string 'password' --name 'vault_mysql_password'</code></p>
</details>
</li>
</ol>
<h3 id="hands-on-challenges">Hands-On Challenges</h3>
<p><strong>Challenge 1: Complete Automation Suite</strong></p>
<pre class="hljs"><code><div><span class="hljs-comment"># Create a comprehensive automation suite:</span>
<span class="hljs-comment"># - System monitoring with automated alerts</span>
<span class="hljs-comment"># - Automated backup system with encryption</span>
<span class="hljs-comment"># - Log rotation and analysis</span>
<span class="hljs-comment"># - Security hardening automation</span>
<span class="hljs-comment"># - Performance optimization scripts</span>
<span class="hljs-comment"># - Disaster recovery procedures</span>
</div></code></pre>
<p><strong>Challenge 2: Infrastructure as Code</strong></p>
<pre class="hljs"><code><div><span class="hljs-comment"># Implement Infrastructure as Code:</span>
<span class="hljs-comment"># - Create Ansible playbooks for complete infrastructure</span>
<span class="hljs-comment"># - Implement configuration management</span>
<span class="hljs-comment"># - Set up automated testing and validation</span>
<span class="hljs-comment"># - Create rollback procedures</span>
<span class="hljs-comment"># - Implement blue-green deployment automation</span>
</div></code></pre>
<p><strong>Challenge 3: Advanced Monitoring Automation</strong></p>
<pre class="hljs"><code><div><span class="hljs-comment"># Build advanced monitoring automation:</span>
<span class="hljs-comment"># - Custom metrics collection</span>
<span class="hljs-comment"># - Predictive alerting based on trends</span>
<span class="hljs-comment"># - Automated remediation scripts</span>
<span class="hljs-comment"># - Integration with external services</span>
<span class="hljs-comment"># - Comprehensive reporting and dashboards</span>
</div></code></pre>
<h2 id="%F0%9F%9A%80-next-steps">üöÄ Next Steps</h2>
<p>Congratulations! You've mastered automation and scripting. You can now:</p>
<ul>
<li>Write professional bash scripts with proper error handling</li>
<li>Automate tasks using cron and systemd timers</li>
<li>Manage infrastructure with Ansible</li>
<li>Implement automated backup and monitoring systems</li>
<li>Create comprehensive automation workflows</li>
<li>Handle complex system administration tasks programmatically</li>
</ul>
<p><strong>Ready for security and firewalls?</strong> Continue to <a href="15-troubleshooting-debugging.md">15-troubleshooting-debugging.md</a> to learn advanced troubleshooting and debugging techniques.</p>
<hr>
<blockquote>
<p><strong>Pro Tip</strong>: Start small with automation - automate one task at a time, test thoroughly, and gradually build more complex workflows. Always include proper logging, error handling, and rollback procedures! ü§ñ</p>
</blockquote>
<h1 id="%F0%9F%94%8D-troubleshooting--debugging-advanced-problem-solving-techniques">üîç Troubleshooting &amp; Debugging: Advanced Problem-Solving Techniques</h1>
<blockquote>
<p><strong>Master systematic troubleshooting, debugging tools, and problem resolution strategies</strong></p>
</blockquote>
<h2 id="%F0%9F%93%96-what-youll-learn">üìñ What You'll Learn</h2>
<p>Troubleshooting is a critical skill for any system administrator. This chapter covers comprehensive problem-solving techniques:</p>
<ul>
<li>Systematic troubleshooting methodology</li>
<li>Advanced debugging tools and techniques</li>
<li>Network troubleshooting and analysis</li>
<li>System performance debugging</li>
<li>Application and service debugging</li>
<li>Log analysis and correlation</li>
<li>Root cause analysis techniques</li>
<li>Documentation and knowledge management</li>
<li>Preventive measures and monitoring</li>
</ul>
<h2 id="%F0%9F%8C%8D-why-this-matters">üåç Why This Matters</h2>
<p><strong>Critical applications:</strong></p>
<ul>
<li><strong>Rapid Problem Resolution</strong>: Minimize downtime and service disruption</li>
<li><strong>Root Cause Analysis</strong>: Prevent recurring issues</li>
<li><strong>System Reliability</strong>: Maintain stable and predictable systems</li>
<li><strong>Cost Reduction</strong>: Reduce operational costs through efficient problem resolution</li>
<li><strong>Knowledge Building</strong>: Create organizational knowledge base for future issues</li>
</ul>
<h2 id="%F0%9F%94%A7-systematic-troubleshooting-methodology">üîß Systematic Troubleshooting Methodology</h2>
<h3 id="the-itil-problem-solving-process">The ITIL Problem-Solving Process</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># 1. IDENTIFY - What is the problem?</span>
<span class="hljs-comment"># 2. INVESTIGATE - Gather information</span>
<span class="hljs-comment"># 3. DIAGNOSE - Analyze the data</span>
<span class="hljs-comment"># 4. RESOLVE - Implement solution</span>
<span class="hljs-comment"># 5. VERIFY - Confirm resolution</span>
<span class="hljs-comment"># 6. DOCUMENT - Record findings</span>

<span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># troubleshooting-template.sh - Systematic troubleshooting framework</span>

TROUBLE_LOG=<span class="hljs-string">"/var/log/troubleshooting-<span class="hljs-variable">$(date +%Y%m%d_%H%M%S)</span>.log"</span>
ISSUE_ID=<span class="hljs-string">"ISSUE-<span class="hljs-variable">$(date +%Y%m%d-%H%M%S)</span>"</span>

<span class="hljs-function"><span class="hljs-title">log_step</span></span>() {
    <span class="hljs-built_in">local</span> step=<span class="hljs-string">"<span class="hljs-variable">$1</span>"</span>
    <span class="hljs-built_in">local</span> description=<span class="hljs-string">"<span class="hljs-variable">$2</span>"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"[<span class="hljs-variable">$(date '+%Y-%m-%d %H:%M:%S')</span>] [<span class="hljs-variable">$ISSUE_ID</span>] [<span class="hljs-variable">$step</span>] <span class="hljs-variable">$description</span>"</span> | tee -a <span class="hljs-string">"<span class="hljs-variable">$TROUBLE_LOG</span>"</span>
}

<span class="hljs-comment"># Step 1: Identify the problem</span>
<span class="hljs-function"><span class="hljs-title">identify_problem</span></span>() {
    log_step <span class="hljs-string">"IDENTIFY"</span> <span class="hljs-string">"Problem identification started"</span>

    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Problem Description:"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"- What is happening?"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"- When did it start?"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"- Who is affected?"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"- What is the impact?"</span>

    <span class="hljs-comment"># Gather initial symptoms</span>
    log_step <span class="hljs-string">"IDENTIFY"</span> <span class="hljs-string">"System uptime: <span class="hljs-variable">$(uptime)</span>"</span>
    log_step <span class="hljs-string">"IDENTIFY"</span> <span class="hljs-string">"Load average: <span class="hljs-variable">$(cat /proc/loadavg)</span>"</span>
    log_step <span class="hljs-string">"IDENTIFY"</span> <span class="hljs-string">"Memory usage: <span class="hljs-variable">$(free -h | grep Mem)</span>"</span>
    log_step <span class="hljs-string">"IDENTIFY"</span> <span class="hljs-string">"Disk usage: <span class="hljs-variable">$(df -h / | tail -1)</span>"</span>

    <span class="hljs-comment"># Check recent system changes</span>
    log_step <span class="hljs-string">"IDENTIFY"</span> <span class="hljs-string">"Recent package changes:"</span>
    grep <span class="hljs-string">"<span class="hljs-variable">$(date +%Y-%m-%d)</span>"</span> /var/<span class="hljs-built_in">log</span>/dpkg.log | tail -10 | tee -a <span class="hljs-string">"<span class="hljs-variable">$TROUBLE_LOG</span>"</span>

    <span class="hljs-comment"># Check system logs for errors</span>
    log_step <span class="hljs-string">"IDENTIFY"</span> <span class="hljs-string">"Recent system errors:"</span>
    journalctl --since <span class="hljs-string">"1 hour ago"</span> --priority=err | tail -20 | tee -a <span class="hljs-string">"<span class="hljs-variable">$TROUBLE_LOG</span>"</span>
}

<span class="hljs-comment"># Step 2: Investigate and gather information</span>
<span class="hljs-function"><span class="hljs-title">investigate_issue</span></span>() {
    log_step <span class="hljs-string">"INVESTIGATE"</span> <span class="hljs-string">"Information gathering started"</span>

    <span class="hljs-comment"># System information</span>
    log_step <span class="hljs-string">"INVESTIGATE"</span> <span class="hljs-string">"Hostname: <span class="hljs-variable">$(hostname)</span>"</span>
    log_step <span class="hljs-string">"INVESTIGATE"</span> <span class="hljs-string">"Kernel: <span class="hljs-variable">$(uname -r)</span>"</span>
    log_step <span class="hljs-string">"INVESTIGATE"</span> <span class="hljs-string">"OS: <span class="hljs-variable">$(lsb_release -d | cut -f2)</span>"</span>

    <span class="hljs-comment"># Network connectivity</span>
    log_step <span class="hljs-string">"INVESTIGATE"</span> <span class="hljs-string">"Network connectivity test:"</span>
    <span class="hljs-keyword">if</span> ping -c 3 8.8.8.8 &amp;&gt;/dev/null; <span class="hljs-keyword">then</span>
        log_step <span class="hljs-string">"INVESTIGATE"</span> <span class="hljs-string">"External connectivity: OK"</span>
    <span class="hljs-keyword">else</span>
        log_step <span class="hljs-string">"INVESTIGATE"</span> <span class="hljs-string">"External connectivity: FAILED"</span>
    <span class="hljs-keyword">fi</span>

    <span class="hljs-comment"># Service status</span>
    log_step <span class="hljs-string">"INVESTIGATE"</span> <span class="hljs-string">"Critical services status:"</span>
    <span class="hljs-keyword">for</span> service <span class="hljs-keyword">in</span> ssh nginx apache2 mysql postgresql; <span class="hljs-keyword">do</span>
        <span class="hljs-keyword">if</span> systemctl is-active --quiet <span class="hljs-string">"<span class="hljs-variable">$service</span>"</span> 2&gt;/dev/null; <span class="hljs-keyword">then</span>
            log_step <span class="hljs-string">"INVESTIGATE"</span> <span class="hljs-string">"Service <span class="hljs-variable">$service</span>: RUNNING"</span>
        <span class="hljs-keyword">else</span>
            log_step <span class="hljs-string">"INVESTIGATE"</span> <span class="hljs-string">"Service <span class="hljs-variable">$service</span>: NOT RUNNING"</span>
        <span class="hljs-keyword">fi</span>
    <span class="hljs-keyword">done</span>

    <span class="hljs-comment"># Resource utilization</span>
    log_step <span class="hljs-string">"INVESTIGATE"</span> <span class="hljs-string">"Top CPU consumers:"</span>
    ps aux --sort=-%cpu | head -10 | tee -a <span class="hljs-string">"<span class="hljs-variable">$TROUBLE_LOG</span>"</span>

    log_step <span class="hljs-string">"INVESTIGATE"</span> <span class="hljs-string">"Top memory consumers:"</span>
    ps aux --sort=-%mem | head -10 | tee -a <span class="hljs-string">"<span class="hljs-variable">$TROUBLE_LOG</span>"</span>

    <span class="hljs-comment"># Disk I/O</span>
    log_step <span class="hljs-string">"INVESTIGATE"</span> <span class="hljs-string">"Disk I/O statistics:"</span>
    iostat -x 1 3 | tee -a <span class="hljs-string">"<span class="hljs-variable">$TROUBLE_LOG</span>"</span>
}

<span class="hljs-comment"># Step 3: Diagnose the issue</span>
<span class="hljs-function"><span class="hljs-title">diagnose_issue</span></span>() {
    log_step <span class="hljs-string">"DIAGNOSE"</span> <span class="hljs-string">"Analysis started"</span>

    <span class="hljs-comment"># Analyze patterns in logs</span>
    log_step <span class="hljs-string">"DIAGNOSE"</span> <span class="hljs-string">"Analyzing error patterns:"</span>

    <span class="hljs-comment"># Common error patterns</span>
    <span class="hljs-built_in">local</span> error_patterns=(
        <span class="hljs-string">"out of memory"</span>
        <span class="hljs-string">"disk full"</span>
        <span class="hljs-string">"connection refused"</span>
        <span class="hljs-string">"timeout"</span>
        <span class="hljs-string">"permission denied"</span>
        <span class="hljs-string">"segmentation fault"</span>
        <span class="hljs-string">"kernel panic"</span>
    )

    <span class="hljs-keyword">for</span> pattern <span class="hljs-keyword">in</span> <span class="hljs-string">"<span class="hljs-variable">${error_patterns[@]}</span>"</span>; <span class="hljs-keyword">do</span>
        <span class="hljs-built_in">local</span> count=$(journalctl --since <span class="hljs-string">"1 hour ago"</span> | grep -i <span class="hljs-string">"<span class="hljs-variable">$pattern</span>"</span> | wc -l)
        <span class="hljs-keyword">if</span> [[ <span class="hljs-variable">$count</span> -gt 0 ]]; <span class="hljs-keyword">then</span>
            log_step <span class="hljs-string">"DIAGNOSE"</span> <span class="hljs-string">"Found <span class="hljs-variable">$count</span> occurrences of: <span class="hljs-variable">$pattern</span>"</span>
        <span class="hljs-keyword">fi</span>
    <span class="hljs-keyword">done</span>

    <span class="hljs-comment"># Check for resource exhaustion</span>
    <span class="hljs-built_in">local</span> mem_usage=$(free | awk <span class="hljs-string">'NR==2{printf "%.1f", $3*100/$2}'</span>)
    <span class="hljs-built_in">local</span> disk_usage=$(df / | awk <span class="hljs-string">'NR==2{print $5}'</span> | sed <span class="hljs-string">'s/%//'</span>)
    <span class="hljs-built_in">local</span> load_avg=$(uptime | awk -F<span class="hljs-string">'load average:'</span> <span class="hljs-string">'{print $2}'</span> | awk <span class="hljs-string">'{print $1}'</span> | sed <span class="hljs-string">'s/,//'</span>)

    log_step <span class="hljs-string">"DIAGNOSE"</span> <span class="hljs-string">"Resource analysis:"</span>
    log_step <span class="hljs-string">"DIAGNOSE"</span> <span class="hljs-string">"Memory usage: <span class="hljs-variable">${mem_usage}</span>%"</span>
    log_step <span class="hljs-string">"DIAGNOSE"</span> <span class="hljs-string">"Disk usage: <span class="hljs-variable">${disk_usage}</span>%"</span>
    log_step <span class="hljs-string">"DIAGNOSE"</span> <span class="hljs-string">"Load average: <span class="hljs-variable">$load_avg</span>"</span>

    <span class="hljs-comment"># Threshold checks</span>
    <span class="hljs-keyword">if</span> (( $(<span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$mem_usage</span> &gt; 90"</span> | bc -l) )); <span class="hljs-keyword">then</span>
        log_step <span class="hljs-string">"DIAGNOSE"</span> <span class="hljs-string">"CRITICAL: High memory usage detected"</span>
    <span class="hljs-keyword">fi</span>

    <span class="hljs-keyword">if</span> [[ <span class="hljs-variable">$disk_usage</span> -gt 90 ]]; <span class="hljs-keyword">then</span>
        log_step <span class="hljs-string">"DIAGNOSE"</span> <span class="hljs-string">"CRITICAL: High disk usage detected"</span>
    <span class="hljs-keyword">fi</span>

    <span class="hljs-keyword">if</span> (( $(<span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$load_avg</span> &gt; 4.0"</span> | bc -l) )); <span class="hljs-keyword">then</span>
        log_step <span class="hljs-string">"DIAGNOSE"</span> <span class="hljs-string">"WARNING: High load average detected"</span>
    <span class="hljs-keyword">fi</span>
}

<span class="hljs-comment"># Step 4: Implement resolution</span>
<span class="hljs-function"><span class="hljs-title">resolve_issue</span></span>() {
    log_step <span class="hljs-string">"RESOLVE"</span> <span class="hljs-string">"Resolution implementation started"</span>

    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Common resolution steps:"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"1. Restart affected services"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"2. Clear temporary files"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"3. Adjust configuration"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"4. Apply patches/updates"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"5. Scale resources"</span>

    <span class="hljs-comment"># Example automated fixes</span>
    <span class="hljs-comment"># Clear temporary files if disk is full</span>
    <span class="hljs-built_in">local</span> disk_usage=$(df / | awk <span class="hljs-string">'NR==2{print $5}'</span> | sed <span class="hljs-string">'s/%//'</span>)
    <span class="hljs-keyword">if</span> [[ <span class="hljs-variable">$disk_usage</span> -gt 90 ]]; <span class="hljs-keyword">then</span>
        log_step <span class="hljs-string">"RESOLVE"</span> <span class="hljs-string">"Attempting to clear temporary files"</span>
        find /tmp -<span class="hljs-built_in">type</span> f -atime +7 -delete 2&gt;/dev/null
        find /var/tmp -<span class="hljs-built_in">type</span> f -atime +7 -delete 2&gt;/dev/null
        apt-get clean 2&gt;/dev/null
        log_step <span class="hljs-string">"RESOLVE"</span> <span class="hljs-string">"Temporary files cleared"</span>
    <span class="hljs-keyword">fi</span>
}

<span class="hljs-comment"># Step 5: Verify resolution</span>
<span class="hljs-function"><span class="hljs-title">verify_resolution</span></span>() {
    log_step <span class="hljs-string">"VERIFY"</span> <span class="hljs-string">"Resolution verification started"</span>

    <span class="hljs-comment"># Re-run initial checks</span>
    log_step <span class="hljs-string">"VERIFY"</span> <span class="hljs-string">"Post-resolution system status:"</span>
    log_step <span class="hljs-string">"VERIFY"</span> <span class="hljs-string">"Load average: <span class="hljs-variable">$(cat /proc/loadavg)</span>"</span>
    log_step <span class="hljs-string">"VERIFY"</span> <span class="hljs-string">"Memory usage: <span class="hljs-variable">$(free -h | grep Mem)</span>"</span>
    log_step <span class="hljs-string">"VERIFY"</span> <span class="hljs-string">"Disk usage: <span class="hljs-variable">$(df -h / | tail -1)</span>"</span>

    <span class="hljs-comment"># Test functionality</span>
    <span class="hljs-keyword">if</span> ping -c 3 8.8.8.8 &amp;&gt;/dev/null; <span class="hljs-keyword">then</span>
        log_step <span class="hljs-string">"VERIFY"</span> <span class="hljs-string">"Network connectivity: VERIFIED"</span>
    <span class="hljs-keyword">else</span>
        log_step <span class="hljs-string">"VERIFY"</span> <span class="hljs-string">"Network connectivity: STILL FAILING"</span>
    <span class="hljs-keyword">fi</span>
}

<span class="hljs-comment"># Step 6: Document findings</span>
<span class="hljs-function"><span class="hljs-title">document_findings</span></span>() {
    log_step <span class="hljs-string">"DOCUMENT"</span> <span class="hljs-string">"Documentation started"</span>

    cat &gt;&gt; <span class="hljs-string">"<span class="hljs-variable">$TROUBLE_LOG</span>"</span> &lt;&lt; EOF

=== TROUBLESHOOTING SUMMARY ===
Issue ID: <span class="hljs-variable">$ISSUE_ID</span>
Date: $(date)
Duration: [TO BE FILLED]
Severity: [TO BE FILLED]
Root Cause: [TO BE FILLED]
Resolution: [TO BE FILLED]
Preventive Measures: [TO BE FILLED]
Lessons Learned: [TO BE FILLED]

=== FOLLOW-UP ACTIONS ===
- [ ] Monitor <span class="hljs-keyword">for</span> recurrence
- [ ] Update documentation
- [ ] Implement preventive measures
- [ ] Review and improve monitoring
EOF

    log_step <span class="hljs-string">"DOCUMENT"</span> <span class="hljs-string">"Troubleshooting log saved to: <span class="hljs-variable">$TROUBLE_LOG</span>"</span>
}

<span class="hljs-comment"># Main execution</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Starting systematic troubleshooting for Issue ID: <span class="hljs-variable">$ISSUE_ID</span>"</span>
identify_problem
investigate_issue
diagnose_issue
resolve_issue
verify_resolution
document_findings

<span class="hljs-built_in">echo</span> <span class="hljs-string">"Troubleshooting completed. Log file: <span class="hljs-variable">$TROUBLE_LOG</span>"</span>
</div></code></pre>
<h2 id="%F0%9F%94%8D-advanced-debugging-tools">üîç Advanced Debugging Tools</h2>
<h3 id="system-call-tracing-with-strace">System Call Tracing with strace</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Trace system calls for a running process</span>
$ strace -p 1234
execve(<span class="hljs-string">"/bin/ls"</span>, [<span class="hljs-string">"ls"</span>, <span class="hljs-string">"-la"</span>], 0x7fff8b7e1d40 /* 23 vars */) = 0
brk(NULL)                               = 0x55a8c9e1a000
access(<span class="hljs-string">"/etc/ld.so.noinherit"</span>, F_OK)      = -1 ENOENT (No such file or directory)
mmap(NULL, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7f8b5c9e1000

<span class="hljs-comment"># Trace specific system calls</span>
$ strace -e trace=open,<span class="hljs-built_in">read</span>,write -p 1234

<span class="hljs-comment"># Trace file operations</span>
$ strace -e trace=file ls /home

<span class="hljs-comment"># Trace network operations</span>
$ strace -e trace=network curl http://example.com

<span class="hljs-comment"># Save trace to file</span>
$ strace -o trace.log -p 1234

<span class="hljs-comment"># Trace with timestamps</span>
$ strace -t -p 1234

<span class="hljs-comment"># Trace child processes</span>
$ strace -f -p 1234

<span class="hljs-comment"># Count system calls</span>
$ strace -c ls /home
% time     seconds  usecs/call     calls    errors syscall
------ ----------- ----------- --------- --------- ----------------
 28.57    0.000020           4         5           mmap
 21.43    0.000015           3         5           close
 14.29    0.000010           2         5           fstat
 14.29    0.000010           5         2           getdents64

<span class="hljs-comment"># Advanced strace usage</span>
<span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># debug-application.sh</span>

APP_PID=<span class="hljs-string">"<span class="hljs-variable">$1</span>"</span>
OUTPUT_DIR=<span class="hljs-string">"/tmp/debug-<span class="hljs-variable">$(date +%Y%m%d_%H%M%S)</span>"</span>

<span class="hljs-keyword">if</span> [[ -z <span class="hljs-string">"<span class="hljs-variable">$APP_PID</span>"</span> ]]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Usage: <span class="hljs-variable">$0</span> &lt;PID&gt;"</span>
    <span class="hljs-built_in">exit</span> 1
<span class="hljs-keyword">fi</span>

mkdir -p <span class="hljs-string">"<span class="hljs-variable">$OUTPUT_DIR</span>"</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"Starting comprehensive debugging for PID: <span class="hljs-variable">$APP_PID</span>"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Output directory: <span class="hljs-variable">$OUTPUT_DIR</span>"</span>

<span class="hljs-comment"># System call trace</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Collecting system call trace..."</span>
strace -o <span class="hljs-string">"<span class="hljs-variable">$OUTPUT_DIR</span>/syscalls.log"</span> -f -t -p <span class="hljs-string">"<span class="hljs-variable">$APP_PID</span>"</span> &amp;
STRACE_PID=$!

<span class="hljs-comment"># Library call trace</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Collecting library call trace..."</span>
ltrace -o <span class="hljs-string">"<span class="hljs-variable">$OUTPUT_DIR</span>/libcalls.log"</span> -f -t -p <span class="hljs-string">"<span class="hljs-variable">$APP_PID</span>"</span> &amp;
LTRACE_PID=$!

<span class="hljs-comment"># Memory usage</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Monitoring memory usage..."</span>
<span class="hljs-keyword">while</span> <span class="hljs-built_in">kill</span> -0 <span class="hljs-string">"<span class="hljs-variable">$APP_PID</span>"</span> 2&gt;/dev/null; <span class="hljs-keyword">do</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$(date '+%Y-%m-%d %H:%M:%S')</span> <span class="hljs-variable">$(cat /proc/$APP_PID/status | grep VmRSS)</span>"</span> &gt;&gt; <span class="hljs-string">"<span class="hljs-variable">$OUTPUT_DIR</span>/memory.log"</span>
    sleep 5
<span class="hljs-keyword">done</span> &amp;
MEMORY_PID=$!

<span class="hljs-comment"># File descriptor usage</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Monitoring file descriptors..."</span>
<span class="hljs-keyword">while</span> <span class="hljs-built_in">kill</span> -0 <span class="hljs-string">"<span class="hljs-variable">$APP_PID</span>"</span> 2&gt;/dev/null; <span class="hljs-keyword">do</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$(date '+%Y-%m-%d %H:%M:%S')</span> FDs: <span class="hljs-variable">$(ls /proc/$APP_PID/fd | wc -l)</span>"</span> &gt;&gt; <span class="hljs-string">"<span class="hljs-variable">$OUTPUT_DIR</span>/fds.log"</span>
    sleep 5
<span class="hljs-keyword">done</span> &amp;
FD_PID=$!

<span class="hljs-built_in">echo</span> <span class="hljs-string">"Debugging started. Press Ctrl+C to stop."</span>

<span class="hljs-comment"># Cleanup function</span>
<span class="hljs-function"><span class="hljs-title">cleanup</span></span>() {
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Stopping debugging..."</span>
    <span class="hljs-built_in">kill</span> <span class="hljs-variable">$STRACE_PID</span> <span class="hljs-variable">$LTRACE_PID</span> <span class="hljs-variable">$MEMORY_PID</span> <span class="hljs-variable">$FD_PID</span> 2&gt;/dev/null
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Debug data saved to: <span class="hljs-variable">$OUTPUT_DIR</span>"</span>
}

<span class="hljs-built_in">trap</span> cleanup SIGINT SIGTERM

<span class="hljs-comment"># Wait for user interrupt</span>
<span class="hljs-built_in">wait</span>
</div></code></pre>
<h3 id="process-debugging-with-gdb">Process Debugging with gdb</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Attach to running process</span>
$ gdb -p 1234
(gdb) bt                    <span class="hljs-comment"># Show backtrace</span>
(gdb) info threads          <span class="hljs-comment"># Show all threads</span>
(gdb) thread 2              <span class="hljs-comment"># Switch to thread 2</span>
(gdb) <span class="hljs-built_in">print</span> variable_name   <span class="hljs-comment"># Print variable value</span>
(gdb) <span class="hljs-built_in">continue</span>              <span class="hljs-comment"># Continue execution</span>
(gdb) detach                <span class="hljs-comment"># Detach from process</span>

<span class="hljs-comment"># Debug core dump</span>
$ gdb /path/to/binary /path/to/core
(gdb) bt                    <span class="hljs-comment"># Show backtrace at crash</span>
(gdb) info registers        <span class="hljs-comment"># Show register values</span>
(gdb) disassemble          <span class="hljs-comment"># Show assembly code</span>

<span class="hljs-comment"># Generate core dump</span>
$ <span class="hljs-built_in">ulimit</span> -c unlimited       <span class="hljs-comment"># Enable core dumps</span>
$ <span class="hljs-built_in">echo</span> <span class="hljs-string">'/tmp/core.%e.%p'</span> | sudo tee /proc/sys/kernel/core_pattern

<span class="hljs-comment"># Debug script for application crashes</span>
<span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># crash-debugger.sh</span>

APP_NAME=<span class="hljs-string">"<span class="hljs-variable">$1</span>"</span>
CORE_DIR=<span class="hljs-string">"/tmp"</span>
DEBUG_LOG=<span class="hljs-string">"/var/log/crash-debug.log"</span>

<span class="hljs-keyword">if</span> [[ -z <span class="hljs-string">"<span class="hljs-variable">$APP_NAME</span>"</span> ]]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Usage: <span class="hljs-variable">$0</span> &lt;application_name&gt;"</span>
    <span class="hljs-built_in">exit</span> 1
<span class="hljs-keyword">fi</span>

<span class="hljs-function"><span class="hljs-title">log</span></span>() {
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"[<span class="hljs-variable">$(date '+%Y-%m-%d %H:%M:%S')</span>] $*"</span> | tee -a <span class="hljs-string">"<span class="hljs-variable">$DEBUG_LOG</span>"</span>
}

<span class="hljs-comment"># Find the binary</span>
BINARY_PATH=$(<span class="hljs-built_in">which</span> <span class="hljs-string">"<span class="hljs-variable">$APP_NAME</span>"</span>)
<span class="hljs-keyword">if</span> [[ -z <span class="hljs-string">"<span class="hljs-variable">$BINARY_PATH</span>"</span> ]]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">log</span> <span class="hljs-string">"ERROR: Binary not found for <span class="hljs-variable">$APP_NAME</span>"</span>
    <span class="hljs-built_in">exit</span> 1
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># Find core dump</span>
CORE_FILE=$(find <span class="hljs-string">"<span class="hljs-variable">$CORE_DIR</span>"</span> -name <span class="hljs-string">"core.<span class="hljs-variable">$APP_NAME</span>.*"</span> -<span class="hljs-built_in">type</span> f -<span class="hljs-built_in">printf</span> <span class="hljs-string">'%T@ %p\n'</span> | sort -n | tail -1 | cut -d<span class="hljs-string">' '</span> -f2-)

<span class="hljs-keyword">if</span> [[ -z <span class="hljs-string">"<span class="hljs-variable">$CORE_FILE</span>"</span> ]]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">log</span> <span class="hljs-string">"ERROR: No core dump found for <span class="hljs-variable">$APP_NAME</span>"</span>
    <span class="hljs-built_in">exit</span> 1
<span class="hljs-keyword">fi</span>

<span class="hljs-built_in">log</span> <span class="hljs-string">"Analyzing crash for <span class="hljs-variable">$APP_NAME</span>"</span>
<span class="hljs-built_in">log</span> <span class="hljs-string">"Binary: <span class="hljs-variable">$BINARY_PATH</span>"</span>
<span class="hljs-built_in">log</span> <span class="hljs-string">"Core dump: <span class="hljs-variable">$CORE_FILE</span>"</span>

<span class="hljs-comment"># Generate debug report</span>
DEBUG_REPORT=<span class="hljs-string">"/tmp/crash-report-<span class="hljs-variable">$(date +%Y%m%d_%H%M%S)</span>.txt"</span>

cat &gt; <span class="hljs-string">"<span class="hljs-variable">$DEBUG_REPORT</span>"</span> &lt;&lt; EOF
Crash Analysis Report
====================
Application: <span class="hljs-variable">$APP_NAME</span>
Binary: <span class="hljs-variable">$BINARY_PATH</span>
Core Dump: <span class="hljs-variable">$CORE_FILE</span>
Analysis Date: $(date)

Backtrace:
EOF

<span class="hljs-comment"># Get backtrace</span>
gdb -batch -ex <span class="hljs-string">"bt"</span> -ex <span class="hljs-string">"quit"</span> <span class="hljs-string">"<span class="hljs-variable">$BINARY_PATH</span>"</span> <span class="hljs-string">"<span class="hljs-variable">$CORE_FILE</span>"</span> &gt;&gt; <span class="hljs-string">"<span class="hljs-variable">$DEBUG_REPORT</span>"</span> 2&gt;&amp;1

<span class="hljs-built_in">echo</span> <span class="hljs-string">""</span> &gt;&gt; <span class="hljs-string">"<span class="hljs-variable">$DEBUG_REPORT</span>"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Thread Information:"</span> &gt;&gt; <span class="hljs-string">"<span class="hljs-variable">$DEBUG_REPORT</span>"</span>
gdb -batch -ex <span class="hljs-string">"info threads"</span> -ex <span class="hljs-string">"quit"</span> <span class="hljs-string">"<span class="hljs-variable">$BINARY_PATH</span>"</span> <span class="hljs-string">"<span class="hljs-variable">$CORE_FILE</span>"</span> &gt;&gt; <span class="hljs-string">"<span class="hljs-variable">$DEBUG_REPORT</span>"</span> 2&gt;&amp;1

<span class="hljs-built_in">echo</span> <span class="hljs-string">""</span> &gt;&gt; <span class="hljs-string">"<span class="hljs-variable">$DEBUG_REPORT</span>"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Register Information:"</span> &gt;&gt; <span class="hljs-string">"<span class="hljs-variable">$DEBUG_REPORT</span>"</span>
gdb -batch -ex <span class="hljs-string">"info registers"</span> -ex <span class="hljs-string">"quit"</span> <span class="hljs-string">"<span class="hljs-variable">$BINARY_PATH</span>"</span> <span class="hljs-string">"<span class="hljs-variable">$CORE_FILE</span>"</span> &gt;&gt; <span class="hljs-string">"<span class="hljs-variable">$DEBUG_REPORT</span>"</span> 2&gt;&amp;1

<span class="hljs-built_in">log</span> <span class="hljs-string">"Debug report generated: <span class="hljs-variable">$DEBUG_REPORT</span>"</span>

<span class="hljs-comment"># Send alert</span>
<span class="hljs-keyword">if</span> <span class="hljs-built_in">command</span> -v mail &amp;&gt; /dev/null; <span class="hljs-keyword">then</span>
    mail -s <span class="hljs-string">"Application Crash: <span class="hljs-variable">$APP_NAME</span>"</span> admin@example.com &lt; <span class="hljs-string">"<span class="hljs-variable">$DEBUG_REPORT</span>"</span>
<span class="hljs-keyword">fi</span>
</div></code></pre>
<h3 id="network-debugging">Network Debugging</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Comprehensive network debugging script</span>
<span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># network-debug.sh</span>

DEBUG_LOG=<span class="hljs-string">"/tmp/network-debug-<span class="hljs-variable">$(date +%Y%m%d_%H%M%S)</span>.log"</span>

<span class="hljs-function"><span class="hljs-title">log</span></span>() {
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"[<span class="hljs-variable">$(date '+%Y-%m-%d %H:%M:%S')</span>] $*"</span> | tee -a <span class="hljs-string">"<span class="hljs-variable">$DEBUG_LOG</span>"</span>
}

<span class="hljs-built_in">log</span> <span class="hljs-string">"Starting network debugging"</span>

<span class="hljs-comment"># Basic connectivity tests</span>
<span class="hljs-built_in">log</span> <span class="hljs-string">"=== BASIC CONNECTIVITY ==="</span>
<span class="hljs-built_in">log</span> <span class="hljs-string">"Testing localhost connectivity:"</span>
<span class="hljs-keyword">if</span> ping -c 3 127.0.0.1 &amp;&gt;/dev/null; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">log</span> <span class="hljs-string">"Localhost: OK"</span>
<span class="hljs-keyword">else</span>
    <span class="hljs-built_in">log</span> <span class="hljs-string">"Localhost: FAILED"</span>
<span class="hljs-keyword">fi</span>

<span class="hljs-built_in">log</span> <span class="hljs-string">"Testing gateway connectivity:"</span>
GATEWAY=$(ip route | grep default | awk <span class="hljs-string">'{print $3}'</span> | head -1)
<span class="hljs-keyword">if</span> [[ -n <span class="hljs-string">"<span class="hljs-variable">$GATEWAY</span>"</span> ]]; <span class="hljs-keyword">then</span>
    <span class="hljs-keyword">if</span> ping -c 3 <span class="hljs-string">"<span class="hljs-variable">$GATEWAY</span>"</span> &amp;&gt;/dev/null; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">log</span> <span class="hljs-string">"Gateway (<span class="hljs-variable">$GATEWAY</span>): OK"</span>
    <span class="hljs-keyword">else</span>
        <span class="hljs-built_in">log</span> <span class="hljs-string">"Gateway (<span class="hljs-variable">$GATEWAY</span>): FAILED"</span>
    <span class="hljs-keyword">fi</span>
<span class="hljs-keyword">else</span>
    <span class="hljs-built_in">log</span> <span class="hljs-string">"No default gateway found"</span>
<span class="hljs-keyword">fi</span>

<span class="hljs-built_in">log</span> <span class="hljs-string">"Testing external connectivity:"</span>
<span class="hljs-keyword">if</span> ping -c 3 8.8.8.8 &amp;&gt;/dev/null; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">log</span> <span class="hljs-string">"External (8.8.8.8): OK"</span>
<span class="hljs-keyword">else</span>
    <span class="hljs-built_in">log</span> <span class="hljs-string">"External (8.8.8.8): FAILED"</span>
<span class="hljs-keyword">fi</span>

<span class="hljs-built_in">log</span> <span class="hljs-string">"Testing DNS resolution:"</span>
<span class="hljs-keyword">if</span> nslookup google.com &amp;&gt;/dev/null; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">log</span> <span class="hljs-string">"DNS resolution: OK"</span>
<span class="hljs-keyword">else</span>
    <span class="hljs-built_in">log</span> <span class="hljs-string">"DNS resolution: FAILED"</span>
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># Interface information</span>
<span class="hljs-built_in">log</span> <span class="hljs-string">"=== INTERFACE INFORMATION ==="</span>
<span class="hljs-built_in">log</span> <span class="hljs-string">"Network interfaces:"</span>
ip addr show | tee -a <span class="hljs-string">"<span class="hljs-variable">$DEBUG_LOG</span>"</span>

<span class="hljs-built_in">log</span> <span class="hljs-string">"Routing table:"</span>
ip route show | tee -a <span class="hljs-string">"<span class="hljs-variable">$DEBUG_LOG</span>"</span>

<span class="hljs-built_in">log</span> <span class="hljs-string">"ARP table:"</span>
arp -a | tee -a <span class="hljs-string">"<span class="hljs-variable">$DEBUG_LOG</span>"</span>

<span class="hljs-comment"># Port and connection analysis</span>
<span class="hljs-built_in">log</span> <span class="hljs-string">"=== PORT AND CONNECTION ANALYSIS ==="</span>
<span class="hljs-built_in">log</span> <span class="hljs-string">"Listening ports:"</span>
netstat -tuln | tee -a <span class="hljs-string">"<span class="hljs-variable">$DEBUG_LOG</span>"</span>

<span class="hljs-built_in">log</span> <span class="hljs-string">"Active connections:"</span>
netstat -tun | head -20 | tee -a <span class="hljs-string">"<span class="hljs-variable">$DEBUG_LOG</span>"</span>

<span class="hljs-built_in">log</span> <span class="hljs-string">"Connection states summary:"</span>
netstat -tun | awk <span class="hljs-string">'NR&gt;2 {print $6}'</span> | sort | uniq -c | tee -a <span class="hljs-string">"<span class="hljs-variable">$DEBUG_LOG</span>"</span>

<span class="hljs-comment"># DNS configuration</span>
<span class="hljs-built_in">log</span> <span class="hljs-string">"=== DNS CONFIGURATION ==="</span>
<span class="hljs-built_in">log</span> <span class="hljs-string">"DNS servers:"</span>
cat /etc/resolv.conf | tee -a <span class="hljs-string">"<span class="hljs-variable">$DEBUG_LOG</span>"</span>

<span class="hljs-built_in">log</span> <span class="hljs-string">"DNS resolution test:"</span>
<span class="hljs-keyword">for</span> dns <span class="hljs-keyword">in</span> 8.8.8.8 1.1.1.1 208.67.222.222; <span class="hljs-keyword">do</span>
    response_time=$(dig @<span class="hljs-string">"<span class="hljs-variable">$dns</span>"</span> google.com | grep <span class="hljs-string">"Query time"</span> | awk <span class="hljs-string">'{print $4}'</span>)
    <span class="hljs-keyword">if</span> [[ -n <span class="hljs-string">"<span class="hljs-variable">$response_time</span>"</span> ]]; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">log</span> <span class="hljs-string">"DNS <span class="hljs-variable">$dns</span>: <span class="hljs-variable">${response_time}</span>ms"</span>
    <span class="hljs-keyword">else</span>
        <span class="hljs-built_in">log</span> <span class="hljs-string">"DNS <span class="hljs-variable">$dns</span>: FAILED"</span>
    <span class="hljs-keyword">fi</span>
<span class="hljs-keyword">done</span>

<span class="hljs-comment"># Firewall status</span>
<span class="hljs-built_in">log</span> <span class="hljs-string">"=== FIREWALL STATUS ==="</span>
<span class="hljs-keyword">if</span> <span class="hljs-built_in">command</span> -v ufw &amp;&gt; /dev/null; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">log</span> <span class="hljs-string">"UFW status:"</span>
    ufw status verbose | tee -a <span class="hljs-string">"<span class="hljs-variable">$DEBUG_LOG</span>"</span>
<span class="hljs-keyword">fi</span>

<span class="hljs-keyword">if</span> <span class="hljs-built_in">command</span> -v iptables &amp;&gt; /dev/null; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">log</span> <span class="hljs-string">"iptables rules:"</span>
    iptables -L -n | tee -a <span class="hljs-string">"<span class="hljs-variable">$DEBUG_LOG</span>"</span>
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># Network performance</span>
<span class="hljs-built_in">log</span> <span class="hljs-string">"=== NETWORK PERFORMANCE ==="</span>
<span class="hljs-built_in">log</span> <span class="hljs-string">"Network interface statistics:"</span>
cat /proc/net/dev | tee -a <span class="hljs-string">"<span class="hljs-variable">$DEBUG_LOG</span>"</span>

<span class="hljs-built_in">log</span> <span class="hljs-string">"Network errors:"</span>
<span class="hljs-keyword">for</span> interface <span class="hljs-keyword">in</span> $(ip link show | grep -E <span class="hljs-string">'^[0-9]+:'</span> | cut -d: -f2 | tr -d <span class="hljs-string">' '</span>); <span class="hljs-keyword">do</span>
    <span class="hljs-keyword">if</span> [[ <span class="hljs-string">"<span class="hljs-variable">$interface</span>"</span> != <span class="hljs-string">"lo"</span> ]]; <span class="hljs-keyword">then</span>
        errors=$(cat <span class="hljs-string">"/sys/class/net/<span class="hljs-variable">$interface</span>/statistics/rx_errors"</span> 2&gt;/dev/null)
        dropped=$(cat <span class="hljs-string">"/sys/class/net/<span class="hljs-variable">$interface</span>/statistics/rx_dropped"</span> 2&gt;/dev/null)
        <span class="hljs-built_in">log</span> <span class="hljs-string">"Interface <span class="hljs-variable">$interface</span>: RX errors=<span class="hljs-variable">$errors</span>, dropped=<span class="hljs-variable">$dropped</span>"</span>
    <span class="hljs-keyword">fi</span>
<span class="hljs-keyword">done</span>

<span class="hljs-comment"># Advanced diagnostics</span>
<span class="hljs-built_in">log</span> <span class="hljs-string">"=== ADVANCED DIAGNOSTICS ==="</span>
<span class="hljs-built_in">log</span> <span class="hljs-string">"MTU discovery test:"</span>
ping -M <span class="hljs-keyword">do</span> -s 1472 -c 1 8.8.8.8 &amp;&gt;/dev/null
<span class="hljs-keyword">if</span> [[ $? -eq 0 ]]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">log</span> <span class="hljs-string">"MTU 1500: OK"</span>
<span class="hljs-keyword">else</span>
    <span class="hljs-built_in">log</span> <span class="hljs-string">"MTU 1500: FRAGMENTATION NEEDED"</span>
<span class="hljs-keyword">fi</span>

<span class="hljs-built_in">log</span> <span class="hljs-string">"Traceroute to 8.8.8.8:"</span>
traceroute -n 8.8.8.8 | head -10 | tee -a <span class="hljs-string">"<span class="hljs-variable">$DEBUG_LOG</span>"</span>

<span class="hljs-built_in">log</span> <span class="hljs-string">"Network debugging completed. Log saved to: <span class="hljs-variable">$DEBUG_LOG</span>"</span>

<span class="hljs-comment"># Specific service debugging</span>
<span class="hljs-function"><span class="hljs-title">debug_web_service</span></span>() {
    <span class="hljs-built_in">local</span> url=<span class="hljs-string">"<span class="hljs-variable">$1</span>"</span>
    <span class="hljs-built_in">local</span> service_log=<span class="hljs-string">"/tmp/web-debug-<span class="hljs-variable">$(date +%Y%m%d_%H%M%S)</span>.log"</span>

    <span class="hljs-built_in">log</span> <span class="hljs-string">"Debugging web service: <span class="hljs-variable">$url</span>"</span>

    <span class="hljs-comment"># HTTP response test</span>
    <span class="hljs-built_in">log</span> <span class="hljs-string">"HTTP response test:"</span>
    curl -I -s -w <span class="hljs-string">"HTTP Code: %{http_code}\nTotal Time: %{time_total}s\nConnect Time: %{time_connect}s\nSSL Time: %{time_appconnect}s\n"</span> <span class="hljs-string">"<span class="hljs-variable">$url</span>"</span> | tee -a <span class="hljs-string">"<span class="hljs-variable">$service_log</span>"</span>

    <span class="hljs-comment"># SSL certificate check</span>
    <span class="hljs-keyword">if</span> [[ <span class="hljs-string">"<span class="hljs-variable">$url</span>"</span> =~ ^https ]]; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">log</span> <span class="hljs-string">"SSL certificate check:"</span>
        <span class="hljs-built_in">echo</span> | openssl s_client -connect <span class="hljs-string">"<span class="hljs-variable">${url#https://}</span>:443"</span> -servername <span class="hljs-string">"<span class="hljs-variable">${url#https://}</span>"</span> 2&gt;/dev/null | openssl x509 -noout -dates | tee -a <span class="hljs-string">"<span class="hljs-variable">$service_log</span>"</span>
    <span class="hljs-keyword">fi</span>

    <span class="hljs-comment"># DNS resolution for the domain</span>
    domain=$(<span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$url</span>"</span> | sed -E <span class="hljs-string">'s|^https?://([^/]+).*|\1|'</span>)
    <span class="hljs-built_in">log</span> <span class="hljs-string">"DNS resolution for <span class="hljs-variable">$domain</span>:"</span>
    dig <span class="hljs-string">"<span class="hljs-variable">$domain</span>"</span> | tee -a <span class="hljs-string">"<span class="hljs-variable">$service_log</span>"</span>
}

<span class="hljs-comment"># Usage example</span>
<span class="hljs-comment"># debug_web_service "https://example.com"</span>
</div></code></pre>
<h2 id="%F0%9F%93%8A-log-analysis-and-correlation">üìä Log Analysis and Correlation</h2>
<h3 id="advanced-log-analysis">Advanced Log Analysis</h3>
<pre class="hljs"><code><div><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># log-analyzer.sh - Comprehensive log analysis tool</span>

LOG_DIR=<span class="hljs-string">"/var/log"</span>
ANALYSIS_DIR=<span class="hljs-string">"/tmp/log-analysis-<span class="hljs-variable">$(date +%Y%m%d_%H%M%S)</span>"</span>
REPORT_FILE=<span class="hljs-string">"<span class="hljs-variable">$ANALYSIS_DIR</span>/analysis-report.txt"</span>

mkdir -p <span class="hljs-string">"<span class="hljs-variable">$ANALYSIS_DIR</span>"</span>

<span class="hljs-function"><span class="hljs-title">log</span></span>() {
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"[<span class="hljs-variable">$(date '+%Y-%m-%d %H:%M:%S')</span>] $*"</span> | tee -a <span class="hljs-string">"<span class="hljs-variable">$REPORT_FILE</span>"</span>
}

<span class="hljs-built_in">log</span> <span class="hljs-string">"Starting comprehensive log analysis"</span>

<span class="hljs-comment"># Error pattern analysis</span>
<span class="hljs-function"><span class="hljs-title">analyze_error_patterns</span></span>() {
    <span class="hljs-built_in">log</span> <span class="hljs-string">"=== ERROR PATTERN ANALYSIS ==="</span>

    <span class="hljs-built_in">local</span> error_patterns=(
        <span class="hljs-string">"error"</span>
        <span class="hljs-string">"fail"</span>
        <span class="hljs-string">"exception"</span>
        <span class="hljs-string">"timeout"</span>
        <span class="hljs-string">"refused"</span>
        <span class="hljs-string">"denied"</span>
        <span class="hljs-string">"critical"</span>
        <span class="hljs-string">"fatal"</span>
    )

    <span class="hljs-keyword">for</span> pattern <span class="hljs-keyword">in</span> <span class="hljs-string">"<span class="hljs-variable">${error_patterns[@]}</span>"</span>; <span class="hljs-keyword">do</span>
        <span class="hljs-built_in">local</span> count=$(find <span class="hljs-string">"<span class="hljs-variable">$LOG_DIR</span>"</span> -name <span class="hljs-string">"*.log"</span> -<span class="hljs-built_in">type</span> f -<span class="hljs-built_in">exec</span> grep -i <span class="hljs-string">"<span class="hljs-variable">$pattern</span>"</span> {} \; 2&gt;/dev/null | wc -l)
        <span class="hljs-keyword">if</span> [[ <span class="hljs-variable">$count</span> -gt 0 ]]; <span class="hljs-keyword">then</span>
            <span class="hljs-built_in">log</span> <span class="hljs-string">"Pattern '<span class="hljs-variable">$pattern</span>': <span class="hljs-variable">$count</span> occurrences"</span>

            <span class="hljs-comment"># Get recent occurrences</span>
            <span class="hljs-built_in">log</span> <span class="hljs-string">"Recent occurrences of '<span class="hljs-variable">$pattern</span>':"</span>
            find <span class="hljs-string">"<span class="hljs-variable">$LOG_DIR</span>"</span> -name <span class="hljs-string">"*.log"</span> -<span class="hljs-built_in">type</span> f -<span class="hljs-built_in">exec</span> grep -i <span class="hljs-string">"<span class="hljs-variable">$pattern</span>"</span> {} \; 2&gt;/dev/null | tail -5 | <span class="hljs-keyword">while</span> <span class="hljs-built_in">read</span> line; <span class="hljs-keyword">do</span>
                <span class="hljs-built_in">log</span> <span class="hljs-string">"  <span class="hljs-variable">$line</span>"</span>
            <span class="hljs-keyword">done</span>
        <span class="hljs-keyword">fi</span>
    <span class="hljs-keyword">done</span>
}

<span class="hljs-comment"># Time-based analysis</span>
<span class="hljs-function"><span class="hljs-title">analyze_time_patterns</span></span>() {
    <span class="hljs-built_in">log</span> <span class="hljs-string">"=== TIME-BASED ANALYSIS ==="</span>

    <span class="hljs-comment"># Analyze log entries by hour</span>
    <span class="hljs-built_in">log</span> <span class="hljs-string">"Log entries by hour (last 24 hours):"</span>
    <span class="hljs-keyword">for</span> hour <span class="hljs-keyword">in</span> {0..23}; <span class="hljs-keyword">do</span>
        <span class="hljs-built_in">local</span> hour_pattern=$(<span class="hljs-built_in">printf</span> <span class="hljs-string">"%02d:"</span> <span class="hljs-variable">$hour</span>)
        <span class="hljs-built_in">local</span> count=$(journalctl --since <span class="hljs-string">"24 hours ago"</span> | grep <span class="hljs-string">"<span class="hljs-variable">$hour_pattern</span>"</span> | wc -l)
        <span class="hljs-built_in">log</span> <span class="hljs-string">"Hour <span class="hljs-variable">$hour_pattern</span> <span class="hljs-variable">$count</span> entries"</span>
    <span class="hljs-keyword">done</span>

    <span class="hljs-comment"># Peak activity analysis</span>
    <span class="hljs-built_in">log</span> <span class="hljs-string">"Peak activity analysis:"</span>
    journalctl --since <span class="hljs-string">"24 hours ago"</span> --output=short-iso | awk <span class="hljs-string">'{print $1" "$2}'</span> | cut -d<span class="hljs-string">'T'</span> -f2 | cut -d<span class="hljs-string">':'</span> -f1 | sort | uniq -c | sort -nr | head -5 | <span class="hljs-keyword">while</span> <span class="hljs-built_in">read</span> count hour; <span class="hljs-keyword">do</span>
        <span class="hljs-built_in">log</span> <span class="hljs-string">"Peak hour <span class="hljs-variable">$hour</span>:00 with <span class="hljs-variable">$count</span> entries"</span>
    <span class="hljs-keyword">done</span>
}

<span class="hljs-comment"># Service-specific analysis</span>
<span class="hljs-function"><span class="hljs-title">analyze_services</span></span>() {
    <span class="hljs-built_in">log</span> <span class="hljs-string">"=== SERVICE-SPECIFIC ANALYSIS ==="</span>

    <span class="hljs-built_in">local</span> services=(<span class="hljs-string">"ssh"</span> <span class="hljs-string">"nginx"</span> <span class="hljs-string">"apache2"</span> <span class="hljs-string">"mysql"</span> <span class="hljs-string">"postgresql"</span>)

    <span class="hljs-keyword">for</span> service <span class="hljs-keyword">in</span> <span class="hljs-string">"<span class="hljs-variable">${services[@]}</span>"</span>; <span class="hljs-keyword">do</span>
        <span class="hljs-keyword">if</span> systemctl is-enabled <span class="hljs-string">"<span class="hljs-variable">$service</span>"</span> &amp;&gt;/dev/null; <span class="hljs-keyword">then</span>
            <span class="hljs-built_in">log</span> <span class="hljs-string">"Analyzing service: <span class="hljs-variable">$service</span>"</span>

            <span class="hljs-comment"># Service status</span>
            <span class="hljs-built_in">local</span> status=$(systemctl is-active <span class="hljs-string">"<span class="hljs-variable">$service</span>"</span>)
            <span class="hljs-built_in">log</span> <span class="hljs-string">"  Status: <span class="hljs-variable">$status</span>"</span>

            <span class="hljs-comment"># Recent service logs</span>
            <span class="hljs-built_in">local</span> error_count=$(journalctl -u <span class="hljs-string">"<span class="hljs-variable">$service</span>"</span> --since <span class="hljs-string">"24 hours ago"</span> --priority=err | wc -l)
            <span class="hljs-built_in">local</span> warning_count=$(journalctl -u <span class="hljs-string">"<span class="hljs-variable">$service</span>"</span> --since <span class="hljs-string">"24 hours ago"</span> --priority=warning | wc -l)

            <span class="hljs-built_in">log</span> <span class="hljs-string">"  Errors (24h): <span class="hljs-variable">$error_count</span>"</span>
            <span class="hljs-built_in">log</span> <span class="hljs-string">"  Warnings (24h): <span class="hljs-variable">$warning_count</span>"</span>

            <span class="hljs-comment"># Service restarts</span>
            <span class="hljs-built_in">local</span> restart_count=$(journalctl -u <span class="hljs-string">"<span class="hljs-variable">$service</span>"</span> --since <span class="hljs-string">"24 hours ago"</span> | grep -i <span class="hljs-string">"start\|restart"</span> | wc -l)
            <span class="hljs-built_in">log</span> <span class="hljs-string">"  Restarts (24h): <span class="hljs-variable">$restart_count</span>"</span>

            <span class="hljs-keyword">if</span> [[ <span class="hljs-variable">$restart_count</span> -gt 0 ]]; <span class="hljs-keyword">then</span>
                <span class="hljs-built_in">log</span> <span class="hljs-string">"  Recent restart events:"</span>
                journalctl -u <span class="hljs-string">"<span class="hljs-variable">$service</span>"</span> --since <span class="hljs-string">"24 hours ago"</span> | grep -i <span class="hljs-string">"start\|restart"</span> | tail -3 | <span class="hljs-keyword">while</span> <span class="hljs-built_in">read</span> line; <span class="hljs-keyword">do</span>
                    <span class="hljs-built_in">log</span> <span class="hljs-string">"    <span class="hljs-variable">$line</span>"</span>
                <span class="hljs-keyword">done</span>
            <span class="hljs-keyword">fi</span>
        <span class="hljs-keyword">fi</span>
    <span class="hljs-keyword">done</span>
}

<span class="hljs-comment"># Security analysis</span>
<span class="hljs-function"><span class="hljs-title">analyze_security</span></span>() {
    <span class="hljs-built_in">log</span> <span class="hljs-string">"=== SECURITY ANALYSIS ==="</span>

    <span class="hljs-comment"># Failed login attempts</span>
    <span class="hljs-built_in">local</span> failed_logins=$(grep <span class="hljs-string">"Failed password"</span> /var/<span class="hljs-built_in">log</span>/auth.log 2&gt;/dev/null | wc -l)
    <span class="hljs-built_in">log</span> <span class="hljs-string">"Failed login attempts: <span class="hljs-variable">$failed_logins</span>"</span>

    <span class="hljs-keyword">if</span> [[ <span class="hljs-variable">$failed_logins</span> -gt 0 ]]; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">log</span> <span class="hljs-string">"Top failed login sources:"</span>
        grep <span class="hljs-string">"Failed password"</span> /var/<span class="hljs-built_in">log</span>/auth.log 2&gt;/dev/null | awk <span class="hljs-string">'{print $(NF-3)}'</span> | sort | uniq -c | sort -nr | head -5 | <span class="hljs-keyword">while</span> <span class="hljs-built_in">read</span> count ip; <span class="hljs-keyword">do</span>
            <span class="hljs-built_in">log</span> <span class="hljs-string">"  <span class="hljs-variable">$ip</span>: <span class="hljs-variable">$count</span> attempts"</span>
        <span class="hljs-keyword">done</span>
    <span class="hljs-keyword">fi</span>

    <span class="hljs-comment"># Sudo usage</span>
    <span class="hljs-built_in">local</span> sudo_count=$(grep <span class="hljs-string">"sudo:"</span> /var/<span class="hljs-built_in">log</span>/auth.log 2&gt;/dev/null | wc -l)
    <span class="hljs-built_in">log</span> <span class="hljs-string">"Sudo commands executed: <span class="hljs-variable">$sudo_count</span>"</span>

    <span class="hljs-keyword">if</span> [[ <span class="hljs-variable">$sudo_count</span> -gt 0 ]]; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">log</span> <span class="hljs-string">"Recent sudo activity:"</span>
        grep <span class="hljs-string">"sudo:"</span> /var/<span class="hljs-built_in">log</span>/auth.log 2&gt;/dev/null | tail -5 | <span class="hljs-keyword">while</span> <span class="hljs-built_in">read</span> line; <span class="hljs-keyword">do</span>
            <span class="hljs-built_in">log</span> <span class="hljs-string">"  <span class="hljs-variable">$line</span>"</span>
        <span class="hljs-keyword">done</span>
    <span class="hljs-keyword">fi</span>

    <span class="hljs-comment"># UFW blocks</span>
    <span class="hljs-built_in">local</span> ufw_blocks=$(grep <span class="hljs-string">"UFW BLOCK"</span> /var/<span class="hljs-built_in">log</span>/kern.log 2&gt;/dev/null | wc -l)
    <span class="hljs-built_in">log</span> <span class="hljs-string">"UFW blocked connections: <span class="hljs-variable">$ufw_blocks</span>"</span>

    <span class="hljs-keyword">if</span> [[ <span class="hljs-variable">$ufw_blocks</span> -gt 0 ]]; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">log</span> <span class="hljs-string">"Top blocked sources:"</span>
        grep <span class="hljs-string">"UFW BLOCK"</span> /var/<span class="hljs-built_in">log</span>/kern.log 2&gt;/dev/null | awk <span class="hljs-string">'{print $13}'</span> | cut -d<span class="hljs-string">'='</span> -f2 | sort | uniq -c | sort -nr | head -5 | <span class="hljs-keyword">while</span> <span class="hljs-built_in">read</span> count ip; <span class="hljs-keyword">do</span>
            <span class="hljs-built_in">log</span> <span class="hljs-string">"  <span class="hljs-variable">$ip</span>: <span class="hljs-variable">$count</span> blocks"</span>
        <span class="hljs-keyword">done</span>
    <span class="hljs-keyword">fi</span>
}

<span class="hljs-comment"># Performance analysis</span>
<span class="hljs-function"><span class="hljs-title">analyze_performance</span></span>() {
    <span class="hljs-built_in">log</span> <span class="hljs-string">"=== PERFORMANCE ANALYSIS ==="</span>

    <span class="hljs-comment"># System load analysis</span>
    <span class="hljs-built_in">log</span> <span class="hljs-string">"System load analysis:"</span>
    sar -q 1 1 | tail -1 | awk <span class="hljs-string">'{print "Load average: "$4" "$5" "$6}'</span> | tee -a <span class="hljs-string">"<span class="hljs-variable">$REPORT_FILE</span>"</span>

    <span class="hljs-comment"># Memory pressure</span>
    <span class="hljs-built_in">local</span> oom_kills=$(dmesg | grep -i <span class="hljs-string">"killed process"</span> | wc -l)
    <span class="hljs-built_in">log</span> <span class="hljs-string">"OOM kills detected: <span class="hljs-variable">$oom_kills</span>"</span>

    <span class="hljs-keyword">if</span> [[ <span class="hljs-variable">$oom_kills</span> -gt 0 ]]; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">log</span> <span class="hljs-string">"Recent OOM kills:"</span>
        dmesg | grep -i <span class="hljs-string">"killed process"</span> | tail -3 | <span class="hljs-keyword">while</span> <span class="hljs-built_in">read</span> line; <span class="hljs-keyword">do</span>
            <span class="hljs-built_in">log</span> <span class="hljs-string">"  <span class="hljs-variable">$line</span>"</span>
        <span class="hljs-keyword">done</span>
    <span class="hljs-keyword">fi</span>

    <span class="hljs-comment"># Disk I/O issues</span>
    <span class="hljs-built_in">local</span> io_errors=$(dmesg | grep -i <span class="hljs-string">"i/o error"</span> | wc -l)
    <span class="hljs-built_in">log</span> <span class="hljs-string">"I/O errors detected: <span class="hljs-variable">$io_errors</span>"</span>

    <span class="hljs-keyword">if</span> [[ <span class="hljs-variable">$io_errors</span> -gt 0 ]]; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">log</span> <span class="hljs-string">"Recent I/O errors:"</span>
        dmesg | grep -i <span class="hljs-string">"i/o error"</span> | tail -3 | <span class="hljs-keyword">while</span> <span class="hljs-built_in">read</span> line; <span class="hljs-keyword">do</span>
            <span class="hljs-built_in">log</span> <span class="hljs-string">"  <span class="hljs-variable">$line</span>"</span>
        <span class="hljs-keyword">done</span>
    <span class="hljs-keyword">fi</span>
}

<span class="hljs-comment"># Generate correlation matrix</span>
<span class="hljs-function"><span class="hljs-title">generate_correlation</span></span>() {
    <span class="hljs-built_in">log</span> <span class="hljs-string">"=== EVENT CORRELATION ==="</span>

    <span class="hljs-comment"># Create timeline of events</span>
    <span class="hljs-built_in">local</span> timeline_file=<span class="hljs-string">"<span class="hljs-variable">$ANALYSIS_DIR</span>/timeline.txt"</span>

    <span class="hljs-comment"># Collect events from different sources</span>
    {
        journalctl --since <span class="hljs-string">"24 hours ago"</span> --output=short-iso | awk <span class="hljs-string">'{print $1" "$2" SYSTEM "$0}'</span>
        grep <span class="hljs-string">"Failed password"</span> /var/<span class="hljs-built_in">log</span>/auth.log 2&gt;/dev/null | awk <span class="hljs-string">'{print $1" "$2" "$3" AUTH "$0}'</span>
        grep <span class="hljs-string">"error\|Error\|ERROR"</span> /var/<span class="hljs-built_in">log</span>/nginx/error.log 2&gt;/dev/null | awk <span class="hljs-string">'{print $1" "$2" WEB "$0}'</span>
    } | sort &gt; <span class="hljs-string">"<span class="hljs-variable">$timeline_file</span>"</span>

    <span class="hljs-built_in">log</span> <span class="hljs-string">"Event timeline created: <span class="hljs-variable">$timeline_file</span>"</span>

    <span class="hljs-comment"># Identify event clusters</span>
    <span class="hljs-built_in">log</span> <span class="hljs-string">"Event clustering analysis:"</span>
    awk <span class="hljs-string">'{
        timestamp = $1" "$2
        gsub(/[0-9]{2}:[0-9]{2}:[0-9]{2}/, "XX:XX:XX", timestamp)
        count[timestamp]++
    }
    END {
        for (ts in count) {
            if (count[ts] &gt; 5) {
                print "High activity period: "ts" ("count[ts]" events)"
            }
        }
    }'</span> <span class="hljs-string">"<span class="hljs-variable">$timeline_file</span>"</span> | tee -a <span class="hljs-string">"<span class="hljs-variable">$REPORT_FILE</span>"</span>
}

<span class="hljs-comment"># Main execution</span>
analyze_error_patterns
analyze_time_patterns
analyze_services
analyze_security
analyze_performance
generate_correlation

<span class="hljs-built_in">log</span> <span class="hljs-string">"Log analysis completed. Report saved to: <span class="hljs-variable">$REPORT_FILE</span>"</span>

<span class="hljs-comment"># Generate summary</span>
<span class="hljs-built_in">log</span> <span class="hljs-string">"=== ANALYSIS SUMMARY ==="</span>
<span class="hljs-built_in">log</span> <span class="hljs-string">"Analysis completed at: <span class="hljs-variable">$(date)</span>"</span>
<span class="hljs-built_in">log</span> <span class="hljs-string">"Total log files analyzed: <span class="hljs-variable">$(find "$LOG_DIR" -name "*.log" -type f | wc -l)</span>"</span>
<span class="hljs-built_in">log</span> <span class="hljs-string">"Analysis artifacts saved to: <span class="hljs-variable">$ANALYSIS_DIR</span>"</span>

<span class="hljs-comment"># Send report if email is configured</span>
<span class="hljs-keyword">if</span> <span class="hljs-built_in">command</span> -v mail &amp;&gt; /dev/null; <span class="hljs-keyword">then</span>
    mail -s <span class="hljs-string">"Log Analysis Report - <span class="hljs-variable">$(hostname)</span>"</span> admin@example.com &lt; <span class="hljs-string">"<span class="hljs-variable">$REPORT_FILE</span>"</span>
    <span class="hljs-built_in">log</span> <span class="hljs-string">"Report emailed to admin@example.com"</span>
<span class="hljs-keyword">fi</span>
</div></code></pre>
<h3 id="real-time-log-monitoring">Real-time Log Monitoring</h3>
<pre class="hljs"><code><div><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># real-time-monitor.sh - Real-time log monitoring with alerting</span>

MONITOR_LOGS=(
    <span class="hljs-string">"/var/log/syslog"</span>
    <span class="hljs-string">"/var/log/auth.log"</span>
    <span class="hljs-string">"/var/log/nginx/error.log"</span>
    <span class="hljs-string">"/var/log/apache2/error.log"</span>
    <span class="hljs-string">"/var/log/mysql/error.log"</span>
)

ALERT_PATTERNS=(
    <span class="hljs-string">"CRITICAL|critical|Critical"</span>
    <span class="hljs-string">"ERROR|error|Error"</span>
    <span class="hljs-string">"FAILED|failed|Failed"</span>
    <span class="hljs-string">"DENIED|denied|Denied"</span>
    <span class="hljs-string">"TIMEOUT|timeout|Timeout"</span>
)

ALERT_EMAIL=<span class="hljs-string">"admin@example.com"</span>
ALERT_THRESHOLD=5  <span class="hljs-comment"># Alert after 5 occurrences in 5 minutes</span>
CHECK_INTERVAL=60  <span class="hljs-comment"># Check every minute</span>

<span class="hljs-comment"># Alert tracking</span>
<span class="hljs-built_in">declare</span> -A alert_counts
<span class="hljs-built_in">declare</span> -A last_alert_time

<span class="hljs-function"><span class="hljs-title">log</span></span>() {
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"[<span class="hljs-variable">$(date '+%Y-%m-%d %H:%M:%S')</span>] $*"</span>
}

<span class="hljs-function"><span class="hljs-title">send_alert</span></span>() {
    <span class="hljs-built_in">local</span> pattern=<span class="hljs-string">"<span class="hljs-variable">$1</span>"</span>
    <span class="hljs-built_in">local</span> count=<span class="hljs-string">"<span class="hljs-variable">$2</span>"</span>
    <span class="hljs-built_in">local</span> logfile=<span class="hljs-string">"<span class="hljs-variable">$3</span>"</span>
    <span class="hljs-built_in">local</span> sample_lines=<span class="hljs-string">"<span class="hljs-variable">$4</span>"</span>

    <span class="hljs-built_in">local</span> subject=<span class="hljs-string">"Alert: Pattern '<span class="hljs-variable">$pattern</span>' detected <span class="hljs-variable">$count</span> times"</span>
    <span class="hljs-built_in">local</span> body=<span class="hljs-string">"Alert Details:
Pattern: <span class="hljs-variable">$pattern</span>
Count: <span class="hljs-variable">$count</span>
Log file: <span class="hljs-variable">$logfile</span>
Time: <span class="hljs-variable">$(date)</span>

Sample log entries:
<span class="hljs-variable">$sample_lines</span>"</span>

    <span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$body</span>"</span> | mail -s <span class="hljs-string">"<span class="hljs-variable">$subject</span>"</span> <span class="hljs-string">"<span class="hljs-variable">$ALERT_EMAIL</span>"</span>
    <span class="hljs-built_in">log</span> <span class="hljs-string">"ALERT SENT: <span class="hljs-variable">$subject</span>"</span>
}

<span class="hljs-function"><span class="hljs-title">monitor_logs</span></span>() {
    <span class="hljs-built_in">local</span> current_time=$(date +%s)

    <span class="hljs-keyword">for</span> logfile <span class="hljs-keyword">in</span> <span class="hljs-string">"<span class="hljs-variable">${MONITOR_LOGS[@]}</span>"</span>; <span class="hljs-keyword">do</span>
        <span class="hljs-keyword">if</span> [[ ! -f <span class="hljs-string">"<span class="hljs-variable">$logfile</span>"</span> ]]; <span class="hljs-keyword">then</span>
            <span class="hljs-built_in">continue</span>
        <span class="hljs-keyword">fi</span>

        <span class="hljs-keyword">for</span> pattern <span class="hljs-keyword">in</span> <span class="hljs-string">"<span class="hljs-variable">${ALERT_PATTERNS[@]}</span>"</span>; <span class="hljs-keyword">do</span>
            <span class="hljs-comment"># Count occurrences in the last 5 minutes</span>
            <span class="hljs-built_in">local</span> count=$(tail -1000 <span class="hljs-string">"<span class="hljs-variable">$logfile</span>"</span> | awk -v pattern=<span class="hljs-string">"<span class="hljs-variable">$pattern</span>"</span> -v cutoff=<span class="hljs-string">"<span class="hljs-variable">$(date -d '5 minutes ago' '+%b %d %H:%M')</span>"</span> <span class="hljs-string">'
                $0 ~ cutoff &amp;&amp; $0 ~ pattern { count++ }
                END { print count+0 }
            '</span>)

            <span class="hljs-keyword">if</span> [[ <span class="hljs-variable">$count</span> -ge <span class="hljs-variable">$ALERT_THRESHOLD</span> ]]; <span class="hljs-keyword">then</span>
                <span class="hljs-built_in">local</span> alert_key=<span class="hljs-string">"<span class="hljs-variable">${logfile}</span>_<span class="hljs-variable">${pattern}</span>"</span>
                <span class="hljs-built_in">local</span> last_alert=<span class="hljs-variable">${last_alert_time[$alert_key]:-0}</span>

                <span class="hljs-comment"># Only send alert if it's been more than 30 minutes since last alert</span>
                <span class="hljs-keyword">if</span> [[ $((current_time - last_alert)) -gt 1800 ]]; <span class="hljs-keyword">then</span>
                    <span class="hljs-built_in">local</span> sample_lines=$(tail -1000 <span class="hljs-string">"<span class="hljs-variable">$logfile</span>"</span> | grep -E <span class="hljs-string">"<span class="hljs-variable">$pattern</span>"</span> | tail -5)
                    send_alert <span class="hljs-string">"<span class="hljs-variable">$pattern</span>"</span> <span class="hljs-string">"<span class="hljs-variable">$count</span>"</span> <span class="hljs-string">"<span class="hljs-variable">$logfile</span>"</span> <span class="hljs-string">"<span class="hljs-variable">$sample_lines</span>"</span>
                    last_alert_time[<span class="hljs-variable">$alert_key</span>]=<span class="hljs-variable">$current_time</span>
                <span class="hljs-keyword">fi</span>
            <span class="hljs-keyword">fi</span>
        <span class="hljs-keyword">done</span>
    <span class="hljs-keyword">done</span>
}

<span class="hljs-comment"># Real-time monitoring with tail</span>
<span class="hljs-function"><span class="hljs-title">real_time_monitor</span></span>() {
    <span class="hljs-built_in">log</span> <span class="hljs-string">"Starting real-time log monitoring"</span>

    <span class="hljs-comment"># Create named pipes for each log file</span>
    <span class="hljs-built_in">local</span> pipes=()
    <span class="hljs-keyword">for</span> logfile <span class="hljs-keyword">in</span> <span class="hljs-string">"<span class="hljs-variable">${MONITOR_LOGS[@]}</span>"</span>; <span class="hljs-keyword">do</span>
        <span class="hljs-keyword">if</span> [[ -f <span class="hljs-string">"<span class="hljs-variable">$logfile</span>"</span> ]]; <span class="hljs-keyword">then</span>
            <span class="hljs-built_in">local</span> pipe=<span class="hljs-string">"/tmp/monitor_<span class="hljs-variable">$(basename "$logfile")</span>.pipe"</span>
            mkfifo <span class="hljs-string">"<span class="hljs-variable">$pipe</span>"</span> 2&gt;/dev/null
            tail -f <span class="hljs-string">"<span class="hljs-variable">$logfile</span>"</span> &gt; <span class="hljs-string">"<span class="hljs-variable">$pipe</span>"</span> &amp;
            pipes+=(<span class="hljs-string">"<span class="hljs-variable">$pipe</span>"</span>)
        <span class="hljs-keyword">fi</span>
    <span class="hljs-keyword">done</span>

    <span class="hljs-comment"># Monitor all pipes simultaneously</span>
    <span class="hljs-keyword">while</span> <span class="hljs-literal">true</span>; <span class="hljs-keyword">do</span>
        <span class="hljs-keyword">for</span> pipe <span class="hljs-keyword">in</span> <span class="hljs-string">"<span class="hljs-variable">${pipes[@]}</span>"</span>; <span class="hljs-keyword">do</span>
            <span class="hljs-keyword">if</span> <span class="hljs-built_in">read</span> -t 1 line &lt; <span class="hljs-string">"<span class="hljs-variable">$pipe</span>"</span>; <span class="hljs-keyword">then</span>
                <span class="hljs-comment"># Check line against alert patterns</span>
                <span class="hljs-keyword">for</span> pattern <span class="hljs-keyword">in</span> <span class="hljs-string">"<span class="hljs-variable">${ALERT_PATTERNS[@]}</span>"</span>; <span class="hljs-keyword">do</span>
                    <span class="hljs-keyword">if</span> <span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$line</span>"</span> | grep -qE <span class="hljs-string">"<span class="hljs-variable">$pattern</span>"</span>; <span class="hljs-keyword">then</span>
                        <span class="hljs-built_in">log</span> <span class="hljs-string">"PATTERN MATCH: <span class="hljs-variable">$pattern</span> in <span class="hljs-variable">$line</span>"</span>

                        <span class="hljs-comment"># Immediate alert for critical patterns</span>
                        <span class="hljs-keyword">if</span> <span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$pattern</span>"</span> | grep -qi <span class="hljs-string">"critical"</span>; <span class="hljs-keyword">then</span>
                            <span class="hljs-built_in">echo</span> <span class="hljs-string">"CRITICAL ALERT: <span class="hljs-variable">$line</span>"</span> | mail -s <span class="hljs-string">"CRITICAL: Immediate attention required"</span> <span class="hljs-string">"<span class="hljs-variable">$ALERT_EMAIL</span>"</span>
                        <span class="hljs-keyword">fi</span>
                    <span class="hljs-keyword">fi</span>
                <span class="hljs-keyword">done</span>
            <span class="hljs-keyword">fi</span>
        <span class="hljs-keyword">done</span>
    <span class="hljs-keyword">done</span>
}

<span class="hljs-comment"># Cleanup function</span>
<span class="hljs-function"><span class="hljs-title">cleanup</span></span>() {
    <span class="hljs-built_in">log</span> <span class="hljs-string">"Cleaning up monitoring processes"</span>
    pkill -f <span class="hljs-string">"tail -f"</span>
    rm -f /tmp/monitor_*.pipe
    <span class="hljs-built_in">exit</span> 0
}

<span class="hljs-built_in">trap</span> cleanup SIGINT SIGTERM

<span class="hljs-comment"># Main execution</span>
<span class="hljs-keyword">case</span> <span class="hljs-string">"<span class="hljs-variable">${1:-periodic}</span>"</span> <span class="hljs-keyword">in</span>
    <span class="hljs-string">"realtime"</span>)
        real_time_monitor
        ;;
    <span class="hljs-string">"periodic"</span>)
        <span class="hljs-built_in">log</span> <span class="hljs-string">"Starting periodic log monitoring"</span>
        <span class="hljs-keyword">while</span> <span class="hljs-literal">true</span>; <span class="hljs-keyword">do</span>
            monitor_logs
            sleep <span class="hljs-variable">$CHECK_INTERVAL</span>
        <span class="hljs-keyword">done</span>
        ;;
    <span class="hljs-string">"once"</span>)
        <span class="hljs-built_in">log</span> <span class="hljs-string">"Running single log check"</span>
        monitor_logs
        ;;
    *)
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"Usage: <span class="hljs-variable">$0</span> [realtime|periodic|once]"</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"  realtime - Monitor logs in real-time"</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"  periodic - Check logs periodically (default)"</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"  once     - Run single check"</span>
        <span class="hljs-built_in">exit</span> 1
        ;;
<span class="hljs-keyword">esac</span>
</div></code></pre>
<h2 id="%F0%9F%A7%A0-knowledge-check">üß† Knowledge Check</h2>
<h3 id="quick-quiz">Quick Quiz</h3>
<ol>
<li>
<p><strong>What's the difference between strace and ltrace?</strong></p>
<details>
<summary>Answer</summary>
<p>strace traces system calls made by a process to the kernel, while ltrace traces library function calls made by a process to shared libraries.</p>
</details>
</li>
<li>
<p><strong>How do you generate a core dump for a running process?</strong></p>
<details>
<summary>Answer</summary>
<p>Use <code>gcore &lt;PID&gt;</code> to generate a core dump, or send a SIGQUIT signal with <code>kill -3 &lt;PID&gt;</code> (if the application handles it properly).</p>
</details>
</li>
<li>
<p><strong>What information does the /proc filesystem provide for troubleshooting?</strong></p>
<details>
<summary>Answer</summary>
<p>/proc provides real-time information about processes, system resources, kernel parameters, memory usage, file descriptors, network connections, and system statistics.</p>
</details>
</li>
<li>
<p><strong>How do you correlate events across multiple log files?</strong></p>
<details>
<summary>Answer</summary>
<p>Use timestamps to create a unified timeline, employ log aggregation tools like ELK stack, or create custom scripts that merge and sort log entries by timestamp.</p>
</details>
</li>
</ol>
<h3 id="hands-on-challenges">Hands-On Challenges</h3>
<p><strong>Challenge 1: Complete Debugging Suite</strong></p>
<pre class="hljs"><code><div><span class="hljs-comment"># Create a comprehensive debugging toolkit:</span>
<span class="hljs-comment"># - Automated problem detection and classification</span>
<span class="hljs-comment"># - Multi-layer debugging (system, network, application)</span>
<span class="hljs-comment"># - Real-time monitoring with intelligent alerting</span>
<span class="hljs-comment"># - Automated log correlation and analysis</span>
<span class="hljs-comment"># - Performance bottleneck identification</span>
<span class="hljs-comment"># - Root cause analysis automation</span>
</div></code></pre>
<p><strong>Challenge 2: Incident Response System</strong></p>
<pre class="hljs"><code><div><span class="hljs-comment"># Build an incident response system:</span>
<span class="hljs-comment"># - Automated incident detection and classification</span>
<span class="hljs-comment"># - Escalation procedures and notifications</span>
<span class="hljs-comment"># - Evidence collection and preservation</span>
<span class="hljs-comment"># - Recovery procedures and rollback capabilities</span>
<span class="hljs-comment"># - Post-incident analysis and reporting</span>
</div></code></pre>
<p><strong>Challenge 3: Predictive Problem Detection</strong></p>
<pre class="hljs"><code><div><span class="hljs-comment"># Implement predictive problem detection:</span>
<span class="hljs-comment"># - Trend analysis and anomaly detection</span>
<span class="hljs-comment"># - Machine learning for pattern recognition</span>
<span class="hljs-comment"># - Proactive alerting before issues occur</span>
<span class="hljs-comment"># - Capacity planning and resource prediction</span>
<span class="hljs-comment"># - Automated preventive actions</span>
</div></code></pre>
<h2 id="%F0%9F%9A%80-next-steps">üöÄ Next Steps</h2>
<p>Excellent! You've mastered troubleshooting and debugging. You can now:</p>
<ul>
<li>Apply systematic troubleshooting methodologies</li>
<li>Use advanced debugging tools (strace, gdb, network analyzers)</li>
<li>Perform comprehensive log analysis and correlation</li>
<li>Implement real-time monitoring and alerting</li>
<li>Conduct root cause analysis effectively</li>
<li>Build automated debugging and incident response systems</li>
<li>Create comprehensive documentation and knowledge bases</li>
</ul>
<p><strong>Ready for the final chapter?</strong> Continue to <a href="16-best-practices.md">16-best-practices.md</a> to learn industry best practices and advanced techniques for Linux and networking mastery.</p>
<hr>
<blockquote>
<p><strong>Pro Tip</strong>: Great troubleshooters are made, not born. Practice systematic approaches, build comprehensive toolkits, and always document your findings. The key is to remain calm, methodical, and persistent! üîç</p>
</blockquote>
<h1 id="%F0%9F%8F%86-best-practices-linux--networking-mastery">üèÜ Best Practices: Linux &amp; Networking Mastery</h1>
<blockquote>
<p><strong>Industry best practices, advanced techniques, and professional workflows for Linux and networking excellence</strong></p>
</blockquote>
<h2 id="%F0%9F%93%96-what-youll-learn">üìñ What You'll Learn</h2>
<p>This final chapter consolidates everything into professional best practices and advanced techniques:</p>
<ul>
<li>System administration best practices</li>
<li>Security hardening and compliance</li>
<li>Performance optimization strategies</li>
<li>Disaster recovery and business continuity</li>
<li>Documentation and knowledge management</li>
<li>Team collaboration and workflows</li>
<li>Continuous learning and skill development</li>
<li>Career advancement strategies</li>
<li>Industry standards and certifications</li>
</ul>
<h2 id="%F0%9F%8C%8D-why-this-matters">üåç Why This Matters</h2>
<p><strong>Professional excellence requires:</strong></p>
<ul>
<li><strong>Consistency</strong>: Standardized approaches and procedures</li>
<li><strong>Reliability</strong>: Predictable and stable systems</li>
<li><strong>Security</strong>: Robust protection against threats</li>
<li><strong>Efficiency</strong>: Optimized performance and resource utilization</li>
<li><strong>Scalability</strong>: Systems that grow with business needs</li>
<li><strong>Maintainability</strong>: Easy to manage and troubleshoot</li>
</ul>
<h2 id="%F0%9F%94%A7-system-administration-best-practices">üîß System Administration Best Practices</h2>
<h3 id="infrastructure-as-code-iac">Infrastructure as Code (IaC)</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># ansible-playbook: infrastructure-setup.yml</span>
<span class="hljs-meta">---</span>
<span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Complete</span> <span class="hljs-string">Infrastructure</span> <span class="hljs-string">Setup</span>
  <span class="hljs-attr">hosts:</span> <span class="hljs-string">all</span>
  <span class="hljs-attr">become:</span> <span class="hljs-literal">yes</span>
  <span class="hljs-attr">vars:</span>
    <span class="hljs-comment"># Environment-specific variables</span>
    <span class="hljs-attr">environment:</span> <span class="hljs-string">"<span class="hljs-template-variable">{{ env | default('production') }}</span>"</span>
    <span class="hljs-attr">backup_retention_days:</span> <span class="hljs-number">30</span>
    <span class="hljs-attr">monitoring_enabled:</span> <span class="hljs-literal">true</span>
    <span class="hljs-attr">security_hardening:</span> <span class="hljs-literal">true</span>

  <span class="hljs-attr">pre_tasks:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Validate</span> <span class="hljs-string">environment</span>
      <span class="hljs-attr">assert:</span>
        <span class="hljs-attr">that:</span>
          <span class="hljs-bullet">-</span> <span class="hljs-string">environment</span> <span class="hljs-string">in</span> <span class="hljs-string">['development',</span> <span class="hljs-string">'staging'</span><span class="hljs-string">,</span> <span class="hljs-string">'production'</span><span class="hljs-string">]</span>
          <span class="hljs-bullet">-</span> <span class="hljs-string">ansible_distribution</span> <span class="hljs-string">==</span> <span class="hljs-string">'Ubuntu'</span>
          <span class="hljs-bullet">-</span> <span class="hljs-string">ansible_distribution_major_version|int</span> <span class="hljs-string">&gt;=</span> <span class="hljs-number">20</span>
        <span class="hljs-attr">fail_msg:</span> <span class="hljs-string">"Environment validation failed"</span>

    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Create</span> <span class="hljs-string">backup</span> <span class="hljs-string">directory</span>
      <span class="hljs-attr">file:</span>
        <span class="hljs-attr">path:</span> <span class="hljs-string">/backup/{{</span> <span class="hljs-string">inventory_hostname</span> <span class="hljs-string">}}</span>
        <span class="hljs-attr">state:</span> <span class="hljs-string">directory</span>
        <span class="hljs-attr">mode:</span> <span class="hljs-string">"0750"</span>
        <span class="hljs-attr">owner:</span> <span class="hljs-string">backup</span>
        <span class="hljs-attr">group:</span> <span class="hljs-string">backup</span>

  <span class="hljs-attr">roles:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">role:</span> <span class="hljs-string">common</span>
      <span class="hljs-attr">tags:</span> <span class="hljs-string">["common",</span> <span class="hljs-string">"base"</span><span class="hljs-string">]</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">role:</span> <span class="hljs-string">security</span>
      <span class="hljs-attr">tags:</span> <span class="hljs-string">["security",</span> <span class="hljs-string">"hardening"</span><span class="hljs-string">]</span>
      <span class="hljs-attr">when:</span> <span class="hljs-string">security_hardening</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">role:</span> <span class="hljs-string">monitoring</span>
      <span class="hljs-attr">tags:</span> <span class="hljs-string">["monitoring",</span> <span class="hljs-string">"observability"</span><span class="hljs-string">]</span>
      <span class="hljs-attr">when:</span> <span class="hljs-string">monitoring_enabled</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">role:</span> <span class="hljs-string">backup</span>
      <span class="hljs-attr">tags:</span> <span class="hljs-string">["backup",</span> <span class="hljs-string">"disaster-recovery"</span><span class="hljs-string">]</span>

  <span class="hljs-attr">post_tasks:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Verify</span> <span class="hljs-string">system</span> <span class="hljs-string">state</span>
      <span class="hljs-attr">include_tasks:</span> <span class="hljs-string">verify-system.yml</span>
      <span class="hljs-attr">tags:</span> <span class="hljs-string">["verification",</span> <span class="hljs-string">"testing"</span><span class="hljs-string">]</span>

    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Generate</span> <span class="hljs-string">system</span> <span class="hljs-string">report</span>
      <span class="hljs-attr">template:</span>
        <span class="hljs-attr">src:</span> <span class="hljs-string">system-report.j2</span>
        <span class="hljs-attr">dest:</span> <span class="hljs-string">/var/log/system-setup-{{</span> <span class="hljs-string">ansible_date_time.epoch</span> <span class="hljs-string">}}.log</span>
      <span class="hljs-attr">tags:</span> <span class="hljs-string">["documentation",</span> <span class="hljs-string">"reporting"</span><span class="hljs-string">]</span>
</div></code></pre>
<pre class="hljs"><code><div><span class="hljs-comment"># roles/common/tasks/main.yml</span>
<span class="hljs-meta">---</span>
<span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Update</span> <span class="hljs-string">package</span> <span class="hljs-string">cache</span>
  <span class="hljs-attr">apt:</span>
    <span class="hljs-attr">update_cache:</span> <span class="hljs-literal">yes</span>
    <span class="hljs-attr">cache_valid_time:</span> <span class="hljs-number">3600</span>
  <span class="hljs-attr">tags:</span> <span class="hljs-string">["packages"]</span>

<span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Install</span> <span class="hljs-string">essential</span> <span class="hljs-string">packages</span>
  <span class="hljs-attr">apt:</span>
    <span class="hljs-attr">name:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">curl</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">wget</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">vim</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">htop</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">iotop</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">nload</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">tree</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">git</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">unzip</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">software-properties-common</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">apt-transport-https</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">ca-certificates</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">gnupg</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">lsb-release</span>
    <span class="hljs-attr">state:</span> <span class="hljs-string">present</span>
  <span class="hljs-attr">tags:</span> <span class="hljs-string">["packages"]</span>

<span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Configure</span> <span class="hljs-string">timezone</span>
  <span class="hljs-attr">timezone:</span>
    <span class="hljs-attr">name:</span> <span class="hljs-string">"<span class="hljs-template-variable">{{ system_timezone | default('UTC') }}</span>"</span>
  <span class="hljs-attr">notify:</span> <span class="hljs-string">restart</span> <span class="hljs-string">rsyslog</span>
  <span class="hljs-attr">tags:</span> <span class="hljs-string">["system"]</span>

<span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Configure</span> <span class="hljs-string">NTP</span>
  <span class="hljs-attr">template:</span>
    <span class="hljs-attr">src:</span> <span class="hljs-string">ntp.conf.j2</span>
    <span class="hljs-attr">dest:</span> <span class="hljs-string">/etc/ntp.conf</span>
    <span class="hljs-attr">backup:</span> <span class="hljs-literal">yes</span>
  <span class="hljs-attr">notify:</span> <span class="hljs-string">restart</span> <span class="hljs-string">ntp</span>
  <span class="hljs-attr">tags:</span> <span class="hljs-string">["system",</span> <span class="hljs-string">"time"</span><span class="hljs-string">]</span>

<span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Create</span> <span class="hljs-string">system</span> <span class="hljs-string">users</span>
  <span class="hljs-attr">user:</span>
    <span class="hljs-attr">name:</span> <span class="hljs-string">"<span class="hljs-template-variable">{{ item.name }}</span>"</span>
    <span class="hljs-attr">groups:</span> <span class="hljs-string">"<span class="hljs-template-variable">{{ item.groups | default([]) }}</span>"</span>
    <span class="hljs-attr">shell:</span> <span class="hljs-string">"<span class="hljs-template-variable">{{ item.shell | default('/bin/bash') }}</span>"</span>
    <span class="hljs-attr">create_home:</span> <span class="hljs-literal">yes</span>
    <span class="hljs-attr">state:</span> <span class="hljs-string">present</span>
  <span class="hljs-attr">loop:</span> <span class="hljs-string">"<span class="hljs-template-variable">{{ system_users | default([]) }}</span>"</span>
  <span class="hljs-attr">tags:</span> <span class="hljs-string">["users"]</span>

<span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Configure</span> <span class="hljs-string">SSH</span> <span class="hljs-string">keys</span>
  <span class="hljs-attr">authorized_key:</span>
    <span class="hljs-attr">user:</span> <span class="hljs-string">"<span class="hljs-template-variable">{{ item.0.name }}</span>"</span>
    <span class="hljs-attr">key:</span> <span class="hljs-string">"<span class="hljs-template-variable">{{ item.1 }}</span>"</span>
    <span class="hljs-attr">state:</span> <span class="hljs-string">present</span>
  <span class="hljs-attr">loop:</span> <span class="hljs-string">"<span class="hljs-template-variable">{{ system_users | subelements('ssh_keys', skip_missing=True) }}</span>"</span>
  <span class="hljs-attr">tags:</span> <span class="hljs-string">["users",</span> <span class="hljs-string">"ssh"</span><span class="hljs-string">]</span>

<span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Configure</span> <span class="hljs-string">system</span> <span class="hljs-string">limits</span>
  <span class="hljs-attr">pam_limits:</span>
    <span class="hljs-attr">domain:</span> <span class="hljs-string">"<span class="hljs-template-variable">{{ item.domain }}</span>"</span>
    <span class="hljs-attr">limit_type:</span> <span class="hljs-string">"<span class="hljs-template-variable">{{ item.type }}</span>"</span>
    <span class="hljs-attr">limit_item:</span> <span class="hljs-string">"<span class="hljs-template-variable">{{ item.item }}</span>"</span>
    <span class="hljs-attr">value:</span> <span class="hljs-string">"<span class="hljs-template-variable">{{ item.value }}</span>"</span>
  <span class="hljs-attr">loop:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">{</span> <span class="hljs-attr">domain:</span> <span class="hljs-string">"*"</span><span class="hljs-string">,</span> <span class="hljs-attr">type:</span> <span class="hljs-string">"soft"</span><span class="hljs-string">,</span> <span class="hljs-attr">item:</span> <span class="hljs-string">"nofile"</span><span class="hljs-string">,</span> <span class="hljs-attr">value:</span> <span class="hljs-string">"65536"</span> <span class="hljs-string">}</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">{</span> <span class="hljs-attr">domain:</span> <span class="hljs-string">"*"</span><span class="hljs-string">,</span> <span class="hljs-attr">type:</span> <span class="hljs-string">"hard"</span><span class="hljs-string">,</span> <span class="hljs-attr">item:</span> <span class="hljs-string">"nofile"</span><span class="hljs-string">,</span> <span class="hljs-attr">value:</span> <span class="hljs-string">"65536"</span> <span class="hljs-string">}</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">{</span> <span class="hljs-attr">domain:</span> <span class="hljs-string">"*"</span><span class="hljs-string">,</span> <span class="hljs-attr">type:</span> <span class="hljs-string">"soft"</span><span class="hljs-string">,</span> <span class="hljs-attr">item:</span> <span class="hljs-string">"nproc"</span><span class="hljs-string">,</span> <span class="hljs-attr">value:</span> <span class="hljs-string">"32768"</span> <span class="hljs-string">}</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">{</span> <span class="hljs-attr">domain:</span> <span class="hljs-string">"*"</span><span class="hljs-string">,</span> <span class="hljs-attr">type:</span> <span class="hljs-string">"hard"</span><span class="hljs-string">,</span> <span class="hljs-attr">item:</span> <span class="hljs-string">"nproc"</span><span class="hljs-string">,</span> <span class="hljs-attr">value:</span> <span class="hljs-string">"32768"</span> <span class="hljs-string">}</span>
  <span class="hljs-attr">tags:</span> <span class="hljs-string">["system",</span> <span class="hljs-string">"limits"</span><span class="hljs-string">]</span>

<span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Configure</span> <span class="hljs-string">kernel</span> <span class="hljs-string">parameters</span>
  <span class="hljs-attr">sysctl:</span>
    <span class="hljs-attr">name:</span> <span class="hljs-string">"<span class="hljs-template-variable">{{ item.name }}</span>"</span>
    <span class="hljs-attr">value:</span> <span class="hljs-string">"<span class="hljs-template-variable">{{ item.value }}</span>"</span>
    <span class="hljs-attr">state:</span> <span class="hljs-string">present</span>
    <span class="hljs-attr">reload:</span> <span class="hljs-literal">yes</span>
  <span class="hljs-attr">loop:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">{</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"vm.swappiness"</span><span class="hljs-string">,</span> <span class="hljs-attr">value:</span> <span class="hljs-string">"10"</span> <span class="hljs-string">}</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">{</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"vm.dirty_ratio"</span><span class="hljs-string">,</span> <span class="hljs-attr">value:</span> <span class="hljs-string">"15"</span> <span class="hljs-string">}</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">{</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"vm.dirty_background_ratio"</span><span class="hljs-string">,</span> <span class="hljs-attr">value:</span> <span class="hljs-string">"5"</span> <span class="hljs-string">}</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">{</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"net.core.rmem_max"</span><span class="hljs-string">,</span> <span class="hljs-attr">value:</span> <span class="hljs-string">"16777216"</span> <span class="hljs-string">}</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">{</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"net.core.wmem_max"</span><span class="hljs-string">,</span> <span class="hljs-attr">value:</span> <span class="hljs-string">"16777216"</span> <span class="hljs-string">}</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">{</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"net.ipv4.tcp_window_scaling"</span><span class="hljs-string">,</span> <span class="hljs-attr">value:</span> <span class="hljs-string">"1"</span> <span class="hljs-string">}</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">{</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"net.ipv4.tcp_timestamps"</span><span class="hljs-string">,</span> <span class="hljs-attr">value:</span> <span class="hljs-string">"1"</span> <span class="hljs-string">}</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">{</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"net.ipv4.tcp_sack"</span><span class="hljs-string">,</span> <span class="hljs-attr">value:</span> <span class="hljs-string">"1"</span> <span class="hljs-string">}</span>
  <span class="hljs-attr">tags:</span> <span class="hljs-string">["system",</span> <span class="hljs-string">"kernel"</span><span class="hljs-string">,</span> <span class="hljs-string">"performance"</span><span class="hljs-string">]</span>
</div></code></pre>
<h3 id="configuration-management-standards">Configuration Management Standards</h3>
<pre class="hljs"><code><div><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># config-management-standards.sh</span>

<span class="hljs-comment"># Configuration file standards</span>
CONFIG_DIR=<span class="hljs-string">"/etc/myapp"</span>
CONFIG_BACKUP_DIR=<span class="hljs-string">"/etc/myapp/backups"</span>
CONFIG_TEMPLATE_DIR=<span class="hljs-string">"/etc/myapp/templates"</span>

<span class="hljs-comment"># Ensure proper directory structure</span>
<span class="hljs-function"><span class="hljs-title">create_config_structure</span></span>() {
    <span class="hljs-built_in">local</span> <span class="hljs-built_in">dirs</span>=(
        <span class="hljs-string">"<span class="hljs-variable">$CONFIG_DIR</span>"</span>
        <span class="hljs-string">"<span class="hljs-variable">$CONFIG_BACKUP_DIR</span>"</span>
        <span class="hljs-string">"<span class="hljs-variable">$CONFIG_TEMPLATE_DIR</span>"</span>
        <span class="hljs-string">"<span class="hljs-variable">$CONFIG_DIR</span>/conf.d"</span>
        <span class="hljs-string">"<span class="hljs-variable">$CONFIG_DIR</span>/ssl"</span>
        <span class="hljs-string">"<span class="hljs-variable">$CONFIG_DIR</span>/scripts"</span>
    )

    <span class="hljs-keyword">for</span> dir <span class="hljs-keyword">in</span> <span class="hljs-string">"<span class="hljs-variable">${dirs[@]}</span>"</span>; <span class="hljs-keyword">do</span>
        mkdir -p <span class="hljs-string">"<span class="hljs-variable">$dir</span>"</span>
        chown root:root <span class="hljs-string">"<span class="hljs-variable">$dir</span>"</span>
        chmod 755 <span class="hljs-string">"<span class="hljs-variable">$dir</span>"</span>
    <span class="hljs-keyword">done</span>

    <span class="hljs-comment"># Secure SSL directory</span>
    chmod 700 <span class="hljs-string">"<span class="hljs-variable">$CONFIG_DIR</span>/ssl"</span>
}

<span class="hljs-comment"># Configuration file management</span>
<span class="hljs-function"><span class="hljs-title">manage_config_file</span></span>() {
    <span class="hljs-built_in">local</span> config_file=<span class="hljs-string">"<span class="hljs-variable">$1</span>"</span>
    <span class="hljs-built_in">local</span> template_file=<span class="hljs-string">"<span class="hljs-variable">$2</span>"</span>
    <span class="hljs-built_in">local</span> backup_suffix=<span class="hljs-string">"<span class="hljs-variable">$(date +%Y%m%d_%H%M%S)</span>"</span>

    <span class="hljs-comment"># Validate inputs</span>
    <span class="hljs-keyword">if</span> [[ ! -f <span class="hljs-string">"<span class="hljs-variable">$template_file</span>"</span> ]]; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"Error: Template file not found: <span class="hljs-variable">$template_file</span>"</span>
        <span class="hljs-built_in">return</span> 1
    <span class="hljs-keyword">fi</span>

    <span class="hljs-comment"># Backup existing configuration</span>
    <span class="hljs-keyword">if</span> [[ -f <span class="hljs-string">"<span class="hljs-variable">$config_file</span>"</span> ]]; <span class="hljs-keyword">then</span>
        cp <span class="hljs-string">"<span class="hljs-variable">$config_file</span>"</span> <span class="hljs-string">"<span class="hljs-variable">${CONFIG_BACKUP_DIR}</span>/<span class="hljs-variable">$(basename "$config_file")</span>.<span class="hljs-variable">${backup_suffix}</span>"</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"Backed up existing config: <span class="hljs-variable">$config_file</span>"</span>
    <span class="hljs-keyword">fi</span>

    <span class="hljs-comment"># Validate new configuration</span>
    <span class="hljs-keyword">if</span> validate_config <span class="hljs-string">"<span class="hljs-variable">$template_file</span>"</span>; <span class="hljs-keyword">then</span>
        cp <span class="hljs-string">"<span class="hljs-variable">$template_file</span>"</span> <span class="hljs-string">"<span class="hljs-variable">$config_file</span>"</span>
        chown root:root <span class="hljs-string">"<span class="hljs-variable">$config_file</span>"</span>
        chmod 644 <span class="hljs-string">"<span class="hljs-variable">$config_file</span>"</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"Configuration updated: <span class="hljs-variable">$config_file</span>"</span>
        <span class="hljs-built_in">return</span> 0
    <span class="hljs-keyword">else</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"Error: Configuration validation failed"</span>
        <span class="hljs-built_in">return</span> 1
    <span class="hljs-keyword">fi</span>
}

<span class="hljs-comment"># Configuration validation</span>
<span class="hljs-function"><span class="hljs-title">validate_config</span></span>() {
    <span class="hljs-built_in">local</span> config_file=<span class="hljs-string">"<span class="hljs-variable">$1</span>"</span>

    <span class="hljs-comment"># Syntax validation (example for nginx)</span>
    <span class="hljs-keyword">if</span> [[ <span class="hljs-string">"<span class="hljs-variable">$config_file</span>"</span> =~ nginx ]]; <span class="hljs-keyword">then</span>
        nginx -t -c <span class="hljs-string">"<span class="hljs-variable">$config_file</span>"</span> 2&gt;/dev/null
        <span class="hljs-built_in">return</span> $?
    <span class="hljs-keyword">fi</span>

    <span class="hljs-comment"># Syntax validation (example for apache)</span>
    <span class="hljs-keyword">if</span> [[ <span class="hljs-string">"<span class="hljs-variable">$config_file</span>"</span> =~ apache ]]; <span class="hljs-keyword">then</span>
        apache2ctl -t -f <span class="hljs-string">"<span class="hljs-variable">$config_file</span>"</span> 2&gt;/dev/null
        <span class="hljs-built_in">return</span> $?
    <span class="hljs-keyword">fi</span>

    <span class="hljs-comment"># Generic validation (check for basic syntax)</span>
    <span class="hljs-keyword">if</span> [[ -f <span class="hljs-string">"<span class="hljs-variable">$config_file</span>"</span> ]]; <span class="hljs-keyword">then</span>
        <span class="hljs-comment"># Check for common syntax errors</span>
        <span class="hljs-keyword">if</span> grep -q <span class="hljs-string">"^[[:space:]]*$"</span> <span class="hljs-string">"<span class="hljs-variable">$config_file</span>"</span> &amp;&amp; \
           ! grep -q <span class="hljs-string">"[{}].*[{}]"</span> <span class="hljs-string">"<span class="hljs-variable">$config_file</span>"</span>; <span class="hljs-keyword">then</span>
            <span class="hljs-built_in">return</span> 0
        <span class="hljs-keyword">fi</span>
    <span class="hljs-keyword">fi</span>

    <span class="hljs-built_in">return</span> 1
}

<span class="hljs-comment"># Configuration rollback</span>
<span class="hljs-function"><span class="hljs-title">rollback_config</span></span>() {
    <span class="hljs-built_in">local</span> config_file=<span class="hljs-string">"<span class="hljs-variable">$1</span>"</span>
    <span class="hljs-built_in">local</span> backup_file=<span class="hljs-string">"<span class="hljs-variable">$2</span>"</span>

    <span class="hljs-keyword">if</span> [[ -f <span class="hljs-string">"<span class="hljs-variable">$backup_file</span>"</span> ]]; <span class="hljs-keyword">then</span>
        cp <span class="hljs-string">"<span class="hljs-variable">$backup_file</span>"</span> <span class="hljs-string">"<span class="hljs-variable">$config_file</span>"</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"Configuration rolled back: <span class="hljs-variable">$config_file</span>"</span>

        <span class="hljs-comment"># Restart associated service</span>
        <span class="hljs-built_in">local</span> service_name=$(basename <span class="hljs-string">"<span class="hljs-variable">$config_file</span>"</span> | cut -d<span class="hljs-string">'.'</span> -f1)
        <span class="hljs-keyword">if</span> systemctl is-enabled <span class="hljs-string">"<span class="hljs-variable">$service_name</span>"</span> &amp;&gt;/dev/null; <span class="hljs-keyword">then</span>
            systemctl restart <span class="hljs-string">"<span class="hljs-variable">$service_name</span>"</span>
            <span class="hljs-built_in">echo</span> <span class="hljs-string">"Service restarted: <span class="hljs-variable">$service_name</span>"</span>
        <span class="hljs-keyword">fi</span>
    <span class="hljs-keyword">else</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"Error: Backup file not found: <span class="hljs-variable">$backup_file</span>"</span>
        <span class="hljs-built_in">return</span> 1
    <span class="hljs-keyword">fi</span>
}

<span class="hljs-comment"># Configuration audit</span>
<span class="hljs-function"><span class="hljs-title">audit_configurations</span></span>() {
    <span class="hljs-built_in">local</span> audit_log=<span class="hljs-string">"/var/log/config-audit-<span class="hljs-variable">$(date +%Y%m%d)</span>.log"</span>

    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Configuration Audit Report - <span class="hljs-variable">$(date)</span>"</span> &gt; <span class="hljs-string">"<span class="hljs-variable">$audit_log</span>"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"========================================="</span> &gt;&gt; <span class="hljs-string">"<span class="hljs-variable">$audit_log</span>"</span>

    <span class="hljs-comment"># Check file permissions</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"File Permissions:"</span> &gt;&gt; <span class="hljs-string">"<span class="hljs-variable">$audit_log</span>"</span>
    find <span class="hljs-string">"<span class="hljs-variable">$CONFIG_DIR</span>"</span> -<span class="hljs-built_in">type</span> f -<span class="hljs-built_in">exec</span> ls -la {} \; &gt;&gt; <span class="hljs-string">"<span class="hljs-variable">$audit_log</span>"</span>

    <span class="hljs-comment"># Check for sensitive data</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"\nSensitive Data Check:"</span> &gt;&gt; <span class="hljs-string">"<span class="hljs-variable">$audit_log</span>"</span>
    grep -r <span class="hljs-string">"password\|secret\|key"</span> <span class="hljs-string">"<span class="hljs-variable">$CONFIG_DIR</span>"</span> --exclude-dir=ssl &gt;&gt; <span class="hljs-string">"<span class="hljs-variable">$audit_log</span>"</span> 2&gt;/dev/null || <span class="hljs-built_in">echo</span> <span class="hljs-string">"No sensitive data found in configs"</span> &gt;&gt; <span class="hljs-string">"<span class="hljs-variable">$audit_log</span>"</span>

    <span class="hljs-comment"># Check configuration syntax</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"\nConfiguration Validation:"</span> &gt;&gt; <span class="hljs-string">"<span class="hljs-variable">$audit_log</span>"</span>
    find <span class="hljs-string">"<span class="hljs-variable">$CONFIG_DIR</span>"</span> -name <span class="hljs-string">"*.conf"</span> -o -name <span class="hljs-string">"*.cfg"</span> | <span class="hljs-keyword">while</span> <span class="hljs-built_in">read</span> config; <span class="hljs-keyword">do</span>
        <span class="hljs-keyword">if</span> validate_config <span class="hljs-string">"<span class="hljs-variable">$config</span>"</span>; <span class="hljs-keyword">then</span>
            <span class="hljs-built_in">echo</span> <span class="hljs-string">"‚úì Valid: <span class="hljs-variable">$config</span>"</span> &gt;&gt; <span class="hljs-string">"<span class="hljs-variable">$audit_log</span>"</span>
        <span class="hljs-keyword">else</span>
            <span class="hljs-built_in">echo</span> <span class="hljs-string">"‚úó Invalid: <span class="hljs-variable">$config</span>"</span> &gt;&gt; <span class="hljs-string">"<span class="hljs-variable">$audit_log</span>"</span>
        <span class="hljs-keyword">fi</span>
    <span class="hljs-keyword">done</span>

    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Audit completed: <span class="hljs-variable">$audit_log</span>"</span>
}

<span class="hljs-comment"># Example usage</span>
create_config_structure
<span class="hljs-comment"># manage_config_file "/etc/nginx/nginx.conf" "/etc/myapp/templates/nginx.conf.template"</span>
<span class="hljs-comment"># audit_configurations</span>
</div></code></pre>
<h2 id="%F0%9F%94%92-security-hardening-best-practices">üîí Security Hardening Best Practices</h2>
<h3 id="comprehensive-security-hardening">Comprehensive Security Hardening</h3>
<pre class="hljs"><code><div><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># security-hardening.sh - Comprehensive security hardening script</span>

SECURITY_LOG=<span class="hljs-string">"/var/log/security-hardening.log"</span>
BACKUP_DIR=<span class="hljs-string">"/backup/security-<span class="hljs-variable">$(date +%Y%m%d_%H%M%S)</span>"</span>

<span class="hljs-function"><span class="hljs-title">log</span></span>() {
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"[<span class="hljs-variable">$(date '+%Y-%m-%d %H:%M:%S')</span>] $*"</span> | tee -a <span class="hljs-string">"<span class="hljs-variable">$SECURITY_LOG</span>"</span>
}

<span class="hljs-comment"># Create backup directory</span>
mkdir -p <span class="hljs-string">"<span class="hljs-variable">$BACKUP_DIR</span>"</span>

<span class="hljs-built_in">log</span> <span class="hljs-string">"Starting comprehensive security hardening"</span>

<span class="hljs-comment"># 1. System Updates</span>
<span class="hljs-function"><span class="hljs-title">harden_system_updates</span></span>() {
    <span class="hljs-built_in">log</span> <span class="hljs-string">"=== SYSTEM UPDATES ==="</span>

    <span class="hljs-comment"># Update package database</span>
    apt update

    <span class="hljs-comment"># Upgrade all packages</span>
    apt upgrade -y

    <span class="hljs-comment"># Remove unnecessary packages</span>
    apt autoremove -y

    <span class="hljs-comment"># Configure automatic security updates</span>
    cat &gt; /etc/apt/apt.conf.d/20auto-upgrades &lt;&lt; EOF
APT::Periodic::Update-Package-Lists <span class="hljs-string">"1"</span>;
APT::Periodic::Unattended-Upgrade <span class="hljs-string">"1"</span>;
APT::Periodic::AutocleanInterval <span class="hljs-string">"7"</span>;
EOF

    <span class="hljs-comment"># Configure unattended upgrades</span>
    cat &gt; /etc/apt/apt.conf.d/50unattended-upgrades &lt;&lt; EOF
Unattended-Upgrade::Allowed-Origins {
    <span class="hljs-string">"\${distro_id}:\${distro_codename}-security"</span>;
    <span class="hljs-string">"\${distro_id}ESMApps:\${distro_codename}-apps-security"</span>;
    <span class="hljs-string">"\${distro_id}ESM:\${distro_codename}-infra-security"</span>;
};
Unattended-Upgrade::AutoFixInterruptedDpkg <span class="hljs-string">"true"</span>;
Unattended-Upgrade::MinimalSteps <span class="hljs-string">"true"</span>;
Unattended-Upgrade::Remove-Unused-Dependencies <span class="hljs-string">"true"</span>;
Unattended-Upgrade::Automatic-Reboot <span class="hljs-string">"false"</span>;
EOF

    <span class="hljs-built_in">log</span> <span class="hljs-string">"System updates configured"</span>
}

<span class="hljs-comment"># 2. SSH Hardening</span>
<span class="hljs-function"><span class="hljs-title">harden_ssh</span></span>() {
    <span class="hljs-built_in">log</span> <span class="hljs-string">"=== SSH HARDENING ==="</span>

    <span class="hljs-comment"># Backup original SSH config</span>
    cp /etc/ssh/sshd_config <span class="hljs-string">"<span class="hljs-variable">$BACKUP_DIR</span>/sshd_config.backup"</span>

    <span class="hljs-comment"># Create hardened SSH configuration</span>
    cat &gt; /etc/ssh/sshd_config &lt;&lt; EOF
<span class="hljs-comment"># SSH Hardened Configuration</span>
Port 2222
Protocol 2
HostKey /etc/ssh/ssh_host_rsa_key
HostKey /etc/ssh/ssh_host_ecdsa_key
HostKey /etc/ssh/ssh_host_ed25519_key

<span class="hljs-comment"># Authentication</span>
PermitRootLogin no
PasswordAuthentication no
PubkeyAuthentication yes
AuthenticationMethods publickey
PermitEmptyPasswords no
ChallengeResponseAuthentication no
UsePAM yes

<span class="hljs-comment"># Security settings</span>
X11Forwarding no
AllowTcpForwarding no
AllowAgentForwarding no
PermitTunnel no
GatewayPorts no
PermitUserEnvironment no

<span class="hljs-comment"># Connection settings</span>
ClientAliveInterval 300
ClientAliveCountMax 2
MaxAuthTries 3
MaxSessions 2
MaxStartups 2
LoginGraceTime 60

<span class="hljs-comment"># Logging</span>
SyslogFacility AUTH
LogLevel VERBOSE

<span class="hljs-comment"># Allowed users/groups</span>
AllowGroups ssh-users

<span class="hljs-comment"># Ciphers and algorithms</span>
Ciphers chacha20-poly1305@openssh.com,aes256-gcm@openssh.com,aes128-gcm@openssh.com,aes256-ctr,aes192-ctr,aes128-ctr
MACs hmac-sha2-256-etm@openssh.com,hmac-sha2-512-etm@openssh.com,hmac-sha2-256,hmac-sha2-512
KexAlgorithms curve25519-sha256@libssh.org,ecdh-sha2-nistp521,ecdh-sha2-nistp384,ecdh-sha2-nistp256,diffie-hellman-group16-sha512,diffie-hellman-group18-sha512,diffie-hellman-group14-sha256
EOF

    <span class="hljs-comment"># Create SSH users group</span>
    groupadd -f ssh-users

    <span class="hljs-comment"># Test SSH configuration</span>
    <span class="hljs-keyword">if</span> sshd -t; <span class="hljs-keyword">then</span>
        systemctl restart ssh
        <span class="hljs-built_in">log</span> <span class="hljs-string">"SSH hardening completed successfully"</span>
    <span class="hljs-keyword">else</span>
        <span class="hljs-built_in">log</span> <span class="hljs-string">"ERROR: SSH configuration invalid, restoring backup"</span>
        cp <span class="hljs-string">"<span class="hljs-variable">$BACKUP_DIR</span>/sshd_config.backup"</span> /etc/ssh/sshd_config
        systemctl restart ssh
    <span class="hljs-keyword">fi</span>
}

<span class="hljs-comment"># 3. Firewall Configuration</span>
<span class="hljs-function"><span class="hljs-title">harden_firewall</span></span>() {
    <span class="hljs-built_in">log</span> <span class="hljs-string">"=== FIREWALL HARDENING ==="</span>

    <span class="hljs-comment"># Reset UFW to defaults</span>
    ufw --force reset

    <span class="hljs-comment"># Set default policies</span>
    ufw default deny incoming
    ufw default allow outgoing
    ufw default deny forward

    <span class="hljs-comment"># Allow SSH (custom port)</span>
    ufw allow 2222/tcp comment <span class="hljs-string">'SSH'</span>

    <span class="hljs-comment"># Allow HTTP/HTTPS</span>
    ufw allow 80/tcp comment <span class="hljs-string">'HTTP'</span>
    ufw allow 443/tcp comment <span class="hljs-string">'HTTPS'</span>

    <span class="hljs-comment"># Rate limiting for SSH</span>
    ufw <span class="hljs-built_in">limit</span> 2222/tcp

    <span class="hljs-comment"># Enable logging</span>
    ufw logging on

    <span class="hljs-comment"># Enable firewall</span>
    ufw --force <span class="hljs-built_in">enable</span>

    <span class="hljs-built_in">log</span> <span class="hljs-string">"Firewall hardening completed"</span>
}

<span class="hljs-comment"># 4. Kernel Hardening</span>
<span class="hljs-function"><span class="hljs-title">harden_kernel</span></span>() {
    <span class="hljs-built_in">log</span> <span class="hljs-string">"=== KERNEL HARDENING ==="</span>

    <span class="hljs-comment"># Backup original sysctl configuration</span>
    cp /etc/sysctl.conf <span class="hljs-string">"<span class="hljs-variable">$BACKUP_DIR</span>/sysctl.conf.backup"</span>

    <span class="hljs-comment"># Create hardened sysctl configuration</span>
    cat &gt;&gt; /etc/sysctl.conf &lt;&lt; EOF

<span class="hljs-comment"># Security hardening parameters</span>
<span class="hljs-comment"># Network security</span>
net.ipv4.ip_forward = 0
net.ipv4.conf.all.send_redirects = 0
net.ipv4.conf.default.send_redirects = 0
net.ipv4.conf.all.accept_redirects = 0
net.ipv4.conf.default.accept_redirects = 0
net.ipv4.conf.all.secure_redirects = 0
net.ipv4.conf.default.secure_redirects = 0
net.ipv6.conf.all.accept_redirects = 0
net.ipv6.conf.default.accept_redirects = 0
net.ipv4.conf.all.accept_source_route = 0
net.ipv4.conf.default.accept_source_route = 0
net.ipv6.conf.all.accept_source_route = 0
net.ipv6.conf.default.accept_source_route = 0
net.ipv4.conf.all.log_martians = 1
net.ipv4.conf.default.log_martians = 1
net.ipv4.icmp_echo_ignore_broadcasts = 1
net.ipv4.icmp_ignore_bogus_error_responses = 1
net.ipv4.tcp_syncookies = 1
net.ipv4.conf.all.rp_filter = 1
net.ipv4.conf.default.rp_filter = 1

<span class="hljs-comment"># Memory protection</span>
kernel.dmesg_restrict = 1
kernel.kptr_restrict = 2
kernel.yama.ptrace_scope = 1
kernel.kexec_load_disabled = 1

<span class="hljs-comment"># File system protection</span>
fs.protected_hardlinks = 1
fs.protected_symlinks = 1
fs.suid_dumpable = 0

<span class="hljs-comment"># Process restrictions</span>
kernel.core_uses_pid = 1
kernel.ctrl-alt-del = 0
EOF

    <span class="hljs-comment"># Apply sysctl settings</span>
    sysctl -p

    <span class="hljs-built_in">log</span> <span class="hljs-string">"Kernel hardening completed"</span>
}

<span class="hljs-comment"># 5. File System Hardening</span>
<span class="hljs-function"><span class="hljs-title">harden_filesystem</span></span>() {
    <span class="hljs-built_in">log</span> <span class="hljs-string">"=== FILESYSTEM HARDENING ==="</span>

    <span class="hljs-comment"># Set proper permissions on critical files</span>
    chmod 600 /etc/shadow
    chmod 600 /etc/gshadow
    chmod 644 /etc/passwd
    chmod 644 /etc/group

    <span class="hljs-comment"># Secure /tmp with proper mount options</span>
    <span class="hljs-keyword">if</span> ! grep -q <span class="hljs-string">"/tmp"</span> /etc/fstab; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"tmpfs /tmp tmpfs defaults,nodev,nosuid,noexec,size=1G 0 0"</span> &gt;&gt; /etc/fstab
    <span class="hljs-keyword">fi</span>

    <span class="hljs-comment"># Remove unnecessary SUID/SGID binaries</span>
    <span class="hljs-built_in">local</span> suid_binaries=(
        <span class="hljs-string">"/usr/bin/at"</span>
        <span class="hljs-string">"/usr/bin/wall"</span>
        <span class="hljs-string">"/usr/bin/write"</span>
        <span class="hljs-string">"/usr/bin/chfn"</span>
        <span class="hljs-string">"/usr/bin/chsh"</span>
        <span class="hljs-string">"/usr/bin/newgrp"</span>
    )

    <span class="hljs-keyword">for</span> binary <span class="hljs-keyword">in</span> <span class="hljs-string">"<span class="hljs-variable">${suid_binaries[@]}</span>"</span>; <span class="hljs-keyword">do</span>
        <span class="hljs-keyword">if</span> [[ -f <span class="hljs-string">"<span class="hljs-variable">$binary</span>"</span> ]]; <span class="hljs-keyword">then</span>
            chmod u<span class="hljs-_">-s</span> <span class="hljs-string">"<span class="hljs-variable">$binary</span>"</span>
            <span class="hljs-built_in">log</span> <span class="hljs-string">"Removed SUID bit from <span class="hljs-variable">$binary</span>"</span>
        <span class="hljs-keyword">fi</span>
    <span class="hljs-keyword">done</span>

    <span class="hljs-comment"># Set umask for better default permissions</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"umask 027"</span> &gt;&gt; /etc/profile
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"umask 027"</span> &gt;&gt; /etc/bash.bashrc

    <span class="hljs-built_in">log</span> <span class="hljs-string">"Filesystem hardening completed"</span>
}

<span class="hljs-comment"># 6. Service Hardening</span>
<span class="hljs-function"><span class="hljs-title">harden_services</span></span>() {
    <span class="hljs-built_in">log</span> <span class="hljs-string">"=== SERVICE HARDENING ==="</span>

    <span class="hljs-comment"># Disable unnecessary services</span>
    <span class="hljs-built_in">local</span> services_to_disable=(
        <span class="hljs-string">"avahi-daemon"</span>
        <span class="hljs-string">"cups"</span>
        <span class="hljs-string">"bluetooth"</span>
        <span class="hljs-string">"whoopsie"</span>
        <span class="hljs-string">"apport"</span>
    )

    <span class="hljs-keyword">for</span> service <span class="hljs-keyword">in</span> <span class="hljs-string">"<span class="hljs-variable">${services_to_disable[@]}</span>"</span>; <span class="hljs-keyword">do</span>
        <span class="hljs-keyword">if</span> systemctl is-enabled <span class="hljs-string">"<span class="hljs-variable">$service</span>"</span> &amp;&gt;/dev/null; <span class="hljs-keyword">then</span>
            systemctl <span class="hljs-built_in">disable</span> <span class="hljs-string">"<span class="hljs-variable">$service</span>"</span>
            systemctl stop <span class="hljs-string">"<span class="hljs-variable">$service</span>"</span>
            <span class="hljs-built_in">log</span> <span class="hljs-string">"Disabled service: <span class="hljs-variable">$service</span>"</span>
        <span class="hljs-keyword">fi</span>
    <span class="hljs-keyword">done</span>

    <span class="hljs-comment"># Configure fail2ban</span>
    apt install -y fail2ban

    cat &gt; /etc/fail2ban/jail.local &lt;&lt; EOF
[DEFAULT]
bantime = 3600
findtime = 600
maxretry = 3
backend = systemd

[sshd]
enabled = <span class="hljs-literal">true</span>
port = 2222
logpath = /var/<span class="hljs-built_in">log</span>/auth.log
maxretry = 3
bantime = 3600

[nginx-http-auth]
enabled = <span class="hljs-literal">true</span>
port = http,https
logpath = /var/<span class="hljs-built_in">log</span>/nginx/error.log
maxretry = 3

[nginx-noscript]
enabled = <span class="hljs-literal">true</span>
port = http,https
logpath = /var/<span class="hljs-built_in">log</span>/nginx/access.log
maxretry = 6
EOF

    systemctl <span class="hljs-built_in">enable</span> fail2ban
    systemctl start fail2ban

    <span class="hljs-built_in">log</span> <span class="hljs-string">"Service hardening completed"</span>
}

<span class="hljs-comment"># 7. Audit Configuration</span>
<span class="hljs-function"><span class="hljs-title">harden_audit</span></span>() {
    <span class="hljs-built_in">log</span> <span class="hljs-string">"=== AUDIT HARDENING ==="</span>

    <span class="hljs-comment"># Install auditd</span>
    apt install -y auditd audispd-plugins

    <span class="hljs-comment"># Configure audit rules</span>
    cat &gt; /etc/audit/rules.d/hardening.rules &lt;&lt; EOF
<span class="hljs-comment"># Delete all existing rules</span>
-D

<span class="hljs-comment"># Buffer size</span>
-b 8192

<span class="hljs-comment"># Failure mode (0=silent, 1=printk, 2=panic)</span>
-f 1

<span class="hljs-comment"># Monitor authentication events</span>
-w /etc/passwd -p wa -k identity
-w /etc/group -p wa -k identity
-w /etc/shadow -p wa -k identity
-w /etc/gshadow -p wa -k identity

<span class="hljs-comment"># Monitor system configuration changes</span>
-w /etc/ssh/sshd_config -p wa -k ssh_config
-w /etc/sudoers -p wa -k sudo_config
-w /etc/hosts -p wa -k network_config

<span class="hljs-comment"># Monitor privilege escalation</span>
-a always,<span class="hljs-built_in">exit</span> -F arch=b64 -S execve -F euid=0 -F auid&gt;=1000 -F auid!=4294967295 -k privilege_escalation
-a always,<span class="hljs-built_in">exit</span> -F arch=b32 -S execve -F euid=0 -F auid&gt;=1000 -F auid!=4294967295 -k privilege_escalation

<span class="hljs-comment"># Monitor file access</span>
-a always,<span class="hljs-built_in">exit</span> -F arch=b64 -S open,openat,creat -F <span class="hljs-built_in">exit</span>=-EACCES -k file_access
-a always,<span class="hljs-built_in">exit</span> -F arch=b64 -S open,openat,creat -F <span class="hljs-built_in">exit</span>=-EPERM -k file_access

<span class="hljs-comment"># Lock the configuration</span>
-e 2
EOF

    <span class="hljs-comment"># Restart auditd</span>
    systemctl <span class="hljs-built_in">enable</span> auditd
    systemctl restart auditd

    <span class="hljs-built_in">log</span> <span class="hljs-string">"Audit hardening completed"</span>
}

<span class="hljs-comment"># 8. Generate security report</span>
<span class="hljs-function"><span class="hljs-title">generate_security_report</span></span>() {
    <span class="hljs-built_in">log</span> <span class="hljs-string">"=== GENERATING SECURITY REPORT ==="</span>

    <span class="hljs-built_in">local</span> report_file=<span class="hljs-string">"/var/log/security-report-<span class="hljs-variable">$(date +%Y%m%d_%H%M%S)</span>.txt"</span>

    cat &gt; <span class="hljs-string">"<span class="hljs-variable">$report_file</span>"</span> &lt;&lt; EOF
Security Hardening Report
========================
Date: $(date)
Hostname: $(hostname)
OS: $(lsb_release -d | cut -f2)
Kernel: $(uname -r)

Hardening Steps Completed:
- System updates and automatic security updates
- SSH hardening (port 2222, key-only auth)
- Firewall configuration (UFW)
- Kernel parameter hardening
- File system permissions hardening
- Service hardening and fail2ban
- Audit system configuration

Security Status:
- SSH Port: 2222
- Root Login: Disabled
- Password Auth: Disabled
- Firewall: Enabled
- Fail2ban: Active
- Audit: Enabled

Next Steps:
- Regular security updates
- Monitor audit logs
- Review fail2ban logs
- Periodic security assessments

Backup Location: <span class="hljs-variable">$BACKUP_DIR</span>
EOF

    <span class="hljs-built_in">log</span> <span class="hljs-string">"Security report generated: <span class="hljs-variable">$report_file</span>"</span>

    <span class="hljs-comment"># Send report via email if configured</span>
    <span class="hljs-keyword">if</span> <span class="hljs-built_in">command</span> -v mail &amp;&gt; /dev/null; <span class="hljs-keyword">then</span>
        mail -s <span class="hljs-string">"Security Hardening Report - <span class="hljs-variable">$(hostname)</span>"</span> admin@example.com &lt; <span class="hljs-string">"<span class="hljs-variable">$report_file</span>"</span>
    <span class="hljs-keyword">fi</span>
}

<span class="hljs-comment"># Main execution</span>
<span class="hljs-keyword">if</span> [[ <span class="hljs-variable">$EUID</span> -ne 0 ]]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"This script must be run as root"</span>
    <span class="hljs-built_in">exit</span> 1
<span class="hljs-keyword">fi</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"WARNING: This script will make significant security changes to your system."</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Ensure you have console access and backups before proceeding."</span>
<span class="hljs-built_in">read</span> -p <span class="hljs-string">"Continue? (y/N): "</span> -n 1 -r
<span class="hljs-built_in">echo</span>

<span class="hljs-keyword">if</span> [[ <span class="hljs-variable">$REPLY</span> =~ ^[Yy]$ ]]; <span class="hljs-keyword">then</span>
    harden_system_updates
    harden_ssh
    harden_firewall
    harden_kernel
    harden_filesystem
    harden_services
    harden_audit
    generate_security_report

    <span class="hljs-built_in">log</span> <span class="hljs-string">"Security hardening completed successfully"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"IMPORTANT: SSH port changed to 2222. Update your connection settings."</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Reboot recommended to apply all changes."</span>
<span class="hljs-keyword">else</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Security hardening cancelled."</span>
<span class="hljs-keyword">fi</span>
</div></code></pre>
<h2 id="%F0%9F%93%88-performance-optimization-strategies">üìà Performance Optimization Strategies</h2>
<h3 id="system-performance-tuning">System Performance Tuning</h3>
<pre class="hljs"><code><div><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># performance-optimization.sh - Comprehensive performance tuning</span>

PERF_LOG=<span class="hljs-string">"/var/log/performance-tuning.log"</span>
BENCHMARK_DIR=<span class="hljs-string">"/tmp/benchmarks-<span class="hljs-variable">$(date +%Y%m%d_%H%M%S)</span>"</span>

<span class="hljs-function"><span class="hljs-title">log</span></span>() {
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"[<span class="hljs-variable">$(date '+%Y-%m-%d %H:%M:%S')</span>] $*"</span> | tee -a <span class="hljs-string">"<span class="hljs-variable">$PERF_LOG</span>"</span>
}

mkdir -p <span class="hljs-string">"<span class="hljs-variable">$BENCHMARK_DIR</span>"</span>

<span class="hljs-built_in">log</span> <span class="hljs-string">"Starting comprehensive performance optimization"</span>

<span class="hljs-comment"># Baseline performance measurement</span>
<span class="hljs-function"><span class="hljs-title">baseline_performance</span></span>() {
    <span class="hljs-built_in">log</span> <span class="hljs-string">"=== BASELINE PERFORMANCE MEASUREMENT ==="</span>

    <span class="hljs-comment"># CPU performance</span>
    <span class="hljs-built_in">log</span> <span class="hljs-string">"CPU Performance Test:"</span>
    sysbench cpu --cpu-max-prime=20000 --threads=$(nproc) run &gt; <span class="hljs-string">"<span class="hljs-variable">$BENCHMARK_DIR</span>/cpu_baseline.txt"</span> 2&gt;&amp;1

    <span class="hljs-comment"># Memory performance</span>
    <span class="hljs-built_in">log</span> <span class="hljs-string">"Memory Performance Test:"</span>
    sysbench memory --memory-total-size=10G run &gt; <span class="hljs-string">"<span class="hljs-variable">$BENCHMARK_DIR</span>/memory_baseline.txt"</span> 2&gt;&amp;1

    <span class="hljs-comment"># Disk I/O performance</span>
    <span class="hljs-built_in">log</span> <span class="hljs-string">"Disk I/O Performance Test:"</span>
    sysbench fileio --file-total-size=5G prepare &gt; /dev/null 2&gt;&amp;1
    sysbench fileio --file-total-size=5G --file-test-mode=rndrw run &gt; <span class="hljs-string">"<span class="hljs-variable">$BENCHMARK_DIR</span>/disk_baseline.txt"</span> 2&gt;&amp;1
    sysbench fileio --file-total-size=5G cleanup &gt; /dev/null 2&gt;&amp;1

    <span class="hljs-comment"># Network performance (if iperf3 is available)</span>
    <span class="hljs-keyword">if</span> <span class="hljs-built_in">command</span> -v iperf3 &amp;&gt; /dev/null; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">log</span> <span class="hljs-string">"Network Performance Test (loopback):"</span>
        iperf3 -s -D -p 5201
        sleep 2
        iperf3 -c 127.0.0.1 -p 5201 -t 10 &gt; <span class="hljs-string">"<span class="hljs-variable">$BENCHMARK_DIR</span>/network_baseline.txt"</span> 2&gt;&amp;1
        pkill iperf3
    <span class="hljs-keyword">fi</span>

    <span class="hljs-built_in">log</span> <span class="hljs-string">"Baseline measurements completed"</span>
}

<span class="hljs-comment"># CPU optimization</span>
<span class="hljs-function"><span class="hljs-title">optimize_cpu</span></span>() {
    <span class="hljs-built_in">log</span> <span class="hljs-string">"=== CPU OPTIMIZATION ==="</span>

    <span class="hljs-comment"># Set CPU governor to performance</span>
    <span class="hljs-keyword">if</span> [[ -f /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor ]]; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">echo</span> performance | tee /sys/devices/system/cpu/cpu*/cpufreq/scaling_governor
        <span class="hljs-built_in">log</span> <span class="hljs-string">"CPU governor set to performance"</span>
    <span class="hljs-keyword">fi</span>

    <span class="hljs-comment"># Disable CPU mitigations for performance (security trade-off)</span>
    <span class="hljs-keyword">if</span> ! grep -q <span class="hljs-string">"mitigations=off"</span> /proc/cmdline; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">log</span> <span class="hljs-string">"WARNING: Consider adding 'mitigations=off' to GRUB for better performance (reduces security)"</span>
    <span class="hljs-keyword">fi</span>

    <span class="hljs-comment"># Configure CPU affinity for critical services</span>
    <span class="hljs-built_in">local</span> critical_services=(<span class="hljs-string">"nginx"</span> <span class="hljs-string">"mysql"</span> <span class="hljs-string">"postgresql"</span>)
    <span class="hljs-built_in">local</span> cpu_count=$(nproc)
    <span class="hljs-built_in">local</span> reserved_cpus=$((cpu_count - 1))

    <span class="hljs-keyword">for</span> service <span class="hljs-keyword">in</span> <span class="hljs-string">"<span class="hljs-variable">${critical_services[@]}</span>"</span>; <span class="hljs-keyword">do</span>
        <span class="hljs-keyword">if</span> systemctl is-active --quiet <span class="hljs-string">"<span class="hljs-variable">$service</span>"</span>; <span class="hljs-keyword">then</span>
            <span class="hljs-built_in">local</span> pid=$(systemctl show --property MainPID --value <span class="hljs-string">"<span class="hljs-variable">$service</span>"</span>)
            <span class="hljs-keyword">if</span> [[ <span class="hljs-string">"<span class="hljs-variable">$pid</span>"</span> != <span class="hljs-string">"0"</span> ]]; <span class="hljs-keyword">then</span>
                taskset -cp <span class="hljs-string">"0-<span class="hljs-variable">$reserved_cpus</span>"</span> <span class="hljs-string">"<span class="hljs-variable">$pid</span>"</span> 2&gt;/dev/null
                <span class="hljs-built_in">log</span> <span class="hljs-string">"Set CPU affinity for <span class="hljs-variable">$service</span> (PID: <span class="hljs-variable">$pid</span>)"</span>
            <span class="hljs-keyword">fi</span>
        <span class="hljs-keyword">fi</span>
    <span class="hljs-keyword">done</span>

    <span class="hljs-built_in">log</span> <span class="hljs-string">"CPU optimization completed"</span>
}

<span class="hljs-comment"># Memory optimization</span>
<span class="hljs-function"><span class="hljs-title">optimize_memory</span></span>() {
    <span class="hljs-built_in">log</span> <span class="hljs-string">"=== MEMORY OPTIMIZATION ==="</span>

    <span class="hljs-comment"># Configure swap settings</span>
    sysctl vm.swappiness=10
    sysctl vm.vfs_cache_pressure=50
    sysctl vm.dirty_ratio=15
    sysctl vm.dirty_background_ratio=5

    <span class="hljs-comment"># Configure huge pages for databases</span>
    <span class="hljs-built_in">local</span> total_mem_kb=$(grep MemTotal /proc/meminfo | awk <span class="hljs-string">'{print $2}'</span>)
    <span class="hljs-built_in">local</span> hugepage_size_kb=$(grep Hugepagesize /proc/meminfo | awk <span class="hljs-string">'{print $2}'</span>)
    <span class="hljs-built_in">local</span> hugepages_count=$((total_mem_kb / hugepage_size_kb / 4))  <span class="hljs-comment"># Use 25% for huge pages</span>

    <span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$hugepages_count</span>"</span> &gt; /sys/kernel/mm/hugepages/hugepages-<span class="hljs-variable">${hugepage_size_kb}</span>kB/nr_hugepages
    <span class="hljs-built_in">log</span> <span class="hljs-string">"Configured <span class="hljs-variable">$hugepages_count</span> huge pages"</span>

    <span class="hljs-comment"># Memory compaction</span>
    <span class="hljs-built_in">echo</span> 1 &gt; /proc/sys/vm/compact_memory

    <span class="hljs-comment"># Configure NUMA policy for multi-socket systems</span>
    <span class="hljs-keyword">if</span> [[ $(numactl --hardware | grep <span class="hljs-string">"available:"</span> | awk <span class="hljs-string">'{print $2}'</span>) -gt 1 ]]; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">log</span> <span class="hljs-string">"Multi-NUMA system detected, configuring NUMA policies"</span>
        <span class="hljs-comment"># Set NUMA balancing</span>
        <span class="hljs-built_in">echo</span> 1 &gt; /proc/sys/kernel/numa_balancing
    <span class="hljs-keyword">fi</span>

    <span class="hljs-built_in">log</span> <span class="hljs-string">"Memory optimization completed"</span>
}

<span class="hljs-comment"># Disk I/O optimization</span>
<span class="hljs-function"><span class="hljs-title">optimize_disk_io</span></span>() {
    <span class="hljs-built_in">log</span> <span class="hljs-string">"=== DISK I/O OPTIMIZATION ==="</span>

    <span class="hljs-comment"># Optimize I/O scheduler for different disk types</span>
    <span class="hljs-keyword">for</span> disk <span class="hljs-keyword">in</span> /sys/block/*/queue/scheduler; <span class="hljs-keyword">do</span>
        <span class="hljs-built_in">local</span> device=$(<span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$disk</span>"</span> | cut -d<span class="hljs-string">'/'</span> -f4)

        <span class="hljs-comment"># Check if it's an SSD</span>
        <span class="hljs-keyword">if</span> [[ $(cat <span class="hljs-string">"/sys/block/<span class="hljs-variable">$device</span>/queue/rotational"</span>) == <span class="hljs-string">"0"</span> ]]; <span class="hljs-keyword">then</span>
            <span class="hljs-built_in">echo</span> <span class="hljs-string">"none"</span> &gt; <span class="hljs-string">"<span class="hljs-variable">$disk</span>"</span> 2&gt;/dev/null || <span class="hljs-built_in">echo</span> <span class="hljs-string">"mq-deadline"</span> &gt; <span class="hljs-string">"<span class="hljs-variable">$disk</span>"</span>
            <span class="hljs-built_in">log</span> <span class="hljs-string">"Set scheduler for SSD <span class="hljs-variable">$device</span>: <span class="hljs-variable">$(cat "$disk")</span>"</span>
        <span class="hljs-keyword">else</span>
            <span class="hljs-built_in">echo</span> <span class="hljs-string">"mq-deadline"</span> &gt; <span class="hljs-string">"<span class="hljs-variable">$disk</span>"</span>
            <span class="hljs-built_in">log</span> <span class="hljs-string">"Set scheduler for HDD <span class="hljs-variable">$device</span>: mq-deadline"</span>
        <span class="hljs-keyword">fi</span>
    <span class="hljs-keyword">done</span>

    <span class="hljs-comment"># Optimize read-ahead for better sequential performance</span>
    <span class="hljs-keyword">for</span> disk <span class="hljs-keyword">in</span> /sys/block/*/queue/read_ahead_kb; <span class="hljs-keyword">do</span>
        <span class="hljs-built_in">local</span> device=$(<span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$disk</span>"</span> | cut -d<span class="hljs-string">'/'</span> -f4)
        <span class="hljs-built_in">echo</span> 4096 &gt; <span class="hljs-string">"<span class="hljs-variable">$disk</span>"</span>
        <span class="hljs-built_in">log</span> <span class="hljs-string">"Set read-ahead for <span class="hljs-variable">$device</span>: 4096KB"</span>
    <span class="hljs-keyword">done</span>

    <span class="hljs-comment"># Configure I/O limits with systemd</span>
    mkdir -p /etc/systemd/system/user.slice.d
    cat &gt; /etc/systemd/system/user.slice.d/io-limits.conf &lt;&lt; EOF
[Slice]
IOWeight=100
IODeviceWeight=/dev/sda 200
IOReadBandwidthMax=/dev/sda 100M
IOWriteBandwidthMax=/dev/sda 50M
EOF

    systemctl daemon-reload

    <span class="hljs-built_in">log</span> <span class="hljs-string">"Disk I/O optimization completed"</span>
}

<span class="hljs-comment"># Network optimization</span>
<span class="hljs-function"><span class="hljs-title">optimize_network</span></span>() {
    <span class="hljs-built_in">log</span> <span class="hljs-string">"=== NETWORK OPTIMIZATION ==="</span>

    <span class="hljs-comment"># TCP buffer tuning</span>
    sysctl net.core.rmem_default=262144
    sysctl net.core.rmem_max=16777216
    sysctl net.core.wmem_default=262144
    sysctl net.core.wmem_max=16777216
    sysctl net.ipv4.tcp_rmem=<span class="hljs-string">"4096 65536 16777216"</span>
    sysctl net.ipv4.tcp_wmem=<span class="hljs-string">"4096 65536 16777216"</span>

    <span class="hljs-comment"># TCP congestion control</span>
    sysctl net.ipv4.tcp_congestion_control=bbr

    <span class="hljs-comment"># Network device optimization</span>
    <span class="hljs-keyword">for</span> interface <span class="hljs-keyword">in</span> $(ip link show | grep -E <span class="hljs-string">'^[0-9]+:'</span> | cut -d: -f2 | tr -d <span class="hljs-string">' '</span> | grep -v lo); <span class="hljs-keyword">do</span>
        <span class="hljs-comment"># Increase ring buffer sizes</span>
        ethtool -G <span class="hljs-string">"<span class="hljs-variable">$interface</span>"</span> rx 4096 tx 4096 2&gt;/dev/null || <span class="hljs-literal">true</span>

        <span class="hljs-comment"># Enable offloading features</span>
        ethtool -K <span class="hljs-string">"<span class="hljs-variable">$interface</span>"</span> gro on 2&gt;/dev/null || <span class="hljs-literal">true</span>
        ethtool -K <span class="hljs-string">"<span class="hljs-variable">$interface</span>"</span> tso on 2&gt;/dev/null || <span class="hljs-literal">true</span>
        ethtool -K <span class="hljs-string">"<span class="hljs-variable">$interface</span>"</span> gso on 2&gt;/dev/null || <span class="hljs-literal">true</span>

        <span class="hljs-built_in">log</span> <span class="hljs-string">"Optimized network interface: <span class="hljs-variable">$interface</span>"</span>
    <span class="hljs-keyword">done</span>

    <span class="hljs-comment"># Increase connection tracking table size</span>
    sysctl net.netfilter.nf_conntrack_max=1048576

    <span class="hljs-built_in">log</span> <span class="hljs-string">"Network optimization completed"</span>
}

<span class="hljs-comment"># Application-specific optimization</span>
<span class="hljs-function"><span class="hljs-title">optimize_applications</span></span>() {
    <span class="hljs-built_in">log</span> <span class="hljs-string">"=== APPLICATION OPTIMIZATION ==="</span>

    <span class="hljs-comment"># Nginx optimization</span>
    <span class="hljs-keyword">if</span> systemctl is-active --quiet nginx; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">log</span> <span class="hljs-string">"Optimizing Nginx configuration"</span>

        <span class="hljs-comment"># Backup original config</span>
        cp /etc/nginx/nginx.conf <span class="hljs-string">"/etc/nginx/nginx.conf.backup.<span class="hljs-variable">$(date +%Y%m%d_%H%M%S)</span>"</span>

        <span class="hljs-comment"># Create optimized nginx config</span>
        cat &gt; /etc/nginx/conf.d/performance.conf &lt;&lt; EOF
<span class="hljs-comment"># Performance optimizations</span>
worker_processes auto;
worker_rlimit_nofile 65535;

events {
    worker_connections 4096;
    use epoll;
    multi_accept on;
}

http {
    <span class="hljs-comment"># Basic optimizations</span>
    sendfile on;
    tcp_nopush on;
    tcp_nodelay on;
    keepalive_timeout 30;
    keepalive_requests 1000;

    <span class="hljs-comment"># Buffer optimizations</span>
    client_body_buffer_size 128k;
    client_max_body_size 10m;
    client_header_buffer_size 1k;
    large_client_header_buffers 4 4k;
    output_buffers 1 32k;
    postpone_output 1460;

    <span class="hljs-comment"># Gzip compression</span>
    gzip on;
    gzip_vary on;
    gzip_min_length 1024;
    gzip_proxied any;
    gzip_comp_level 6;
    gzip_types text/plain text/css text/xml text/javascript application/javascript application/xml+rss application/json;

    <span class="hljs-comment"># File caching</span>
    open_file_cache max=200000 inactive=20s;
    open_file_cache_valid 30s;
    open_file_cache_min_uses 2;
    open_file_cache_errors on;
}
EOF

        nginx -t &amp;&amp; systemctl reload nginx
        <span class="hljs-built_in">log</span> <span class="hljs-string">"Nginx optimization completed"</span>
    <span class="hljs-keyword">fi</span>

    <span class="hljs-comment"># MySQL optimization</span>
    <span class="hljs-keyword">if</span> systemctl is-active --quiet mysql; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">log</span> <span class="hljs-string">"Optimizing MySQL configuration"</span>

        <span class="hljs-built_in">local</span> total_mem_mb=$(($(grep MemTotal /proc/meminfo | awk <span class="hljs-string">'{print $2}'</span>) / 1024))
        <span class="hljs-built_in">local</span> innodb_buffer_pool_size=$((total_mem_mb * 70 / 100))  <span class="hljs-comment"># 70% of total memory</span>

        cat &gt; /etc/mysql/conf.d/performance.cnf &lt;&lt; EOF
[mysqld]
<span class="hljs-comment"># Performance optimizations</span>
innodb_buffer_pool_size = <span class="hljs-variable">${innodb_buffer_pool_size}</span>M
innodb_log_file_size = 256M
innodb_log_buffer_size = 16M
innodb_flush_log_at_trx_commit = 2
innodb_flush_method = O_DIRECT
innodb_file_per_table = 1
innodb_read_io_threads = 8
innodb_write_io_threads = 8

<span class="hljs-comment"># Query cache (if using MySQL &lt; 8.0)</span>
query_cache_type = 1
query_cache_size = 128M
query_cache_limit = 2M

<span class="hljs-comment"># Connection settings</span>
max_connections = 200
max_connect_errors = 10000
thread_cache_size = 50
table_open_cache = 4000

<span class="hljs-comment"># Buffer settings</span>
join_buffer_size = 256K
sort_buffer_size = 2M
read_buffer_size = 128K
read_rnd_buffer_size = 256K
EOF

        systemctl restart mysql
        <span class="hljs-built_in">log</span> <span class="hljs-string">"MySQL optimization completed"</span>
    <span class="hljs-keyword">fi</span>

    <span class="hljs-built_in">log</span> <span class="hljs-string">"Application optimization completed"</span>
}

<span class="hljs-comment"># Post-optimization benchmarks</span>
<span class="hljs-function"><span class="hljs-title">post_optimization_benchmarks</span></span>() {
    <span class="hljs-built_in">log</span> <span class="hljs-string">"=== POST-OPTIMIZATION BENCHMARKS ==="</span>

    <span class="hljs-comment"># Wait for system to stabilize</span>
    sleep 30

    <span class="hljs-comment"># CPU performance</span>
    <span class="hljs-built_in">log</span> <span class="hljs-string">"CPU Performance Test (Post-optimization):"</span>
    sysbench cpu --cpu-max-prime=20000 --threads=$(nproc) run &gt; <span class="hljs-string">"<span class="hljs-variable">$BENCHMARK_DIR</span>/cpu_optimized.txt"</span> 2&gt;&amp;1

    <span class="hljs-comment"># Memory performance</span>
    <span class="hljs-built_in">log</span> <span class="hljs-string">"Memory Performance Test (Post-optimization):"</span>
    sysbench memory --memory-total-size=10G run &gt; <span class="hljs-string">"<span class="hljs-variable">$BENCHMARK_DIR</span>/memory_optimized.txt"</span> 2&gt;&amp;1

    <span class="hljs-comment"># Disk I/O performance</span>
    <span class="hljs-built_in">log</span> <span class="hljs-string">"Disk I/O Performance Test (Post-optimization):"</span>
    sysbench fileio --file-total-size=5G prepare &gt; /dev/null 2&gt;&amp;1
    sysbench fileio --file-total-size=5G --file-test-mode=rndrw run &gt; <span class="hljs-string">"<span class="hljs-variable">$BENCHMARK_DIR</span>/disk_optimized.txt"</span> 2&gt;&amp;1
    sysbench fileio --file-total-size=5G cleanup &gt; /dev/null 2&gt;&amp;1

    <span class="hljs-built_in">log</span> <span class="hljs-string">"Post-optimization benchmarks completed"</span>
}

<span class="hljs-comment"># Generate performance report</span>
<span class="hljs-function"><span class="hljs-title">generate_performance_report</span></span>() {
    <span class="hljs-built_in">log</span> <span class="hljs-string">"=== GENERATING PERFORMANCE REPORT ==="</span>

    <span class="hljs-built_in">local</span> report_file=<span class="hljs-string">"/var/log/performance-report-<span class="hljs-variable">$(date +%Y%m%d_%H%M%S)</span>.txt"</span>

    cat &gt; <span class="hljs-string">"<span class="hljs-variable">$report_file</span>"</span> &lt;&lt; EOF
Performance Optimization Report
==============================
Date: $(date)
Hostname: $(hostname)
CPU Cores: $(nproc)
Total Memory: $(free -h | grep Mem | awk <span class="hljs-string">'{print $2}'</span>)
Kernel: $(uname -r)

Optimizations Applied:
- CPU governor <span class="hljs-built_in">set</span> to performance
- Memory settings optimized (swappiness, cache pressure)
- Huge pages configured
- Disk I/O schedulers optimized
- Network buffers and TCP settings tuned
- Application-specific optimizations (Nginx, MySQL)

Benchmark Results:
See detailed results <span class="hljs-keyword">in</span>: <span class="hljs-variable">$BENCHMARK_DIR</span>

Recommendations:
- Monitor system performance regularly
- Adjust settings based on workload patterns
- Consider hardware upgrades <span class="hljs-keyword">for</span> bottlenecks
- Implement application-level caching

Next Steps:
- Regular performance monitoring
- Workload-specific tuning
- Capacity planning
EOF

    <span class="hljs-built_in">log</span> <span class="hljs-string">"Performance report generated: <span class="hljs-variable">$report_file</span>"</span>

    <span class="hljs-comment"># Compare baseline vs optimized results</span>
    <span class="hljs-keyword">if</span> [[ -f <span class="hljs-string">"<span class="hljs-variable">$BENCHMARK_DIR</span>/cpu_baseline.txt"</span> &amp;&amp; -f <span class="hljs-string">"<span class="hljs-variable">$BENCHMARK_DIR</span>/cpu_optimized.txt"</span> ]]; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">local</span> baseline_cpu=$(grep <span class="hljs-string">"events per second:"</span> <span class="hljs-string">"<span class="hljs-variable">$BENCHMARK_DIR</span>/cpu_baseline.txt"</span> | awk <span class="hljs-string">'{print $4}'</span>)
        <span class="hljs-built_in">local</span> optimized_cpu=$(grep <span class="hljs-string">"events per second:"</span> <span class="hljs-string">"<span class="hljs-variable">$BENCHMARK_DIR</span>/cpu_optimized.txt"</span> | awk <span class="hljs-string">'{print $4}'</span>)

        <span class="hljs-keyword">if</span> [[ -n <span class="hljs-string">"<span class="hljs-variable">$baseline_cpu</span>"</span> &amp;&amp; -n <span class="hljs-string">"<span class="hljs-variable">$optimized_cpu</span>"</span> ]]; <span class="hljs-keyword">then</span>
            <span class="hljs-built_in">local</span> improvement=$(<span class="hljs-built_in">echo</span> <span class="hljs-string">"scale=2; (<span class="hljs-variable">$optimized_cpu</span> - <span class="hljs-variable">$baseline_cpu</span>) / <span class="hljs-variable">$baseline_cpu</span> * 100"</span> | bc)
            <span class="hljs-built_in">echo</span> <span class="hljs-string">"CPU Performance Improvement: <span class="hljs-variable">${improvement}</span>%"</span> &gt;&gt; <span class="hljs-string">"<span class="hljs-variable">$report_file</span>"</span>
            <span class="hljs-built_in">log</span> <span class="hljs-string">"CPU Performance Improvement: <span class="hljs-variable">${improvement}</span>%"</span>
        <span class="hljs-keyword">fi</span>
    <span class="hljs-keyword">fi</span>
}

<span class="hljs-comment"># Main execution</span>
<span class="hljs-keyword">if</span> [[ <span class="hljs-variable">$EUID</span> -ne 0 ]]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"This script must be run as root"</span>
    <span class="hljs-built_in">exit</span> 1
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># Install required tools</span>
apt update
apt install -y sysbench bc

baseline_performance
optimize_cpu
optimize_memory
optimize_disk_io
optimize_network
optimize_applications
post_optimization_benchmarks
generate_performance_report

<span class="hljs-built_in">log</span> <span class="hljs-string">"Performance optimization completed successfully"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Performance report and benchmarks saved to: <span class="hljs-variable">$BENCHMARK_DIR</span>"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Reboot recommended to ensure all optimizations are active."</span>
</div></code></pre>
<h2 id="%F0%9F%A7%A0-knowledge-check">üß† Knowledge Check</h2>
<h3 id="quick-quiz">Quick Quiz</h3>
<ol>
<li>
<p><strong>What are the key principles of Infrastructure as Code (IaC)?</strong></p>
<details>
<summary>Answer</summary>
<ul>
<li>Version control for infrastructure</li>
<li>Reproducible and consistent deployments</li>
<li>Automated provisioning and configuration</li>
<li>Documentation through code</li>
<li>Testing and validation of infrastructure changes</li>
</ul>
</details>
</li>
<li>
<p><strong>What security measures should be implemented for SSH hardening?</strong></p>
<details>
<summary>Answer</summary>
<ul>
<li>Disable root login and password authentication</li>
<li>Use non-standard port and key-based authentication</li>
<li>Implement connection limits and timeouts</li>
<li>Use strong ciphers and algorithms</li>
<li>Enable logging and monitoring</li>
</ul>
</details>
</li>
<li>
<p><strong>How do you balance security and performance in system optimization?</strong></p>
<details>
<summary>Answer</summary>
<ul>
<li>Risk assessment and threat modeling</li>
<li>Layered security approach</li>
<li>Performance testing with security measures</li>
<li>Regular security audits and performance monitoring</li>
<li>Documentation of trade-offs and decisions</li>
</ul>
</details>
</li>
<li>
<p><strong>What are the essential components of a disaster recovery plan?</strong></p>
<details>
<summary>Answer</summary>
<ul>
<li>Regular backups with tested restore procedures</li>
<li>Documentation of recovery processes</li>
<li>Alternative infrastructure and failover procedures</li>
<li>Communication plans and contact information</li>
<li>Regular testing and updates of the plan</li>
</ul>
</details>
</li>
</ol>
<h3 id="final-challenges">Final Challenges</h3>
<p><strong>Challenge 1: Complete Infrastructure Automation</strong></p>
<pre class="hljs"><code><div><span class="hljs-comment"># Build a complete infrastructure automation solution:</span>
<span class="hljs-comment"># - Infrastructure as Code with Ansible/Terraform</span>
<span class="hljs-comment"># - Automated security hardening and compliance</span>
<span class="hljs-comment"># - Performance optimization and monitoring</span>
<span class="hljs-comment"># - Disaster recovery and backup automation</span>
<span class="hljs-comment"># - Documentation and knowledge management</span>
<span class="hljs-comment"># - Testing and validation frameworks</span>
</div></code></pre>
<p><strong>Challenge 2: Enterprise-Grade Monitoring</strong></p>
<pre class="hljs"><code><div><span class="hljs-comment"># Implement enterprise monitoring and alerting:</span>
<span class="hljs-comment"># - Multi-tier monitoring (infrastructure, application, business)</span>
<span class="hljs-comment"># - Predictive analytics and anomaly detection</span>
<span class="hljs-comment"># - Automated incident response and remediation</span>
<span class="hljs-comment"># - Comprehensive dashboards and reporting</span>
<span class="hljs-comment"># - Integration with external systems and APIs</span>
</div></code></pre>
<p><strong>Challenge 3: Security Operations Center (SOC)</strong></p>
<pre class="hljs"><code><div><span class="hljs-comment"># Create a mini Security Operations Center:</span>
<span class="hljs-comment"># - Centralized log collection and analysis</span>
<span class="hljs-comment"># - Threat detection and incident response</span>
<span class="hljs-comment"># - Vulnerability management and patching</span>
<span class="hljs-comment"># - Compliance monitoring and reporting</span>
<span class="hljs-comment"># - Security awareness and training programs</span>
</div></code></pre>
<h2 id="%F0%9F%8E%93-career-development-and-certifications">üéì Career Development and Certifications</h2>
<h3 id="recommended-learning-path">Recommended Learning Path</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Linux Certifications</span>
<span class="hljs-comment"># 1. CompTIA Linux+ (Entry level)</span>
<span class="hljs-comment"># 2. LPIC-1, LPIC-2, LPIC-3 (Linux Professional Institute)</span>
<span class="hljs-comment"># 3. Red Hat Certified System Administrator (RHCSA)</span>
<span class="hljs-comment"># 4. Red Hat Certified Engineer (RHCE)</span>

<span class="hljs-comment"># Networking Certifications</span>
<span class="hljs-comment"># 1. CompTIA Network+ (Foundation)</span>
<span class="hljs-comment"># 2. Cisco CCNA (Cisco networking)</span>
<span class="hljs-comment"># 3. CompTIA Security+ (Network security)</span>
<span class="hljs-comment"># 4. Certified Ethical Hacker (CEH)</span>

<span class="hljs-comment"># Cloud and DevOps</span>
<span class="hljs-comment"># 1. AWS Certified Solutions Architect</span>
<span class="hljs-comment"># 2. Certified Kubernetes Administrator (CKA)</span>
<span class="hljs-comment"># 3. Docker Certified Associate</span>
<span class="hljs-comment"># 4. Ansible Certified Specialist</span>

<span class="hljs-comment"># Security Specializations</span>
<span class="hljs-comment"># 1. CISSP (Information security management)</span>
<span class="hljs-comment"># 2. CISM (Information security management)</span>
<span class="hljs-comment"># 3. GSEC (SANS security essentials)</span>
<span class="hljs-comment"># 4. OSCP (Offensive security)</span>
</div></code></pre>
<h3 id="professional-development-plan">Professional Development Plan</h3>
<pre class="hljs"><code><div><span class="hljs-section"># 12-Month Professional Development Plan</span>

<span class="hljs-section">## Months 1-3: Foundation Strengthening</span>
<span class="hljs-bullet">
- </span>[ ] Complete advanced Linux administration courses
<span class="hljs-bullet">- </span>[ ] Practice with complex networking scenarios
<span class="hljs-bullet">- </span>[ ] Build home lab environment
<span class="hljs-bullet">- </span>[ ] Start contributing to open-source projects
<span class="hljs-bullet">- </span>[ ] Begin studying for first certification

<span class="hljs-section">## Months 4-6: Specialization</span>
<span class="hljs-bullet">
- </span>[ ] Choose specialization area (security, cloud, networking)
<span class="hljs-bullet">- </span>[ ] Take relevant certification exam
<span class="hljs-bullet">- </span>[ ] Build portfolio projects
<span class="hljs-bullet">- </span>[ ] Attend industry conferences/meetups
<span class="hljs-bullet">- </span>[ ] Start mentoring junior colleagues

<span class="hljs-section">## Months 7-9: Advanced Skills</span>
<span class="hljs-bullet">
- </span>[ ] Learn automation and orchestration tools
<span class="hljs-bullet">- </span>[ ] Study cloud platforms and services
<span class="hljs-bullet">- </span>[ ] Practice incident response scenarios
<span class="hljs-bullet">- </span>[ ] Develop leadership and communication skills
<span class="hljs-bullet">- </span>[ ] Pursue advanced certifications

<span class="hljs-section">## Months 10-12: Leadership and Innovation</span>
<span class="hljs-bullet">
- </span>[ ] Lead technical projects
<span class="hljs-bullet">- </span>[ ] Speak at conferences or write technical articles
<span class="hljs-bullet">- </span>[ ] Develop training materials for others
<span class="hljs-bullet">- </span>[ ] Explore emerging technologies
<span class="hljs-bullet">- </span>[ ] Plan next year's development goals
</div></code></pre>
<h2 id="%F0%9F%9A%80-congratulations">üöÄ Congratulations!</h2>
<p>You've completed the comprehensive Linux &amp; Networking Mastery Series! You now have:</p>
<p>‚úÖ <strong>Solid Foundation</strong>: Linux fundamentals, file operations, permissions, and process management</p>
<p>‚úÖ <strong>System Administration Skills</strong>: User management, package management, system monitoring, and automation</p>
<p>‚úÖ <strong>Networking Expertise</strong>: TCP/IP, DNS, routing, firewalls, and network troubleshooting</p>
<p>‚úÖ <strong>Security Knowledge</strong>: SSH, SSL/TLS, firewalls, intrusion detection, and security hardening</p>
<p>‚úÖ <strong>Advanced Tools</strong>: Network analysis, performance monitoring, automation, and debugging</p>
<p>‚úÖ <strong>Professional Practices</strong>: Best practices, documentation, incident response, and career development</p>
<h3 id="your-next-steps">Your Next Steps:</h3>
<ol>
<li><strong>Practice Regularly</strong>: Set up home labs and practice scenarios</li>
<li><strong>Stay Current</strong>: Follow industry news, blogs, and security advisories</li>
<li><strong>Get Certified</strong>: Pursue relevant certifications for your career goals</li>
<li><strong>Contribute</strong>: Join open-source projects and share your knowledge</li>
<li><strong>Network</strong>: Connect with professionals in the field</li>
<li><strong>Keep Learning</strong>: Technology evolves rapidly - never stop learning!</li>
</ol>
<h3 id="resources-for-continued-learning">Resources for Continued Learning:</h3>
<ul>
<li><strong>Documentation</strong>: Always refer to official documentation</li>
<li><strong>Communities</strong>: Reddit r/linux, r/networking, Stack Overflow</li>
<li><strong>Blogs</strong>: Red Hat Blog, Ubuntu Blog, Cisco Blog</li>
<li><strong>Podcasts</strong>: Linux Action News, Network Break, Security Now</li>
<li><strong>Books</strong>: &quot;UNIX and Linux System Administration Handbook&quot;, &quot;TCP/IP Illustrated&quot;</li>
<li><strong>Labs</strong>: VirtualBox/VMware labs, Cloud provider free tiers</li>
</ul>
<hr>
<blockquote>
<p><strong>Remember</strong>: The journey to mastery is continuous. What you've learned here is a strong foundation, but the real learning happens when you apply these skills to solve real-world problems. Stay curious, keep practicing, and never hesitate to dive deeper into topics that interest you!</p>
</blockquote>
<p><strong>Good luck on your Linux and networking journey!</strong> üêßüåê</p>

</body>
</html>
