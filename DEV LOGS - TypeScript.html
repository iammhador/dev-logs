<!DOCTYPE html>
<html>
<head>
<title>DEV LOGS - TypeScript.md</title>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">

<style>
/* https://github.com/microsoft/vscode/blob/master/extensions/markdown-language-features/media/markdown.css */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

body {
	font-family: var(--vscode-markdown-font-family, -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif);
	font-size: var(--vscode-markdown-font-size, 14px);
	padding: 0 26px;
	line-height: var(--vscode-markdown-line-height, 22px);
	word-wrap: break-word;
}

#code-csp-warning {
	position: fixed;
	top: 0;
	right: 0;
	color: white;
	margin: 16px;
	text-align: center;
	font-size: 12px;
	font-family: sans-serif;
	background-color:#444444;
	cursor: pointer;
	padding: 6px;
	box-shadow: 1px 1px 1px rgba(0,0,0,.25);
}

#code-csp-warning:hover {
	text-decoration: none;
	background-color:#007acc;
	box-shadow: 2px 2px 2px rgba(0,0,0,.25);
}

body.scrollBeyondLastLine {
	margin-bottom: calc(100vh - 22px);
}

body.showEditorSelection .code-line {
	position: relative;
}

body.showEditorSelection .code-active-line:before,
body.showEditorSelection .code-line:hover:before {
	content: "";
	display: block;
	position: absolute;
	top: 0;
	left: -12px;
	height: 100%;
}

body.showEditorSelection li.code-active-line:before,
body.showEditorSelection li.code-line:hover:before {
	left: -30px;
}

.vscode-light.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(0, 0, 0, 0.15);
}

.vscode-light.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(0, 0, 0, 0.40);
}

.vscode-light.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-dark.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 255, 255, 0.4);
}

.vscode-dark.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 255, 255, 0.60);
}

.vscode-dark.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-high-contrast.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 160, 0, 0.7);
}

.vscode-high-contrast.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 160, 0, 1);
}

.vscode-high-contrast.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

img {
	max-width: 100%;
	max-height: 100%;
}

a {
	text-decoration: none;
}

a:hover {
	text-decoration: underline;
}

a:focus,
input:focus,
select:focus,
textarea:focus {
	outline: 1px solid -webkit-focus-ring-color;
	outline-offset: -1px;
}

hr {
	border: 0;
	height: 2px;
	border-bottom: 2px solid;
}

h1 {
	padding-bottom: 0.3em;
	line-height: 1.2;
	border-bottom-width: 1px;
	border-bottom-style: solid;
}

h1, h2, h3 {
	font-weight: normal;
}

table {
	border-collapse: collapse;
}

table > thead > tr > th {
	text-align: left;
	border-bottom: 1px solid;
}

table > thead > tr > th,
table > thead > tr > td,
table > tbody > tr > th,
table > tbody > tr > td {
	padding: 5px 10px;
}

table > tbody > tr + tr > td {
	border-top: 1px solid;
}

blockquote {
	margin: 0 7px 0 5px;
	padding: 0 16px 0 10px;
	border-left-width: 5px;
	border-left-style: solid;
}

code {
	font-family: Menlo, Monaco, Consolas, "Droid Sans Mono", "Courier New", monospace, "Droid Sans Fallback";
	font-size: 1em;
	line-height: 1.357em;
}

body.wordWrap pre {
	white-space: pre-wrap;
}

pre:not(.hljs),
pre.hljs code > div {
	padding: 16px;
	border-radius: 3px;
	overflow: auto;
}

pre code {
	color: var(--vscode-editor-foreground);
	tab-size: 4;
}

/** Theming */

.vscode-light pre {
	background-color: rgba(220, 220, 220, 0.4);
}

.vscode-dark pre {
	background-color: rgba(10, 10, 10, 0.4);
}

.vscode-high-contrast pre {
	background-color: rgb(0, 0, 0);
}

.vscode-high-contrast h1 {
	border-color: rgb(0, 0, 0);
}

.vscode-light table > thead > tr > th {
	border-color: rgba(0, 0, 0, 0.69);
}

.vscode-dark table > thead > tr > th {
	border-color: rgba(255, 255, 255, 0.69);
}

.vscode-light h1,
.vscode-light hr,
.vscode-light table > tbody > tr + tr > td {
	border-color: rgba(0, 0, 0, 0.18);
}

.vscode-dark h1,
.vscode-dark hr,
.vscode-dark table > tbody > tr + tr > td {
	border-color: rgba(255, 255, 255, 0.18);
}

</style>

<style>
/* Tomorrow Theme */
/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */
/* Original theme - https://github.com/chriskempson/tomorrow-theme */

/* Tomorrow Comment */
.hljs-comment,
.hljs-quote {
	color: #8e908c;
}

/* Tomorrow Red */
.hljs-variable,
.hljs-template-variable,
.hljs-tag,
.hljs-name,
.hljs-selector-id,
.hljs-selector-class,
.hljs-regexp,
.hljs-deletion {
	color: #c82829;
}

/* Tomorrow Orange */
.hljs-number,
.hljs-built_in,
.hljs-builtin-name,
.hljs-literal,
.hljs-type,
.hljs-params,
.hljs-meta,
.hljs-link {
	color: #f5871f;
}

/* Tomorrow Yellow */
.hljs-attribute {
	color: #eab700;
}

/* Tomorrow Green */
.hljs-string,
.hljs-symbol,
.hljs-bullet,
.hljs-addition {
	color: #718c00;
}

/* Tomorrow Blue */
.hljs-title,
.hljs-section {
	color: #4271ae;
}

/* Tomorrow Purple */
.hljs-keyword,
.hljs-selector-tag {
	color: #8959a8;
}

.hljs {
	display: block;
	overflow-x: auto;
	color: #4d4d4c;
	padding: 0.5em;
}

.hljs-emphasis {
	font-style: italic;
}

.hljs-strong {
	font-weight: bold;
}
</style>

<style>
/*
 * Markdown PDF CSS
 */

 body {
	font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif, "Meiryo";
	padding: 0 12px;
}

pre {
	background-color: #f8f8f8;
	border: 1px solid #cccccc;
	border-radius: 3px;
	overflow-x: auto;
	white-space: pre-wrap;
	overflow-wrap: break-word;
}

pre:not(.hljs) {
	padding: 23px;
	line-height: 19px;
}

blockquote {
	background: rgba(127, 127, 127, 0.1);
	border-color: rgba(0, 122, 204, 0.5);
}

.emoji {
	height: 1.4em;
}

code {
	font-size: 14px;
	line-height: 19px;
}

/* for inline code */
:not(pre):not(.hljs) > code {
	color: #C9AE75; /* Change the old color so it seems less like an error */
	font-size: inherit;
}

/* Page Break : use <div class="page"/> to insert page break
-------------------------------------------------------- */
.page {
	page-break-after: always;
}

</style>

<script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
</head>
<body>
  <script>
    mermaid.initialize({
      startOnLoad: true,
      theme: document.body.classList.contains('vscode-dark') || document.body.classList.contains('vscode-high-contrast')
          ? 'dark'
          : 'default'
    });
  </script>
<h1 id="typescript-complete-guide-%F0%9F%93%9A">TypeScript Complete Guide üìö</h1>
<p>A comprehensive TypeScript learning guide organized into digestible chapters, from beginner to advanced concepts.</p>
<h2 id="%F0%9F%93%96-table-of-contents">üìñ Table of Contents</h2>
<h3 id="%F0%9F%9F%A2-beginner-level">üü¢ Beginner Level</h3>
<ul>
<li><a href="./chapters/01-introduction.md">Chapter 1: Introduction to TypeScript</a></li>
<li><a href="./chapters/02-setup.md">Chapter 2: Setting Up TypeScript</a></li>
<li><a href="./chapters/03-basic-types.md">Chapter 3: Basic Types and Annotations</a></li>
<li><a href="./chapters/04-interfaces-types.md">Chapter 4: Interfaces and Type Aliases</a></li>
<li><a href="./chapters/05-functions.md">Chapter 5: Functions in TypeScript</a></li>
<li><a href="./chapters/06-arrays-tuples-enums.md">Chapter 6: Arrays, Tuples, and Enums</a></li>
<li><a href="./chapters/07-union-intersection.md">Chapter 7: Union and Intersection Types</a></li>
<li><a href="./chapters/08-inference-narrowing.md">Chapter 8: Type Inference and Narrowing</a></li>
</ul>
<h3 id="%F0%9F%9F%A1-intermediate-level">üü° Intermediate Level</h3>
<ul>
<li><a href="./chapters/09-advanced-functions.md">Chapter 9: Advanced Function Features</a></li>
<li><a href="./chapters/10-classes-oop.md">Chapter 10: Classes and OOP</a></li>
<li><a href="./chapters/11-generics.md">Chapter 11: Generics Fundamentals</a></li>
<li><a href="./chapters/12-type-guards.md">Chapter 12: Type Guards</a></li>
<li><a href="./chapters/13-advanced-types.md">Chapter 13: Advanced Type Operations</a></li>
<li><a href="./chapters/14-modules-namespaces.md">Chapter 14: Modules and Namespaces</a></li>
<li><a href="./chapters/15-error-handling.md">Chapter 15: Error Handling</a></li>
</ul>
<h3 id="%F0%9F%94%B4-advanced-level">üî¥ Advanced Level</h3>
<ul>
<li><a href="./chapters/16-advanced-generics.md">Chapter 16: Advanced Generics</a></li>
<li><a href="./chapters/17-conditional-types.md">Chapter 17: Conditional Types</a></li>
<li><a href="./chapters/18-mapped-types.md">Chapter 18: Mapped Types</a></li>
<li><a href="./chapters/19-utility-types.md">Chapter 19: Utility Types</a></li>
<li><a href="./chapters/20-discriminated-unions.md">Chapter 20: Discriminated Unions</a></li>
<li><a href="./chapters/21-declaration-merging.md">Chapter 21: Declaration Merging</a></li>
<li><a href="./chapters/22-third-party-types.md">Chapter 22: Working with Third-Party Types</a></li>
<li><a href="./chapters/23-custom-definitions.md">Chapter 23: Custom Type Definitions</a></li>
</ul>
<h3 id="%E2%9A%99%EF%B8%8F-tooling-and-configuration">‚öôÔ∏è Tooling and Configuration</h3>
<ul>
<li><a href="./chapters/24-tsconfig-advanced.md">Chapter 24: Advanced tsconfig.json</a></li>
<li><a href="./chapters/25-typescript-react.md">Chapter 25: TypeScript with React</a></li>
<li><a href="./chapters/26-typescript-nodejs.md">Chapter 26: TypeScript with Node.js</a></li>
<li><a href="./chapters/27-dev-tools.md">Chapter 27: Development Tools</a></li>
<li><a href="./chapters/28-build-tools.md">Chapter 28: Build Tool Integration</a></li>
</ul>
<h3 id="%F0%9F%9A%80-best-practices-and-patterns">üöÄ Best Practices and Patterns</h3>
<ul>
<li><a href="./chapters/29-js-migration.md">Chapter 29: Migration from JavaScript</a></li>
<li><a href="./chapters/30-large-codebase.md">Chapter 30: Large Codebase Best Practices</a></li>
<li><a href="./chapters/31-common-pitfalls.md">Chapter 31: Common Pitfalls</a></li>
<li><a href="./chapters/32-project-structure.md">Chapter 32: Project Structure</a></li>
<li><a href="./chapters/33-debugging-vscode.md">Chapter 33: Debugging in VS Code</a></li>
<li><a href="./chapters/34-real-world-patterns.md">Chapter 34: Real-World Patterns</a></li>
</ul>
<h2 id="%F0%9F%8E%AF-learning-path-recommendations">üéØ Learning Path Recommendations</h2>
<h3 id="for-complete-beginners">For Complete Beginners</h3>
<ol>
<li>Start with Chapters 1-8 (Beginner Level)</li>
<li>Practice with small projects</li>
<li>Move to Chapters 9-15 (Intermediate Level)</li>
<li>Build a medium-sized project</li>
<li>Tackle Advanced chapters as needed</li>
</ol>
<h3 id="for-javascript-developers">For JavaScript Developers</h3>
<ol>
<li>Quick read: Chapters 1-2</li>
<li>Focus on: Chapters 3-8, 11-13</li>
<li>Deep dive: Chapters 16-23</li>
<li>Tooling: Chapters 24-28</li>
<li>Best practices: Chapters 29-34</li>
</ol>
<h3 id="for-framework-specific-learning">For Framework-Specific Learning</h3>
<ul>
<li><strong>React Developers</strong>: Chapters 1-8, 11-13, 25, 27-28</li>
<li><strong>Node.js Developers</strong>: Chapters 1-8, 11-15, 26-28</li>
<li><strong>Library Authors</strong>: Chapters 1-23, 30, 32-34</li>
</ul>
<h2 id="%F0%9F%93%81-repository-structure">üìÅ Repository Structure</h2>
<pre class="hljs"><code><div>TypeScript-Complete-Guide/
‚îú‚îÄ‚îÄ README.md                 # This file
‚îú‚îÄ‚îÄ chapters/                 # Individual chapter files
‚îÇ   ‚îú‚îÄ‚îÄ 01-introduction.md
‚îÇ   ‚îú‚îÄ‚îÄ 02-setup.md
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ examples/                 # Code examples
‚îÇ   ‚îú‚îÄ‚îÄ beginner/
‚îÇ   ‚îú‚îÄ‚îÄ intermediate/
‚îÇ   ‚îî‚îÄ‚îÄ advanced/
‚îú‚îÄ‚îÄ configs/                  # Sample configuration files
‚îÇ   ‚îú‚îÄ‚îÄ tsconfig-frontend.json
‚îÇ   ‚îú‚îÄ‚îÄ tsconfig-backend.json
‚îÇ   ‚îî‚îÄ‚îÄ tsconfig-library.json
‚îî‚îÄ‚îÄ projects/                 # Sample projects
    ‚îú‚îÄ‚îÄ todo-app/
    ‚îú‚îÄ‚îÄ express-api/
    ‚îî‚îÄ‚îÄ react-components/
</div></code></pre>
<h2 id="%F0%9F%A4%9D-how-to-use-this-guide">ü§ù How to Use This Guide</h2>
<ol>
<li><strong>Sequential Learning</strong>: Follow chapters in order for comprehensive understanding</li>
<li><strong>Topic-Specific</strong>: Jump to specific chapters based on your needs</li>
<li><strong>Reference</strong>: Use as a quick reference for TypeScript concepts</li>
<li><strong>Practice</strong>: Each chapter includes practical examples and exercises</li>
</ol>
<h2 id="%F0%9F%93%9D-prerequisites">üìù Prerequisites</h2>
<ul>
<li>Basic JavaScript knowledge</li>
<li>Familiarity with ES6+ features</li>
<li>Understanding of programming concepts (variables, functions, objects)</li>
<li>Node.js installed on your system</li>
</ul>
<h2 id="%F0%9F%8E%89-getting-started">üéâ Getting Started</h2>
<p>Ready to begin your TypeScript journey? Start with <a href="./chapters/01-introduction.md">Chapter 1: Introduction to TypeScript</a>!</p>
<hr>
<p><em>This guide is designed to be a comprehensive resource for learning TypeScript. Each chapter builds upon previous concepts while remaining accessible for reference purposes.</em></p>
<h1 id="introduction-to-typescript">Introduction to TypeScript</h1>
<blockquote>
<p>Understanding what TypeScript is, why it matters, and how it improves JavaScript development</p>
</blockquote>
<h2 id="what-is-typescript">What is TypeScript?</h2>
<p>TypeScript is a statically typed superset of JavaScript that compiles to plain JavaScript. Developed by Microsoft, it adds optional static type checking to JavaScript, making code more predictable, maintainable, and easier to debug.</p>
<h2 id="why-choose-typescript-over-javascript">Why Choose TypeScript Over JavaScript?</h2>
<h3 id="%F0%9F%9B%A1%EF%B8%8F-type-safety">üõ°Ô∏è Type Safety</h3>
<p>Catch errors at compile time instead of runtime, preventing many common bugs before they reach production.</p>
<pre class="hljs"><code><div><span class="hljs-comment">// JavaScript - Runtime error</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">greet</span>(<span class="hljs-params">name</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-string">"Hello, "</span> + name.toUppercase(); <span class="hljs-comment">// TypeError: name.toUppercase is not a function</span>
}

<span class="hljs-comment">// TypeScript - Compile-time error</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">greet</span>(<span class="hljs-params">name: <span class="hljs-built_in">string</span></span>): <span class="hljs-title">string</span> </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-string">"Hello, "</span> + name.toUppercase(); <span class="hljs-comment">// Error: Property 'toUppercase' does not exist</span>
  <span class="hljs-comment">// Correct: name.toUpperCase()</span>
}
</div></code></pre>
<h3 id="%F0%9F%94%A7-enhanced-ide-support">üîß Enhanced IDE Support</h3>
<ul>
<li><strong>Intelligent autocomplete</strong>: Get suggestions based on actual types</li>
<li><strong>Refactoring tools</strong>: Rename variables, functions, and properties safely</li>
<li><strong>Navigation</strong>: Jump to definitions and find all references</li>
<li><strong>Real-time error detection</strong>: See errors as you type</li>
</ul>
<h3 id="%F0%9F%93%9A-self-documenting-code">üìö Self-Documenting Code</h3>
<p>Types serve as inline documentation, making code intent clearer:</p>
<pre class="hljs"><code><div><span class="hljs-comment">// Clear function signature tells you exactly what to expect</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">calculateTax</span>(<span class="hljs-params">price: <span class="hljs-built_in">number</span>, taxRate: <span class="hljs-built_in">number</span></span>): <span class="hljs-title">number</span> </span>{
  <span class="hljs-keyword">return</span> price * (<span class="hljs-number">1</span> + taxRate);
}

<span class="hljs-comment">// vs JavaScript where you need to guess or read documentation</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">calculateTax</span>(<span class="hljs-params">price, taxRate</span>) </span>{
  <span class="hljs-keyword">return</span> price * (<span class="hljs-number">1</span> + taxRate);
}
</div></code></pre>
<h3 id="%F0%9F%94%84-easier-refactoring">üîÑ Easier Refactoring</h3>
<p>Confident code changes with comprehensive type checking across your entire codebase.</p>
<h3 id="%F0%9F%9A%80-modern-javascript-features">üöÄ Modern JavaScript Features</h3>
<p>Access to latest ECMAScript features with backward compatibility through compilation.</p>
<h2 id="typescript-vs-javascript-key-differences">TypeScript vs JavaScript: Key Differences</h2>
<table>
<thead>
<tr>
<th>Feature</th>
<th>JavaScript</th>
<th>TypeScript</th>
</tr>
</thead>
<tbody>
<tr>
<td>Type checking</td>
<td>Runtime</td>
<td>Compile-time</td>
</tr>
<tr>
<td>Error detection</td>
<td>Runtime</td>
<td>Development</td>
</tr>
<tr>
<td>IDE support</td>
<td>Basic</td>
<td>Advanced</td>
</tr>
<tr>
<td>Learning curve</td>
<td>Lower</td>
<td>Higher</td>
</tr>
<tr>
<td>File extension</td>
<td><code>.js</code></td>
<td><code>.ts</code></td>
</tr>
<tr>
<td>Compilation</td>
<td>Not required</td>
<td>Required</td>
</tr>
</tbody>
</table>
<h2 id="real-world-benefits">Real-World Benefits</h2>
<h3 id="large-codebases">Large Codebases</h3>
<p>TypeScript shines in large applications where:</p>
<ul>
<li>Multiple developers work on the same code</li>
<li>Code complexity increases over time</li>
<li>Refactoring becomes frequent</li>
<li>API contracts need to be enforced</li>
</ul>
<h3 id="team-collaboration">Team Collaboration</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Clear interface definitions help team members understand data structures</span>
<span class="hljs-keyword">interface</span> User {
  id: <span class="hljs-built_in">number</span>;
  name: <span class="hljs-built_in">string</span>;
  email: <span class="hljs-built_in">string</span>;
  isActive: <span class="hljs-built_in">boolean</span>;
  createdAt: <span class="hljs-built_in">Date</span>;
  preferences?: UserPreferences;
}

<span class="hljs-keyword">interface</span> UserPreferences {
  theme: <span class="hljs-string">"light"</span> | <span class="hljs-string">"dark"</span>;
  notifications: <span class="hljs-built_in">boolean</span>;
  language: <span class="hljs-built_in">string</span>;
}
</div></code></pre>
<h3 id="api-development">API Development</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Type-safe API responses</span>
<span class="hljs-keyword">interface</span> ApiResponse&lt;T&gt; {
  data: T;
  status: <span class="hljs-built_in">number</span>;
  message: <span class="hljs-built_in">string</span>;
  errors?: <span class="hljs-built_in">string</span>[];
}

<span class="hljs-comment">// Usage</span>
<span class="hljs-keyword">const</span> userResponse: ApiResponse&lt;User&gt; = <span class="hljs-keyword">await</span> fetchUser(id);
</div></code></pre>
<h2 id="when-to-use-typescript">When to Use TypeScript</h2>
<h3 id="%E2%9C%85-great-for">‚úÖ Great for:</h3>
<ul>
<li>Large applications</li>
<li>Team projects</li>
<li>Long-term maintenance</li>
<li>Complex business logic</li>
<li>API development</li>
<li>Library development</li>
</ul>
<h3 id="%E2%9A%A0%EF%B8%8F-consider-carefully-for">‚ö†Ô∏è Consider carefully for:</h3>
<ul>
<li>Small scripts</li>
<li>Rapid prototyping</li>
<li>Simple websites</li>
<li>Learning JavaScript basics</li>
</ul>
<h2 id="migration-strategy">Migration Strategy</h2>
<p>You don't need to migrate everything at once:</p>
<ol>
<li><strong>Start small</strong>: Add TypeScript to new files</li>
<li><strong>Gradual adoption</strong>: Convert existing files one by one</li>
<li><strong>Mixed codebase</strong>: JavaScript and TypeScript can coexist</li>
<li><strong>Incremental typing</strong>: Start with <code>any</code> and add specific types over time</li>
</ol>
<pre class="hljs"><code><div><span class="hljs-comment">// Start with any for quick migration</span>
<span class="hljs-keyword">let</span> userData: <span class="hljs-built_in">any</span> = fetchUserData();

<span class="hljs-comment">// Gradually add specific types</span>
<span class="hljs-keyword">interface</span> UserData {
  id: <span class="hljs-built_in">number</span>;
  name: <span class="hljs-built_in">string</span>;
}
<span class="hljs-keyword">let</span> userData: UserData = fetchUserData();
</div></code></pre>
<h2 id="typescript-ecosystem">TypeScript Ecosystem</h2>
<h3 id="popular-frameworks-with-typescript-support">Popular Frameworks with TypeScript Support</h3>
<ul>
<li><strong>React</strong>: Excellent TypeScript support</li>
<li><strong>Angular</strong>: Built with TypeScript</li>
<li><strong>Vue.js</strong>: First-class TypeScript support</li>
<li><strong>Node.js</strong>: Great for backend development</li>
<li><strong>Next.js</strong>: Full-stack TypeScript applications</li>
</ul>
<h3 id="development-tools">Development Tools</h3>
<ul>
<li><strong>VS Code</strong>: Best-in-class TypeScript support</li>
<li><strong>WebStorm</strong>: Advanced TypeScript features</li>
<li><strong>ESLint</strong>: Code quality and style</li>
<li><strong>Prettier</strong>: Code formatting</li>
</ul>
<h2 id="getting-started-checklist">Getting Started Checklist</h2>
<ul>
<li><input type="checkbox" id="checkbox0"><label for="checkbox0">Install TypeScript globally or in your project</label></li>
<li><input type="checkbox" id="checkbox1"><label for="checkbox1">Set up </label><code>tsconfig.json</code> configuration</li>
<li><input type="checkbox" id="checkbox2"><label for="checkbox2">Configure your IDE for TypeScript</label></li>
<li><input type="checkbox" id="checkbox3"><label for="checkbox3">Start with simple type annotations</label></li>
<li><input type="checkbox" id="checkbox4"><label for="checkbox4">Learn about interfaces and types</label></li>
<li><input type="checkbox" id="checkbox5"><label for="checkbox5">Explore advanced features gradually</label></li>
</ul>
<h2 id="next-steps">Next Steps</h2>
<p>Now that you understand what TypeScript is and why it's valuable, let's move on to setting up your development environment and writing your first TypeScript code.</p>
<hr>
<p><em>Continue to: <a href="02-typescript-setup-and-configuration.md">Setting Up TypeScript Development Environment</a></em></p>
<h1 id="typescript-setup-and-configuration">TypeScript Setup and Configuration</h1>
<blockquote>
<p>Complete guide to installing TypeScript, setting up your development environment, and configuring your first project</p>
</blockquote>
<h2 id="installation-methods">Installation Methods</h2>
<h3 id="global-installation">Global Installation</h3>
<p>Install TypeScript globally to use the <code>tsc</code> command anywhere:</p>
<pre class="hljs"><code><div><span class="hljs-comment"># Using npm</span>
npm install -g typescript

<span class="hljs-comment"># Using yarn</span>
yarn global add typescript

<span class="hljs-comment"># Using pnpm</span>
pnpm add -g typescript

<span class="hljs-comment"># Verify installation</span>
tsc --version
</div></code></pre>
<h3 id="project-specific-installation-recommended">Project-Specific Installation (Recommended)</h3>
<p>Install TypeScript as a development dependency in your project:</p>
<pre class="hljs"><code><div><span class="hljs-comment"># Using npm</span>
npm install --save-dev typescript

<span class="hljs-comment"># Using yarn</span>
yarn add --dev typescript

<span class="hljs-comment"># Using pnpm</span>
pnpm add -D typescript
</div></code></pre>
<h3 id="why-project-specific-installation">Why Project-Specific Installation?</h3>
<ul>
<li><strong>Version consistency</strong>: Different projects can use different TypeScript versions</li>
<li><strong>Team collaboration</strong>: Everyone uses the same TypeScript version</li>
<li><strong>CI/CD compatibility</strong>: Build systems use the exact version specified</li>
</ul>
<h2 id="basic-project-setup">Basic Project Setup</h2>
<h3 id="1-initialize-your-project">1. Initialize Your Project</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Create project directory</span>
mkdir my-typescript-project
<span class="hljs-built_in">cd</span> my-typescript-project

<span class="hljs-comment"># Initialize package.json</span>
npm init -y

<span class="hljs-comment"># Install TypeScript</span>
npm install --save-dev typescript

<span class="hljs-comment"># Install Node.js types (for Node.js projects)</span>
npm install --save-dev @types/node
</div></code></pre>
<h3 id="2-create-typescript-configuration">2. Create TypeScript Configuration</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Generate tsconfig.json</span>
npx tsc --init
</div></code></pre>
<h3 id="3-project-structure">3. Project Structure</h3>
<pre class="hljs"><code><div>my-typescript-project/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ index.ts
‚îÇ   ‚îî‚îÄ‚îÄ utils/
‚îÇ       ‚îî‚îÄ‚îÄ helpers.ts
‚îú‚îÄ‚îÄ dist/
‚îú‚îÄ‚îÄ node_modules/
‚îú‚îÄ‚îÄ package.json
‚îú‚îÄ‚îÄ tsconfig.json
‚îî‚îÄ‚îÄ README.md
</div></code></pre>
<h2 id="typescript-configuration-tsconfigjson">TypeScript Configuration (tsconfig.json)</h2>
<h3 id="basic-configuration">Basic Configuration</h3>
<pre class="hljs"><code><div>{
  <span class="hljs-attr">"compilerOptions"</span>: {
    <span class="hljs-attr">"target"</span>: <span class="hljs-string">"ES2020"</span>,
    <span class="hljs-attr">"module"</span>: <span class="hljs-string">"commonjs"</span>,
    <span class="hljs-attr">"outDir"</span>: <span class="hljs-string">"./dist"</span>,
    <span class="hljs-attr">"rootDir"</span>: <span class="hljs-string">"./src"</span>,
    <span class="hljs-attr">"strict"</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">"esModuleInterop"</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">"skipLibCheck"</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">"forceConsistentCasingInFileNames"</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">"resolveJsonModule"</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">"declaration"</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">"declarationMap"</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">"sourceMap"</span>: <span class="hljs-literal">true</span>
  },
  <span class="hljs-attr">"include"</span>: [<span class="hljs-string">"src/**/*"</span>],
  <span class="hljs-attr">"exclude"</span>: [<span class="hljs-string">"node_modules"</span>, <span class="hljs-string">"dist"</span>, <span class="hljs-string">"**/*.test.ts"</span>]
}
</div></code></pre>
<h3 id="key-configuration-options">Key Configuration Options</h3>
<h4 id="compilation-options">Compilation Options</h4>
<pre class="hljs"><code><div>{
  <span class="hljs-attr">"compilerOptions"</span>: {
    <span class="hljs-comment">// Target JavaScript version</span>
    <span class="hljs-attr">"target"</span>: <span class="hljs-string">"ES2020"</span>, <span class="hljs-comment">// ES5, ES6, ES2017, ES2018, ES2019, ES2020, ES2021, ESNext</span>

    <span class="hljs-comment">// Module system</span>
    <span class="hljs-attr">"module"</span>: <span class="hljs-string">"commonjs"</span>, <span class="hljs-comment">// commonjs, amd, es6, es2015, es2020, esnext</span>

    <span class="hljs-comment">// Output directory</span>
    <span class="hljs-attr">"outDir"</span>: <span class="hljs-string">"./dist"</span>,

    <span class="hljs-comment">// Root directory of source files</span>
    <span class="hljs-attr">"rootDir"</span>: <span class="hljs-string">"./src"</span>,

    <span class="hljs-comment">// Library files to include</span>
    <span class="hljs-attr">"lib"</span>: [<span class="hljs-string">"ES2020"</span>, <span class="hljs-string">"DOM"</span>],

    <span class="hljs-comment">// Module resolution strategy</span>
    <span class="hljs-attr">"moduleResolution"</span>: <span class="hljs-string">"node"</span>
  }
}
</div></code></pre>
<h4 id="type-checking-options">Type Checking Options</h4>
<pre class="hljs"><code><div>{
  <span class="hljs-attr">"compilerOptions"</span>: {
    <span class="hljs-comment">// Enable all strict type checking options</span>
    <span class="hljs-attr">"strict"</span>: <span class="hljs-literal">true</span>,

    <span class="hljs-comment">// Individual strict options (enabled by "strict")</span>
    <span class="hljs-attr">"noImplicitAny"</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">"strictNullChecks"</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">"strictFunctionTypes"</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">"strictBindCallApply"</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">"strictPropertyInitialization"</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">"noImplicitReturns"</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">"noImplicitThis"</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">"alwaysStrict"</span>: <span class="hljs-literal">true</span>,

    <span class="hljs-comment">// Additional checks</span>
    <span class="hljs-attr">"noUnusedLocals"</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">"noUnusedParameters"</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">"exactOptionalPropertyTypes"</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">"noImplicitOverride"</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">"noPropertyAccessFromIndexSignature"</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">"noUncheckedIndexedAccess"</span>: <span class="hljs-literal">true</span>
  }
}
</div></code></pre>
<h4 id="development-options">Development Options</h4>
<pre class="hljs"><code><div>{
  <span class="hljs-attr">"compilerOptions"</span>: {
    <span class="hljs-comment">// Generate source maps for debugging</span>
    <span class="hljs-attr">"sourceMap"</span>: <span class="hljs-literal">true</span>,

    <span class="hljs-comment">// Generate declaration files</span>
    <span class="hljs-attr">"declaration"</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">"declarationMap"</span>: <span class="hljs-literal">true</span>,

    <span class="hljs-comment">// Remove comments from output</span>
    <span class="hljs-attr">"removeComments"</span>: <span class="hljs-literal">false</span>,

    <span class="hljs-comment">// Import helpers from tslib</span>
    <span class="hljs-attr">"importHelpers"</span>: <span class="hljs-literal">true</span>,

    <span class="hljs-comment">// Enable experimental decorators</span>
    <span class="hljs-attr">"experimentalDecorators"</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">"emitDecoratorMetadata"</span>: <span class="hljs-literal">true</span>
  }
}
</div></code></pre>
<h2 id="compilation-commands">Compilation Commands</h2>
<h3 id="basic-compilation">Basic Compilation</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Compile all files</span>
npx tsc

<span class="hljs-comment"># Compile specific file</span>
npx tsc src/index.ts

<span class="hljs-comment"># Compile with custom config</span>
npx tsc --project tsconfig.prod.json
</div></code></pre>
<h3 id="watch-mode">Watch Mode</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Watch for changes and recompile</span>
npx tsc --watch

<span class="hljs-comment"># Watch with custom config</span>
npx tsc --watch --project tsconfig.dev.json
</div></code></pre>
<h3 id="build-scripts">Build Scripts</h3>
<p>Add scripts to your <code>package.json</code>:</p>
<pre class="hljs"><code><div>{
  <span class="hljs-attr">"scripts"</span>: {
    <span class="hljs-attr">"build"</span>: <span class="hljs-string">"tsc"</span>,
    <span class="hljs-attr">"build:watch"</span>: <span class="hljs-string">"tsc --watch"</span>,
    <span class="hljs-attr">"build:prod"</span>: <span class="hljs-string">"tsc --project tsconfig.prod.json"</span>,
    <span class="hljs-attr">"clean"</span>: <span class="hljs-string">"rm -rf dist"</span>,
    <span class="hljs-attr">"dev"</span>: <span class="hljs-string">"ts-node src/index.ts"</span>,
    <span class="hljs-attr">"start"</span>: <span class="hljs-string">"node dist/index.js"</span>
  }
}
</div></code></pre>
<h2 id="development-tools-setup">Development Tools Setup</h2>
<h3 id="ts-node-for-development">ts-node for Development</h3>
<p>Run TypeScript files directly without compilation:</p>
<pre class="hljs"><code><div><span class="hljs-comment"># Install ts-node</span>
npm install --save-dev ts-node

<span class="hljs-comment"># Run TypeScript file directly</span>
npx ts-node src/index.ts

<span class="hljs-comment"># With nodemon for auto-restart</span>
npm install --save-dev nodemon
</div></code></pre>
<p>Create <code>nodemon.json</code>:</p>
<pre class="hljs"><code><div>{
  <span class="hljs-attr">"watch"</span>: [<span class="hljs-string">"src"</span>],
  <span class="hljs-attr">"ext"</span>: <span class="hljs-string">"ts"</span>,
  <span class="hljs-attr">"exec"</span>: <span class="hljs-string">"ts-node src/index.ts"</span>
}
</div></code></pre>
<h3 id="vs-code-configuration">VS Code Configuration</h3>
<p>Create <code>.vscode/settings.json</code>:</p>
<pre class="hljs"><code><div>{
  <span class="hljs-attr">"typescript.preferences.importModuleSpecifier"</span>: <span class="hljs-string">"relative"</span>,
  <span class="hljs-attr">"typescript.suggest.autoImports"</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">"typescript.updateImportsOnFileMove.enabled"</span>: <span class="hljs-string">"always"</span>,
  <span class="hljs-attr">"editor.codeActionsOnSave"</span>: {
    <span class="hljs-attr">"source.organizeImports"</span>: <span class="hljs-literal">true</span>
  },
  <span class="hljs-attr">"files.exclude"</span>: {
    <span class="hljs-attr">"**/node_modules"</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">"**/dist"</span>: <span class="hljs-literal">true</span>
  }
}
</div></code></pre>
<p>Create <code>.vscode/tasks.json</code> for build tasks:</p>
<pre class="hljs"><code><div>{
  <span class="hljs-attr">"version"</span>: <span class="hljs-string">"2.0.0"</span>,
  <span class="hljs-attr">"tasks"</span>: [
    {
      <span class="hljs-attr">"type"</span>: <span class="hljs-string">"typescript"</span>,
      <span class="hljs-attr">"tsconfig"</span>: <span class="hljs-string">"tsconfig.json"</span>,
      <span class="hljs-attr">"option"</span>: <span class="hljs-string">"watch"</span>,
      <span class="hljs-attr">"problemMatcher"</span>: [<span class="hljs-string">"$tsc-watch"</span>],
      <span class="hljs-attr">"group"</span>: <span class="hljs-string">"build"</span>,
      <span class="hljs-attr">"label"</span>: <span class="hljs-string">"TypeScript: Watch"</span>
    }
  ]
}
</div></code></pre>
<h2 id="environment-specific-configurations">Environment-Specific Configurations</h2>
<h3 id="development-configuration-tsconfigdevjson">Development Configuration (tsconfig.dev.json)</h3>
<pre class="hljs"><code><div>{
  <span class="hljs-attr">"extends"</span>: <span class="hljs-string">"./tsconfig.json"</span>,
  <span class="hljs-attr">"compilerOptions"</span>: {
    <span class="hljs-attr">"sourceMap"</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">"removeComments"</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">"noUnusedLocals"</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">"noUnusedParameters"</span>: <span class="hljs-literal">false</span>
  },
  <span class="hljs-attr">"include"</span>: [<span class="hljs-string">"src/**/*"</span>, <span class="hljs-string">"tests/**/*"</span>]
}
</div></code></pre>
<h3 id="production-configuration-tsconfigprodjson">Production Configuration (tsconfig.prod.json)</h3>
<pre class="hljs"><code><div>{
  <span class="hljs-attr">"extends"</span>: <span class="hljs-string">"./tsconfig.json"</span>,
  <span class="hljs-attr">"compilerOptions"</span>: {
    <span class="hljs-attr">"sourceMap"</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">"removeComments"</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">"noUnusedLocals"</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">"noUnusedParameters"</span>: <span class="hljs-literal">true</span>
  },
  <span class="hljs-attr">"exclude"</span>: [<span class="hljs-string">"node_modules"</span>, <span class="hljs-string">"tests"</span>, <span class="hljs-string">"**/*.test.ts"</span>, <span class="hljs-string">"**/*.spec.ts"</span>]
}
</div></code></pre>
<h2 id="path-mapping">Path Mapping</h2>
<p>Simplify imports with path mapping:</p>
<pre class="hljs"><code><div>{
  <span class="hljs-attr">"compilerOptions"</span>: {
    <span class="hljs-attr">"baseUrl"</span>: <span class="hljs-string">"./src"</span>,
    <span class="hljs-attr">"paths"</span>: {
      <span class="hljs-attr">"@/*"</span>: [<span class="hljs-string">"*"</span>],
      <span class="hljs-attr">"@utils/*"</span>: [<span class="hljs-string">"utils/*"</span>],
      <span class="hljs-attr">"@components/*"</span>: [<span class="hljs-string">"components/*"</span>],
      <span class="hljs-attr">"@services/*"</span>: [<span class="hljs-string">"services/*"</span>]
    }
  }
}
</div></code></pre>
<p>Usage:</p>
<pre class="hljs"><code><div><span class="hljs-comment">// Instead of</span>
<span class="hljs-keyword">import</span> { helper } <span class="hljs-keyword">from</span> <span class="hljs-string">"../../../utils/helper"</span>;

<span class="hljs-comment">// Use</span>
<span class="hljs-keyword">import</span> { helper } <span class="hljs-keyword">from</span> <span class="hljs-string">"@utils/helper"</span>;
</div></code></pre>
<h2 id="common-setup-issues-and-solutions">Common Setup Issues and Solutions</h2>
<h3 id="issue-module-not-found">Issue: Module Not Found</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Install missing type definitions</span>
npm install --save-dev @types/node
npm install --save-dev @types/express
</div></code></pre>
<h3 id="issue-cannot-find-global-types">Issue: Cannot Find Global Types</h3>
<p>Add to <code>tsconfig.json</code>:</p>
<pre class="hljs"><code><div>{
  <span class="hljs-attr">"compilerOptions"</span>: {
    <span class="hljs-attr">"types"</span>: [<span class="hljs-string">"node"</span>],
    <span class="hljs-attr">"typeRoots"</span>: [<span class="hljs-string">"./node_modules/@types"</span>]
  }
}
</div></code></pre>
<h3 id="issue-importexport-errors">Issue: Import/Export Errors</h3>
<p>Ensure proper module configuration:</p>
<pre class="hljs"><code><div>{
  <span class="hljs-attr">"compilerOptions"</span>: {
    <span class="hljs-attr">"module"</span>: <span class="hljs-string">"commonjs"</span>,
    <span class="hljs-attr">"esModuleInterop"</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">"allowSyntheticDefaultImports"</span>: <span class="hljs-literal">true</span>
  }
}
</div></code></pre>
<h2 id="next-steps">Next Steps</h2>
<p>With your TypeScript environment set up, you're ready to start learning about type annotations and basic TypeScript syntax.</p>
<hr>
<p><em>Continue to: <a href="03-basic-type-annotations.md">Basic Type Annotations</a></em></p>
<h1 id="basic-type-annotations">Basic Type Annotations</h1>
<blockquote>
<p>Learn how to add type annotations to variables, parameters, and return values in TypeScript</p>
</blockquote>
<h2 id="what-are-type-annotations">What are Type Annotations?</h2>
<p>Type annotations are explicit declarations that tell TypeScript what type of value a variable, parameter, or function return should be. They provide compile-time type checking and better IDE support.</p>
<pre class="hljs"><code><div><span class="hljs-comment">// Without type annotation (JavaScript)</span>
<span class="hljs-keyword">let</span> message = <span class="hljs-string">"Hello World"</span>;

<span class="hljs-comment">// With type annotation (TypeScript)</span>
<span class="hljs-keyword">let</span> message: <span class="hljs-built_in">string</span> = <span class="hljs-string">"Hello World"</span>;
</div></code></pre>
<h2 id="primitive-types">Primitive Types</h2>
<h3 id="string-type">String Type</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">let</span> firstName: <span class="hljs-built_in">string</span> = <span class="hljs-string">"John"</span>;
<span class="hljs-keyword">let</span> lastName: <span class="hljs-built_in">string</span> = <span class="hljs-string">"Doe"</span>;
<span class="hljs-keyword">let</span> fullName: <span class="hljs-built_in">string</span> = <span class="hljs-string">`<span class="hljs-subst">${firstName}</span> <span class="hljs-subst">${lastName}</span>`</span>; <span class="hljs-comment">// Template literals</span>

<span class="hljs-comment">// String methods are fully typed</span>
<span class="hljs-keyword">let</span> upperName: <span class="hljs-built_in">string</span> = firstName.toUpperCase();
<span class="hljs-keyword">let</span> nameLength: <span class="hljs-built_in">number</span> = firstName.length;
</div></code></pre>
<h3 id="number-type">Number Type</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">let</span> age: <span class="hljs-built_in">number</span> = <span class="hljs-number">25</span>;
<span class="hljs-keyword">let</span> price: <span class="hljs-built_in">number</span> = <span class="hljs-number">99.99</span>;
<span class="hljs-keyword">let</span> hexValue: <span class="hljs-built_in">number</span> = <span class="hljs-number">0xff</span>; <span class="hljs-comment">// Hexadecimal</span>
<span class="hljs-keyword">let</span> binaryValue: <span class="hljs-built_in">number</span> = <span class="hljs-number">0b1010</span>; <span class="hljs-comment">// Binary</span>
<span class="hljs-keyword">let</span> octalValue: <span class="hljs-built_in">number</span> = <span class="hljs-number">0o744</span>; <span class="hljs-comment">// Octal</span>

<span class="hljs-comment">// Number methods are typed</span>
<span class="hljs-keyword">let</span> rounded: <span class="hljs-built_in">number</span> = price.toFixed(<span class="hljs-number">2</span>);
<span class="hljs-keyword">let</span> parsed: <span class="hljs-built_in">number</span> = <span class="hljs-built_in">parseInt</span>(<span class="hljs-string">"42"</span>);
</div></code></pre>
<h3 id="boolean-type">Boolean Type</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">let</span> isActive: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">true</span>;
<span class="hljs-keyword">let</span> isComplete: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;
<span class="hljs-keyword">let</span> hasPermission: <span class="hljs-built_in">boolean</span> = age &gt;= <span class="hljs-number">18</span>; <span class="hljs-comment">// Expression result</span>

<span class="hljs-comment">// Boolean operations</span>
<span class="hljs-keyword">let</span> canAccess: <span class="hljs-built_in">boolean</span> = isActive &amp;&amp; hasPermission;
<span class="hljs-keyword">let</span> shouldShow: <span class="hljs-built_in">boolean</span> = !isComplete;
</div></code></pre>
<h3 id="null-and-undefined">Null and Undefined</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">let</span> nullValue: <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;
<span class="hljs-keyword">let</span> undefinedValue: <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;

<span class="hljs-comment">// Often used in union types</span>
<span class="hljs-keyword">let</span> optionalName: <span class="hljs-built_in">string</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;
<span class="hljs-keyword">let</span> maybeAge: <span class="hljs-built_in">number</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;

<span class="hljs-comment">// Strict null checks (when strictNullChecks is enabled)</span>
<span class="hljs-keyword">let</span> name: <span class="hljs-built_in">string</span> = <span class="hljs-string">"John"</span>;
<span class="hljs-comment">// name = null; // Error: Type 'null' is not assignable to type 'string'</span>
</div></code></pre>
<h2 id="special-types">Special Types</h2>
<h3 id="any-type">Any Type</h3>
<p>The <code>any</code> type disables type checking - use sparingly!</p>
<pre class="hljs"><code><div><span class="hljs-keyword">let</span> anything: <span class="hljs-built_in">any</span> = <span class="hljs-string">"hello"</span>;
anything = <span class="hljs-number">42</span>;
anything = <span class="hljs-literal">true</span>;
anything = { name: <span class="hljs-string">"John"</span> };
anything = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];

<span class="hljs-comment">// No type checking - can call any method</span>
anything.foo.bar.baz; <span class="hljs-comment">// No error, but might crash at runtime</span>

<span class="hljs-comment">// When to use any:</span>
<span class="hljs-comment">// 1. Migrating from JavaScript</span>
<span class="hljs-comment">// 2. Working with dynamic content</span>
<span class="hljs-comment">// 3. Third-party libraries without types</span>
</div></code></pre>
<h3 id="unknown-type">Unknown Type</h3>
<p>Safer alternative to <code>any</code> - requires type checking before use:</p>
<pre class="hljs"><code><div><span class="hljs-keyword">let</span> userInput: unknown;
userInput = <span class="hljs-string">"hello"</span>;
userInput = <span class="hljs-number">42</span>;
userInput = <span class="hljs-literal">true</span>;

<span class="hljs-comment">// Must check type before using</span>
<span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> userInput === <span class="hljs-string">"string"</span>) {
  <span class="hljs-built_in">console</span>.log(userInput.toUpperCase()); <span class="hljs-comment">// OK: TypeScript knows it's a string</span>
}

<span class="hljs-comment">// Type assertion (use carefully)</span>
<span class="hljs-keyword">let</span> strValue: <span class="hljs-built_in">string</span> = userInput <span class="hljs-keyword">as</span> <span class="hljs-built_in">string</span>;

<span class="hljs-comment">// Type guard function</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isString</span>(<span class="hljs-params">value: unknown</span>): <span class="hljs-title">value</span> <span class="hljs-title">is</span> <span class="hljs-title">string</span> </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> value === <span class="hljs-string">"string"</span>;
}

<span class="hljs-keyword">if</span> (isString(userInput)) {
  <span class="hljs-built_in">console</span>.log(userInput.length); <span class="hljs-comment">// OK: TypeScript knows it's a string</span>
}
</div></code></pre>
<h3 id="void-type">Void Type</h3>
<p>Used for functions that don't return a value:</p>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">logMessage</span>(<span class="hljs-params">message: <span class="hljs-built_in">string</span></span>): <span class="hljs-title">void</span> </span>{
  <span class="hljs-built_in">console</span>.log(message);
  <span class="hljs-comment">// No return statement, or return; (without value)</span>
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">processData</span>(<span class="hljs-params">data: <span class="hljs-built_in">any</span>[]</span>): <span class="hljs-title">void</span> </span>{
  data.forEach(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> <span class="hljs-built_in">console</span>.log(item));
  <span class="hljs-keyword">return</span>; <span class="hljs-comment">// OK: returning without value</span>
}

<span class="hljs-comment">// Variables of type void can only be undefined or null</span>
<span class="hljs-keyword">let</span> voidValue: <span class="hljs-built_in">void</span> = <span class="hljs-literal">undefined</span>;
</div></code></pre>
<h3 id="never-type">Never Type</h3>
<p>Represents values that never occur:</p>
<pre class="hljs"><code><div><span class="hljs-comment">// Function that never returns (throws error)</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">throwError</span>(<span class="hljs-params">message: <span class="hljs-built_in">string</span></span>): <span class="hljs-title">never</span> </span>{
  <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(message);
}

<span class="hljs-comment">// Function with infinite loop</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">infiniteLoop</span>(<span class="hljs-params"></span>): <span class="hljs-title">never</span> </span>{
  <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
    <span class="hljs-comment">// Do something forever</span>
  }
}

<span class="hljs-comment">// Exhaustive checking in switch statements</span>
<span class="hljs-keyword">type</span> Color = <span class="hljs-string">"red"</span> | <span class="hljs-string">"green"</span> | <span class="hljs-string">"blue"</span>;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getColorCode</span>(<span class="hljs-params">color: Color</span>): <span class="hljs-title">string</span> </span>{
  <span class="hljs-keyword">switch</span> (color) {
    <span class="hljs-keyword">case</span> <span class="hljs-string">"red"</span>:
      <span class="hljs-keyword">return</span> <span class="hljs-string">"#FF0000"</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">"green"</span>:
      <span class="hljs-keyword">return</span> <span class="hljs-string">"#00FF00"</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">"blue"</span>:
      <span class="hljs-keyword">return</span> <span class="hljs-string">"#0000FF"</span>;
    <span class="hljs-keyword">default</span>:
      <span class="hljs-comment">// This should never be reached</span>
      <span class="hljs-keyword">const</span> exhaustiveCheck: never = color;
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">`Unhandled color: <span class="hljs-subst">${exhaustiveCheck}</span>`</span>);
  }
}
</div></code></pre>
<h2 id="type-inference">Type Inference</h2>
<p>TypeScript can automatically infer types in many cases:</p>
<pre class="hljs"><code><div><span class="hljs-comment">// Type inference - no annotation needed</span>
<span class="hljs-keyword">let</span> message = <span class="hljs-string">"Hello"</span>; <span class="hljs-comment">// Inferred as string</span>
<span class="hljs-keyword">let</span> count = <span class="hljs-number">42</span>; <span class="hljs-comment">// Inferred as number</span>
<span class="hljs-keyword">let</span> isReady = <span class="hljs-literal">false</span>; <span class="hljs-comment">// Inferred as boolean</span>

<span class="hljs-comment">// Function return type inference</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">add</span>(<span class="hljs-params">a: <span class="hljs-built_in">number</span>, b: <span class="hljs-built_in">number</span></span>) </span>{
  <span class="hljs-keyword">return</span> a + b; <span class="hljs-comment">// Return type inferred as number</span>
}

<span class="hljs-comment">// Array type inference</span>
<span class="hljs-keyword">let</span> numbers = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]; <span class="hljs-comment">// Inferred as number[]</span>
<span class="hljs-keyword">let</span> mixed = [<span class="hljs-string">"hello"</span>, <span class="hljs-number">42</span>, <span class="hljs-literal">true</span>]; <span class="hljs-comment">// Inferred as (string | number | boolean)[]</span>

<span class="hljs-comment">// Object type inference</span>
<span class="hljs-keyword">let</span> person = {
  name: <span class="hljs-string">"John"</span>,
  age: <span class="hljs-number">30</span>,
}; <span class="hljs-comment">// Inferred as { name: string; age: number; }</span>
</div></code></pre>
<h2 id="when-to-use-type-annotations">When to Use Type Annotations</h2>
<h3 id="always-annotate">Always Annotate</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Function parameters (cannot be inferred)</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">greet</span>(<span class="hljs-params">name: <span class="hljs-built_in">string</span>, age: <span class="hljs-built_in">number</span></span>): <span class="hljs-title">string</span> </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-string">`Hello <span class="hljs-subst">${name}</span>, you are <span class="hljs-subst">${age}</span> years old`</span>;
}

<span class="hljs-comment">// When initial value doesn't match intended type</span>
<span class="hljs-keyword">let</span> userId: <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span> = <span class="hljs-string">"user123"</span>;
<span class="hljs-comment">// Later: userId = 456;</span>

<span class="hljs-comment">// When declaring without initialization</span>
<span class="hljs-keyword">let</span> userName: <span class="hljs-built_in">string</span>;
<span class="hljs-comment">// Later: userName = "John";</span>
</div></code></pre>
<h3 id="optional-annotations">Optional Annotations</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Clear from context - annotation optional</span>
<span class="hljs-keyword">let</span> message: <span class="hljs-built_in">string</span> = <span class="hljs-string">"Hello"</span>; <span class="hljs-comment">// Could be: let message = "Hello";</span>

<span class="hljs-comment">// When you want to be explicit</span>
<span class="hljs-keyword">let</span> price: <span class="hljs-built_in">number</span> = <span class="hljs-number">99.99</span>; <span class="hljs-comment">// Makes intent clear</span>

<span class="hljs-comment">// For better documentation</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">calculateTax</span>(<span class="hljs-params">amount: <span class="hljs-built_in">number</span></span>): <span class="hljs-title">number</span> </span>{
  <span class="hljs-comment">// Clear what function does</span>
  <span class="hljs-keyword">return</span> amount * <span class="hljs-number">0.1</span>;
}
</div></code></pre>
<h2 id="variable-declaration-patterns">Variable Declaration Patterns</h2>
<h3 id="multiple-variables">Multiple Variables</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Same type</span>
<span class="hljs-keyword">let</span> firstName: <span class="hljs-built_in">string</span>, lastName: <span class="hljs-built_in">string</span>;
firstName = <span class="hljs-string">"John"</span>;
lastName = <span class="hljs-string">"Doe"</span>;

<span class="hljs-comment">// Different types</span>
<span class="hljs-keyword">let</span> name: <span class="hljs-built_in">string</span> = <span class="hljs-string">"John"</span>;
<span class="hljs-keyword">let</span> age: <span class="hljs-built_in">number</span> = <span class="hljs-number">30</span>;
<span class="hljs-keyword">let</span> isActive: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">true</span>;

<span class="hljs-comment">// Destructuring with types</span>
<span class="hljs-keyword">let</span> [x, y]: [<span class="hljs-built_in">number</span>, <span class="hljs-built_in">number</span>] = [<span class="hljs-number">10</span>, <span class="hljs-number">20</span>];
<span class="hljs-keyword">let</span> { name: userName, age: userAge }: { name: <span class="hljs-built_in">string</span>; age: <span class="hljs-built_in">number</span> } = {
  name: <span class="hljs-string">"John"</span>,
  age: <span class="hljs-number">30</span>,
};
</div></code></pre>
<h3 id="const-assertions">Const Assertions</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Regular const - type is widened</span>
<span class="hljs-keyword">const</span> colors = [<span class="hljs-string">"red"</span>, <span class="hljs-string">"green"</span>, <span class="hljs-string">"blue"</span>]; <span class="hljs-comment">// Type: string[]</span>

<span class="hljs-comment">// Const assertion - type is narrowed</span>
<span class="hljs-keyword">const</span> colorsConst = [<span class="hljs-string">"red"</span>, <span class="hljs-string">"green"</span>, <span class="hljs-string">"blue"</span>] <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>; <span class="hljs-comment">// Type: readonly ["red", "green", "blue"]</span>

<span class="hljs-comment">// Object const assertion</span>
<span class="hljs-keyword">const</span> config = {
  apiUrl: <span class="hljs-string">"https://api.example.com"</span>,
  timeout: <span class="hljs-number">5000</span>,
} <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>; <span class="hljs-comment">// Properties become readonly and literal types</span>
</div></code></pre>
<h2 id="type-annotations-in-practice">Type Annotations in Practice</h2>
<h3 id="api-response-handling">API Response Handling</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Define expected response structure</span>
<span class="hljs-keyword">interface</span> ApiResponse {
  data: <span class="hljs-built_in">any</span>;
  status: <span class="hljs-built_in">number</span>;
  message: <span class="hljs-built_in">string</span>;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">handleApiResponse</span>(<span class="hljs-params">response: ApiResponse</span>): <span class="hljs-title">void</span> </span>{
  <span class="hljs-keyword">if</span> (response.status === <span class="hljs-number">200</span>) {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Success:"</span>, response.message);
    processData(response.data);
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-built_in">console</span>.error(<span class="hljs-string">"Error:"</span>, response.message);
  }
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">processData</span>(<span class="hljs-params">data: <span class="hljs-built_in">any</span></span>): <span class="hljs-title">void</span> </span>{
  <span class="hljs-comment">// Process the data</span>
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Processing:"</span>, data);
}
</div></code></pre>
<h3 id="form-handling">Form Handling</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Form data types</span>
<span class="hljs-keyword">interface</span> UserForm {
  email: <span class="hljs-built_in">string</span>;
  password: <span class="hljs-built_in">string</span>;
  rememberMe: <span class="hljs-built_in">boolean</span>;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">validateForm</span>(<span class="hljs-params">formData: UserForm</span>): <span class="hljs-title">boolean</span> </span>{
  <span class="hljs-keyword">const</span> emailValid: <span class="hljs-built_in">boolean</span> = formData.email.includes(<span class="hljs-string">"@"</span>);
  <span class="hljs-keyword">const</span> passwordValid: <span class="hljs-built_in">boolean</span> = formData.password.length &gt;= <span class="hljs-number">8</span>;

  <span class="hljs-keyword">return</span> emailValid &amp;&amp; passwordValid;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">submitForm</span>(<span class="hljs-params">formData: UserForm</span>): <span class="hljs-title">void</span> </span>{
  <span class="hljs-keyword">if</span> (validateForm(formData)) {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Form is valid, submitting..."</span>);
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Form validation failed"</span>);
  }
}
</div></code></pre>
<h2 id="common-mistakes-and-best-practices">Common Mistakes and Best Practices</h2>
<h3 id="%E2%9D%8C-common-mistakes">‚ùå Common Mistakes</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Over-annotating when inference works</span>
<span class="hljs-keyword">let</span> message: <span class="hljs-built_in">string</span> = <span class="hljs-string">"Hello"</span>; <span class="hljs-comment">// Unnecessary</span>
<span class="hljs-keyword">let</span> message = <span class="hljs-string">"Hello"</span>; <span class="hljs-comment">// Better</span>

<span class="hljs-comment">// Using any too liberally</span>
<span class="hljs-keyword">let</span> data: <span class="hljs-built_in">any</span> = fetchData(); <span class="hljs-comment">// Loses type safety</span>

<span class="hljs-comment">// Forgetting function parameter types</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">greet</span>(<span class="hljs-params">name</span>) </span>{
  <span class="hljs-comment">// Error: Parameter 'name' implicitly has an 'any' type</span>
  <span class="hljs-keyword">return</span> <span class="hljs-string">`Hello <span class="hljs-subst">${name}</span>`</span>;
}
</div></code></pre>
<h3 id="%E2%9C%85-best-practices">‚úÖ Best Practices</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Let TypeScript infer when obvious</span>
<span class="hljs-keyword">let</span> count = <span class="hljs-number">0</span>; <span class="hljs-comment">// Clear it's a number</span>

<span class="hljs-comment">// Annotate when intent isn't clear</span>
<span class="hljs-keyword">let</span> userId: <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span>; <span class="hljs-comment">// Will be assigned later</span>

<span class="hljs-comment">// Always annotate function parameters</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">greet</span>(<span class="hljs-params">name: <span class="hljs-built_in">string</span></span>): <span class="hljs-title">string</span> </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-string">`Hello <span class="hljs-subst">${name}</span>`</span>;
}

<span class="hljs-comment">// Use specific types over general ones</span>
<span class="hljs-keyword">type</span> Status = <span class="hljs-string">"pending"</span> | <span class="hljs-string">"approved"</span> | <span class="hljs-string">"rejected"</span>; <span class="hljs-comment">// Better than string</span>
<span class="hljs-keyword">let</span> orderStatus: Status = <span class="hljs-string">"pending"</span>;
</div></code></pre>
<h2 id="type-annotation-checklist">Type Annotation Checklist</h2>
<ul>
<li><input type="checkbox" id="checkbox6"><label for="checkbox6">Function parameters are always annotated</label></li>
<li><input type="checkbox" id="checkbox7"><label for="checkbox7">Return types are annotated for public functions</label></li>
<li><input type="checkbox" id="checkbox8"><label for="checkbox8">Variables are annotated when type isn't obvious</label></li>
<li><input type="checkbox" id="checkbox9"><label for="checkbox9">Avoid </label><code>any</code> unless absolutely necessary</li>
<li><input type="checkbox" id="checkbox10"><label for="checkbox10">Use </label><code>unknown</code> instead of <code>any</code> when possible</li>
<li><input type="checkbox" id="checkbox11"><label for="checkbox11">Let TypeScript infer types when they're obvious</label></li>
<li><input type="checkbox" id="checkbox12"><label for="checkbox12">Use specific types over general ones</label></li>
</ul>
<h2 id="next-steps">Next Steps</h2>
<p>Now that you understand basic type annotations, let's explore more complex type structures like interfaces and type aliases.</p>
<hr>
<p><em>Continue to: <a href="04-interfaces-and-types.md">Interfaces and Type Aliases</a></em></p>
<h1 id="interfaces-and-type-aliases">Interfaces and Type Aliases</h1>
<blockquote>
<p>Learn how to define custom types using interfaces and type aliases, and understand when to use each</p>
</blockquote>
<h2 id="what-are-interfaces">What are Interfaces?</h2>
<p>Interfaces define the structure of objects, specifying what properties and methods an object should have. They act as contracts that ensure objects conform to a specific shape.</p>
<pre class="hljs"><code><div><span class="hljs-keyword">interface</span> User {
  id: <span class="hljs-built_in">number</span>;
  name: <span class="hljs-built_in">string</span>;
  email: <span class="hljs-built_in">string</span>;
}

<span class="hljs-comment">// Object must match the interface</span>
<span class="hljs-keyword">const</span> user: User = {
  id: <span class="hljs-number">1</span>,
  name: <span class="hljs-string">"John Doe"</span>,
  email: <span class="hljs-string">"john@example.com"</span>,
};
</div></code></pre>
<h2 id="basic-interface-syntax">Basic Interface Syntax</h2>
<h3 id="simple-interface">Simple Interface</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">interface</span> Product {
  id: <span class="hljs-built_in">number</span>;
  name: <span class="hljs-built_in">string</span>;
  price: <span class="hljs-built_in">number</span>;
  description: <span class="hljs-built_in">string</span>;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">displayProduct</span>(<span class="hljs-params">product: Product</span>): <span class="hljs-title">void</span> </span>{
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`<span class="hljs-subst">${product.name}</span>: $<span class="hljs-subst">${product.price}</span>`</span>);
}

<span class="hljs-keyword">const</span> laptop: Product = {
  id: <span class="hljs-number">1</span>,
  name: <span class="hljs-string">"MacBook Pro"</span>,
  price: <span class="hljs-number">1999</span>,
  description: <span class="hljs-string">"Powerful laptop for professionals"</span>,
};

displayProduct(laptop);
</div></code></pre>
<h3 id="optional-properties">Optional Properties</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">interface</span> UserProfile {
  id: <span class="hljs-built_in">number</span>;
  username: <span class="hljs-built_in">string</span>;
  email: <span class="hljs-built_in">string</span>;
  avatar?: <span class="hljs-built_in">string</span>; <span class="hljs-comment">// Optional property</span>
  bio?: <span class="hljs-built_in">string</span>;
  website?: <span class="hljs-built_in">string</span>;
}

<span class="hljs-comment">// Valid - optional properties can be omitted</span>
<span class="hljs-keyword">const</span> user1: UserProfile = {
  id: <span class="hljs-number">1</span>,
  username: <span class="hljs-string">"johndoe"</span>,
  email: <span class="hljs-string">"john@example.com"</span>,
};

<span class="hljs-comment">// Also valid - optional properties included</span>
<span class="hljs-keyword">const</span> user2: UserProfile = {
  id: <span class="hljs-number">2</span>,
  username: <span class="hljs-string">"janedoe"</span>,
  email: <span class="hljs-string">"jane@example.com"</span>,
  avatar: <span class="hljs-string">"avatar.jpg"</span>,
  bio: <span class="hljs-string">"Software developer"</span>,
};
</div></code></pre>
<h3 id="readonly-properties">Readonly Properties</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">interface</span> Config {
  readonly apiUrl: <span class="hljs-built_in">string</span>;
  readonly version: <span class="hljs-built_in">string</span>;
  timeout: <span class="hljs-built_in">number</span>; <span class="hljs-comment">// Can be modified</span>
}

<span class="hljs-keyword">const</span> appConfig: Config = {
  apiUrl: <span class="hljs-string">"https://api.example.com"</span>,
  version: <span class="hljs-string">"1.0.0"</span>,
  timeout: <span class="hljs-number">5000</span>,
};

<span class="hljs-comment">// appConfig.apiUrl = "new-url"; // Error: Cannot assign to 'apiUrl' because it is a read-only property</span>
appConfig.timeout = <span class="hljs-number">10000</span>; <span class="hljs-comment">// OK: timeout is not readonly</span>
</div></code></pre>
<h2 id="interface-extension">Interface Extension</h2>
<h3 id="basic-extension">Basic Extension</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">interface</span> Animal {
  name: <span class="hljs-built_in">string</span>;
  age: <span class="hljs-built_in">number</span>;
}

<span class="hljs-keyword">interface</span> Dog <span class="hljs-keyword">extends</span> Animal {
  breed: <span class="hljs-built_in">string</span>;
  bark(): <span class="hljs-built_in">void</span>;
}

<span class="hljs-keyword">interface</span> Cat <span class="hljs-keyword">extends</span> Animal {
  color: <span class="hljs-built_in">string</span>;
  meow(): <span class="hljs-built_in">void</span>;
}

<span class="hljs-keyword">const</span> myDog: Dog = {
  name: <span class="hljs-string">"Buddy"</span>,
  age: <span class="hljs-number">3</span>,
  breed: <span class="hljs-string">"Golden Retriever"</span>,
  bark() {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Woof!"</span>);
  },
};
</div></code></pre>
<h3 id="multiple-extension">Multiple Extension</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">interface</span> Flyable {
  fly(): <span class="hljs-built_in">void</span>;
  altitude: <span class="hljs-built_in">number</span>;
}

<span class="hljs-keyword">interface</span> Swimmable {
  swim(): <span class="hljs-built_in">void</span>;
  depth: <span class="hljs-built_in">number</span>;
}

<span class="hljs-comment">// Extending multiple interfaces</span>
<span class="hljs-keyword">interface</span> Duck <span class="hljs-keyword">extends</span> Animal, Flyable, Swimmable {
  quack(): <span class="hljs-built_in">void</span>;
}

<span class="hljs-keyword">const</span> duck: Duck = {
  name: <span class="hljs-string">"Donald"</span>,
  age: <span class="hljs-number">2</span>,
  altitude: <span class="hljs-number">0</span>,
  depth: <span class="hljs-number">0</span>,
  fly() {
    <span class="hljs-keyword">this</span>.altitude = <span class="hljs-number">100</span>;
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Flying!"</span>);
  },
  swim() {
    <span class="hljs-keyword">this</span>.depth = <span class="hljs-number">5</span>;
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Swimming!"</span>);
  },
  quack() {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Quack!"</span>);
  },
};
</div></code></pre>
<h2 id="function-types-in-interfaces">Function Types in Interfaces</h2>
<h3 id="method-signatures">Method Signatures</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">interface</span> Calculator {
  <span class="hljs-comment">// Method signature</span>
  add(a: <span class="hljs-built_in">number</span>, b: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">number</span>;
  subtract(a: <span class="hljs-built_in">number</span>, b: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">number</span>;

  <span class="hljs-comment">// Property with function type</span>
  multiply: <span class="hljs-function">(<span class="hljs-params">a: <span class="hljs-built_in">number</span>, b: <span class="hljs-built_in">number</span></span>) =&gt;</span> <span class="hljs-built_in">number</span>;

  <span class="hljs-comment">// Optional method</span>
  divide?(a: <span class="hljs-built_in">number</span>, b: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">number</span>;
}

<span class="hljs-keyword">const</span> calc: Calculator = {
  add(a, b) {
    <span class="hljs-keyword">return</span> a + b;
  },
  subtract(a, b) {
    <span class="hljs-keyword">return</span> a - b;
  },
  multiply: <span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a * b,
  <span class="hljs-comment">// divide is optional, so we can omit it</span>
};
</div></code></pre>
<h3 id="event-handler-interfaces">Event Handler Interfaces</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">interface</span> EventHandler {
  onClick(event: MouseEvent): <span class="hljs-built_in">void</span>;
  onKeyPress(event: KeyboardEvent): <span class="hljs-built_in">void</span>;
  onSubmit?(event: SubmitEvent): <span class="hljs-built_in">void</span>;
}

<span class="hljs-keyword">interface</span> ButtonProps {
  text: <span class="hljs-built_in">string</span>;
  disabled?: <span class="hljs-built_in">boolean</span>;
  handler: EventHandler;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createButton</span>(<span class="hljs-params">props: ButtonProps</span>): <span class="hljs-title">HTMLButtonElement</span> </span>{
  <span class="hljs-keyword">const</span> button = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">"button"</span>);
  button.textContent = props.text;
  button.disabled = props.disabled || <span class="hljs-literal">false</span>;

  button.addEventListener(<span class="hljs-string">"click"</span>, props.handler.onClick);
  button.addEventListener(<span class="hljs-string">"keypress"</span>, props.handler.onKeyPress);

  <span class="hljs-keyword">return</span> button;
}
</div></code></pre>
<h2 id="index-signatures">Index Signatures</h2>
<h3 id="string-index-signatures">String Index Signatures</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">interface</span> StringDictionary {
  [key: <span class="hljs-built_in">string</span>]: <span class="hljs-built_in">string</span>;
}

<span class="hljs-keyword">const</span> translations: StringDictionary = {
  hello: <span class="hljs-string">"Hola"</span>,
  goodbye: <span class="hljs-string">"Adi√≥s"</span>,
  thanks: <span class="hljs-string">"Gracias"</span>,
};

<span class="hljs-comment">// Can add any string key</span>
translations.welcome = <span class="hljs-string">"Bienvenido"</span>;
</div></code></pre>
<h3 id="number-index-signatures">Number Index Signatures</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">interface</span> NumberArray {
  [index: <span class="hljs-built_in">number</span>]: <span class="hljs-built_in">number</span>;
  length: <span class="hljs-built_in">number</span>; <span class="hljs-comment">// Can have named properties too</span>
}

<span class="hljs-keyword">const</span> scores: NumberArray = {
  <span class="hljs-number">0</span>: <span class="hljs-number">95</span>,
  <span class="hljs-number">1</span>: <span class="hljs-number">87</span>,
  <span class="hljs-number">2</span>: <span class="hljs-number">92</span>,
  length: <span class="hljs-number">3</span>,
};
</div></code></pre>
<h3 id="mixed-index-signatures">Mixed Index Signatures</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">interface</span> MixedDictionary {
  [key: <span class="hljs-built_in">string</span>]: <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span>;
  name: <span class="hljs-built_in">string</span>; <span class="hljs-comment">// Must be compatible with index signature</span>
  age: <span class="hljs-built_in">number</span>;
}

<span class="hljs-keyword">const</span> person: MixedDictionary = {
  name: <span class="hljs-string">"John"</span>,
  age: <span class="hljs-number">30</span>,
  city: <span class="hljs-string">"New York"</span>,
  zipCode: <span class="hljs-number">10001</span>,
};
</div></code></pre>
<h2 id="type-aliases">Type Aliases</h2>
<p>Type aliases create new names for existing types, including complex type combinations.</p>
<h3 id="basic-type-aliases">Basic Type Aliases</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Primitive type alias</span>
<span class="hljs-keyword">type</span> UserID = <span class="hljs-built_in">string</span>;
<span class="hljs-keyword">type</span> Age = <span class="hljs-built_in">number</span>;
<span class="hljs-keyword">type</span> IsActive = <span class="hljs-built_in">boolean</span>;

<span class="hljs-comment">// Using type aliases</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getUser</span>(<span class="hljs-params">id: UserID</span>): <span class="hljs-title">User</span> | <span class="hljs-title">null</span> </span>{
  <span class="hljs-comment">// Implementation</span>
  <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">updateAge</span>(<span class="hljs-params">userId: UserID, newAge: Age</span>): <span class="hljs-title">void</span> </span>{
  <span class="hljs-comment">// Implementation</span>
}
</div></code></pre>
<h3 id="object-type-aliases">Object Type Aliases</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">type</span> Point = {
  x: <span class="hljs-built_in">number</span>;
  y: <span class="hljs-built_in">number</span>;
};

<span class="hljs-keyword">type</span> Rectangle = {
  topLeft: Point;
  bottomRight: Point;
};

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">calculateArea</span>(<span class="hljs-params">rect: Rectangle</span>): <span class="hljs-title">number</span> </span>{
  <span class="hljs-keyword">const</span> width = rect.bottomRight.x - rect.topLeft.x;
  <span class="hljs-keyword">const</span> height = rect.bottomRight.y - rect.topLeft.y;
  <span class="hljs-keyword">return</span> width * height;
}
</div></code></pre>
<h3 id="union-types">Union Types</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">type</span> Status = <span class="hljs-string">"pending"</span> | <span class="hljs-string">"approved"</span> | <span class="hljs-string">"rejected"</span> | <span class="hljs-string">"cancelled"</span>;
<span class="hljs-keyword">type</span> Theme = <span class="hljs-string">"light"</span> | <span class="hljs-string">"dark"</span> | <span class="hljs-string">"auto"</span>;
<span class="hljs-keyword">type</span> Size = <span class="hljs-string">"small"</span> | <span class="hljs-string">"medium"</span> | <span class="hljs-string">"large"</span>;

<span class="hljs-comment">// Union of different types</span>
<span class="hljs-keyword">type</span> ID = <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span>;
<span class="hljs-keyword">type</span> Response = <span class="hljs-built_in">string</span> | { error: <span class="hljs-built_in">string</span> } | { data: <span class="hljs-built_in">any</span> };

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">handleResponse</span>(<span class="hljs-params">response: Response</span>): <span class="hljs-title">void</span> </span>{
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> response === <span class="hljs-string">"string"</span>) {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Message:"</span>, response);
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-string">"error"</span> <span class="hljs-keyword">in</span> response) {
    <span class="hljs-built_in">console</span>.error(<span class="hljs-string">"Error:"</span>, response.error);
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Data:"</span>, response.data);
  }
}
</div></code></pre>
<h3 id="function-type-aliases">Function Type Aliases</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Function type aliases</span>
<span class="hljs-keyword">type</span> EventCallback = <span class="hljs-function">(<span class="hljs-params">event: Event</span>) =&gt;</span> <span class="hljs-built_in">void</span>;
<span class="hljs-keyword">type</span> Validator&lt;T&gt; = <span class="hljs-function">(<span class="hljs-params">value: T</span>) =&gt;</span> <span class="hljs-built_in">boolean</span>;
<span class="hljs-keyword">type</span> Transformer&lt;T, U&gt; = <span class="hljs-function">(<span class="hljs-params">input: T</span>) =&gt;</span> U;

<span class="hljs-comment">// Using function type aliases</span>
<span class="hljs-keyword">const</span> emailValidator: Validator&lt;<span class="hljs-built_in">string</span>&gt; = <span class="hljs-function">(<span class="hljs-params">email</span>) =&gt;</span> {
  <span class="hljs-keyword">return</span> email.includes(<span class="hljs-string">"@"</span>);
};

<span class="hljs-keyword">const</span> stringToNumber: Transformer&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">number</span>&gt; = <span class="hljs-function">(<span class="hljs-params">str</span>) =&gt;</span> {
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">parseInt</span>(str, <span class="hljs-number">10</span>);
};

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addEventListener</span>(<span class="hljs-params">
  element: HTMLElement,
  event: <span class="hljs-built_in">string</span>,
  callback: EventCallback
</span>): <span class="hljs-title">void</span> </span>{
  element.addEventListener(event, callback);
}
</div></code></pre>
<h2 id="intersection-types">Intersection Types</h2>
<pre class="hljs"><code><div><span class="hljs-keyword">type</span> Name = {
  firstName: <span class="hljs-built_in">string</span>;
  lastName: <span class="hljs-built_in">string</span>;
};

<span class="hljs-keyword">type</span> Contact = {
  email: <span class="hljs-built_in">string</span>;
  phone: <span class="hljs-built_in">string</span>;
};

<span class="hljs-keyword">type</span> Address = {
  street: <span class="hljs-built_in">string</span>;
  city: <span class="hljs-built_in">string</span>;
  zipCode: <span class="hljs-built_in">string</span>;
};

<span class="hljs-comment">// Intersection type - combines all properties</span>
<span class="hljs-keyword">type</span> Person = Name &amp; Contact &amp; Address;

<span class="hljs-keyword">const</span> person: Person = {
  firstName: <span class="hljs-string">"John"</span>,
  lastName: <span class="hljs-string">"Doe"</span>,
  email: <span class="hljs-string">"john@example.com"</span>,
  phone: <span class="hljs-string">"555-1234"</span>,
  street: <span class="hljs-string">"123 Main St"</span>,
  city: <span class="hljs-string">"Anytown"</span>,
  zipCode: <span class="hljs-string">"12345"</span>,
};

<span class="hljs-comment">// Intersection with interfaces</span>
<span class="hljs-keyword">interface</span> Timestamped {
  createdAt: <span class="hljs-built_in">Date</span>;
  updatedAt: <span class="hljs-built_in">Date</span>;
}

<span class="hljs-keyword">type</span> UserWithTimestamp = User &amp; Timestamped;
</div></code></pre>
<h2 id="interface-vs-type-alias-when-to-use-which">Interface vs Type Alias: When to Use Which?</h2>
<h3 id="use-interfaces-when">Use Interfaces When:</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// 1. Defining object shapes</span>
<span class="hljs-keyword">interface</span> User {
  id: <span class="hljs-built_in">number</span>;
  name: <span class="hljs-built_in">string</span>;
}

<span class="hljs-comment">// 2. You need declaration merging</span>
<span class="hljs-keyword">interface</span> Window {
  customProperty: <span class="hljs-built_in">string</span>;
}

<span class="hljs-comment">// Later in another file...</span>
<span class="hljs-keyword">interface</span> Window {
  anotherProperty: <span class="hljs-built_in">number</span>;
}
<span class="hljs-comment">// Window now has both properties</span>

<span class="hljs-comment">// 3. Extending classes</span>
<span class="hljs-keyword">class</span> BaseUser <span class="hljs-keyword">implements</span> User {
  <span class="hljs-keyword">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">public</span> id: <span class="hljs-built_in">number</span>, <span class="hljs-keyword">public</span> name: <span class="hljs-built_in">string</span></span>) {}
}

<span class="hljs-comment">// 4. When you might extend later</span>
<span class="hljs-keyword">interface</span> AdminUser <span class="hljs-keyword">extends</span> User {
  permissions: <span class="hljs-built_in">string</span>[];
}
</div></code></pre>
<h3 id="use-type-aliases-when">Use Type Aliases When:</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// 1. Union types</span>
<span class="hljs-keyword">type</span> Status = <span class="hljs-string">"loading"</span> | <span class="hljs-string">"success"</span> | <span class="hljs-string">"error"</span>;

<span class="hljs-comment">// 2. Intersection types</span>
<span class="hljs-keyword">type</span> UserWithRole = User &amp; { role: <span class="hljs-built_in">string</span> };

<span class="hljs-comment">// 3. Computed properties</span>
<span class="hljs-keyword">type</span> Keys = <span class="hljs-string">"name"</span> | <span class="hljs-string">"email"</span>;
<span class="hljs-keyword">type</span> UserSubset = {
  [K <span class="hljs-keyword">in</span> Keys]: <span class="hljs-built_in">string</span>;
};

<span class="hljs-comment">// 4. Complex type manipulations</span>
<span class="hljs-keyword">type</span> Optional&lt;T&gt; = {
  [K <span class="hljs-keyword">in</span> keyof T]?: T[K];
};

<span class="hljs-comment">// 5. Function types</span>
<span class="hljs-keyword">type</span> EventHandler = <span class="hljs-function">(<span class="hljs-params">event: Event</span>) =&gt;</span> <span class="hljs-built_in">void</span>;

<span class="hljs-comment">// 6. Primitive aliases</span>
<span class="hljs-keyword">type</span> UserID = <span class="hljs-built_in">string</span>;
</div></code></pre>
<h2 id="advanced-interface-patterns">Advanced Interface Patterns</h2>
<h3 id="generic-interfaces">Generic Interfaces</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">interface</span> Repository&lt;T&gt; {
  findById(id: <span class="hljs-built_in">string</span>): T | <span class="hljs-literal">null</span>;
  save(entity: T): T;
  <span class="hljs-keyword">delete</span>(id: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">boolean</span>;
  findAll(): T[];
}

<span class="hljs-keyword">interface</span> User {
  id: <span class="hljs-built_in">string</span>;
  name: <span class="hljs-built_in">string</span>;
  email: <span class="hljs-built_in">string</span>;
}

<span class="hljs-keyword">class</span> UserRepository <span class="hljs-keyword">implements</span> Repository&lt;User&gt; {
  <span class="hljs-keyword">private</span> users: User[] = [];

  findById(id: <span class="hljs-built_in">string</span>): User | <span class="hljs-literal">null</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.users.find(<span class="hljs-function">(<span class="hljs-params">user</span>) =&gt;</span> user.id === id) || <span class="hljs-literal">null</span>;
  }

  save(user: User): User {
    <span class="hljs-keyword">this</span>.users.push(user);
    <span class="hljs-keyword">return</span> user;
  }

  <span class="hljs-keyword">delete</span>(id: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">boolean</span> {
    <span class="hljs-keyword">const</span> index = <span class="hljs-keyword">this</span>.users.findIndex(<span class="hljs-function">(<span class="hljs-params">user</span>) =&gt;</span> user.id === id);
    <span class="hljs-keyword">if</span> (index &gt; <span class="hljs-number">-1</span>) {
      <span class="hljs-keyword">this</span>.users.splice(index, <span class="hljs-number">1</span>);
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }

  findAll(): User[] {
    <span class="hljs-keyword">return</span> [...this.users];
  }
}
</div></code></pre>
<h3 id="conditional-properties">Conditional Properties</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">interface</span> BaseConfig {
  apiUrl: <span class="hljs-built_in">string</span>;
  timeout: <span class="hljs-built_in">number</span>;
}

<span class="hljs-keyword">interface</span> DevConfig <span class="hljs-keyword">extends</span> BaseConfig {
  debug: <span class="hljs-literal">true</span>;
  logLevel: <span class="hljs-string">"verbose"</span> | <span class="hljs-string">"info"</span> | <span class="hljs-string">"warn"</span> | <span class="hljs-string">"error"</span>;
}

<span class="hljs-keyword">interface</span> ProdConfig <span class="hljs-keyword">extends</span> BaseConfig {
  debug: <span class="hljs-literal">false</span>;
  compression: <span class="hljs-built_in">boolean</span>;
}

<span class="hljs-keyword">type</span> Config = DevConfig | ProdConfig;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createLogger</span>(<span class="hljs-params">config: Config</span>): <span class="hljs-title">void</span> </span>{
  <span class="hljs-keyword">if</span> (config.debug) {
    <span class="hljs-comment">// TypeScript knows this is DevConfig</span>
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`Log level: <span class="hljs-subst">${config.logLevel}</span>`</span>);
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// TypeScript knows this is ProdConfig</span>
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`Compression: <span class="hljs-subst">${config.compression}</span>`</span>);
  }
}
</div></code></pre>
<h2 id="best-practices">Best Practices</h2>
<h3 id="%E2%9C%85-good-practices">‚úÖ Good Practices</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Use descriptive names</span>
<span class="hljs-keyword">interface</span> UserAccount {
  id: <span class="hljs-built_in">string</span>;
  email: <span class="hljs-built_in">string</span>;
}

<span class="hljs-comment">// Group related properties</span>
<span class="hljs-keyword">interface</span> UserProfile {
  personal: {
    firstName: <span class="hljs-built_in">string</span>;
    lastName: <span class="hljs-built_in">string</span>;
    dateOfBirth: <span class="hljs-built_in">Date</span>;
  };
  contact: {
    email: <span class="hljs-built_in">string</span>;
    phone?: <span class="hljs-built_in">string</span>;
  };
  preferences: {
    theme: <span class="hljs-string">"light"</span> | <span class="hljs-string">"dark"</span>;
    notifications: <span class="hljs-built_in">boolean</span>;
  };
}

<span class="hljs-comment">// Use readonly for immutable data</span>
<span class="hljs-keyword">interface</span> ApiResponse {
  readonly data: <span class="hljs-built_in">any</span>;
  readonly status: <span class="hljs-built_in">number</span>;
  readonly timestamp: <span class="hljs-built_in">Date</span>;
}
</div></code></pre>
<h3 id="%E2%9D%8C-avoid">‚ùå Avoid</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Don't use overly generic names</span>
<span class="hljs-keyword">interface</span> Data {
  value: <span class="hljs-built_in">any</span>;
}

<span class="hljs-comment">// Don't make everything optional</span>
<span class="hljs-keyword">interface</span> BadUser {
  id?: <span class="hljs-built_in">string</span>;
  name?: <span class="hljs-built_in">string</span>;
  email?: <span class="hljs-built_in">string</span>;
}

<span class="hljs-comment">// Don't use any when you can be specific</span>
<span class="hljs-keyword">interface</span> BadResponse {
  data: <span class="hljs-built_in">any</span>; <span class="hljs-comment">// Be more specific about the data structure</span>
}
</div></code></pre>
<h2 id="next-steps">Next Steps</h2>
<p>Now that you understand interfaces and type aliases, let's explore how to add types to functions, including parameters, return types, and overloads.</p>
<hr>
<p><em>Continue to: <a href="05-functions-and-type-safety.md">Functions and Type Safety</a></em></p>
<h1 id="functions-and-type-safety">Functions and Type Safety</h1>
<blockquote>
<p>Master function typing in TypeScript, including parameters, return types, overloads, and advanced function patterns</p>
</blockquote>
<h2 id="basic-function-typing">Basic Function Typing</h2>
<h3 id="function-declarations">Function Declarations</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Basic function with typed parameters and return type</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">add</span>(<span class="hljs-params">a: <span class="hljs-built_in">number</span>, b: <span class="hljs-built_in">number</span></span>): <span class="hljs-title">number</span> </span>{
  <span class="hljs-keyword">return</span> a + b;
}

<span class="hljs-comment">// Function with no return value</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">logMessage</span>(<span class="hljs-params">message: <span class="hljs-built_in">string</span></span>): <span class="hljs-title">void</span> </span>{
  <span class="hljs-built_in">console</span>.log(message);
}

<span class="hljs-comment">// Function that never returns</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">throwError</span>(<span class="hljs-params">message: <span class="hljs-built_in">string</span></span>): <span class="hljs-title">never</span> </span>{
  <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(message);
}
</div></code></pre>
<h3 id="function-expressions">Function Expressions</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Arrow function</span>
<span class="hljs-keyword">const</span> multiply = (a: <span class="hljs-built_in">number</span>, b: <span class="hljs-built_in">number</span>): <span class="hljs-function"><span class="hljs-params">number</span> =&gt;</span> a * b;

<span class="hljs-comment">// Function expression</span>
<span class="hljs-keyword">const</span> divide = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">a: <span class="hljs-built_in">number</span>, b: <span class="hljs-built_in">number</span></span>): <span class="hljs-title">number</span> </span>{
  <span class="hljs-keyword">return</span> a / b;
};

<span class="hljs-comment">// Function with explicit type annotation</span>
<span class="hljs-keyword">const</span> subtract: <span class="hljs-function">(<span class="hljs-params">a: <span class="hljs-built_in">number</span>, b: <span class="hljs-built_in">number</span></span>) =&gt;</span> <span class="hljs-built_in">number</span> = <span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a - b;
</div></code></pre>
<h3 id="function-type-aliases">Function Type Aliases</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Define function type</span>
<span class="hljs-keyword">type</span> MathOperation = <span class="hljs-function">(<span class="hljs-params">a: <span class="hljs-built_in">number</span>, b: <span class="hljs-built_in">number</span></span>) =&gt;</span> <span class="hljs-built_in">number</span>;
<span class="hljs-keyword">type</span> StringProcessor = <span class="hljs-function">(<span class="hljs-params">input: <span class="hljs-built_in">string</span></span>) =&gt;</span> <span class="hljs-built_in">string</span>;
<span class="hljs-keyword">type</span> EventHandler = <span class="hljs-function">(<span class="hljs-params">event: Event</span>) =&gt;</span> <span class="hljs-built_in">void</span>;

<span class="hljs-comment">// Use function types</span>
<span class="hljs-keyword">const</span> add: MathOperation = <span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a + b;
<span class="hljs-keyword">const</span> toUpperCase: StringProcessor = <span class="hljs-function">(<span class="hljs-params">str</span>) =&gt;</span> str.toUpperCase();

<span class="hljs-comment">// Function that accepts another function</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">calculate</span>(<span class="hljs-params">operation: MathOperation, x: <span class="hljs-built_in">number</span>, y: <span class="hljs-built_in">number</span></span>): <span class="hljs-title">number</span> </span>{
  <span class="hljs-keyword">return</span> operation(x, y);
}

<span class="hljs-keyword">const</span> result = calculate(add, <span class="hljs-number">5</span>, <span class="hljs-number">3</span>); <span class="hljs-comment">// 8</span>
</div></code></pre>
<h2 id="parameter-types">Parameter Types</h2>
<h3 id="optional-parameters">Optional Parameters</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Optional parameters must come after required ones</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">greet</span>(<span class="hljs-params">name: <span class="hljs-built_in">string</span>, greeting?: <span class="hljs-built_in">string</span></span>): <span class="hljs-title">string</span> </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${greeting || <span class="hljs-string">"Hello"</span>}</span>, <span class="hljs-subst">${name}</span>!`</span>;
}

greet(<span class="hljs-string">"John"</span>); <span class="hljs-comment">// "Hello, John!"</span>
greet(<span class="hljs-string">"John"</span>, <span class="hljs-string">"Hi"</span>); <span class="hljs-comment">// "Hi, John!"</span>

<span class="hljs-comment">// Multiple optional parameters</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createUser</span>(<span class="hljs-params">name: <span class="hljs-built_in">string</span>, age?: <span class="hljs-built_in">number</span>, email?: <span class="hljs-built_in">string</span></span>): <span class="hljs-title">User</span> </span>{
  <span class="hljs-keyword">return</span> {
    id: <span class="hljs-built_in">Math</span>.random().toString(),
    name,
    age: age || <span class="hljs-number">0</span>,
    email: email || <span class="hljs-string">""</span>,
  };
}
</div></code></pre>
<h3 id="default-parameters">Default Parameters</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Default parameter values</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createConnection</span>(<span class="hljs-params">
  host: <span class="hljs-built_in">string</span> = "localhost",
  port: <span class="hljs-built_in">number</span> = 3000,
  ssl: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>
</span>): <span class="hljs-title">Connection</span> </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Connection(host, port, ssl);
}

<span class="hljs-comment">// Can call with any number of arguments</span>
createConnection(); <span class="hljs-comment">// Uses all defaults</span>
createConnection(<span class="hljs-string">"api.example.com"</span>); <span class="hljs-comment">// Custom host, default port and ssl</span>
createConnection(<span class="hljs-string">"api.example.com"</span>, <span class="hljs-number">443</span>, <span class="hljs-literal">true</span>); <span class="hljs-comment">// All custom</span>

<span class="hljs-comment">// Default parameters can reference earlier parameters</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">buildUrl</span>(<span class="hljs-params">
  protocol: <span class="hljs-built_in">string</span> = "https",
  host: <span class="hljs-built_in">string</span>,
  path: <span class="hljs-built_in">string</span> = "/"
</span>): <span class="hljs-title">string</span> </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${protocol}</span>://<span class="hljs-subst">${host}</span><span class="hljs-subst">${path}</span>`</span>;
}
</div></code></pre>
<h3 id="rest-parameters">Rest Parameters</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Rest parameters for variable arguments</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sum</span>(<span class="hljs-params">...numbers: <span class="hljs-built_in">number</span>[]</span>): <span class="hljs-title">number</span> </span>{
  <span class="hljs-keyword">return</span> numbers.reduce(<span class="hljs-function">(<span class="hljs-params">total, num</span>) =&gt;</span> total + num, <span class="hljs-number">0</span>);
}

sum(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>); <span class="hljs-comment">// 15</span>
sum(); <span class="hljs-comment">// 0</span>

<span class="hljs-comment">// Rest parameters with other parameters</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">logWithPrefix</span>(<span class="hljs-params">prefix: <span class="hljs-built_in">string</span>, ...messages: <span class="hljs-built_in">string</span>[]</span>): <span class="hljs-title">void</span> </span>{
  messages.forEach(<span class="hljs-function">(<span class="hljs-params">message</span>) =&gt;</span> {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`<span class="hljs-subst">${prefix}</span>: <span class="hljs-subst">${message}</span>`</span>);
  });
}

logWithPrefix(<span class="hljs-string">"INFO"</span>, <span class="hljs-string">"Server started"</span>, <span class="hljs-string">"Database connected"</span>);

<span class="hljs-comment">// Typed rest parameters</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">combineObjects</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params">...objects: T[]</span>): <span class="hljs-title">T</span> </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">Object</span>.assign({}, ...objects);
}
</div></code></pre>
<h3 id="destructured-parameters">Destructured Parameters</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Object destructuring in parameters</span>
<span class="hljs-keyword">interface</span> UserInfo {
  name: <span class="hljs-built_in">string</span>;
  age: <span class="hljs-built_in">number</span>;
  email: <span class="hljs-built_in">string</span>;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">displayUser</span>(<span class="hljs-params">{ name, age, email }: UserInfo</span>): <span class="hljs-title">string</span> </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${name}</span> (<span class="hljs-subst">${age}</span>) - <span class="hljs-subst">${email}</span>`</span>;
}

<span class="hljs-comment">// With default values</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createApiClient</span>(<span class="hljs-params">{
  baseUrl = "https:<span class="hljs-comment">//api.example.com",</span>
  timeout = 5000,
  retries = 3,
}: {
  baseUrl?: <span class="hljs-built_in">string</span>;
  timeout?: <span class="hljs-built_in">number</span>;
  retries?: <span class="hljs-built_in">number</span>;
} = {}</span>): <span class="hljs-title">ApiClient</span> </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> ApiClient(baseUrl, timeout, retries);
}

<span class="hljs-comment">// Array destructuring</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getCoordinates</span>(<span class="hljs-params">[x, y]: [<span class="hljs-built_in">number</span>, <span class="hljs-built_in">number</span>]</span>): <span class="hljs-title">string</span> </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-string">`(<span class="hljs-subst">${x}</span>, <span class="hljs-subst">${y}</span>)`</span>;
}
</div></code></pre>
<h2 id="return-types">Return Types</h2>
<h3 id="explicit-return-types">Explicit Return Types</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Explicit return type annotation</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getUser</span>(<span class="hljs-params">id: <span class="hljs-built_in">string</span></span>): <span class="hljs-title">User</span> | <span class="hljs-title">null</span> </span>{
  <span class="hljs-comment">// Implementation</span>
  <span class="hljs-keyword">return</span> users.find(<span class="hljs-function">(<span class="hljs-params">user</span>) =&gt;</span> user.id === id) || <span class="hljs-literal">null</span>;
}

<span class="hljs-comment">// Promise return types</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fetchUserData</span>(<span class="hljs-params">id: <span class="hljs-built_in">string</span></span>): <span class="hljs-title">Promise</span>&lt;<span class="hljs-title">User</span>&gt; </span>{
  <span class="hljs-keyword">return</span> fetch(<span class="hljs-string">`/api/users/<span class="hljs-subst">${id}</span>`</span>).then(<span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> response.json());
}

<span class="hljs-comment">// Async function return types</span>
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getUserAsync</span>(<span class="hljs-params">id: <span class="hljs-built_in">string</span></span>): <span class="hljs-title">Promise</span>&lt;<span class="hljs-title">User</span> | <span class="hljs-title">null</span>&gt; </span>{
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> fetch(<span class="hljs-string">`/api/users/<span class="hljs-subst">${id}</span>`</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> response.json();
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
  }
}
</div></code></pre>
<h3 id="return-type-inference">Return Type Inference</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// TypeScript infers return types</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">multiply</span>(<span class="hljs-params">a: <span class="hljs-built_in">number</span>, b: <span class="hljs-built_in">number</span></span>) </span>{
  <span class="hljs-keyword">return</span> a * b; <span class="hljs-comment">// Inferred as number</span>
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getUsers</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">return</span> [
    { id: <span class="hljs-number">1</span>, name: <span class="hljs-string">"John"</span> },
    { id: <span class="hljs-number">2</span>, name: <span class="hljs-string">"Jane"</span> },
  ]; <span class="hljs-comment">// Inferred as { id: number; name: string; }[]</span>
}

<span class="hljs-comment">// Complex inference</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">processData</span>(<span class="hljs-params">data: <span class="hljs-built_in">string</span>[]</span>) </span>{
  <span class="hljs-keyword">return</span> data
    .filter(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> item.length &gt; <span class="hljs-number">0</span>)
    .map(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> ({ value: item, length: item.length }));
  <span class="hljs-comment">// Inferred as { value: string; length: number; }[]</span>
}
</div></code></pre>
<h2 id="function-overloads">Function Overloads</h2>
<p>Function overloads allow you to define multiple function signatures for the same function.</p>
<h3 id="basic-overloads">Basic Overloads</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Overload signatures</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">format</span>(<span class="hljs-params">value: <span class="hljs-built_in">string</span></span>): <span class="hljs-title">string</span></span>;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">format</span>(<span class="hljs-params">value: <span class="hljs-built_in">number</span></span>): <span class="hljs-title">string</span></span>;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">format</span>(<span class="hljs-params">value: <span class="hljs-built_in">boolean</span></span>): <span class="hljs-title">string</span></span>;

<span class="hljs-comment">// Implementation signature (must be compatible with all overloads)</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">format</span>(<span class="hljs-params">value: <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span> | <span class="hljs-built_in">boolean</span></span>): <span class="hljs-title">string</span> </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">String</span>(value);
}

<span class="hljs-comment">// Usage</span>
<span class="hljs-keyword">const</span> str1 = format(<span class="hljs-string">"hello"</span>); <span class="hljs-comment">// string</span>
<span class="hljs-keyword">const</span> str2 = format(<span class="hljs-number">42</span>); <span class="hljs-comment">// string</span>
<span class="hljs-keyword">const</span> str3 = format(<span class="hljs-literal">true</span>); <span class="hljs-comment">// string</span>
</div></code></pre>
<h3 id="complex-overloads">Complex Overloads</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Different return types based on parameters</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createElement</span>(<span class="hljs-params">tag: "div"</span>): <span class="hljs-title">HTMLDivElement</span></span>;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createElement</span>(<span class="hljs-params">tag: "span"</span>): <span class="hljs-title">HTMLSpanElement</span></span>;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createElement</span>(<span class="hljs-params">tag: "button"</span>): <span class="hljs-title">HTMLButtonElement</span></span>;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createElement</span>(<span class="hljs-params">tag: <span class="hljs-built_in">string</span></span>): <span class="hljs-title">HTMLElement</span></span>;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createElement</span>(<span class="hljs-params">tag: <span class="hljs-built_in">string</span></span>): <span class="hljs-title">HTMLElement</span> </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">document</span>.createElement(tag);
}

<span class="hljs-comment">// TypeScript knows the specific return type</span>
<span class="hljs-keyword">const</span> div = createElement(<span class="hljs-string">"div"</span>); <span class="hljs-comment">// HTMLDivElement</span>
<span class="hljs-keyword">const</span> button = createElement(<span class="hljs-string">"button"</span>); <span class="hljs-comment">// HTMLButtonElement</span>

<span class="hljs-comment">// Conditional overloads</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">get</span>(<span class="hljs-params">url: <span class="hljs-built_in">string</span></span>): <span class="hljs-title">Promise</span>&lt;<span class="hljs-title">string</span>&gt;</span>;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">get</span>(<span class="hljs-params">url: <span class="hljs-built_in">string</span>, options: { json: <span class="hljs-literal">true</span> }</span>): <span class="hljs-title">Promise</span>&lt;<span class="hljs-title">object</span>&gt;</span>;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">get</span>(<span class="hljs-params">
  url: <span class="hljs-built_in">string</span>,
  options?: { json?: <span class="hljs-built_in">boolean</span> }
</span>): <span class="hljs-title">Promise</span>&lt;<span class="hljs-title">string</span> | <span class="hljs-title">object</span>&gt; </span>{
  <span class="hljs-comment">// Implementation</span>
  <span class="hljs-keyword">return</span> fetch(url).then(<span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span>
    options?.json ? response.json() : response.text()
  );
}
</div></code></pre>
<h3 id="method-overloads">Method Overloads</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">class</span> DataProcessor {
  <span class="hljs-comment">// Method overloads</span>
  process(data: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">string</span>;
  process(data: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">number</span>;
  process(data: <span class="hljs-built_in">string</span>[]): <span class="hljs-built_in">string</span>[];

  process(data: <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span> | <span class="hljs-built_in">string</span>[]): <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span> | <span class="hljs-built_in">string</span>[] {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> data === <span class="hljs-string">"string"</span>) {
      <span class="hljs-keyword">return</span> data.toUpperCase();
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> data === <span class="hljs-string">"number"</span>) {
      <span class="hljs-keyword">return</span> data * <span class="hljs-number">2</span>;
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">return</span> data.map(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> item.toUpperCase());
    }
  }
}

<span class="hljs-keyword">const</span> processor = <span class="hljs-keyword">new</span> DataProcessor();
<span class="hljs-keyword">const</span> result1 = processor.process(<span class="hljs-string">"hello"</span>); <span class="hljs-comment">// string</span>
<span class="hljs-keyword">const</span> result2 = processor.process(<span class="hljs-number">42</span>); <span class="hljs-comment">// number</span>
<span class="hljs-keyword">const</span> result3 = processor.process([<span class="hljs-string">"a"</span>, <span class="hljs-string">"b"</span>]); <span class="hljs-comment">// string[]</span>
</div></code></pre>
<h2 id="generic-functions">Generic Functions</h2>
<h3 id="basic-generic-functions">Basic Generic Functions</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Generic function</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">identity</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params">arg: T</span>): <span class="hljs-title">T</span> </span>{
  <span class="hljs-keyword">return</span> arg;
}

<span class="hljs-comment">// Usage with explicit type</span>
<span class="hljs-keyword">const</span> stringResult = identity&lt;<span class="hljs-built_in">string</span>&gt;(<span class="hljs-string">"hello"</span>);
<span class="hljs-keyword">const</span> numberResult = identity&lt;<span class="hljs-built_in">number</span>&gt;(<span class="hljs-number">42</span>);

<span class="hljs-comment">// Usage with type inference</span>
<span class="hljs-keyword">const</span> autoString = identity(<span class="hljs-string">"hello"</span>); <span class="hljs-comment">// T inferred as string</span>
<span class="hljs-keyword">const</span> autoNumber = identity(<span class="hljs-number">42</span>); <span class="hljs-comment">// T inferred as number</span>
</div></code></pre>
<h3 id="generic-functions-with-constraints">Generic Functions with Constraints</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Constraint: T must have a length property</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getLength</span>&lt;<span class="hljs-title">T</span> <span class="hljs-title">extends</span> </span>{ length: <span class="hljs-built_in">number</span> }&gt;(arg: T): <span class="hljs-built_in">number</span> {
  <span class="hljs-keyword">return</span> arg.length;
}

getLength(<span class="hljs-string">"hello"</span>); <span class="hljs-comment">// OK: string has length</span>
getLength([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]); <span class="hljs-comment">// OK: array has length</span>
<span class="hljs-comment">// getLength(42); // Error: number doesn't have length</span>

<span class="hljs-comment">// Multiple constraints</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">merge</span>&lt;<span class="hljs-title">T</span> <span class="hljs-title">extends</span> <span class="hljs-title">object</span>, <span class="hljs-title">U</span> <span class="hljs-title">extends</span> <span class="hljs-title">object</span>&gt;(<span class="hljs-params">obj1: T, obj2: U</span>): <span class="hljs-title">T</span> &amp; <span class="hljs-title">U</span> </span>{
  <span class="hljs-keyword">return</span> { ...obj1, ...obj2 };
}

<span class="hljs-keyword">const</span> merged = merge({ name: <span class="hljs-string">"John"</span> }, { age: <span class="hljs-number">30</span> });
<span class="hljs-comment">// Type: { name: string } &amp; { age: number }</span>
</div></code></pre>
<h3 id="generic-functions-with-multiple-type-parameters">Generic Functions with Multiple Type Parameters</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Multiple type parameters</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">pair</span>&lt;<span class="hljs-title">T</span>, <span class="hljs-title">U</span>&gt;(<span class="hljs-params">first: T, second: U</span>): [<span class="hljs-title">T</span>, <span class="hljs-title">U</span>] </span>{
  <span class="hljs-keyword">return</span> [first, second];
}

<span class="hljs-keyword">const</span> stringNumberPair = pair(<span class="hljs-string">"hello"</span>, <span class="hljs-number">42</span>); <span class="hljs-comment">// [string, number]</span>
<span class="hljs-keyword">const</span> booleanArrayPair = pair(<span class="hljs-literal">true</span>, [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]); <span class="hljs-comment">// [boolean, number[]]</span>

<span class="hljs-comment">// Generic function with conditional logic</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">convert</span>&lt;<span class="hljs-title">T</span>, <span class="hljs-title">U</span>&gt;(<span class="hljs-params">value: T, converter: (input: T) =&gt; U</span>): <span class="hljs-title">U</span> </span>{
  <span class="hljs-keyword">return</span> converter(value);
}

<span class="hljs-keyword">const</span> stringToNumber = convert(<span class="hljs-string">"42"</span>, <span class="hljs-built_in">parseInt</span>); <span class="hljs-comment">// number</span>
<span class="hljs-keyword">const</span> numberToString = convert(<span class="hljs-number">42</span>, <span class="hljs-built_in">String</span>); <span class="hljs-comment">// string</span>
</div></code></pre>
<h2 id="higher-order-functions">Higher-Order Functions</h2>
<h3 id="functions-that-return-functions">Functions that Return Functions</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Function factory</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createValidator</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params">predicate: (value: T) =&gt; <span class="hljs-built_in">boolean</span></span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">value: T</span>): <span class="hljs-title">boolean</span> </span>{
    <span class="hljs-keyword">return</span> predicate(value);
  };
}

<span class="hljs-keyword">const</span> isPositive = createValidator&lt;<span class="hljs-built_in">number</span>&gt;<span class="hljs-function">(<span class="hljs-params">(<span class="hljs-params">n</span>) =&gt; n &gt; 0</span>);
<span class="hljs-params">const</span> <span class="hljs-params">isNotEmpty</span> = <span class="hljs-params">createValidator</span>&lt;<span class="hljs-params">string</span>&gt;(<span class="hljs-params">(<span class="hljs-params">s</span>) =&gt; s.length &gt; 0</span>);

// <span class="hljs-params">Curried</span> <span class="hljs-params">functions</span>
<span class="hljs-params">function</span> <span class="hljs-params">add</span>(<span class="hljs-params">a: <span class="hljs-built_in">number</span></span>) {
  <span class="hljs-params">return</span> <span class="hljs-params">function</span> (<span class="hljs-params">b: <span class="hljs-built_in">number</span></span>): <span class="hljs-params">number</span> {
    <span class="hljs-params">return</span> <span class="hljs-params">a</span> + <span class="hljs-params">b</span>;
  };
}

<span class="hljs-params">const</span> <span class="hljs-params">add5</span> = <span class="hljs-params">add</span>(<span class="hljs-params">5</span>);
<span class="hljs-params">const</span> <span class="hljs-params">result</span> = <span class="hljs-params">add5</span>(<span class="hljs-params">3</span>); // 8

// <span class="hljs-params">Generic</span> <span class="hljs-params">curried</span> <span class="hljs-params">function</span>
<span class="hljs-params">function</span> <span class="hljs-params">curry</span>&lt;<span class="hljs-params">T</span>, <span class="hljs-params">U</span>, <span class="hljs-params">V</span>&gt;(<span class="hljs-params">fn: (<span class="hljs-params">a: T, b: U</span>) =&gt; V</span>) {
  <span class="hljs-params">return</span> <span class="hljs-params">function</span> (<span class="hljs-params">a: T</span>) {
    <span class="hljs-params">return</span> <span class="hljs-params">function</span> (<span class="hljs-params">b: U</span>): <span class="hljs-params">V</span> {
      <span class="hljs-params">return</span> <span class="hljs-params">fn</span>(<span class="hljs-params">a, b</span>);
    };
  };
}
</span></div></code></pre>
<h3 id="callback-functions">Callback Functions</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Typed callbacks</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">processArray</span>&lt;<span class="hljs-title">T</span>, <span class="hljs-title">U</span>&gt;(<span class="hljs-params">
  array: T[],
  callback: (item: T, index: <span class="hljs-built_in">number</span>) =&gt; U
</span>): <span class="hljs-title">U</span>[] </span>{
  <span class="hljs-keyword">return</span> array.map(callback);
}

<span class="hljs-keyword">const</span> numbers = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>];
<span class="hljs-keyword">const</span> doubled = processArray(numbers, <span class="hljs-function">(<span class="hljs-params">n, i</span>) =&gt;</span> n * <span class="hljs-number">2</span>); <span class="hljs-comment">// number[]</span>
<span class="hljs-keyword">const</span> strings = processArray(numbers, <span class="hljs-function">(<span class="hljs-params">n, i</span>) =&gt;</span> <span class="hljs-string">`Item <span class="hljs-subst">${i}</span>: <span class="hljs-subst">${n}</span>`</span>); <span class="hljs-comment">// string[]</span>

<span class="hljs-comment">// Event handlers</span>
<span class="hljs-keyword">type</span> EventCallback&lt;T&gt; = <span class="hljs-function">(<span class="hljs-params">event: T</span>) =&gt;</span> <span class="hljs-built_in">void</span>;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addEventListener</span>&lt;<span class="hljs-title">T</span> <span class="hljs-title">extends</span> <span class="hljs-title">Event</span>&gt;(<span class="hljs-params">
  element: HTMLElement,
  eventType: <span class="hljs-built_in">string</span>,
  callback: EventCallback&lt;T&gt;
</span>): <span class="hljs-title">void</span> </span>{
  element.addEventListener(eventType, callback <span class="hljs-keyword">as</span> EventListener);
}
</div></code></pre>
<h2 id="function-type-guards">Function Type Guards</h2>
<h3 id="custom-type-guards">Custom Type Guards</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Type guard function</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isString</span>(<span class="hljs-params">value: unknown</span>): <span class="hljs-title">value</span> <span class="hljs-title">is</span> <span class="hljs-title">string</span> </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> value === <span class="hljs-string">"string"</span>;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isNumber</span>(<span class="hljs-params">value: unknown</span>): <span class="hljs-title">value</span> <span class="hljs-title">is</span> <span class="hljs-title">number</span> </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> value === <span class="hljs-string">"number"</span>;
}

<span class="hljs-comment">// Using type guards</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">processValue</span>(<span class="hljs-params">value: unknown</span>): <span class="hljs-title">string</span> </span>{
  <span class="hljs-keyword">if</span> (isString(value)) {
    <span class="hljs-keyword">return</span> value.toUpperCase(); <span class="hljs-comment">// TypeScript knows value is string</span>
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isNumber(value)) {
    <span class="hljs-keyword">return</span> value.toString(); <span class="hljs-comment">// TypeScript knows value is number</span>
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">"Unknown type"</span>;
  }
}

<span class="hljs-comment">// Generic type guard</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isArrayOf</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params">
  value: unknown,
  guard: (item: unknown) =&gt; item is T
</span>): <span class="hljs-title">value</span> <span class="hljs-title">is</span> <span class="hljs-title">T</span>[] </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">Array</span>.isArray(value) &amp;&amp; value.every(guard);
}

<span class="hljs-keyword">const</span> maybeStringArray: unknown = [<span class="hljs-string">"a"</span>, <span class="hljs-string">"b"</span>, <span class="hljs-string">"c"</span>];
<span class="hljs-keyword">if</span> (isArrayOf(maybeStringArray, isString)) {
  <span class="hljs-comment">// TypeScript knows maybeStringArray is string[]</span>
  <span class="hljs-built_in">console</span>.log(maybeStringArray.join(<span class="hljs-string">", "</span>));
}
</div></code></pre>
<h2 id="async-functions-and-promises">Async Functions and Promises</h2>
<h3 id="promise-based-functions">Promise-based Functions</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Function returning Promise</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fetchUser</span>(<span class="hljs-params">id: <span class="hljs-built_in">string</span></span>): <span class="hljs-title">Promise</span>&lt;<span class="hljs-title">User</span>&gt; </span>{
  <span class="hljs-keyword">return</span> fetch(<span class="hljs-string">`/api/users/<span class="hljs-subst">${id}</span>`</span>).then(<span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (!response.ok) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">`HTTP <span class="hljs-subst">${response.status}</span>`</span>);
    }
    <span class="hljs-keyword">return</span> response.json();
  });
}

<span class="hljs-comment">// Generic Promise function</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">delay</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params">ms: <span class="hljs-built_in">number</span>, value: T</span>): <span class="hljs-title">Promise</span>&lt;<span class="hljs-title">T</span>&gt; </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
    setTimeout(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> resolve(value), ms);
  });
}

<span class="hljs-comment">// Promise utility functions</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">timeout</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params">promise: <span class="hljs-built_in">Promise</span>&lt;T&gt;, ms: <span class="hljs-built_in">number</span></span>): <span class="hljs-title">Promise</span>&lt;<span class="hljs-title">T</span>&gt; </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.race([
    promise,
    delay(ms, <span class="hljs-literal">null</span>).then(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"Timeout"</span>);
    }),
  ]);
}
</div></code></pre>
<h3 id="asyncawait-functions">Async/Await Functions</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Async function</span>
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getUserData</span>(<span class="hljs-params">id: <span class="hljs-built_in">string</span></span>): <span class="hljs-title">Promise</span>&lt;<span class="hljs-title">UserData</span>&gt; </span>{
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> fetchUser(id);
    <span class="hljs-keyword">const</span> profile = <span class="hljs-keyword">await</span> fetchUserProfile(user.id);
    <span class="hljs-keyword">const</span> preferences = <span class="hljs-keyword">await</span> fetchUserPreferences(user.id);

    <span class="hljs-keyword">return</span> {
      user,
      profile,
      preferences,
    };
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-built_in">console</span>.error(<span class="hljs-string">"Failed to fetch user data:"</span>, error);
    <span class="hljs-keyword">throw</span> error;
  }
}

<span class="hljs-comment">// Async generator function</span>
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span>* <span class="hljs-title">fetchPages</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params">url: <span class="hljs-built_in">string</span></span>): <span class="hljs-title">AsyncGenerator</span>&lt;<span class="hljs-title">T</span>[], <span class="hljs-title">void</span>, <span class="hljs-title">unknown</span>&gt; </span>{
  <span class="hljs-keyword">let</span> page = <span class="hljs-number">1</span>;
  <span class="hljs-keyword">let</span> hasMore = <span class="hljs-literal">true</span>;

  <span class="hljs-keyword">while</span> (hasMore) {
    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> fetch(<span class="hljs-string">`<span class="hljs-subst">${url}</span>?page=<span class="hljs-subst">${page}</span>`</span>);
    <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> response.json();

    <span class="hljs-keyword">yield</span> data.items;

    hasMore = data.hasMore;
    page++;
  }
}
</div></code></pre>
<h2 id="best-practices">Best Practices</h2>
<h3 id="%E2%9C%85-good-practices">‚úÖ Good Practices</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Always type function parameters</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">processUser</span>(<span class="hljs-params">user: User, options: ProcessOptions</span>): <span class="hljs-title">ProcessResult</span> </span>{
  <span class="hljs-comment">// Implementation</span>
}

<span class="hljs-comment">// Use specific return types for public APIs</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">calculateTax</span>(<span class="hljs-params">amount: <span class="hljs-built_in">number</span>, rate: <span class="hljs-built_in">number</span></span>): <span class="hljs-title">number</span> </span>{
  <span class="hljs-keyword">return</span> amount * rate;
}

<span class="hljs-comment">// Use function overloads for different behaviors</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">format</span>(<span class="hljs-params">value: <span class="hljs-built_in">string</span></span>): <span class="hljs-title">string</span></span>;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">format</span>(<span class="hljs-params">value: <span class="hljs-built_in">number</span>, decimals: <span class="hljs-built_in">number</span></span>): <span class="hljs-title">string</span></span>;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">format</span>(<span class="hljs-params">value: <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span>, decimals?: <span class="hljs-built_in">number</span></span>): <span class="hljs-title">string</span> </span>{
  <span class="hljs-comment">// Implementation</span>
}

<span class="hljs-comment">// Use generics for reusable functions</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createRepository</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params">entityType: <span class="hljs-keyword">new</span> () =&gt; T</span>): <span class="hljs-title">Repository</span>&lt;<span class="hljs-title">T</span>&gt; </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Repository(entityType);
}
</div></code></pre>
<h3 id="%E2%9D%8C-avoid">‚ùå Avoid</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Don't use any for parameters</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">badFunction</span>(<span class="hljs-params">data: <span class="hljs-built_in">any</span></span>): <span class="hljs-title">any</span> </span>{
  <span class="hljs-keyword">return</span> data.whatever;
}

<span class="hljs-comment">// Don't omit return types for public functions</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">publicApi</span>(<span class="hljs-params">input: <span class="hljs-built_in">string</span></span>) </span>{
  <span class="hljs-comment">// Should specify return type</span>
  <span class="hljs-keyword">return</span> processInput(input);
}

<span class="hljs-comment">// Don't use function overloads when union types suffice</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">unnecessary</span>(<span class="hljs-params">value: <span class="hljs-built_in">string</span></span>): <span class="hljs-title">string</span></span>;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">unnecessary</span>(<span class="hljs-params">value: <span class="hljs-built_in">number</span></span>): <span class="hljs-title">string</span></span>;
<span class="hljs-comment">// Better: function format(value: string | number): string</span>
</div></code></pre>
<h2 id="function-type-checklist">Function Type Checklist</h2>
<ul>
<li><input type="checkbox" id="checkbox13"><label for="checkbox13">All function parameters have explicit types</label></li>
<li><input type="checkbox" id="checkbox14"><label for="checkbox14">Public functions have explicit return types</label></li>
<li><input type="checkbox" id="checkbox15"><label for="checkbox15">Use optional parameters instead of undefined unions when possible</label></li>
<li><input type="checkbox" id="checkbox16"><label for="checkbox16">Leverage function overloads for different behaviors</label></li>
<li><input type="checkbox" id="checkbox17"><label for="checkbox17">Use generics for reusable functions</label></li>
<li><input type="checkbox" id="checkbox18"><label for="checkbox18">Implement proper error handling in async functions</label></li>
<li><input type="checkbox" id="checkbox19"><label for="checkbox19">Use type guards for runtime type checking</label></li>
</ul>
<h2 id="next-steps">Next Steps</h2>
<p>Now that you understand function typing, let's explore arrays, tuples, and enums to handle collections and fixed sets of values.</p>
<hr>
<p><em>Continue to: <a href="06-arrays-tuples-enums.md">Arrays, Tuples, and Enums</a></em></p>
<h1 id="arrays-tuples-and-enums">Arrays, Tuples, and Enums</h1>
<blockquote>
<p>Learn how to work with collections, fixed-length arrays, and enumerated values in TypeScript</p>
</blockquote>
<h2 id="arrays-in-typescript">Arrays in TypeScript</h2>
<h3 id="basic-array-types">Basic Array Types</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Array type annotations</span>
<span class="hljs-keyword">let</span> numbers: <span class="hljs-built_in">number</span>[] = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>];
<span class="hljs-keyword">let</span> names: <span class="hljs-built_in">string</span>[] = [<span class="hljs-string">"Alice"</span>, <span class="hljs-string">"Bob"</span>, <span class="hljs-string">"Charlie"</span>];
<span class="hljs-keyword">let</span> flags: <span class="hljs-built_in">boolean</span>[] = [<span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>];

<span class="hljs-comment">// Alternative syntax using Array&lt;T&gt;</span>
<span class="hljs-keyword">let</span> scores: <span class="hljs-built_in">Array</span>&lt;<span class="hljs-built_in">number</span>&gt; = [<span class="hljs-number">95</span>, <span class="hljs-number">87</span>, <span class="hljs-number">92</span>, <span class="hljs-number">88</span>];
<span class="hljs-keyword">let</span> cities: <span class="hljs-built_in">Array</span>&lt;<span class="hljs-built_in">string</span>&gt; = [<span class="hljs-string">"New York"</span>, <span class="hljs-string">"London"</span>, <span class="hljs-string">"Tokyo"</span>];

<span class="hljs-comment">// Empty arrays</span>
<span class="hljs-keyword">let</span> emptyNumbers: <span class="hljs-built_in">number</span>[] = [];
<span class="hljs-keyword">let</span> emptyStrings: <span class="hljs-built_in">Array</span>&lt;<span class="hljs-built_in">string</span>&gt; = [];
</div></code></pre>
<h3 id="array-type-inference">Array Type Inference</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// TypeScript infers array types</span>
<span class="hljs-keyword">let</span> fruits = [<span class="hljs-string">"apple"</span>, <span class="hljs-string">"banana"</span>, <span class="hljs-string">"orange"</span>]; <span class="hljs-comment">// string[]</span>
<span class="hljs-keyword">let</span> ages = [<span class="hljs-number">25</span>, <span class="hljs-number">30</span>, <span class="hljs-number">35</span>, <span class="hljs-number">40</span>]; <span class="hljs-comment">// number[]</span>
<span class="hljs-keyword">let</span> mixed = [<span class="hljs-string">"hello"</span>, <span class="hljs-number">42</span>, <span class="hljs-literal">true</span>]; <span class="hljs-comment">// (string | number | boolean)[]</span>

<span class="hljs-comment">// Be careful with empty arrays</span>
<span class="hljs-keyword">let</span> empty = []; <span class="hljs-comment">// any[] - not very useful</span>
<span class="hljs-keyword">let</span> typedEmpty: <span class="hljs-built_in">string</span>[] = []; <span class="hljs-comment">// Better - explicitly typed</span>
</div></code></pre>
<h3 id="multi-dimensional-arrays">Multi-dimensional Arrays</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// 2D arrays</span>
<span class="hljs-keyword">let</span> matrix: <span class="hljs-built_in">number</span>[][] = [
  [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>],
  [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>],
  [<span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>],
];

<span class="hljs-comment">// 3D arrays</span>
<span class="hljs-keyword">let</span> cube: <span class="hljs-built_in">number</span>[][][] = [
  [
    [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>],
    [<span class="hljs-number">3</span>, <span class="hljs-number">4</span>],
  ],
  [
    [<span class="hljs-number">5</span>, <span class="hljs-number">6</span>],
    [<span class="hljs-number">7</span>, <span class="hljs-number">8</span>],
  ],
];

<span class="hljs-comment">// Array of objects</span>
<span class="hljs-keyword">interface</span> User {
  id: <span class="hljs-built_in">number</span>;
  name: <span class="hljs-built_in">string</span>;
  email: <span class="hljs-built_in">string</span>;
}

<span class="hljs-keyword">let</span> users: User[] = [
  { id: <span class="hljs-number">1</span>, name: <span class="hljs-string">"John"</span>, email: <span class="hljs-string">"john@example.com"</span> },
  { id: <span class="hljs-number">2</span>, name: <span class="hljs-string">"Jane"</span>, email: <span class="hljs-string">"jane@example.com"</span> },
];
</div></code></pre>
<h3 id="array-methods-with-types">Array Methods with Types</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">let</span> numbers: <span class="hljs-built_in">number</span>[] = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>];

<span class="hljs-comment">// Map - transforms each element</span>
<span class="hljs-keyword">let</span> doubled: <span class="hljs-built_in">number</span>[] = numbers.map(<span class="hljs-function">(<span class="hljs-params">n</span>) =&gt;</span> n * <span class="hljs-number">2</span>); <span class="hljs-comment">// [2, 4, 6, 8, 10]</span>
<span class="hljs-keyword">let</span> strings: <span class="hljs-built_in">string</span>[] = numbers.map(<span class="hljs-function">(<span class="hljs-params">n</span>) =&gt;</span> n.toString()); <span class="hljs-comment">// ["1", "2", "3", "4", "5"]</span>

<span class="hljs-comment">// Filter - keeps elements that match condition</span>
<span class="hljs-keyword">let</span> evens: <span class="hljs-built_in">number</span>[] = numbers.filter(<span class="hljs-function">(<span class="hljs-params">n</span>) =&gt;</span> n % <span class="hljs-number">2</span> === <span class="hljs-number">0</span>); <span class="hljs-comment">// [2, 4]</span>

<span class="hljs-comment">// Reduce - combines all elements into single value</span>
<span class="hljs-keyword">let</span> sum: <span class="hljs-built_in">number</span> = numbers.reduce(<span class="hljs-function">(<span class="hljs-params">acc, n</span>) =&gt;</span> acc + n, <span class="hljs-number">0</span>); <span class="hljs-comment">// 15</span>
<span class="hljs-keyword">let</span> product: <span class="hljs-built_in">number</span> = numbers.reduce(<span class="hljs-function">(<span class="hljs-params">acc, n</span>) =&gt;</span> acc * n, <span class="hljs-number">1</span>); <span class="hljs-comment">// 120</span>

<span class="hljs-comment">// Find - returns first matching element or undefined</span>
<span class="hljs-keyword">let</span> found: <span class="hljs-built_in">number</span> | <span class="hljs-literal">undefined</span> = numbers.find(<span class="hljs-function">(<span class="hljs-params">n</span>) =&gt;</span> n &gt; <span class="hljs-number">3</span>); <span class="hljs-comment">// 4</span>

<span class="hljs-comment">// Some/Every - boolean checks</span>
<span class="hljs-keyword">let</span> hasEven: <span class="hljs-built_in">boolean</span> = numbers.some(<span class="hljs-function">(<span class="hljs-params">n</span>) =&gt;</span> n % <span class="hljs-number">2</span> === <span class="hljs-number">0</span>); <span class="hljs-comment">// true</span>
<span class="hljs-keyword">let</span> allPositive: <span class="hljs-built_in">boolean</span> = numbers.every(<span class="hljs-function">(<span class="hljs-params">n</span>) =&gt;</span> n &gt; <span class="hljs-number">0</span>); <span class="hljs-comment">// true</span>
</div></code></pre>
<h3 id="generic-array-functions">Generic Array Functions</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Generic function for arrays</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getFirst</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params">array: T[]</span>): <span class="hljs-title">T</span> | <span class="hljs-title">undefined</span> </span>{
  <span class="hljs-keyword">return</span> array[<span class="hljs-number">0</span>];
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getLast</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params">array: T[]</span>): <span class="hljs-title">T</span> | <span class="hljs-title">undefined</span> </span>{
  <span class="hljs-keyword">return</span> array[array.length - <span class="hljs-number">1</span>];
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">chunk</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params">array: T[], size: <span class="hljs-built_in">number</span></span>): <span class="hljs-title">T</span>[][] </span>{
  <span class="hljs-keyword">const</span> chunks: T[][] = [];
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; array.length; i += size) {
    chunks.push(array.slice(i, i + size));
  }
  <span class="hljs-keyword">return</span> chunks;
}

<span class="hljs-comment">// Usage</span>
<span class="hljs-keyword">const</span> firstNumber = getFirst([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]); <span class="hljs-comment">// number | undefined</span>
<span class="hljs-keyword">const</span> lastString = getLast([<span class="hljs-string">"a"</span>, <span class="hljs-string">"b"</span>, <span class="hljs-string">"c"</span>]); <span class="hljs-comment">// string | undefined</span>
<span class="hljs-keyword">const</span> numberChunks = chunk([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>], <span class="hljs-number">2</span>); <span class="hljs-comment">// number[][]</span>
</div></code></pre>
<h3 id="readonly-arrays">Readonly Arrays</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Readonly array - cannot be modified</span>
<span class="hljs-keyword">let</span> readonlyNumbers: readonly <span class="hljs-built_in">number</span>[] = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>];
<span class="hljs-comment">// readonlyNumbers.push(6); // Error: Property 'push' does not exist</span>
<span class="hljs-comment">// readonlyNumbers[0] = 10; // Error: Index signature in type 'readonly number[]' only permits reading</span>

<span class="hljs-comment">// ReadonlyArray&lt;T&gt; type</span>
<span class="hljs-keyword">let</span> readonlyStrings: ReadonlyArray&lt;<span class="hljs-built_in">string</span>&gt; = [<span class="hljs-string">"a"</span>, <span class="hljs-string">"b"</span>, <span class="hljs-string">"c"</span>];

<span class="hljs-comment">// Const assertions create readonly arrays</span>
<span class="hljs-keyword">const</span> colors = [<span class="hljs-string">"red"</span>, <span class="hljs-string">"green"</span>, <span class="hljs-string">"blue"</span>] <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>;
<span class="hljs-comment">// Type: readonly ["red", "green", "blue"]</span>

<span class="hljs-comment">// Function with readonly parameter</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">processNumbers</span>(<span class="hljs-params">numbers: readonly <span class="hljs-built_in">number</span>[]</span>): <span class="hljs-title">number</span> </span>{
  <span class="hljs-keyword">return</span> numbers.reduce(<span class="hljs-function">(<span class="hljs-params">sum, n</span>) =&gt;</span> sum + n, <span class="hljs-number">0</span>);
}

processNumbers([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]); <span class="hljs-comment">// OK</span>
processNumbers(readonlyNumbers); <span class="hljs-comment">// OK</span>
</div></code></pre>
<h2 id="tuples">Tuples</h2>
<p>Tuples are arrays with fixed length and specific types for each position.</p>
<h3 id="basic-tuples">Basic Tuples</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Basic tuple types</span>
<span class="hljs-keyword">let</span> coordinate: [<span class="hljs-built_in">number</span>, <span class="hljs-built_in">number</span>] = [<span class="hljs-number">10</span>, <span class="hljs-number">20</span>];
<span class="hljs-keyword">let</span> person: [<span class="hljs-built_in">string</span>, <span class="hljs-built_in">number</span>] = [<span class="hljs-string">"John"</span>, <span class="hljs-number">30</span>];
<span class="hljs-keyword">let</span> flag: [<span class="hljs-built_in">string</span>, <span class="hljs-built_in">boolean</span>] = [<span class="hljs-string">"isActive"</span>, <span class="hljs-literal">true</span>];

<span class="hljs-comment">// Accessing tuple elements</span>
<span class="hljs-keyword">let</span> x = coordinate[<span class="hljs-number">0</span>]; <span class="hljs-comment">// number</span>
<span class="hljs-keyword">let</span> y = coordinate[<span class="hljs-number">1</span>]; <span class="hljs-comment">// number</span>
<span class="hljs-keyword">let</span> name = person[<span class="hljs-number">0</span>]; <span class="hljs-comment">// string</span>
<span class="hljs-keyword">let</span> age = person[<span class="hljs-number">1</span>]; <span class="hljs-comment">// number</span>

<span class="hljs-comment">// Tuple assignment</span>
coordinate = [<span class="hljs-number">5</span>, <span class="hljs-number">15</span>]; <span class="hljs-comment">// OK</span>
<span class="hljs-comment">// coordinate = [5]; // Error: Type '[number]' is not assignable to type '[number, number]'</span>
<span class="hljs-comment">// coordinate = [5, 15, 25]; // Error: Type '[number, number, number]' is not assignable to type '[number, number]'</span>
</div></code></pre>
<h3 id="optional-tuple-elements">Optional Tuple Elements</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Optional elements (must be at the end)</span>
<span class="hljs-keyword">let</span> optionalTuple: [<span class="hljs-built_in">string</span>, <span class="hljs-built_in">number</span>?] = [<span class="hljs-string">"hello"</span>];
optionalTuple = [<span class="hljs-string">"hello"</span>, <span class="hljs-number">42</span>]; <span class="hljs-comment">// Also valid</span>

<span class="hljs-comment">// Multiple optional elements</span>
<span class="hljs-keyword">let</span> userInfo: [<span class="hljs-built_in">string</span>, <span class="hljs-built_in">number</span>?, <span class="hljs-built_in">boolean</span>?] = [<span class="hljs-string">"John"</span>];
userInfo = [<span class="hljs-string">"John"</span>, <span class="hljs-number">30</span>];
userInfo = [<span class="hljs-string">"John"</span>, <span class="hljs-number">30</span>, <span class="hljs-literal">true</span>];

<span class="hljs-comment">// Function returning optional tuple</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">parseCoordinate</span>(<span class="hljs-params">input: <span class="hljs-built_in">string</span></span>): [<span class="hljs-title">number</span>, <span class="hljs-title">number</span>] | [<span class="hljs-title">number</span>] </span>{
  <span class="hljs-keyword">const</span> parts = input.split(<span class="hljs-string">","</span>).map(<span class="hljs-built_in">Number</span>);
  <span class="hljs-keyword">if</span> (parts.length === <span class="hljs-number">2</span>) {
    <span class="hljs-keyword">return</span> [parts[<span class="hljs-number">0</span>], parts[<span class="hljs-number">1</span>]];
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (parts.length === <span class="hljs-number">1</span>) {
    <span class="hljs-keyword">return</span> [parts[<span class="hljs-number">0</span>]];
  }
  <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"Invalid coordinate format"</span>);
}
</div></code></pre>
<h3 id="rest-elements-in-tuples">Rest Elements in Tuples</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Rest elements</span>
<span class="hljs-keyword">let</span> restTuple: [<span class="hljs-built_in">string</span>, ...number[]] = [<span class="hljs-string">"prefix"</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>];
<span class="hljs-keyword">let</span> mixedRest: [<span class="hljs-built_in">boolean</span>, ...string[], <span class="hljs-built_in">number</span>] = [<span class="hljs-literal">true</span>, <span class="hljs-string">"a"</span>, <span class="hljs-string">"b"</span>, <span class="hljs-string">"c"</span>, <span class="hljs-number">42</span>];

<span class="hljs-comment">// Spread in tuple types</span>
<span class="hljs-keyword">type</span> StringNumberTuple = [<span class="hljs-built_in">string</span>, <span class="hljs-built_in">number</span>];
<span class="hljs-keyword">type</span> ExtendedTuple = [...StringNumberTuple, <span class="hljs-built_in">boolean</span>]; <span class="hljs-comment">// [string, number, boolean]</span>

<span class="hljs-comment">// Function with rest tuple parameter</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">logWithNumbers</span>(<span class="hljs-params">message: <span class="hljs-built_in">string</span>, ...numbers: <span class="hljs-built_in">number</span>[]</span>): <span class="hljs-title">void</span> </span>{
  <span class="hljs-built_in">console</span>.log(message, numbers);
}

logWithNumbers(<span class="hljs-string">"Numbers:"</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>);
</div></code></pre>
<h3 id="named-tuple-elements">Named Tuple Elements</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Named tuple elements (TypeScript 4.0+)</span>
<span class="hljs-keyword">type</span> Point3D = [x: <span class="hljs-built_in">number</span>, y: <span class="hljs-built_in">number</span>, z: <span class="hljs-built_in">number</span>];
<span class="hljs-keyword">type</span> RGB = [red: <span class="hljs-built_in">number</span>, green: <span class="hljs-built_in">number</span>, blue: <span class="hljs-built_in">number</span>];
<span class="hljs-keyword">type</span> UserRecord = [id: <span class="hljs-built_in">number</span>, name: <span class="hljs-built_in">string</span>, email: <span class="hljs-built_in">string</span>, isActive: <span class="hljs-built_in">boolean</span>];

<span class="hljs-comment">// Usage remains the same, but provides better documentation</span>
<span class="hljs-keyword">let</span> point: Point3D = [<span class="hljs-number">10</span>, <span class="hljs-number">20</span>, <span class="hljs-number">30</span>];
<span class="hljs-keyword">let</span> color: RGB = [<span class="hljs-number">255</span>, <span class="hljs-number">128</span>, <span class="hljs-number">0</span>];
<span class="hljs-keyword">let</span> user: UserRecord = [<span class="hljs-number">1</span>, <span class="hljs-string">"John"</span>, <span class="hljs-string">"john@example.com"</span>, <span class="hljs-literal">true</span>];

<span class="hljs-comment">// Destructuring with named tuples</span>
<span class="hljs-keyword">let</span> [userId, userName, userEmail, userActive] = user;
</div></code></pre>
<h3 id="tuple-methods-and-operations">Tuple Methods and Operations</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">let</span> tuple: [<span class="hljs-built_in">string</span>, <span class="hljs-built_in">number</span>, <span class="hljs-built_in">boolean</span>] = [<span class="hljs-string">"hello"</span>, <span class="hljs-number">42</span>, <span class="hljs-literal">true</span>];

<span class="hljs-comment">// Length property</span>
<span class="hljs-keyword">let</span> length = tuple.length; <span class="hljs-comment">// 3</span>

<span class="hljs-comment">// Destructuring</span>
<span class="hljs-keyword">let</span> [message, count, isEnabled] = tuple;

<span class="hljs-comment">// Spread operator</span>
<span class="hljs-keyword">let</span> newTuple: [<span class="hljs-built_in">string</span>, <span class="hljs-built_in">number</span>, <span class="hljs-built_in">boolean</span>, <span class="hljs-built_in">string</span>] = [...tuple, <span class="hljs-string">"extra"</span>];

<span class="hljs-comment">// Array methods (that don't change length)</span>
<span class="hljs-keyword">let</span> found = tuple.find(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> <span class="hljs-keyword">typeof</span> item === <span class="hljs-string">"number"</span>); <span class="hljs-comment">// string | number | boolean | undefined</span>
<span class="hljs-keyword">let</span> hasString = tuple.some(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> <span class="hljs-keyword">typeof</span> item === <span class="hljs-string">"string"</span>); <span class="hljs-comment">// boolean</span>

<span class="hljs-comment">// Converting to array</span>
<span class="hljs-keyword">let</span> asArray: (<span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span> | <span class="hljs-built_in">boolean</span>)[] = [...tuple];
</div></code></pre>
<h2 id="enums">Enums</h2>
<p>Enums allow you to define a set of named constants.</p>
<h3 id="numeric-enums">Numeric Enums</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Basic numeric enum</span>
<span class="hljs-keyword">enum</span> Direction {
  Up, <span class="hljs-comment">// 0</span>
  Down, <span class="hljs-comment">// 1</span>
  Left, <span class="hljs-comment">// 2</span>
  Right, <span class="hljs-comment">// 3</span>
}

<span class="hljs-comment">// Custom numeric values</span>
<span class="hljs-keyword">enum</span> HttpStatus {
  OK = <span class="hljs-number">200</span>,
  NotFound = <span class="hljs-number">404</span>,
  InternalServerError = <span class="hljs-number">500</span>,
}

<span class="hljs-comment">// Mixed numeric enum</span>
<span class="hljs-keyword">enum</span> MixedEnum {
  A, <span class="hljs-comment">// 0</span>
  B, <span class="hljs-comment">// 1</span>
  C = <span class="hljs-number">10</span>, <span class="hljs-comment">// 10</span>
  D, <span class="hljs-comment">// 11</span>
  E = <span class="hljs-number">20</span>, <span class="hljs-comment">// 20</span>
  F, <span class="hljs-comment">// 21</span>
}

<span class="hljs-comment">// Using numeric enums</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">move</span>(<span class="hljs-params">direction: Direction</span>): <span class="hljs-title">void</span> </span>{
  <span class="hljs-keyword">switch</span> (direction) {
    <span class="hljs-keyword">case</span> Direction.Up:
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Moving up"</span>);
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> Direction.Down:
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Moving down"</span>);
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> Direction.Left:
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Moving left"</span>);
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> Direction.Right:
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Moving right"</span>);
      <span class="hljs-keyword">break</span>;
  }
}

move(Direction.Up);
move(<span class="hljs-number">0</span>); <span class="hljs-comment">// Also valid - numeric enums are bidirectional</span>
</div></code></pre>
<h3 id="string-enums">String Enums</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// String enum</span>
<span class="hljs-keyword">enum</span> Color {
  Red = <span class="hljs-string">"red"</span>,
  Green = <span class="hljs-string">"green"</span>,
  Blue = <span class="hljs-string">"blue"</span>,
  Yellow = <span class="hljs-string">"yellow"</span>,
}

<span class="hljs-comment">// Theme enum</span>
<span class="hljs-keyword">enum</span> Theme {
  Light = <span class="hljs-string">"light"</span>,
  Dark = <span class="hljs-string">"dark"</span>,
  Auto = <span class="hljs-string">"auto"</span>,
}

<span class="hljs-comment">// Using string enums</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setTheme</span>(<span class="hljs-params">theme: Theme</span>): <span class="hljs-title">void</span> </span>{
  <span class="hljs-built_in">document</span>.body.className = theme;
}

setTheme(Theme.Dark);
<span class="hljs-comment">// setTheme("dark"); // Error: Argument of type '"dark"' is not assignable to parameter of type 'Theme'</span>

<span class="hljs-comment">// String enums are not bidirectional</span>
<span class="hljs-built_in">console</span>.log(Color.Red); <span class="hljs-comment">// "red"</span>
<span class="hljs-comment">// console.log(Color["red"]); // Error: Element implicitly has an 'any' type</span>
</div></code></pre>
<h3 id="const-enums">Const Enums</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Const enum - inlined at compile time</span>
<span class="hljs-keyword">const</span> <span class="hljs-keyword">enum</span> Sizes {
  Small = <span class="hljs-string">"small"</span>,
  Medium = <span class="hljs-string">"medium"</span>,
  Large = <span class="hljs-string">"large"</span>,
}

<span class="hljs-comment">// Usage</span>
<span class="hljs-keyword">let</span> size = Sizes.Medium; <span class="hljs-comment">// Compiled to: let size = "medium";</span>

<span class="hljs-comment">// Benefits: No runtime overhead, smaller bundle size</span>
<span class="hljs-comment">// Drawbacks: Cannot be used with computed property access</span>

<span class="hljs-comment">// Regular enum vs const enum compilation:</span>
<span class="hljs-comment">// Regular: Creates an object at runtime</span>
<span class="hljs-comment">// Const: Replaces with literal values</span>
</div></code></pre>
<h3 id="heterogeneous-enums">Heterogeneous Enums</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Mixed string and numeric enum (not recommended)</span>
<span class="hljs-keyword">enum</span> BooleanLikeHeterogeneousEnum {
  No = <span class="hljs-number">0</span>,
  Yes = <span class="hljs-string">"YES"</span>,
}

<span class="hljs-comment">// Better approach: Use union types</span>
<span class="hljs-keyword">type</span> Status = <span class="hljs-string">"pending"</span> | <span class="hljs-string">"approved"</span> | <span class="hljs-string">"rejected"</span>;
<span class="hljs-keyword">type</span> Priority = <span class="hljs-number">1</span> | <span class="hljs-number">2</span> | <span class="hljs-number">3</span> | <span class="hljs-number">4</span> | <span class="hljs-number">5</span>;
</div></code></pre>
<h3 id="enum-utilities">Enum Utilities</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">enum</span> UserRole {
  Admin = <span class="hljs-string">"admin"</span>,
  User = <span class="hljs-string">"user"</span>,
  Guest = <span class="hljs-string">"guest"</span>,
  Moderator = <span class="hljs-string">"moderator"</span>,
}

<span class="hljs-comment">// Get all enum values</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getAllRoles</span>(<span class="hljs-params"></span>): <span class="hljs-title">UserRole</span>[] </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">Object</span>.values(UserRole);
}

<span class="hljs-comment">// Check if value is valid enum value</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isValidRole</span>(<span class="hljs-params">value: <span class="hljs-built_in">string</span></span>): <span class="hljs-title">value</span> <span class="hljs-title">is</span> <span class="hljs-title">UserRole</span> </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">Object</span>.values(UserRole).includes(value <span class="hljs-keyword">as</span> UserRole);
}

<span class="hljs-comment">// Get enum keys</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getRoleKeys</span>(<span class="hljs-params"></span>): <span class="hljs-title">string</span>[] </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">Object</span>.keys(UserRole);
}

<span class="hljs-comment">// Usage</span>
<span class="hljs-keyword">const</span> roles = getAllRoles(); <span class="hljs-comment">// ["admin", "user", "guest", "moderator"]</span>
<span class="hljs-keyword">const</span> isValid = isValidRole(<span class="hljs-string">"admin"</span>); <span class="hljs-comment">// true</span>
<span class="hljs-keyword">const</span> keys = getRoleKeys(); <span class="hljs-comment">// ["Admin", "User", "Guest", "Moderator"]</span>
</div></code></pre>
<h3 id="reverse-mapping-numeric-enums">Reverse Mapping (Numeric Enums)</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">enum</span> Status {
  Pending,
  Approved,
  Rejected,
}

<span class="hljs-comment">// Numeric enums have reverse mapping</span>
<span class="hljs-built_in">console</span>.log(Status.Pending); <span class="hljs-comment">// 0</span>
<span class="hljs-built_in">console</span>.log(Status[<span class="hljs-number">0</span>]); <span class="hljs-comment">// "Pending"</span>
<span class="hljs-built_in">console</span>.log(Status[Status.Pending]); <span class="hljs-comment">// "Pending"</span>

<span class="hljs-comment">// Iterate over enum</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> status <span class="hljs-keyword">in</span> Status) {
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">isNaN</span>(<span class="hljs-built_in">Number</span>(status))) {
    <span class="hljs-built_in">console</span>.log(status); <span class="hljs-comment">// "Pending", "Approved", "Rejected"</span>
  }
}

<span class="hljs-comment">// Get numeric values only</span>
<span class="hljs-keyword">const</span> numericValues = <span class="hljs-built_in">Object</span>.keys(Status)
  .filter(<span class="hljs-function">(<span class="hljs-params">key</span>) =&gt;</span> !<span class="hljs-built_in">isNaN</span>(<span class="hljs-built_in">Number</span>(key)))
  .map(<span class="hljs-function">(<span class="hljs-params">key</span>) =&gt;</span> <span class="hljs-built_in">Number</span>(key)); <span class="hljs-comment">// [0, 1, 2]</span>
</div></code></pre>
<h2 id="advanced-patterns">Advanced Patterns</h2>
<h3 id="array-and-tuple-utilities">Array and Tuple Utilities</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Utility types for arrays and tuples</span>
<span class="hljs-keyword">type</span> Head&lt;T <span class="hljs-keyword">extends</span> readonly unknown[]&gt; = T <span class="hljs-keyword">extends</span> readonly [
  infer H,
  ...unknown[]
]
  ? H
  : never;
<span class="hljs-keyword">type</span> Tail&lt;T <span class="hljs-keyword">extends</span> readonly unknown[]&gt; = T <span class="hljs-keyword">extends</span> readonly [
  unknown,
  ...infer T
]
  ? T
  : never;
<span class="hljs-keyword">type</span> Length&lt;T <span class="hljs-keyword">extends</span> readonly unknown[]&gt; = T[<span class="hljs-string">"length"</span>];

<span class="hljs-comment">// Usage</span>
<span class="hljs-keyword">type</span> FirstElement = Head&lt;[<span class="hljs-built_in">string</span>, <span class="hljs-built_in">number</span>, <span class="hljs-built_in">boolean</span>]&gt;; <span class="hljs-comment">// string</span>
<span class="hljs-keyword">type</span> RestElements = Tail&lt;[<span class="hljs-built_in">string</span>, <span class="hljs-built_in">number</span>, <span class="hljs-built_in">boolean</span>]&gt;; <span class="hljs-comment">// [number, boolean]</span>
<span class="hljs-keyword">type</span> TupleLength = Length&lt;[<span class="hljs-built_in">string</span>, <span class="hljs-built_in">number</span>, <span class="hljs-built_in">boolean</span>]&gt;; <span class="hljs-comment">// 3</span>

<span class="hljs-comment">// Array manipulation utilities</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">flatten</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params">arrays: T[][]</span>): <span class="hljs-title">T</span>[] </span>{
  <span class="hljs-keyword">return</span> arrays.reduce(<span class="hljs-function">(<span class="hljs-params">acc, arr</span>) =&gt;</span> acc.concat(arr), []);
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">unique</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params">array: T[]</span>): <span class="hljs-title">T</span>[] </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">Array</span>.from(<span class="hljs-keyword">new</span> Set(array));
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">groupBy</span>&lt;<span class="hljs-title">T</span>, <span class="hljs-title">K</span> <span class="hljs-title">extends</span> <span class="hljs-title">keyof</span> <span class="hljs-title">any</span>&gt;(<span class="hljs-params">
  array: T[],
  keyFn: (item: T) =&gt; K
</span>): <span class="hljs-title">Record</span>&lt;<span class="hljs-title">K</span>, <span class="hljs-title">T</span>[]&gt; </span>{
  <span class="hljs-keyword">return</span> array.reduce(<span class="hljs-function">(<span class="hljs-params">groups, item</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> key = keyFn(item);
    (groups[key] = groups[key] || []).push(item);
    <span class="hljs-keyword">return</span> groups;
  }, {} <span class="hljs-keyword">as</span> Record&lt;K, T[]&gt;);
}
</div></code></pre>
<h3 id="enum-like-patterns-with-objects">Enum-like Patterns with Objects</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Object as enum alternative</span>
<span class="hljs-keyword">const</span> Theme = {
  Light: <span class="hljs-string">"light"</span>,
  Dark: <span class="hljs-string">"dark"</span>,
  Auto: <span class="hljs-string">"auto"</span>,
} <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>;

<span class="hljs-keyword">type</span> Theme = (<span class="hljs-keyword">typeof</span> Theme)[keyof <span class="hljs-keyword">typeof</span> Theme]; <span class="hljs-comment">// "light" | "dark" | "auto"</span>

<span class="hljs-comment">// Benefits: Tree-shakable, no runtime overhead</span>
<span class="hljs-comment">// Usage</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">applyTheme</span>(<span class="hljs-params">theme: Theme</span>): <span class="hljs-title">void</span> </span>{
  <span class="hljs-built_in">document</span>.body.setAttribute(<span class="hljs-string">"data-theme"</span>, theme);
}

applyTheme(Theme.Dark);
</div></code></pre>
<h2 id="best-practices">Best Practices</h2>
<h3 id="%E2%9C%85-good-practices">‚úÖ Good Practices</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Use specific array types</span>
<span class="hljs-keyword">const</span> userIds: <span class="hljs-built_in">number</span>[] = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]; <span class="hljs-comment">// Better than any[]</span>

<span class="hljs-comment">// Use readonly for immutable data</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">processItems</span>(<span class="hljs-params">items: readonly <span class="hljs-built_in">string</span>[]</span>): <span class="hljs-title">string</span>[] </span>{
  <span class="hljs-keyword">return</span> items.map(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> item.toUpperCase());
}

<span class="hljs-comment">// Use tuples for fixed-structure data</span>
<span class="hljs-keyword">type</span> Coordinate = [x: <span class="hljs-built_in">number</span>, y: <span class="hljs-built_in">number</span>];
<span class="hljs-keyword">type</span> RGB = [red: <span class="hljs-built_in">number</span>, green: <span class="hljs-built_in">number</span>, blue: <span class="hljs-built_in">number</span>];

<span class="hljs-comment">// Use string enums for better type safety</span>
<span class="hljs-keyword">enum</span> Status {
  Pending = <span class="hljs-string">"pending"</span>,
  Approved = <span class="hljs-string">"approved"</span>,
  Rejected = <span class="hljs-string">"rejected"</span>,
}

<span class="hljs-comment">// Use const enums for performance when appropriate</span>
<span class="hljs-keyword">const</span> <span class="hljs-keyword">enum</span> LogLevel {
  Debug = <span class="hljs-string">"debug"</span>,
  Info = <span class="hljs-string">"info"</span>,
  Warning = <span class="hljs-string">"warning"</span>,
  <span class="hljs-built_in">Error</span> = <span class="hljs-string">"error"</span>,
}
</div></code></pre>
<h3 id="%E2%9D%8C-avoid">‚ùå Avoid</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Don't use any[] when you can be specific</span>
<span class="hljs-keyword">const</span> badArray: <span class="hljs-built_in">any</span>[] = [<span class="hljs-number">1</span>, <span class="hljs-string">"hello"</span>, <span class="hljs-literal">true</span>]; <span class="hljs-comment">// Use union types instead</span>

<span class="hljs-comment">// Don't mutate readonly arrays</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">badFunction</span>(<span class="hljs-params">items: readonly <span class="hljs-built_in">string</span>[]</span>): <span class="hljs-title">void</span> </span>{
  <span class="hljs-comment">// items.push("new"); // Error - good!</span>
}

<span class="hljs-comment">// Don't use heterogeneous enums</span>
<span class="hljs-keyword">enum</span> BadEnum {
  StringValue = <span class="hljs-string">"string"</span>,
  NumberValue = <span class="hljs-number">42</span>, <span class="hljs-comment">// Confusing and error-prone</span>
}

<span class="hljs-comment">// Don't use numeric enums when string enums are clearer</span>
<span class="hljs-keyword">enum</span> BadStatus {
  Pending, <span class="hljs-comment">// What does 0 mean?</span>
  Approved,
  Rejected,
}
</div></code></pre>
<h2 id="summary-checklist">Summary Checklist</h2>
<ul>
<li><input type="checkbox" id="checkbox20"><label for="checkbox20">Use specific array types instead of </label><code>any[]</code></li>
<li><input type="checkbox" id="checkbox21"><label for="checkbox21">Consider </label><code>readonly</code> for arrays that shouldn't be modified</li>
<li><input type="checkbox" id="checkbox22"><label for="checkbox22">Use tuples for fixed-length, heterogeneous data</label></li>
<li><input type="checkbox" id="checkbox23"><label for="checkbox23">Prefer string enums over numeric enums for clarity</label></li>
<li><input type="checkbox" id="checkbox24"><label for="checkbox24">Use const enums for performance when tree-shaking isn't a concern</label></li>
<li><input type="checkbox" id="checkbox25"><label for="checkbox25">Consider union types as alternatives to enums</label></li>
<li><input type="checkbox" id="checkbox26"><label for="checkbox26">Use named tuple elements for better documentation</label></li>
</ul>
<h2 id="next-steps">Next Steps</h2>
<p>Now that you understand arrays, tuples, and enums, let's explore union and intersection types for more flexible type combinations.</p>
<hr>
<p><em>Continue to: <a href="07-union-intersection-types.md">Union and Intersection Types</a></em></p>
<h1 id="union-and-intersection-types">Union and Intersection Types</h1>
<blockquote>
<p>Learn how to combine types using unions and intersections to create flexible and powerful type definitions</p>
</blockquote>
<h2 id="union-types">Union Types</h2>
<p>Union types allow a value to be one of several types, using the <code>|</code> operator.</p>
<h3 id="basic-union-types">Basic Union Types</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Basic union types</span>
<span class="hljs-keyword">type</span> StringOrNumber = <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span>;
<span class="hljs-keyword">type</span> Status = <span class="hljs-string">"pending"</span> | <span class="hljs-string">"approved"</span> | <span class="hljs-string">"rejected"</span>;
<span class="hljs-keyword">type</span> Theme = <span class="hljs-string">"light"</span> | <span class="hljs-string">"dark"</span> | <span class="hljs-string">"auto"</span>;

<span class="hljs-comment">// Using union types</span>
<span class="hljs-keyword">let</span> id: StringOrNumber = <span class="hljs-string">"user123"</span>;
id = <span class="hljs-number">456</span>; <span class="hljs-comment">// Also valid</span>

<span class="hljs-keyword">let</span> currentStatus: Status = <span class="hljs-string">"pending"</span>;
<span class="hljs-comment">// currentStatus = "invalid"; // Error: Type '"invalid"' is not assignable</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setTheme</span>(<span class="hljs-params">theme: Theme</span>): <span class="hljs-title">void</span> </span>{
  <span class="hljs-built_in">document</span>.body.setAttribute(<span class="hljs-string">"data-theme"</span>, theme);
}

setTheme(<span class="hljs-string">"dark"</span>); <span class="hljs-comment">// OK</span>
<span class="hljs-comment">// setTheme("blue"); // Error: Argument of type '"blue"' is not assignable</span>
</div></code></pre>
<h3 id="union-types-with-objects">Union Types with Objects</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Union of object types</span>
<span class="hljs-keyword">type</span> Cat = {
  <span class="hljs-keyword">type</span>: <span class="hljs-string">"cat"</span>;
  meow: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-built_in">void</span>;
  purr: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-built_in">void</span>;
};

<span class="hljs-keyword">type</span> Dog = {
  <span class="hljs-keyword">type</span>: <span class="hljs-string">"dog"</span>;
  bark: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-built_in">void</span>;
  wag: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-built_in">void</span>;
};

<span class="hljs-keyword">type</span> Pet = Cat | Dog;

<span class="hljs-comment">// Function accepting union type</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">handlePet</span>(<span class="hljs-params">pet: Pet</span>): <span class="hljs-title">void</span> </span>{
  <span class="hljs-comment">// Can only access common properties</span>
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`Pet type: <span class="hljs-subst">${pet.<span class="hljs-keyword">type</span>}</span>`</span>);

  <span class="hljs-comment">// Need type narrowing for specific properties</span>
  <span class="hljs-keyword">if</span> (pet.type === <span class="hljs-string">"cat"</span>) {
    pet.meow(); <span class="hljs-comment">// TypeScript knows this is a Cat</span>
    pet.purr();
  } <span class="hljs-keyword">else</span> {
    pet.bark(); <span class="hljs-comment">// TypeScript knows this is a Dog</span>
    pet.wag();
  }
}
</div></code></pre>
<h3 id="discriminated-unions">Discriminated Unions</h3>
<p>Discriminated unions use a common property to distinguish between union members.</p>
<pre class="hljs"><code><div><span class="hljs-comment">// Discriminated union with literal types</span>
<span class="hljs-keyword">type</span> LoadingState = {
  status: <span class="hljs-string">"loading"</span>;
};

<span class="hljs-keyword">type</span> SuccessState = {
  status: <span class="hljs-string">"success"</span>;
  data: <span class="hljs-built_in">any</span>;
};

<span class="hljs-keyword">type</span> ErrorState = {
  status: <span class="hljs-string">"error"</span>;
  error: <span class="hljs-built_in">string</span>;
};

<span class="hljs-keyword">type</span> ApiState = LoadingState | SuccessState | ErrorState;

<span class="hljs-comment">// Type-safe handling of discriminated unions</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">handleApiState</span>(<span class="hljs-params">state: ApiState</span>): <span class="hljs-title">void</span> </span>{
  <span class="hljs-keyword">switch</span> (state.status) {
    <span class="hljs-keyword">case</span> <span class="hljs-string">"loading"</span>:
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Loading..."</span>);
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">"success"</span>:
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Data:"</span>, state.data); <span class="hljs-comment">// TypeScript knows state.data exists</span>
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">"error"</span>:
      <span class="hljs-built_in">console</span>.error(<span class="hljs-string">"Error:"</span>, state.error); <span class="hljs-comment">// TypeScript knows state.error exists</span>
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">default</span>:
      <span class="hljs-comment">// Exhaustiveness check</span>
      <span class="hljs-keyword">const</span> exhaustiveCheck: never = state;
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">`Unhandled state: <span class="hljs-subst">${exhaustiveCheck}</span>`</span>);
  }
}
</div></code></pre>
<h3 id="complex-discriminated-unions">Complex Discriminated Unions</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Shape examples</span>
<span class="hljs-keyword">type</span> Circle = {
  kind: <span class="hljs-string">"circle"</span>;
  radius: <span class="hljs-built_in">number</span>;
};

<span class="hljs-keyword">type</span> Rectangle = {
  kind: <span class="hljs-string">"rectangle"</span>;
  width: <span class="hljs-built_in">number</span>;
  height: <span class="hljs-built_in">number</span>;
};

<span class="hljs-keyword">type</span> Triangle = {
  kind: <span class="hljs-string">"triangle"</span>;
  base: <span class="hljs-built_in">number</span>;
  height: <span class="hljs-built_in">number</span>;
};

<span class="hljs-keyword">type</span> Shape = Circle | Rectangle | Triangle;

<span class="hljs-comment">// Calculate area with type safety</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">calculateArea</span>(<span class="hljs-params">shape: Shape</span>): <span class="hljs-title">number</span> </span>{
  <span class="hljs-keyword">switch</span> (shape.kind) {
    <span class="hljs-keyword">case</span> <span class="hljs-string">"circle"</span>:
      <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.PI * shape.radius ** <span class="hljs-number">2</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">"rectangle"</span>:
      <span class="hljs-keyword">return</span> shape.width * shape.height;
    <span class="hljs-keyword">case</span> <span class="hljs-string">"triangle"</span>:
      <span class="hljs-keyword">return</span> (shape.base * shape.height) / <span class="hljs-number">2</span>;
    <span class="hljs-keyword">default</span>:
      <span class="hljs-keyword">const</span> exhaustiveCheck: never = shape;
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">`Unknown shape: <span class="hljs-subst">${exhaustiveCheck}</span>`</span>);
  }
}

<span class="hljs-comment">// Usage</span>
<span class="hljs-keyword">const</span> circle: Circle = { kind: <span class="hljs-string">"circle"</span>, radius: <span class="hljs-number">5</span> };
<span class="hljs-keyword">const</span> rectangle: Rectangle = { kind: <span class="hljs-string">"rectangle"</span>, width: <span class="hljs-number">10</span>, height: <span class="hljs-number">20</span> };

<span class="hljs-built_in">console</span>.log(calculateArea(circle)); <span class="hljs-comment">// 78.54</span>
<span class="hljs-built_in">console</span>.log(calculateArea(rectangle)); <span class="hljs-comment">// 200</span>
</div></code></pre>
<h3 id="union-types-with-functions">Union Types with Functions</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Function union types</span>
<span class="hljs-keyword">type</span> EventHandler = <span class="hljs-function">(<span class="hljs-params">(<span class="hljs-params"></span>) =&gt; <span class="hljs-built_in">void</span></span>) | (<span class="hljs-params">(<span class="hljs-params">event: Event</span>) =&gt; <span class="hljs-built_in">void</span></span>);

<span class="hljs-params">function</span> <span class="hljs-params">addEventListener</span>(<span class="hljs-params">
  element: HTMLElement,
  eventType: <span class="hljs-built_in">string</span>,
  handler: EventHandler
</span>): <span class="hljs-params">void</span> {
  <span class="hljs-params">if</span> (<span class="hljs-params">handler.length === 0</span>) {
    // <span class="hljs-params">Handler</span> <span class="hljs-params">takes</span> <span class="hljs-params">no</span> <span class="hljs-params">parameters</span>
    <span class="hljs-params">element</span>.<span class="hljs-params">addEventListener</span>(<span class="hljs-params">eventType, handler <span class="hljs-keyword">as</span> (<span class="hljs-params"></span>) =&gt; <span class="hljs-built_in">void</span></span>);
  } <span class="hljs-params">else</span> {
    // <span class="hljs-params">Handler</span> <span class="hljs-params">takes</span> <span class="hljs-params">event</span> <span class="hljs-params">parameter</span>
    <span class="hljs-params">element</span>.<span class="hljs-params">addEventListener</span>(<span class="hljs-params">eventType, handler <span class="hljs-keyword">as</span> (<span class="hljs-params">event: Event</span>) =&gt; <span class="hljs-built_in">void</span></span>);
  }
}

// <span class="hljs-params">Union</span> <span class="hljs-params">of</span> <span class="hljs-params">different</span> <span class="hljs-params">function</span> <span class="hljs-params">signatures</span>
<span class="hljs-params">type</span> <span class="hljs-params">Formatter</span> =
  | (<span class="hljs-params">(<span class="hljs-params">value: <span class="hljs-built_in">string</span></span>) =&gt; <span class="hljs-built_in">string</span></span>)
  | (<span class="hljs-params">(<span class="hljs-params">value: <span class="hljs-built_in">number</span></span>) =&gt; <span class="hljs-built_in">string</span></span>)
  | (<span class="hljs-params">(<span class="hljs-params">value: <span class="hljs-built_in">boolean</span></span>) =&gt; <span class="hljs-built_in">string</span></span>);

<span class="hljs-params">const</span> <span class="hljs-params">formatters</span>: <span class="hljs-params">Formatter</span>[] = [
  (<span class="hljs-params">value: <span class="hljs-built_in">string</span></span>) =&gt;</span> value.toUpperCase(),
  <span class="hljs-function">(<span class="hljs-params">value: <span class="hljs-built_in">number</span></span>) =&gt;</span> value.toFixed(<span class="hljs-number">2</span>),
  <span class="hljs-function">(<span class="hljs-params">value: <span class="hljs-built_in">boolean</span></span>) =&gt;</span> (value ? <span class="hljs-string">"Yes"</span> : <span class="hljs-string">"No"</span>),
];
</div></code></pre>
<h2 id="type-narrowing-with-union-types">Type Narrowing with Union Types</h2>
<h3 id="using-typeof">Using typeof</h3>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">processValue</span>(<span class="hljs-params">value: <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span> | <span class="hljs-built_in">boolean</span></span>): <span class="hljs-title">string</span> </span>{
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> value === <span class="hljs-string">"string"</span>) {
    <span class="hljs-keyword">return</span> value.toUpperCase(); <span class="hljs-comment">// TypeScript knows value is string</span>
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> value === <span class="hljs-string">"number"</span>) {
    <span class="hljs-keyword">return</span> value.toFixed(<span class="hljs-number">2</span>); <span class="hljs-comment">// TypeScript knows value is number</span>
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">return</span> value ? <span class="hljs-string">"true"</span> : <span class="hljs-string">"false"</span>; <span class="hljs-comment">// TypeScript knows value is boolean</span>
  }
}
</div></code></pre>
<h3 id="using-instanceof">Using instanceof</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">class</span> Car {
  drive() {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Driving car"</span>);
  }
}

<span class="hljs-keyword">class</span> Bike {
  ride() {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Riding bike"</span>);
  }
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">useVehicle</span>(<span class="hljs-params">vehicle: Car | Bike</span>): <span class="hljs-title">void</span> </span>{
  <span class="hljs-keyword">if</span> (vehicle <span class="hljs-keyword">instanceof</span> Car) {
    vehicle.drive(); <span class="hljs-comment">// TypeScript knows vehicle is Car</span>
  } <span class="hljs-keyword">else</span> {
    vehicle.ride(); <span class="hljs-comment">// TypeScript knows vehicle is Bike</span>
  }
}
</div></code></pre>
<h3 id="using-in-operator">Using 'in' operator</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">type</span> Fish = { swim: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-built_in">void</span> };
<span class="hljs-keyword">type</span> Bird = { fly: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-built_in">void</span> };

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">move</span>(<span class="hljs-params">animal: Fish | Bird</span>): <span class="hljs-title">void</span> </span>{
  <span class="hljs-keyword">if</span> (<span class="hljs-string">"swim"</span> <span class="hljs-keyword">in</span> animal) {
    animal.swim(); <span class="hljs-comment">// TypeScript knows animal is Fish</span>
  } <span class="hljs-keyword">else</span> {
    animal.fly(); <span class="hljs-comment">// TypeScript knows animal is Bird</span>
  }
}
</div></code></pre>
<h3 id="custom-type-guards">Custom Type Guards</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Custom type guard functions</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isString</span>(<span class="hljs-params">value: unknown</span>): <span class="hljs-title">value</span> <span class="hljs-title">is</span> <span class="hljs-title">string</span> </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> value === <span class="hljs-string">"string"</span>;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isNumber</span>(<span class="hljs-params">value: unknown</span>): <span class="hljs-title">value</span> <span class="hljs-title">is</span> <span class="hljs-title">number</span> </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> value === <span class="hljs-string">"number"</span>;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isUser</span>(<span class="hljs-params">obj: <span class="hljs-built_in">any</span></span>): <span class="hljs-title">obj</span> <span class="hljs-title">is</span> <span class="hljs-title">User</span> </span>{
  <span class="hljs-keyword">return</span> obj &amp;&amp; <span class="hljs-keyword">typeof</span> obj.id === <span class="hljs-string">"number"</span> &amp;&amp; <span class="hljs-keyword">typeof</span> obj.name === <span class="hljs-string">"string"</span>;
}

<span class="hljs-comment">// Using custom type guards</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">processUnknown</span>(<span class="hljs-params">value: unknown</span>): <span class="hljs-title">string</span> </span>{
  <span class="hljs-keyword">if</span> (isString(value)) {
    <span class="hljs-keyword">return</span> value.toUpperCase();
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isNumber(value)) {
    <span class="hljs-keyword">return</span> value.toString();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">"Unknown type"</span>;
  }
}
</div></code></pre>
<h2 id="intersection-types">Intersection Types</h2>
<p>Intersection types combine multiple types into one, using the <code>&amp;</code> operator.</p>
<h3 id="basic-intersection-types">Basic Intersection Types</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Basic intersection</span>
<span class="hljs-keyword">type</span> Name = {
  firstName: <span class="hljs-built_in">string</span>;
  lastName: <span class="hljs-built_in">string</span>;
};

<span class="hljs-keyword">type</span> Contact = {
  email: <span class="hljs-built_in">string</span>;
  phone: <span class="hljs-built_in">string</span>;
};

<span class="hljs-keyword">type</span> Person = Name &amp; Contact;

<span class="hljs-comment">// Person has all properties from both types</span>
<span class="hljs-keyword">const</span> person: Person = {
  firstName: <span class="hljs-string">"John"</span>,
  lastName: <span class="hljs-string">"Doe"</span>,
  email: <span class="hljs-string">"john@example.com"</span>,
  phone: <span class="hljs-string">"555-1234"</span>,
};
</div></code></pre>
<h3 id="intersection-with-interfaces">Intersection with Interfaces</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">interface</span> Serializable {
  serialize(): <span class="hljs-built_in">string</span>;
}

<span class="hljs-keyword">interface</span> Loggable {
  log(): <span class="hljs-built_in">void</span>;
}

<span class="hljs-comment">// Intersection of interfaces</span>
<span class="hljs-keyword">type</span> SerializableLoggable = Serializable &amp; Loggable;

<span class="hljs-keyword">class</span> DataModel <span class="hljs-keyword">implements</span> SerializableLoggable {
  <span class="hljs-keyword">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> data: <span class="hljs-built_in">any</span></span>) {}

  serialize(): <span class="hljs-built_in">string</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">JSON</span>.stringify(<span class="hljs-keyword">this</span>.data);
  }

  log(): <span class="hljs-built_in">void</span> {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">this</span>.serialize());
  }
}
</div></code></pre>
<h3 id="intersection-with-function-types">Intersection with Function Types</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">type</span> EventEmitter = {
  on(event: <span class="hljs-built_in">string</span>, callback: <span class="hljs-built_in">Function</span>): <span class="hljs-built_in">void</span>;
  emit(event: <span class="hljs-built_in">string</span>, ...args: <span class="hljs-built_in">any</span>[]): <span class="hljs-built_in">void</span>;
};

<span class="hljs-keyword">type</span> Disposable = {
  dispose(): <span class="hljs-built_in">void</span>;
};

<span class="hljs-keyword">type</span> EventEmitterWithDisposal = EventEmitter &amp; Disposable;

<span class="hljs-keyword">class</span> MyEventEmitter <span class="hljs-keyword">implements</span> EventEmitterWithDisposal {
  <span class="hljs-keyword">private</span> listeners: Map&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">Function</span>[]&gt; = <span class="hljs-keyword">new</span> Map();

  on(event: <span class="hljs-built_in">string</span>, callback: <span class="hljs-built_in">Function</span>): <span class="hljs-built_in">void</span> {
    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.listeners.has(event)) {
      <span class="hljs-keyword">this</span>.listeners.set(event, []);
    }
    <span class="hljs-keyword">this</span>.listeners.get(event)!.push(callback);
  }

  emit(event: <span class="hljs-built_in">string</span>, ...args: <span class="hljs-built_in">any</span>[]): <span class="hljs-built_in">void</span> {
    <span class="hljs-keyword">const</span> callbacks = <span class="hljs-keyword">this</span>.listeners.get(event) || [];
    callbacks.forEach(<span class="hljs-function">(<span class="hljs-params">callback</span>) =&gt;</span> callback(...args));
  }

  dispose(): <span class="hljs-built_in">void</span> {
    <span class="hljs-keyword">this</span>.listeners.clear();
  }
}
</div></code></pre>
<h3 id="merging-object-types">Merging Object Types</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Merging configuration objects</span>
<span class="hljs-keyword">type</span> DatabaseConfig = {
  host: <span class="hljs-built_in">string</span>;
  port: <span class="hljs-built_in">number</span>;
  database: <span class="hljs-built_in">string</span>;
};

<span class="hljs-keyword">type</span> AuthConfig = {
  username: <span class="hljs-built_in">string</span>;
  password: <span class="hljs-built_in">string</span>;
};

<span class="hljs-keyword">type</span> SSLConfig = {
  ssl: <span class="hljs-built_in">boolean</span>;
  cert?: <span class="hljs-built_in">string</span>;
};

<span class="hljs-keyword">type</span> FullConfig = DatabaseConfig &amp; AuthConfig &amp; SSLConfig;

<span class="hljs-keyword">const</span> config: FullConfig = {
  host: <span class="hljs-string">"localhost"</span>,
  port: <span class="hljs-number">5432</span>,
  database: <span class="hljs-string">"myapp"</span>,
  username: <span class="hljs-string">"admin"</span>,
  password: <span class="hljs-string">"secret"</span>,
  ssl: <span class="hljs-literal">true</span>,
  cert: <span class="hljs-string">"/path/to/cert"</span>,
};
</div></code></pre>
<h2 id="advanced-union-and-intersection-patterns">Advanced Union and Intersection Patterns</h2>
<h3 id="conditional-types-with-unions">Conditional Types with Unions</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Conditional type based on union</span>
<span class="hljs-keyword">type</span> ApiResponse&lt;T&gt; = T <span class="hljs-keyword">extends</span> <span class="hljs-built_in">string</span>
  ? { message: T }
  : T <span class="hljs-keyword">extends</span> <span class="hljs-built_in">number</span>
  ? { code: T }
  : { data: T };

<span class="hljs-keyword">type</span> StringResponse = ApiResponse&lt;<span class="hljs-built_in">string</span>&gt;; <span class="hljs-comment">// { message: string }</span>
<span class="hljs-keyword">type</span> NumberResponse = ApiResponse&lt;<span class="hljs-built_in">number</span>&gt;; <span class="hljs-comment">// { code: number }</span>
<span class="hljs-keyword">type</span> ObjectResponse = ApiResponse&lt;User&gt;; <span class="hljs-comment">// { data: User }</span>
</div></code></pre>
<h3 id="distributive-conditional-types">Distributive Conditional Types</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Distributive conditional types with unions</span>
<span class="hljs-keyword">type</span> ToArray&lt;T&gt; = T <span class="hljs-keyword">extends</span> <span class="hljs-built_in">any</span> ? T[] : never;

<span class="hljs-keyword">type</span> StringOrNumberArray = ToArray&lt;<span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span>&gt;;
<span class="hljs-comment">// Distributes to: ToArray&lt;string&gt; | ToArray&lt;number&gt;</span>
<span class="hljs-comment">// Results in: string[] | number[]</span>

<span class="hljs-comment">// Non-distributive version</span>
<span class="hljs-keyword">type</span> ToArrayNonDistributive&lt;T&gt; = [T] <span class="hljs-keyword">extends</span> [<span class="hljs-built_in">any</span>] ? T[] : never;

<span class="hljs-keyword">type</span> Combined = ToArrayNonDistributive&lt;<span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span>&gt;;
<span class="hljs-comment">// Results in: (string | number)[]</span>
</div></code></pre>
<h3 id="utility-types-with-intersections">Utility Types with Intersections</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Merge utility type</span>
<span class="hljs-keyword">type</span> Merge&lt;T, U&gt; = {
  [K <span class="hljs-keyword">in</span> keyof T | keyof U]: K <span class="hljs-keyword">extends</span> keyof U
    ? U[K]
    : K <span class="hljs-keyword">extends</span> keyof T
    ? T[K]
    : never;
};

<span class="hljs-keyword">type</span> A = { a: <span class="hljs-built_in">string</span>; b: <span class="hljs-built_in">number</span> };
<span class="hljs-keyword">type</span> B = { b: <span class="hljs-built_in">string</span>; c: <span class="hljs-built_in">boolean</span> };
<span class="hljs-keyword">type</span> Merged = Merge&lt;A, B&gt;; <span class="hljs-comment">// { a: string; b: string; c: boolean }</span>

<span class="hljs-comment">// Override utility type</span>
<span class="hljs-keyword">type</span> Override&lt;T, U&gt; = Omit&lt;T, keyof U&gt; &amp; U;

<span class="hljs-keyword">type</span> Original = { id: <span class="hljs-built_in">number</span>; name: <span class="hljs-built_in">string</span>; email: <span class="hljs-built_in">string</span> };
<span class="hljs-keyword">type</span> Updates = { name: <span class="hljs-built_in">string</span>; age: <span class="hljs-built_in">number</span> };
<span class="hljs-keyword">type</span> Updated = Override&lt;Original, Updates&gt;; <span class="hljs-comment">// { id: number; email: string; name: string; age: number }</span>
</div></code></pre>
<h2 id="practical-examples">Practical Examples</h2>
<h3 id="api-response-handling">API Response Handling</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// API response types</span>
<span class="hljs-keyword">type</span> ApiSuccess&lt;T&gt; = {
  success: <span class="hljs-literal">true</span>;
  data: T;
  message?: <span class="hljs-built_in">string</span>;
};

<span class="hljs-keyword">type</span> ApiError = {
  success: <span class="hljs-literal">false</span>;
  error: <span class="hljs-built_in">string</span>;
  code: <span class="hljs-built_in">number</span>;
};

<span class="hljs-keyword">type</span> ApiResponse&lt;T&gt; = ApiSuccess&lt;T&gt; | ApiError;

<span class="hljs-comment">// Type-safe response handling</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">handleApiResponse</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params">response: ApiResponse&lt;T&gt;</span>): <span class="hljs-title">T</span> | <span class="hljs-title">null</span> </span>{
  <span class="hljs-keyword">if</span> (response.success) {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Success:"</span>, response.message);
    <span class="hljs-keyword">return</span> response.data;
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-built_in">console</span>.error(<span class="hljs-string">`Error <span class="hljs-subst">${response.code}</span>: <span class="hljs-subst">${response.error}</span>`</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
  }
}

<span class="hljs-comment">// Usage</span>
<span class="hljs-keyword">const</span> userResponse: ApiResponse&lt;User&gt; = {
  success: <span class="hljs-literal">true</span>,
  data: { id: <span class="hljs-number">1</span>, name: <span class="hljs-string">"John"</span>, email: <span class="hljs-string">"john@example.com"</span> },
};

<span class="hljs-keyword">const</span> user = handleApiResponse(userResponse);
</div></code></pre>
<h3 id="form-validation">Form Validation</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Validation result types</span>
<span class="hljs-keyword">type</span> ValidationSuccess = {
  valid: <span class="hljs-literal">true</span>;
  value: <span class="hljs-built_in">any</span>;
};

<span class="hljs-keyword">type</span> ValidationError = {
  valid: <span class="hljs-literal">false</span>;
  errors: <span class="hljs-built_in">string</span>[];
};

<span class="hljs-keyword">type</span> ValidationResult = ValidationSuccess | ValidationError;

<span class="hljs-comment">// Validator functions</span>
<span class="hljs-keyword">type</span> Validator&lt;T&gt; = <span class="hljs-function">(<span class="hljs-params">value: T</span>) =&gt;</span> ValidationResult;

<span class="hljs-keyword">const</span> emailValidator: Validator&lt;<span class="hljs-built_in">string</span>&gt; = <span class="hljs-function">(<span class="hljs-params">email</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> errors: <span class="hljs-built_in">string</span>[] = [];

  <span class="hljs-keyword">if</span> (!email.includes(<span class="hljs-string">"@"</span>)) {
    errors.push(<span class="hljs-string">"Email must contain @"</span>);
  }

  <span class="hljs-keyword">if</span> (email.length &lt; <span class="hljs-number">5</span>) {
    errors.push(<span class="hljs-string">"Email must be at least 5 characters"</span>);
  }

  <span class="hljs-keyword">return</span> errors.length === <span class="hljs-number">0</span>
    ? { valid: <span class="hljs-literal">true</span>, value: email }
    : { valid: <span class="hljs-literal">false</span>, errors };
};

<span class="hljs-comment">// Combine validators</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">combineValidators</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params">...validators: Validator&lt;T&gt;[]</span>): <span class="hljs-title">Validator</span>&lt;<span class="hljs-title">T</span>&gt; </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">value: T</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> allErrors: <span class="hljs-built_in">string</span>[] = [];

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> validator of validators) {
      <span class="hljs-keyword">const</span> result = validator(value);
      <span class="hljs-keyword">if</span> (!result.valid) {
        allErrors.push(...result.errors);
      }
    }

    <span class="hljs-keyword">return</span> allErrors.length === <span class="hljs-number">0</span>
      ? { valid: <span class="hljs-literal">true</span>, value }
      : { valid: <span class="hljs-literal">false</span>, errors: allErrors };
  };
}
</div></code></pre>
<h3 id="event-system">Event System</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Event types</span>
<span class="hljs-keyword">type</span> ClickEvent = {
  <span class="hljs-keyword">type</span>: <span class="hljs-string">"click"</span>;
  x: <span class="hljs-built_in">number</span>;
  y: <span class="hljs-built_in">number</span>;
  button: <span class="hljs-string">"left"</span> | <span class="hljs-string">"right"</span> | <span class="hljs-string">"middle"</span>;
};

<span class="hljs-keyword">type</span> KeyEvent = {
  <span class="hljs-keyword">type</span>: <span class="hljs-string">"keypress"</span>;
  key: <span class="hljs-built_in">string</span>;
  ctrlKey: <span class="hljs-built_in">boolean</span>;
  shiftKey: <span class="hljs-built_in">boolean</span>;
};

<span class="hljs-keyword">type</span> ResizeEvent = {
  <span class="hljs-keyword">type</span>: <span class="hljs-string">"resize"</span>;
  width: <span class="hljs-built_in">number</span>;
  height: <span class="hljs-built_in">number</span>;
};

<span class="hljs-keyword">type</span> AppEvent = ClickEvent | KeyEvent | ResizeEvent;

<span class="hljs-comment">// Event handler types</span>
<span class="hljs-keyword">type</span> EventHandler&lt;T <span class="hljs-keyword">extends</span> AppEvent&gt; = <span class="hljs-function">(<span class="hljs-params">event: T</span>) =&gt;</span> <span class="hljs-built_in">void</span>;

<span class="hljs-comment">// Type-safe event dispatcher</span>
<span class="hljs-keyword">class</span> EventDispatcher {
  <span class="hljs-keyword">private</span> handlers: {
    click: EventHandler&lt;ClickEvent&gt;[];
    keypress: EventHandler&lt;KeyEvent&gt;[];
    resize: EventHandler&lt;ResizeEvent&gt;[];
  } = {
    click: [],
    keypress: [],
    resize: [],
  };

  on&lt;T <span class="hljs-keyword">extends</span> AppEvent[<span class="hljs-string">"type"</span>]&gt;(
    eventType: T,
    handler: EventHandler&lt;Extract&lt;AppEvent, { <span class="hljs-keyword">type</span>: T }&gt;&gt;
  ): <span class="hljs-built_in">void</span> {
    <span class="hljs-keyword">this</span>.handlers[eventType].push(handler <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>);
  }

  emit&lt;T <span class="hljs-keyword">extends</span> AppEvent&gt;(event: T): <span class="hljs-built_in">void</span> {
    <span class="hljs-keyword">const</span> handlers = <span class="hljs-keyword">this</span>.handlers[event.type] <span class="hljs-keyword">as</span> EventHandler&lt;T&gt;[];
    handlers.forEach(<span class="hljs-function">(<span class="hljs-params">handler</span>) =&gt;</span> handler(event));
  }
}
</div></code></pre>
<h2 id="best-practices">Best Practices</h2>
<h3 id="%E2%9C%85-good-practices">‚úÖ Good Practices</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Use discriminated unions for complex state</span>
<span class="hljs-keyword">type</span> RequestState =
  | { status: <span class="hljs-string">"idle"</span> }
  | { status: <span class="hljs-string">"loading"</span> }
  | { status: <span class="hljs-string">"success"</span>; data: <span class="hljs-built_in">any</span> }
  | { status: <span class="hljs-string">"error"</span>; error: <span class="hljs-built_in">string</span> };

<span class="hljs-comment">// Use intersection for composing types</span>
<span class="hljs-keyword">type</span> TimestampedUser = User &amp; {
  createdAt: <span class="hljs-built_in">Date</span>;
  updatedAt: <span class="hljs-built_in">Date</span>;
};

<span class="hljs-comment">// Use literal types in unions for better type safety</span>
<span class="hljs-keyword">type</span> HttpMethod = <span class="hljs-string">"GET"</span> | <span class="hljs-string">"POST"</span> | <span class="hljs-string">"PUT"</span> | <span class="hljs-string">"DELETE"</span>;

<span class="hljs-comment">// Use type guards for runtime type checking</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isErrorResponse</span>(<span class="hljs-params">response: ApiResponse&lt;<span class="hljs-built_in">any</span>&gt;</span>): <span class="hljs-title">response</span> <span class="hljs-title">is</span> <span class="hljs-title">ApiError</span> </span>{
  <span class="hljs-keyword">return</span> !response.success;
}
</div></code></pre>
<h3 id="%E2%9D%8C-avoid">‚ùå Avoid</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Don't use overly complex unions</span>
<span class="hljs-keyword">type</span> BadUnion = <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span> | <span class="hljs-built_in">boolean</span> | object | <span class="hljs-built_in">Function</span> | symbol; <span class="hljs-comment">// Too broad</span>

<span class="hljs-comment">// Don't forget exhaustiveness checking</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">badHandler</span>(<span class="hljs-params">state: RequestState</span>): <span class="hljs-title">void</span> </span>{
  <span class="hljs-keyword">switch</span> (state.status) {
    <span class="hljs-keyword">case</span> <span class="hljs-string">"loading"</span>:
      <span class="hljs-comment">// Handle loading</span>
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">"success"</span>:
      <span class="hljs-comment">// Handle success</span>
      <span class="hljs-keyword">break</span>;
    <span class="hljs-comment">// Missing "idle" and "error" cases!</span>
  }
}

<span class="hljs-comment">// Don't use intersection with conflicting types</span>
<span class="hljs-keyword">type</span> Conflicting = { id: <span class="hljs-built_in">string</span> } &amp; { id: <span class="hljs-built_in">number</span> }; <span class="hljs-comment">// id becomes never</span>
</div></code></pre>
<h2 id="summary-checklist">Summary Checklist</h2>
<ul>
<li><input type="checkbox" id="checkbox27"><label for="checkbox27">Use union types for values that can be one of several types</label></li>
<li><input type="checkbox" id="checkbox28"><label for="checkbox28">Use discriminated unions for complex state management</label></li>
<li><input type="checkbox" id="checkbox29"><label for="checkbox29">Implement exhaustiveness checking with </label><code>never</code></li>
<li><input type="checkbox" id="checkbox30"><label for="checkbox30">Use intersection types to combine multiple type contracts</label></li>
<li><input type="checkbox" id="checkbox31"><label for="checkbox31">Implement proper type narrowing with type guards</label></li>
<li><input type="checkbox" id="checkbox32"><label for="checkbox32">Use literal types in unions for better type safety</label></li>
<li><input type="checkbox" id="checkbox33"><label for="checkbox33">Avoid overly complex union types</label></li>
<li><input type="checkbox" id="checkbox34"><label for="checkbox34">Consider using branded types for better type safety</label></li>
</ul>
<h2 id="next-steps">Next Steps</h2>
<p>Now that you understand union and intersection types, let's explore type inference and type narrowing techniques in more detail.</p>
<hr>
<p><em>Continue to: <a href="08-type-inference-narrowing.md">Type Inference and Narrowing</a></em></p>
<h1 id="type-inference-and-narrowing">Type Inference and Narrowing</h1>
<blockquote>
<p>Master TypeScript's type inference capabilities and learn advanced type narrowing techniques</p>
</blockquote>
<h2 id="type-inference-fundamentals">Type Inference Fundamentals</h2>
<p>TypeScript can automatically infer types in many situations, reducing the need for explicit type annotations while maintaining type safety.</p>
<h3 id="basic-type-inference">Basic Type Inference</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Variable type inference</span>
<span class="hljs-keyword">let</span> message = <span class="hljs-string">"Hello World"</span>; <span class="hljs-comment">// Inferred as string</span>
<span class="hljs-keyword">let</span> count = <span class="hljs-number">42</span>; <span class="hljs-comment">// Inferred as number</span>
<span class="hljs-keyword">let</span> isActive = <span class="hljs-literal">true</span>; <span class="hljs-comment">// Inferred as boolean</span>
<span class="hljs-keyword">let</span> items = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]; <span class="hljs-comment">// Inferred as number[]</span>
<span class="hljs-keyword">let</span> mixed = [<span class="hljs-string">"hello"</span>, <span class="hljs-number">42</span>, <span class="hljs-literal">true</span>]; <span class="hljs-comment">// Inferred as (string | number | boolean)[]</span>

<span class="hljs-comment">// Object type inference</span>
<span class="hljs-keyword">let</span> user = {
  id: <span class="hljs-number">1</span>,
  name: <span class="hljs-string">"John"</span>,
  email: <span class="hljs-string">"john@example.com"</span>,
}; <span class="hljs-comment">// Inferred as { id: number; name: string; email: string; }</span>

<span class="hljs-comment">// Function return type inference</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">add</span>(<span class="hljs-params">a: <span class="hljs-built_in">number</span>, b: <span class="hljs-built_in">number</span></span>) </span>{
  <span class="hljs-keyword">return</span> a + b; <span class="hljs-comment">// Return type inferred as number</span>
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getUser</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">return</span> {
    id: <span class="hljs-number">1</span>,
    name: <span class="hljs-string">"John"</span>,
    isActive: <span class="hljs-literal">true</span>,
  }; <span class="hljs-comment">// Return type inferred as { id: number; name: string; isActive: boolean; }</span>
}
</div></code></pre>
<h3 id="contextual-type-inference">Contextual Type Inference</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Array method callbacks</span>
<span class="hljs-keyword">const</span> numbers = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>];

<span class="hljs-comment">// TypeScript infers parameter types from context</span>
<span class="hljs-keyword">const</span> doubled = numbers.map(<span class="hljs-function">(<span class="hljs-params">n</span>) =&gt;</span> n * <span class="hljs-number">2</span>); <span class="hljs-comment">// n is inferred as number</span>
<span class="hljs-keyword">const</span> filtered = numbers.filter(<span class="hljs-function">(<span class="hljs-params">n</span>) =&gt;</span> n &gt; <span class="hljs-number">2</span>); <span class="hljs-comment">// n is inferred as number</span>
<span class="hljs-keyword">const</span> sum = numbers.reduce(<span class="hljs-function">(<span class="hljs-params">acc, n</span>) =&gt;</span> acc + n, <span class="hljs-number">0</span>); <span class="hljs-comment">// acc and n inferred as number</span>

<span class="hljs-comment">// Event handlers</span>
<span class="hljs-keyword">const</span> button = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">"button"</span>);
button?.addEventListener(<span class="hljs-string">"click"</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
  <span class="hljs-comment">// event is inferred as MouseEvent</span>
  <span class="hljs-built_in">console</span>.log(event.clientX, event.clientY);
});

<span class="hljs-comment">// Promise chains</span>
fetch(<span class="hljs-string">"/api/users"</span>)
  .then(<span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> response.json()) <span class="hljs-comment">// response inferred as Response</span>
  .then(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> <span class="hljs-built_in">console</span>.log(data)); <span class="hljs-comment">// data inferred as any (from json())</span>
</div></code></pre>
<h3 id="best-common-type-inference">Best Common Type Inference</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// TypeScript finds the best common type</span>
<span class="hljs-keyword">let</span> mixed = [<span class="hljs-number">1</span>, <span class="hljs-string">"hello"</span>, <span class="hljs-literal">true</span>]; <span class="hljs-comment">// (string | number | boolean)[]</span>
<span class="hljs-keyword">let</span> numbers = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3.14</span>]; <span class="hljs-comment">// number[]</span>

<span class="hljs-comment">// With objects</span>
<span class="hljs-keyword">let</span> animals = [
  { name: <span class="hljs-string">"Fluffy"</span>, <span class="hljs-keyword">type</span>: <span class="hljs-string">"cat"</span> },
  { name: <span class="hljs-string">"Buddy"</span>, <span class="hljs-keyword">type</span>: <span class="hljs-string">"dog"</span> },
  { name: <span class="hljs-string">"Tweety"</span>, <span class="hljs-keyword">type</span>: <span class="hljs-string">"bird"</span> },
]; <span class="hljs-comment">// { name: string; type: string; }[]</span>

<span class="hljs-comment">// When no common type exists</span>
<span class="hljs-keyword">class</span> Cat {
  meow() {}
}
<span class="hljs-keyword">class</span> Dog {
  bark() {}
}

<span class="hljs-keyword">let</span> pets = [<span class="hljs-keyword">new</span> Cat(), <span class="hljs-keyword">new</span> Dog()]; <span class="hljs-comment">// (Cat | Dog)[]</span>
</div></code></pre>
<h3 id="generic-type-inference">Generic Type Inference</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Generic function with inference</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">identity</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params">arg: T</span>): <span class="hljs-title">T</span> </span>{
  <span class="hljs-keyword">return</span> arg;
}

<span class="hljs-comment">// Type parameter inferred from argument</span>
<span class="hljs-keyword">const</span> stringResult = identity(<span class="hljs-string">"hello"</span>); <span class="hljs-comment">// T inferred as string</span>
<span class="hljs-keyword">const</span> numberResult = identity(<span class="hljs-number">42</span>); <span class="hljs-comment">// T inferred as number</span>

<span class="hljs-comment">// Multiple type parameters</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">pair</span>&lt;<span class="hljs-title">T</span>, <span class="hljs-title">U</span>&gt;(<span class="hljs-params">first: T, second: U</span>): [<span class="hljs-title">T</span>, <span class="hljs-title">U</span>] </span>{
  <span class="hljs-keyword">return</span> [first, second];
}

<span class="hljs-keyword">const</span> stringNumberPair = pair(<span class="hljs-string">"hello"</span>, <span class="hljs-number">42</span>); <span class="hljs-comment">// [string, number]</span>

<span class="hljs-comment">// Generic constraints with inference</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getProperty</span>&lt;<span class="hljs-title">T</span>, <span class="hljs-title">K</span> <span class="hljs-title">extends</span> <span class="hljs-title">keyof</span> <span class="hljs-title">T</span>&gt;(<span class="hljs-params">obj: T, key: K</span>): <span class="hljs-title">T</span>[<span class="hljs-title">K</span>] </span>{
  <span class="hljs-keyword">return</span> obj[key];
}

<span class="hljs-keyword">const</span> user = { id: <span class="hljs-number">1</span>, name: <span class="hljs-string">"John"</span>, email: <span class="hljs-string">"john@example.com"</span> };
<span class="hljs-keyword">const</span> userName = getProperty(user, <span class="hljs-string">"name"</span>); <span class="hljs-comment">// string</span>
<span class="hljs-keyword">const</span> userId = getProperty(user, <span class="hljs-string">"id"</span>); <span class="hljs-comment">// number</span>
</div></code></pre>
<h2 id="advanced-type-inference">Advanced Type Inference</h2>
<h3 id="conditional-type-inference">Conditional Type Inference</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Infer keyword in conditional types</span>
<span class="hljs-keyword">type</span> ReturnType&lt;T&gt; = T <span class="hljs-keyword">extends</span> (...args: <span class="hljs-built_in">any</span>[]) =&gt; infer R ? R : never;

<span class="hljs-keyword">type</span> StringFunction = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-built_in">string</span>;
<span class="hljs-keyword">type</span> NumberFunction = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-built_in">number</span>;

<span class="hljs-keyword">type</span> StringReturn = ReturnType&lt;StringFunction&gt;; <span class="hljs-comment">// string</span>
<span class="hljs-keyword">type</span> NumberReturn = ReturnType&lt;NumberFunction&gt;; <span class="hljs-comment">// number</span>

<span class="hljs-comment">// Infer array element type</span>
<span class="hljs-keyword">type</span> ElementType&lt;T&gt; = T <span class="hljs-keyword">extends</span> (infer U)[] ? U : never;

<span class="hljs-keyword">type</span> StringArrayElement = ElementType&lt;<span class="hljs-built_in">string</span>[]&gt;; <span class="hljs-comment">// string</span>
<span class="hljs-keyword">type</span> NumberArrayElement = ElementType&lt;<span class="hljs-built_in">number</span>[]&gt;; <span class="hljs-comment">// number</span>

<span class="hljs-comment">// Infer promise value type</span>
<span class="hljs-keyword">type</span> PromiseValue&lt;T&gt; = T <span class="hljs-keyword">extends</span> <span class="hljs-built_in">Promise</span>&lt;infer U&gt; ? U : never;

<span class="hljs-keyword">type</span> StringPromiseValue = PromiseValue&lt;<span class="hljs-built_in">Promise</span>&lt;<span class="hljs-built_in">string</span>&gt;&gt;; <span class="hljs-comment">// string</span>
<span class="hljs-keyword">type</span> UserPromiseValue = PromiseValue&lt;<span class="hljs-built_in">Promise</span>&lt;User&gt;&gt;; <span class="hljs-comment">// User</span>
</div></code></pre>
<h3 id="template-literal-type-inference">Template Literal Type Inference</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Template literal type inference</span>
<span class="hljs-keyword">type</span> EventName&lt;T <span class="hljs-keyword">extends</span> <span class="hljs-built_in">string</span>&gt; = <span class="hljs-string">`on<span class="hljs-subst">${Capitalize&lt;T&gt;}</span>`</span>;

<span class="hljs-keyword">type</span> ClickEvent = EventName&lt;<span class="hljs-string">"click"</span>&gt;; <span class="hljs-comment">// "onClick"</span>
<span class="hljs-keyword">type</span> HoverEvent = EventName&lt;<span class="hljs-string">"hover"</span>&gt;; <span class="hljs-comment">// "onHover"</span>

<span class="hljs-comment">// Extract parts from template literals</span>
<span class="hljs-keyword">type</span> ExtractEventType&lt;T&gt; = T <span class="hljs-keyword">extends</span> <span class="hljs-string">`on<span class="hljs-subst">${infer U}</span>`</span> ? Lowercase&lt;U&gt; : never;

<span class="hljs-keyword">type</span> ClickType = ExtractEventType&lt;<span class="hljs-string">"onClick"</span>&gt;; <span class="hljs-comment">// "click"</span>
<span class="hljs-keyword">type</span> HoverType = ExtractEventType&lt;<span class="hljs-string">"onHover"</span>&gt;; <span class="hljs-comment">// "hover"</span>

<span class="hljs-comment">// Complex template literal inference</span>
<span class="hljs-keyword">type</span> ParseRoute&lt;T <span class="hljs-keyword">extends</span> <span class="hljs-built_in">string</span>&gt; = T <span class="hljs-keyword">extends</span> <span class="hljs-string">`/<span class="hljs-subst">${infer Segment}</span>/<span class="hljs-subst">${infer Rest}</span>`</span>
  ? [Segment, ...ParseRoute&lt;<span class="hljs-string">`/<span class="hljs-subst">${Rest}</span>`</span>&gt;]
  : T <span class="hljs-keyword">extends</span> <span class="hljs-string">`/<span class="hljs-subst">${infer Segment}</span>`</span>
  ? [Segment]
  : [];

<span class="hljs-keyword">type</span> UserRoute = ParseRoute&lt;<span class="hljs-string">"/users/123/profile"</span>&gt;; <span class="hljs-comment">// ["users", "123", "profile"]</span>
</div></code></pre>
<h3 id="mapped-type-inference">Mapped Type Inference</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Infer from mapped types</span>
<span class="hljs-keyword">type</span> GetValueType&lt;T&gt; = T <span class="hljs-keyword">extends</span> { [K <span class="hljs-keyword">in</span> keyof T]: infer U } ? U : never;

<span class="hljs-keyword">type</span> StringRecord = { a: <span class="hljs-built_in">string</span>; b: <span class="hljs-built_in">string</span>; c: <span class="hljs-built_in">string</span> };
<span class="hljs-keyword">type</span> StringType = GetValueType&lt;StringRecord&gt;; <span class="hljs-comment">// string</span>

<span class="hljs-keyword">type</span> MixedRecord = { a: <span class="hljs-built_in">string</span>; b: <span class="hljs-built_in">number</span>; c: <span class="hljs-built_in">boolean</span> };
<span class="hljs-keyword">type</span> MixedType = GetValueType&lt;MixedRecord&gt;; <span class="hljs-comment">// string | number | boolean</span>

<span class="hljs-comment">// Infer function parameter types</span>
<span class="hljs-keyword">type</span> Parameters&lt;T <span class="hljs-keyword">extends</span> (...args: <span class="hljs-built_in">any</span>) =&gt; <span class="hljs-built_in">any</span>&gt; = T <span class="hljs-keyword">extends</span> (
  ...args: infer P
) =&gt; <span class="hljs-built_in">any</span>
  ? P
  : never;

<span class="hljs-keyword">type</span> AddFunction = <span class="hljs-function">(<span class="hljs-params">a: <span class="hljs-built_in">number</span>, b: <span class="hljs-built_in">number</span></span>) =&gt;</span> <span class="hljs-built_in">number</span>;
<span class="hljs-keyword">type</span> AddParams = Parameters&lt;AddFunction&gt;; <span class="hljs-comment">// [number, number]</span>
</div></code></pre>
<h2 id="type-narrowing-techniques">Type Narrowing Techniques</h2>
<p>Type narrowing helps TypeScript understand more specific types within conditional blocks.</p>
<h3 id="typeof-type-guards">typeof Type Guards</h3>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">processValue</span>(<span class="hljs-params">value: <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span> | <span class="hljs-built_in">boolean</span></span>): <span class="hljs-title">string</span> </span>{
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> value === <span class="hljs-string">"string"</span>) {
    <span class="hljs-comment">// TypeScript knows value is string here</span>
    <span class="hljs-keyword">return</span> value.toUpperCase();
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> value === <span class="hljs-string">"number"</span>) {
    <span class="hljs-comment">// TypeScript knows value is number here</span>
    <span class="hljs-keyword">return</span> value.toFixed(<span class="hljs-number">2</span>);
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// TypeScript knows value is boolean here</span>
    <span class="hljs-keyword">return</span> value ? <span class="hljs-string">"true"</span> : <span class="hljs-string">"false"</span>;
  }
}

<span class="hljs-comment">// Typeof with objects</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">handleInput</span>(<span class="hljs-params">input: <span class="hljs-built_in">string</span> | <span class="hljs-built_in">string</span>[] | <span class="hljs-literal">null</span></span>): <span class="hljs-title">string</span> </span>{
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> input === <span class="hljs-string">"string"</span>) {
    <span class="hljs-keyword">return</span> input;
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> input === <span class="hljs-string">"object"</span> &amp;&amp; input !== <span class="hljs-literal">null</span>) {
    <span class="hljs-comment">// TypeScript knows input is string[] here</span>
    <span class="hljs-keyword">return</span> input.join(<span class="hljs-string">", "</span>);
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// TypeScript knows input is null here</span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">"No input"</span>;
  }
}
</div></code></pre>
<h3 id="instanceof-type-guards">instanceof Type Guards</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">class</span> Dog {
  bark() {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Woof!"</span>);
  }
}

<span class="hljs-keyword">class</span> Cat {
  meow() {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Meow!"</span>);
  }
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">handlePet</span>(<span class="hljs-params">pet: Dog | Cat</span>): <span class="hljs-title">void</span> </span>{
  <span class="hljs-keyword">if</span> (pet <span class="hljs-keyword">instanceof</span> Dog) {
    pet.bark(); <span class="hljs-comment">// TypeScript knows pet is Dog</span>
  } <span class="hljs-keyword">else</span> {
    pet.meow(); <span class="hljs-comment">// TypeScript knows pet is Cat</span>
  }
}

<span class="hljs-comment">// instanceof with built-in types</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">processError</span>(<span class="hljs-params">error: <span class="hljs-built_in">Error</span> | <span class="hljs-built_in">string</span></span>): <span class="hljs-title">string</span> </span>{
  <span class="hljs-keyword">if</span> (error <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Error</span>) {
    <span class="hljs-keyword">return</span> error.message; <span class="hljs-comment">// TypeScript knows error is Error</span>
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">return</span> error; <span class="hljs-comment">// TypeScript knows error is string</span>
  }
}
</div></code></pre>
<h3 id="in-operator-type-guards">in Operator Type Guards</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">type</span> Fish = { swim: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-built_in">void</span> };
<span class="hljs-keyword">type</span> Bird = { fly: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-built_in">void</span> };
<span class="hljs-keyword">type</span> Human = { walk: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-built_in">void</span> };

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">move</span>(<span class="hljs-params">creature: Fish | Bird | Human</span>): <span class="hljs-title">void</span> </span>{
  <span class="hljs-keyword">if</span> (<span class="hljs-string">"swim"</span> <span class="hljs-keyword">in</span> creature) {
    creature.swim(); <span class="hljs-comment">// TypeScript knows creature is Fish</span>
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-string">"fly"</span> <span class="hljs-keyword">in</span> creature) {
    creature.fly(); <span class="hljs-comment">// TypeScript knows creature is Bird</span>
  } <span class="hljs-keyword">else</span> {
    creature.walk(); <span class="hljs-comment">// TypeScript knows creature is Human</span>
  }
}

<span class="hljs-comment">// in operator with optional properties</span>
<span class="hljs-keyword">interface</span> User {
  id: <span class="hljs-built_in">number</span>;
  name: <span class="hljs-built_in">string</span>;
  email?: <span class="hljs-built_in">string</span>;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">processUser</span>(<span class="hljs-params">user: User</span>): <span class="hljs-title">void</span> </span>{
  <span class="hljs-keyword">if</span> (<span class="hljs-string">"email"</span> <span class="hljs-keyword">in</span> user &amp;&amp; user.email) {
    <span class="hljs-comment">// TypeScript knows user.email exists and is not undefined</span>
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`Email: <span class="hljs-subst">${user.email}</span>`</span>);
  }
}
</div></code></pre>
<h3 id="custom-type-guards">Custom Type Guards</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Basic type guard</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isString</span>(<span class="hljs-params">value: unknown</span>): <span class="hljs-title">value</span> <span class="hljs-title">is</span> <span class="hljs-title">string</span> </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> value === <span class="hljs-string">"string"</span>;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isNumber</span>(<span class="hljs-params">value: unknown</span>): <span class="hljs-title">value</span> <span class="hljs-title">is</span> <span class="hljs-title">number</span> </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> value === <span class="hljs-string">"number"</span>;
}

<span class="hljs-comment">// Object type guard</span>
<span class="hljs-keyword">interface</span> User {
  id: <span class="hljs-built_in">number</span>;
  name: <span class="hljs-built_in">string</span>;
  email: <span class="hljs-built_in">string</span>;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isUser</span>(<span class="hljs-params">obj: <span class="hljs-built_in">any</span></span>): <span class="hljs-title">obj</span> <span class="hljs-title">is</span> <span class="hljs-title">User</span> </span>{
  <span class="hljs-keyword">return</span> (
    obj &amp;&amp;
    <span class="hljs-keyword">typeof</span> obj.id === <span class="hljs-string">"number"</span> &amp;&amp;
    <span class="hljs-keyword">typeof</span> obj.name === <span class="hljs-string">"string"</span> &amp;&amp;
    <span class="hljs-keyword">typeof</span> obj.email === <span class="hljs-string">"string"</span>
  );
}

<span class="hljs-comment">// Generic type guard</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isArrayOf</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params">
  value: unknown,
  guard: (item: unknown) =&gt; item is T
</span>): <span class="hljs-title">value</span> <span class="hljs-title">is</span> <span class="hljs-title">T</span>[] </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">Array</span>.isArray(value) &amp;&amp; value.every(guard);
}

<span class="hljs-comment">// Usage</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">processUnknownValue</span>(<span class="hljs-params">value: unknown</span>): <span class="hljs-title">void</span> </span>{
  <span class="hljs-keyword">if</span> (isString(value)) {
    <span class="hljs-built_in">console</span>.log(value.toUpperCase()); <span class="hljs-comment">// TypeScript knows value is string</span>
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isNumber(value)) {
    <span class="hljs-built_in">console</span>.log(value.toFixed(<span class="hljs-number">2</span>)); <span class="hljs-comment">// TypeScript knows value is number</span>
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isUser(value)) {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`User: <span class="hljs-subst">${value.name}</span>`</span>); <span class="hljs-comment">// TypeScript knows value is User</span>
  }
}

<span class="hljs-keyword">const</span> maybeUsers: unknown = [
  { id: <span class="hljs-number">1</span>, name: <span class="hljs-string">"John"</span>, email: <span class="hljs-string">"john@example.com"</span> },
  { id: <span class="hljs-number">2</span>, name: <span class="hljs-string">"Jane"</span>, email: <span class="hljs-string">"jane@example.com"</span> },
];

<span class="hljs-keyword">if</span> (isArrayOf(maybeUsers, isUser)) {
  <span class="hljs-comment">// TypeScript knows maybeUsers is User[]</span>
  maybeUsers.forEach(<span class="hljs-function">(<span class="hljs-params">user</span>) =&gt;</span> <span class="hljs-built_in">console</span>.log(user.name));
}
</div></code></pre>
<h3 id="discriminated-union-narrowing">Discriminated Union Narrowing</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Discriminated unions with literal types</span>
<span class="hljs-keyword">type</span> LoadingState = { status: <span class="hljs-string">"loading"</span> };
<span class="hljs-keyword">type</span> SuccessState = { status: <span class="hljs-string">"success"</span>; data: <span class="hljs-built_in">any</span> };
<span class="hljs-keyword">type</span> ErrorState = { status: <span class="hljs-string">"error"</span>; error: <span class="hljs-built_in">string</span> };

<span class="hljs-keyword">type</span> AsyncState = LoadingState | SuccessState | ErrorState;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">handleState</span>(<span class="hljs-params">state: AsyncState</span>): <span class="hljs-title">void</span> </span>{
  <span class="hljs-keyword">switch</span> (state.status) {
    <span class="hljs-keyword">case</span> <span class="hljs-string">"loading"</span>:
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Loading..."</span>);
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">"success"</span>:
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Data:"</span>, state.data); <span class="hljs-comment">// TypeScript knows state is SuccessState</span>
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">"error"</span>:
      <span class="hljs-built_in">console</span>.error(<span class="hljs-string">"Error:"</span>, state.error); <span class="hljs-comment">// TypeScript knows state is ErrorState</span>
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">default</span>:
      <span class="hljs-comment">// Exhaustiveness check</span>
      <span class="hljs-keyword">const</span> exhaustiveCheck: never = state;
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">`Unhandled state: <span class="hljs-subst">${exhaustiveCheck}</span>`</span>);
  }
}

<span class="hljs-comment">// Complex discriminated unions</span>
<span class="hljs-keyword">type</span> Shape =
  | { kind: <span class="hljs-string">"circle"</span>; radius: <span class="hljs-built_in">number</span> }
  | { kind: <span class="hljs-string">"rectangle"</span>; width: <span class="hljs-built_in">number</span>; height: <span class="hljs-built_in">number</span> }
  | { kind: <span class="hljs-string">"triangle"</span>; base: <span class="hljs-built_in">number</span>; height: <span class="hljs-built_in">number</span> };

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">calculateArea</span>(<span class="hljs-params">shape: Shape</span>): <span class="hljs-title">number</span> </span>{
  <span class="hljs-keyword">switch</span> (shape.kind) {
    <span class="hljs-keyword">case</span> <span class="hljs-string">"circle"</span>:
      <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.PI * shape.radius ** <span class="hljs-number">2</span>; <span class="hljs-comment">// TypeScript knows shape has radius</span>
    <span class="hljs-keyword">case</span> <span class="hljs-string">"rectangle"</span>:
      <span class="hljs-keyword">return</span> shape.width * shape.height; <span class="hljs-comment">// TypeScript knows shape has width and height</span>
    <span class="hljs-keyword">case</span> <span class="hljs-string">"triangle"</span>:
      <span class="hljs-keyword">return</span> (shape.base * shape.height) / <span class="hljs-number">2</span>; <span class="hljs-comment">// TypeScript knows shape has base and height</span>
    <span class="hljs-keyword">default</span>:
      <span class="hljs-keyword">const</span> exhaustiveCheck: never = shape;
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">`Unknown shape: <span class="hljs-subst">${exhaustiveCheck}</span>`</span>);
  }
}
</div></code></pre>
<h3 id="truthiness-narrowing">Truthiness Narrowing</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Truthiness narrowing</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">processOptionalString</span>(<span class="hljs-params">str: <span class="hljs-built_in">string</span> | <span class="hljs-literal">null</span> | <span class="hljs-literal">undefined</span></span>): <span class="hljs-title">string</span> </span>{
  <span class="hljs-keyword">if</span> (str) {
    <span class="hljs-comment">// TypeScript knows str is string (not null or undefined)</span>
    <span class="hljs-keyword">return</span> str.toUpperCase();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">"No string provided"</span>;
  }
}

<span class="hljs-comment">// Array length narrowing</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">processArray</span>(<span class="hljs-params">arr: <span class="hljs-built_in">string</span>[]</span>): <span class="hljs-title">string</span> </span>{
  <span class="hljs-keyword">if</span> (arr.length &gt; <span class="hljs-number">0</span>) {
    <span class="hljs-comment">// TypeScript knows arr is not empty</span>
    <span class="hljs-keyword">return</span> arr[<span class="hljs-number">0</span>].toUpperCase(); <span class="hljs-comment">// Safe to access first element</span>
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">"Empty array"</span>;
  }
}

<span class="hljs-comment">// Object property narrowing</span>
<span class="hljs-keyword">interface</span> Config {
  apiUrl?: <span class="hljs-built_in">string</span>;
  timeout?: <span class="hljs-built_in">number</span>;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">makeRequest</span>(<span class="hljs-params">config: Config</span>): <span class="hljs-title">void</span> </span>{
  <span class="hljs-keyword">if</span> (config.apiUrl) {
    <span class="hljs-comment">// TypeScript knows config.apiUrl is string (not undefined)</span>
    fetch(config.apiUrl);
  }
}
</div></code></pre>
<h3 id="equality-narrowing">Equality Narrowing</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Equality narrowing with literals</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">handleStatus</span>(<span class="hljs-params">
  status: "pending" | "approved" | "rejected" | <span class="hljs-literal">null</span>
</span>): <span class="hljs-title">void</span> </span>{
  <span class="hljs-keyword">if</span> (status === <span class="hljs-string">"approved"</span>) {
    <span class="hljs-comment">// TypeScript knows status is "approved"</span>
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Request approved"</span>);
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (status === <span class="hljs-literal">null</span>) {
    <span class="hljs-comment">// TypeScript knows status is null</span>
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"No status"</span>);
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// TypeScript knows status is "pending" | "rejected"</span>
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`Status: <span class="hljs-subst">${status}</span>`</span>);
  }
}

<span class="hljs-comment">// Equality narrowing with discriminated unions</span>
<span class="hljs-keyword">type</span> ApiResponse =
  | { success: <span class="hljs-literal">true</span>; data: <span class="hljs-built_in">any</span> }
  | { success: <span class="hljs-literal">false</span>; error: <span class="hljs-built_in">string</span> };

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">handleResponse</span>(<span class="hljs-params">response: ApiResponse</span>): <span class="hljs-title">void</span> </span>{
  <span class="hljs-keyword">if</span> (response.success === <span class="hljs-literal">true</span>) {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Data:"</span>, response.data); <span class="hljs-comment">// TypeScript knows response has data</span>
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-built_in">console</span>.error(<span class="hljs-string">"Error:"</span>, response.error); <span class="hljs-comment">// TypeScript knows response has error</span>
  }
}
</div></code></pre>
<h2 id="advanced-narrowing-patterns">Advanced Narrowing Patterns</h2>
<h3 id="control-flow-analysis">Control Flow Analysis</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// TypeScript tracks control flow</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">processValue</span>(<span class="hljs-params">value: <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span> | <span class="hljs-literal">null</span></span>): <span class="hljs-title">string</span> </span>{
  <span class="hljs-keyword">if</span> (value === <span class="hljs-literal">null</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">"null value"</span>;
  }

  <span class="hljs-comment">// TypeScript knows value is string | number here</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> value === <span class="hljs-string">"string"</span>) {
    <span class="hljs-keyword">return</span> value.toUpperCase();
  }

  <span class="hljs-comment">// TypeScript knows value is number here</span>
  <span class="hljs-keyword">return</span> value.toString();
}

<span class="hljs-comment">// Early returns</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">validateUser</span>(<span class="hljs-params">user: <span class="hljs-built_in">any</span></span>): <span class="hljs-title">User</span> </span>{
  <span class="hljs-keyword">if</span> (!user) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"User is required"</span>);
  }

  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> user.id !== <span class="hljs-string">"number"</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"User ID must be a number"</span>);
  }

  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> user.name !== <span class="hljs-string">"string"</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"User name must be a string"</span>);
  }

  <span class="hljs-comment">// TypeScript knows user has the right shape here</span>
  <span class="hljs-keyword">return</span> user <span class="hljs-keyword">as</span> User;
}
</div></code></pre>
<h3 id="assertion-functions">Assertion Functions</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Assertion functions</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">assert</span>(<span class="hljs-params">condition: <span class="hljs-built_in">any</span>, message?: <span class="hljs-built_in">string</span></span>): <span class="hljs-title">asserts</span> <span class="hljs-title">condition</span> </span>{
  <span class="hljs-keyword">if</span> (!condition) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(message || <span class="hljs-string">"Assertion failed"</span>);
  }
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">assertIsString</span>(<span class="hljs-params">value: unknown</span>): <span class="hljs-title">asserts</span> <span class="hljs-title">value</span> <span class="hljs-title">is</span> <span class="hljs-title">string</span> </span>{
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> value !== <span class="hljs-string">"string"</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"Expected string"</span>);
  }
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">assertIsUser</span>(<span class="hljs-params">obj: <span class="hljs-built_in">any</span></span>): <span class="hljs-title">asserts</span> <span class="hljs-title">obj</span> <span class="hljs-title">is</span> <span class="hljs-title">User</span> </span>{
  assert(obj &amp;&amp; <span class="hljs-keyword">typeof</span> obj === <span class="hljs-string">"object"</span>, <span class="hljs-string">"Expected object"</span>);
  assert(<span class="hljs-keyword">typeof</span> obj.id === <span class="hljs-string">"number"</span>, <span class="hljs-string">"Expected numeric id"</span>);
  assert(<span class="hljs-keyword">typeof</span> obj.name === <span class="hljs-string">"string"</span>, <span class="hljs-string">"Expected string name"</span>);
  assert(<span class="hljs-keyword">typeof</span> obj.email === <span class="hljs-string">"string"</span>, <span class="hljs-string">"Expected string email"</span>);
}

<span class="hljs-comment">// Usage</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">processUnknown</span>(<span class="hljs-params">value: unknown</span>): <span class="hljs-title">void</span> </span>{
  assertIsString(value);
  <span class="hljs-comment">// TypeScript knows value is string after assertion</span>
  <span class="hljs-built_in">console</span>.log(value.toUpperCase());
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">processUserData</span>(<span class="hljs-params">data: <span class="hljs-built_in">any</span></span>): <span class="hljs-title">void</span> </span>{
  assertIsUser(data);
  <span class="hljs-comment">// TypeScript knows data is User after assertion</span>
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`User: <span class="hljs-subst">${data.name}</span> (<span class="hljs-subst">${data.email}</span>)`</span>);
}
</div></code></pre>
<h3 id="never-type-for-exhaustiveness">Never Type for Exhaustiveness</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Exhaustiveness checking with never</span>
<span class="hljs-keyword">type</span> Action = { <span class="hljs-keyword">type</span>: <span class="hljs-string">"increment"</span> } | { <span class="hljs-keyword">type</span>: <span class="hljs-string">"decrement"</span> } | { <span class="hljs-keyword">type</span>: <span class="hljs-string">"reset"</span> };

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">reducer</span>(<span class="hljs-params">state: <span class="hljs-built_in">number</span>, action: Action</span>): <span class="hljs-title">number</span> </span>{
  <span class="hljs-keyword">switch</span> (action.type) {
    <span class="hljs-keyword">case</span> <span class="hljs-string">"increment"</span>:
      <span class="hljs-keyword">return</span> state + <span class="hljs-number">1</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">"decrement"</span>:
      <span class="hljs-keyword">return</span> state - <span class="hljs-number">1</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">"reset"</span>:
      <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
    <span class="hljs-keyword">default</span>:
      <span class="hljs-comment">// This ensures all cases are handled</span>
      <span class="hljs-keyword">const</span> exhaustiveCheck: never = action;
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">`Unhandled action: <span class="hljs-subst">${exhaustiveCheck}</span>`</span>);
  }
}

<span class="hljs-comment">// If you add a new action type, TypeScript will error</span>
<span class="hljs-comment">// type Action =</span>
<span class="hljs-comment">//   | { type: "increment" }</span>
<span class="hljs-comment">//   | { type: "decrement" }</span>
<span class="hljs-comment">//   | { type: "reset" }</span>
<span class="hljs-comment">//   | { type: "multiply"; factor: number }; // New action</span>

<span class="hljs-comment">// The default case will now error because action is not never</span>
</div></code></pre>
<h2 id="best-practices">Best Practices</h2>
<h3 id="%E2%9C%85-good-practices">‚úÖ Good Practices</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Let TypeScript infer when obvious</span>
<span class="hljs-keyword">const</span> users = [
  { id: <span class="hljs-number">1</span>, name: <span class="hljs-string">"John"</span> },
  { id: <span class="hljs-number">2</span>, name: <span class="hljs-string">"Jane"</span> },
]; <span class="hljs-comment">// Let TypeScript infer the array type</span>

<span class="hljs-comment">// Use type guards for runtime safety</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isValidEmail</span>(<span class="hljs-params">email: unknown</span>): <span class="hljs-title">email</span> <span class="hljs-title">is</span> <span class="hljs-title">string</span> </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> email === <span class="hljs-string">"string"</span> &amp;&amp; email.includes(<span class="hljs-string">"@"</span>);
}

<span class="hljs-comment">// Use assertion functions for validation</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">assertIsPositive</span>(<span class="hljs-params">value: <span class="hljs-built_in">number</span></span>): <span class="hljs-title">asserts</span> <span class="hljs-title">value</span> <span class="hljs-title">is</span> <span class="hljs-title">number</span> </span>{
  <span class="hljs-keyword">if</span> (value &lt;= <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"Value must be positive"</span>);
  }
}

<span class="hljs-comment">// Use discriminated unions for state management</span>
<span class="hljs-keyword">type</span> RequestState =
  | { status: <span class="hljs-string">"idle"</span> }
  | { status: <span class="hljs-string">"loading"</span> }
  | { status: <span class="hljs-string">"success"</span>; data: <span class="hljs-built_in">any</span> }
  | { status: <span class="hljs-string">"error"</span>; error: <span class="hljs-built_in">string</span> };
</div></code></pre>
<h3 id="%E2%9D%8C-avoid">‚ùå Avoid</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Don't over-annotate when inference works</span>
<span class="hljs-keyword">const</span> message: <span class="hljs-built_in">string</span> = <span class="hljs-string">"Hello"</span>; <span class="hljs-comment">// Unnecessary annotation</span>
<span class="hljs-keyword">const</span> message = <span class="hljs-string">"Hello"</span>; <span class="hljs-comment">// Better</span>

<span class="hljs-comment">// Don't use any when you can narrow</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">badProcess</span>(<span class="hljs-params">value: <span class="hljs-built_in">any</span></span>): <span class="hljs-title">any</span> </span>{
  <span class="hljs-keyword">return</span> value.whatever; <span class="hljs-comment">// No type safety</span>
}

<span class="hljs-comment">// Don't ignore exhaustiveness checking</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">badReducer</span>(<span class="hljs-params">action: Action</span>): <span class="hljs-title">number</span> </span>{
  <span class="hljs-keyword">switch</span> (action.type) {
    <span class="hljs-keyword">case</span> <span class="hljs-string">"increment"</span>:
      <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
    <span class="hljs-comment">// Missing other cases - no compile-time error</span>
  }
  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>; <span class="hljs-comment">// Fallback hides missing cases</span>
}
</div></code></pre>
<h2 id="summary-checklist">Summary Checklist</h2>
<ul>
<li><input type="checkbox" id="checkbox35"><label for="checkbox35">Leverage TypeScript's type inference when types are obvious</label></li>
<li><input type="checkbox" id="checkbox36"><label for="checkbox36">Use type guards for runtime type checking</label></li>
<li><input type="checkbox" id="checkbox37"><label for="checkbox37">Implement custom type guards for complex objects</label></li>
<li><input type="checkbox" id="checkbox38"><label for="checkbox38">Use discriminated unions for state management</label></li>
<li><input type="checkbox" id="checkbox39"><label for="checkbox39">Implement exhaustiveness checking with </label><code>never</code></li>
<li><input type="checkbox" id="checkbox40"><label for="checkbox40">Use assertion functions for validation</label></li>
<li><input type="checkbox" id="checkbox41"><label for="checkbox41">Understand control flow analysis</label></li>
<li><input type="checkbox" id="checkbox42"><label for="checkbox42">Use the </label><code>in</code> operator for property checking</li>
<li><input type="checkbox" id="checkbox43"><label for="checkbox43">Implement proper error handling with type narrowing</label></li>
</ul>
<h2 id="next-steps">Next Steps</h2>
<p>Now that you understand type inference and narrowing, let's move on to intermediate topics starting with optional and readonly properties.</p>
<hr>
<p><em>Continue to: <a href="09-optional-readonly-properties.md">Optional and Readonly Properties</a></em></p>
<h1 id="optional-and-readonly-properties">Optional and Readonly Properties</h1>
<blockquote>
<p>Learn how to work with optional properties, readonly modifiers, and default parameters in TypeScript</p>
</blockquote>
<h2 id="optional-properties">Optional Properties</h2>
<p>Optional properties allow you to define object types where some properties may or may not be present.</p>
<h3 id="basic-optional-properties">Basic Optional Properties</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Interface with optional properties</span>
<span class="hljs-keyword">interface</span> User {
  id: <span class="hljs-built_in">number</span>;
  name: <span class="hljs-built_in">string</span>;
  email: <span class="hljs-built_in">string</span>;
  avatar?: <span class="hljs-built_in">string</span>; <span class="hljs-comment">// Optional property</span>
  bio?: <span class="hljs-built_in">string</span>;
  website?: <span class="hljs-built_in">string</span>;
  preferences?: {
    theme: <span class="hljs-string">"light"</span> | <span class="hljs-string">"dark"</span>;
    notifications: <span class="hljs-built_in">boolean</span>;
  };
}

<span class="hljs-comment">// Valid objects - optional properties can be omitted</span>
<span class="hljs-keyword">const</span> user1: User = {
  id: <span class="hljs-number">1</span>,
  name: <span class="hljs-string">"John Doe"</span>,
  email: <span class="hljs-string">"john@example.com"</span>,
};

<span class="hljs-comment">// Also valid - optional properties included</span>
<span class="hljs-keyword">const</span> user2: User = {
  id: <span class="hljs-number">2</span>,
  name: <span class="hljs-string">"Jane Smith"</span>,
  email: <span class="hljs-string">"jane@example.com"</span>,
  avatar: <span class="hljs-string">"avatar.jpg"</span>,
  bio: <span class="hljs-string">"Software developer"</span>,
  preferences: {
    theme: <span class="hljs-string">"dark"</span>,
    notifications: <span class="hljs-literal">true</span>,
  },
};
</div></code></pre>
<h3 id="optional-properties-in-type-aliases">Optional Properties in Type Aliases</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Type alias with optional properties</span>
<span class="hljs-keyword">type</span> Product = {
  id: <span class="hljs-built_in">number</span>;
  name: <span class="hljs-built_in">string</span>;
  price: <span class="hljs-built_in">number</span>;
  description?: <span class="hljs-built_in">string</span>;
  category?: <span class="hljs-built_in">string</span>;
  tags?: <span class="hljs-built_in">string</span>[];
  inStock?: <span class="hljs-built_in">boolean</span>;
};

<span class="hljs-comment">// Configuration object with optional properties</span>
<span class="hljs-keyword">type</span> ApiConfig = {
  baseUrl: <span class="hljs-built_in">string</span>;
  timeout?: <span class="hljs-built_in">number</span>;
  retries?: <span class="hljs-built_in">number</span>;
  headers?: Record&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>&gt;;
  debug?: <span class="hljs-built_in">boolean</span>;
};

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createApiClient</span>(<span class="hljs-params">config: ApiConfig</span>) </span>{
  <span class="hljs-keyword">const</span> defaultConfig = {
    timeout: <span class="hljs-number">5000</span>,
    retries: <span class="hljs-number">3</span>,
    debug: <span class="hljs-literal">false</span>,
    ...config,
  };

  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> ApiClient(defaultConfig);
}
</div></code></pre>
<h3 id="working-with-optional-properties">Working with Optional Properties</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">interface</span> UserProfile {
  id: <span class="hljs-built_in">number</span>;
  username: <span class="hljs-built_in">string</span>;
  email: <span class="hljs-built_in">string</span>;
  firstName?: <span class="hljs-built_in">string</span>;
  lastName?: <span class="hljs-built_in">string</span>;
  avatar?: <span class="hljs-built_in">string</span>;
  socialLinks?: {
    twitter?: <span class="hljs-built_in">string</span>;
    github?: <span class="hljs-built_in">string</span>;
    linkedin?: <span class="hljs-built_in">string</span>;
  };
}

<span class="hljs-comment">// Safe access to optional properties</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">displayUserInfo</span>(<span class="hljs-params">user: UserProfile</span>): <span class="hljs-title">string</span> </span>{
  <span class="hljs-keyword">let</span> info = <span class="hljs-string">`<span class="hljs-subst">${user.username}</span> (<span class="hljs-subst">${user.email}</span>)`</span>;

  <span class="hljs-comment">// Check if optional property exists</span>
  <span class="hljs-keyword">if</span> (user.firstName &amp;&amp; user.lastName) {
    info += <span class="hljs-string">` - <span class="hljs-subst">${user.firstName}</span> <span class="hljs-subst">${user.lastName}</span>`</span>;
  }

  <span class="hljs-comment">// Optional chaining (TypeScript 3.7+)</span>
  <span class="hljs-keyword">const</span> twitterHandle = user.socialLinks?.twitter;
  <span class="hljs-keyword">if</span> (twitterHandle) {
    info += <span class="hljs-string">` | Twitter: @<span class="hljs-subst">${twitterHandle}</span>`</span>;
  }

  <span class="hljs-keyword">return</span> info;
}

<span class="hljs-comment">// Nullish coalescing with optional properties</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getUserDisplayName</span>(<span class="hljs-params">user: UserProfile</span>): <span class="hljs-title">string</span> </span>{
  <span class="hljs-keyword">return</span> user.firstName ?? user.username ?? <span class="hljs-string">"Anonymous"</span>;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getAvatarUrl</span>(<span class="hljs-params">user: UserProfile</span>): <span class="hljs-title">string</span> </span>{
  <span class="hljs-keyword">return</span> user.avatar ?? <span class="hljs-string">"/default-avatar.png"</span>;
}
</div></code></pre>
<h3 id="optional-properties-vs-union-with-undefined">Optional Properties vs Union with Undefined</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Optional property</span>
<span class="hljs-keyword">interface</span> WithOptional {
  name: <span class="hljs-built_in">string</span>;
  age?: <span class="hljs-built_in">number</span>; <span class="hljs-comment">// Can be omitted or undefined</span>
}

<span class="hljs-comment">// Union with undefined</span>
<span class="hljs-keyword">interface</span> WithUnion {
  name: <span class="hljs-built_in">string</span>;
  age: <span class="hljs-built_in">number</span> | <span class="hljs-literal">undefined</span>; <span class="hljs-comment">// Must be present, but can be undefined</span>
}

<span class="hljs-comment">// Usage differences</span>
<span class="hljs-keyword">const</span> optional1: WithOptional = { name: <span class="hljs-string">"John"</span> }; <span class="hljs-comment">// Valid</span>
<span class="hljs-keyword">const</span> optional2: WithOptional = { name: <span class="hljs-string">"John"</span>, age: <span class="hljs-literal">undefined</span> }; <span class="hljs-comment">// Valid</span>

<span class="hljs-keyword">const</span> union1: WithUnion = { name: <span class="hljs-string">"John"</span>, age: <span class="hljs-literal">undefined</span> }; <span class="hljs-comment">// Valid</span>
<span class="hljs-comment">// const union2: WithUnion = { name: "John" }; // Error: Property 'age' is missing</span>

<span class="hljs-comment">// When to use each:</span>
<span class="hljs-comment">// Optional (?): When the property might not be relevant</span>
<span class="hljs-comment">// Union with undefined: When the property is always relevant but might not have a value</span>
</div></code></pre>
<h2 id="readonly-properties">Readonly Properties</h2>
<p>Readonly properties cannot be modified after object creation.</p>
<h3 id="basic-readonly-properties">Basic Readonly Properties</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">interface</span> ImmutableUser {
  readonly id: <span class="hljs-built_in">number</span>;
  readonly createdAt: <span class="hljs-built_in">Date</span>;
  name: <span class="hljs-built_in">string</span>; <span class="hljs-comment">// Can be modified</span>
  email: <span class="hljs-built_in">string</span>;
}

<span class="hljs-keyword">const</span> user: ImmutableUser = {
  id: <span class="hljs-number">1</span>,
  createdAt: <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(),
  name: <span class="hljs-string">"John Doe"</span>,
  email: <span class="hljs-string">"john@example.com"</span>,
};

<span class="hljs-comment">// user.id = 2; // Error: Cannot assign to 'id' because it is a read-only property</span>
<span class="hljs-comment">// user.createdAt = new Date(); // Error: Cannot assign to 'createdAt'</span>
user.name = <span class="hljs-string">"Jane Doe"</span>; <span class="hljs-comment">// OK: name is not readonly</span>
user.email = <span class="hljs-string">"jane@example.com"</span>; <span class="hljs-comment">// OK: email is not readonly</span>
</div></code></pre>
<h3 id="readonly-arrays-and-tuples">Readonly Arrays and Tuples</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Readonly array</span>
<span class="hljs-keyword">interface</span> Config {
  readonly supportedLanguages: readonly <span class="hljs-built_in">string</span>[];
  readonly coordinates: readonly [<span class="hljs-built_in">number</span>, <span class="hljs-built_in">number</span>];
}

<span class="hljs-keyword">const</span> appConfig: Config = {
  supportedLanguages: [<span class="hljs-string">"en"</span>, <span class="hljs-string">"es"</span>, <span class="hljs-string">"fr"</span>],
  coordinates: [<span class="hljs-number">40.7128</span>, <span class="hljs-number">-74.006</span>],
};

<span class="hljs-comment">// appConfig.supportedLanguages.push("de"); // Error: Property 'push' does not exist</span>
<span class="hljs-comment">// appConfig.coordinates[0] = 50; // Error: Index signature only permits reading</span>

<span class="hljs-comment">// ReadonlyArray&lt;T&gt; type</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">processItems</span>(<span class="hljs-params">items: ReadonlyArray&lt;<span class="hljs-built_in">string</span>&gt;</span>): <span class="hljs-title">string</span> </span>{
  <span class="hljs-keyword">return</span> items.join(<span class="hljs-string">", "</span>); <span class="hljs-comment">// OK: reading is allowed</span>
  <span class="hljs-comment">// items.push("new"); // Error: Property 'push' does not exist</span>
}

<span class="hljs-comment">// Readonly tuple</span>
<span class="hljs-keyword">type</span> Point = readonly [<span class="hljs-built_in">number</span>, <span class="hljs-built_in">number</span>];
<span class="hljs-keyword">const</span> origin: Point = [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>];
<span class="hljs-comment">// origin[0] = 1; // Error: Index signature only permits reading</span>
</div></code></pre>
<h3 id="readonly-utility-type">Readonly Utility Type</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Readonly&lt;T&gt; utility type makes all properties readonly</span>
<span class="hljs-keyword">interface</span> MutableUser {
  id: <span class="hljs-built_in">number</span>;
  name: <span class="hljs-built_in">string</span>;
  email: <span class="hljs-built_in">string</span>;
  preferences: {
    theme: <span class="hljs-built_in">string</span>;
    notifications: <span class="hljs-built_in">boolean</span>;
  };
}

<span class="hljs-keyword">type</span> ImmutableUser = Readonly&lt;MutableUser&gt;;
<span class="hljs-comment">// Equivalent to:</span>
<span class="hljs-comment">// {</span>
<span class="hljs-comment">//   readonly id: number;</span>
<span class="hljs-comment">//   readonly name: string;</span>
<span class="hljs-comment">//   readonly email: string;</span>
<span class="hljs-comment">//   readonly preferences: {</span>
<span class="hljs-comment">//     theme: string;</span>
<span class="hljs-comment">//     notifications: boolean;</span>
<span class="hljs-comment">//   };</span>
<span class="hljs-comment">// }</span>

<span class="hljs-comment">// Note: Readonly is shallow - nested objects are not made readonly</span>
<span class="hljs-keyword">const</span> user: ImmutableUser = {
  id: <span class="hljs-number">1</span>,
  name: <span class="hljs-string">"John"</span>,
  email: <span class="hljs-string">"john@example.com"</span>,
  preferences: {
    theme: <span class="hljs-string">"dark"</span>,
    notifications: <span class="hljs-literal">true</span>,
  },
};

<span class="hljs-comment">// user.name = "Jane"; // Error: readonly</span>
user.preferences.theme = <span class="hljs-string">"light"</span>; <span class="hljs-comment">// OK: nested object is not readonly</span>
</div></code></pre>
<h3 id="deep-readonly">Deep Readonly</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Deep readonly utility type</span>
<span class="hljs-keyword">type</span> DeepReadonly&lt;T&gt; = {
  readonly [P <span class="hljs-keyword">in</span> keyof T]: T[P] <span class="hljs-keyword">extends</span> object ? DeepReadonly&lt;T[P]&gt; : T[P];
};

<span class="hljs-keyword">type</span> DeepImmutableUser = DeepReadonly&lt;MutableUser&gt;;

<span class="hljs-keyword">const</span> deepUser: DeepImmutableUser = {
  id: <span class="hljs-number">1</span>,
  name: <span class="hljs-string">"John"</span>,
  email: <span class="hljs-string">"john@example.com"</span>,
  preferences: {
    theme: <span class="hljs-string">"dark"</span>,
    notifications: <span class="hljs-literal">true</span>,
  },
};

<span class="hljs-comment">// deepUser.name = "Jane"; // Error: readonly</span>
<span class="hljs-comment">// deepUser.preferences.theme = "light"; // Error: readonly (deep)</span>

<span class="hljs-comment">// Alternative using const assertions</span>
<span class="hljs-keyword">const</span> constUser = {
  id: <span class="hljs-number">1</span>,
  name: <span class="hljs-string">"John"</span>,
  email: <span class="hljs-string">"john@example.com"</span>,
  preferences: {
    theme: <span class="hljs-string">"dark"</span>,
    notifications: <span class="hljs-literal">true</span>,
  },
} <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>;
<span class="hljs-comment">// All properties become readonly and literal types</span>
</div></code></pre>
<h2 id="optional-function-parameters">Optional Function Parameters</h2>
<h3 id="basic-optional-parameters">Basic Optional Parameters</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Optional parameters must come after required ones</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">greet</span>(<span class="hljs-params">name: <span class="hljs-built_in">string</span>, greeting?: <span class="hljs-built_in">string</span></span>): <span class="hljs-title">string</span> </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${greeting || <span class="hljs-string">"Hello"</span>}</span>, <span class="hljs-subst">${name}</span>!`</span>;
}

greet(<span class="hljs-string">"John"</span>); <span class="hljs-comment">// "Hello, John!"</span>
greet(<span class="hljs-string">"John"</span>, <span class="hljs-string">"Hi"</span>); <span class="hljs-comment">// "Hi, John!"</span>

<span class="hljs-comment">// Multiple optional parameters</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createUser</span>(<span class="hljs-params">
  name: <span class="hljs-built_in">string</span>,
  age?: <span class="hljs-built_in">number</span>,
  email?: <span class="hljs-built_in">string</span>,
  isActive?: <span class="hljs-built_in">boolean</span>
</span>): <span class="hljs-title">User</span> </span>{
  <span class="hljs-keyword">return</span> {
    id: <span class="hljs-built_in">Math</span>.random(),
    name,
    age: age ?? <span class="hljs-number">0</span>,
    email: email ?? <span class="hljs-string">""</span>,
    isActive: isActive ?? <span class="hljs-literal">true</span>,
  };
}
</div></code></pre>
<h3 id="default-parameters">Default Parameters</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Default parameter values</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createConnection</span>(<span class="hljs-params">
  host: <span class="hljs-built_in">string</span> = "localhost",
  port: <span class="hljs-built_in">number</span> = 3000,
  ssl: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>
</span>): <span class="hljs-title">Connection</span> </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Connection(host, port, ssl);
}

<span class="hljs-comment">// Can call with any number of arguments</span>
createConnection(); <span class="hljs-comment">// Uses all defaults</span>
createConnection(<span class="hljs-string">"api.example.com"</span>); <span class="hljs-comment">// Custom host, default port and ssl</span>
createConnection(<span class="hljs-string">"api.example.com"</span>, <span class="hljs-number">443</span>, <span class="hljs-literal">true</span>); <span class="hljs-comment">// All custom</span>

<span class="hljs-comment">// Default parameters can reference earlier parameters</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">buildUrl</span>(<span class="hljs-params">
  protocol: <span class="hljs-built_in">string</span> = "https",
  host: <span class="hljs-built_in">string</span>,
  path: <span class="hljs-built_in">string</span> = "/",
  port?: <span class="hljs-built_in">number</span>
</span>): <span class="hljs-title">string</span> </span>{
  <span class="hljs-keyword">const</span> portSuffix = port ? <span class="hljs-string">`:<span class="hljs-subst">${port}</span>`</span> : <span class="hljs-string">""</span>;
  <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${protocol}</span>://<span class="hljs-subst">${host}</span><span class="hljs-subst">${portSuffix}</span><span class="hljs-subst">${path}</span>`</span>;
}
</div></code></pre>
<h3 id="optional-vs-default-parameters">Optional vs Default Parameters</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Optional parameter</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">optionalParam</span>(<span class="hljs-params">name: <span class="hljs-built_in">string</span>, age?: <span class="hljs-built_in">number</span></span>): <span class="hljs-title">void</span> </span>{
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`Name: <span class="hljs-subst">${name}</span>, Age: <span class="hljs-subst">${age ?? <span class="hljs-string">"unknown"</span>}</span>`</span>);
}

<span class="hljs-comment">// Default parameter</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">defaultParam</span>(<span class="hljs-params">name: <span class="hljs-built_in">string</span>, age: <span class="hljs-built_in">number</span> = 0</span>): <span class="hljs-title">void</span> </span>{
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`Name: <span class="hljs-subst">${name}</span>, Age: <span class="hljs-subst">${age}</span>`</span>);
}

<span class="hljs-comment">// Usage</span>
optionalParam(<span class="hljs-string">"John"</span>); <span class="hljs-comment">// age is undefined</span>
defaultParam(<span class="hljs-string">"John"</span>); <span class="hljs-comment">// age is 0</span>

<span class="hljs-comment">// Explicit undefined</span>
optionalParam(<span class="hljs-string">"John"</span>, <span class="hljs-literal">undefined</span>); <span class="hljs-comment">// OK</span>
defaultParam(<span class="hljs-string">"John"</span>, <span class="hljs-literal">undefined</span>); <span class="hljs-comment">// age becomes 0 (default applied)</span>
</div></code></pre>
<h2 id="object-destructuring-with-optional-properties">Object Destructuring with Optional Properties</h2>
<h3 id="destructuring-optional-properties">Destructuring Optional Properties</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">interface</span> ApiOptions {
  baseUrl: <span class="hljs-built_in">string</span>;
  timeout?: <span class="hljs-built_in">number</span>;
  retries?: <span class="hljs-built_in">number</span>;
  headers?: Record&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>&gt;;
}

<span class="hljs-comment">// Destructuring with defaults</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">makeRequest</span>(<span class="hljs-params">{
  baseUrl,
  timeout = 5000,
  retries = 3,
  headers = {},
}: ApiOptions</span>): <span class="hljs-title">Promise</span>&lt;<span class="hljs-title">Response</span>&gt; </span>{
  <span class="hljs-comment">// Implementation</span>
  <span class="hljs-keyword">return</span> fetch(baseUrl, {
    headers,
    signal: AbortSignal.timeout(timeout),
  });
}

<span class="hljs-comment">// Destructuring with optional object parameter</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createApiClient</span>(<span class="hljs-params">{
  baseUrl = "https:<span class="hljs-comment">//api.example.com",</span>
  timeout = 5000,
  retries = 3,
}: ApiOptions = {}</span>): <span class="hljs-title">ApiClient</span> </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> ApiClient(baseUrl, timeout, retries);
}

<span class="hljs-comment">// Can be called without arguments</span>
<span class="hljs-keyword">const</span> client1 = createApiClient(); <span class="hljs-comment">// Uses all defaults</span>
<span class="hljs-keyword">const</span> client2 = createApiClient({ baseUrl: <span class="hljs-string">"https://custom.api.com"</span> });
</div></code></pre>
<h3 id="nested-destructuring">Nested Destructuring</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">interface</span> UserSettings {
  profile: {
    name: <span class="hljs-built_in">string</span>;
    avatar?: <span class="hljs-built_in">string</span>;
  };
  preferences?: {
    theme?: <span class="hljs-string">"light"</span> | <span class="hljs-string">"dark"</span>;
    notifications?: <span class="hljs-built_in">boolean</span>;
    language?: <span class="hljs-built_in">string</span>;
  };
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">updateUserSettings</span>(<span class="hljs-params">{
  profile: { name, avatar = "/<span class="hljs-keyword">default</span>-avatar.png" },
  preferences: { theme = "light", notifications = <span class="hljs-literal">true</span>, language = "en" } = {},
}: UserSettings</span>): <span class="hljs-title">void</span> </span>{
  <span class="hljs-built_in">console</span>.log({
    name,
    avatar,
    theme,
    notifications,
    language,
  });
}
</div></code></pre>
<h2 id="practical-examples">Practical Examples</h2>
<h3 id="configuration-objects">Configuration Objects</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">interface</span> DatabaseConfig {
  readonly host: <span class="hljs-built_in">string</span>;
  readonly port: <span class="hljs-built_in">number</span>;
  readonly database: <span class="hljs-built_in">string</span>;
  username?: <span class="hljs-built_in">string</span>;
  password?: <span class="hljs-built_in">string</span>;
  ssl?: <span class="hljs-built_in">boolean</span>;
  connectionTimeout?: <span class="hljs-built_in">number</span>;
  maxConnections?: <span class="hljs-built_in">number</span>;
  readonly createdAt: <span class="hljs-built_in">Date</span>;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createDatabaseConnection</span>(<span class="hljs-params">config: DatabaseConfig</span>): <span class="hljs-title">DatabaseConnection</span> </span>{
  <span class="hljs-comment">// Validate required readonly properties</span>
  <span class="hljs-keyword">if</span> (!config.host || !config.port || !config.database) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"Host, port, and database are required"</span>);
  }

  <span class="hljs-keyword">const</span> connectionConfig = {
    host: config.host,
    port: config.port,
    database: config.database,
    username: config.username ?? <span class="hljs-string">"guest"</span>,
    password: config.password ?? <span class="hljs-string">""</span>,
    ssl: config.ssl ?? <span class="hljs-literal">false</span>,
    connectionTimeout: config.connectionTimeout ?? <span class="hljs-number">30000</span>,
    maxConnections: config.maxConnections ?? <span class="hljs-number">10</span>,
  };

  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> DatabaseConnection(connectionConfig);
}
</div></code></pre>
<h3 id="api-response-types">API Response Types</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">interface</span> ApiResponse&lt;T&gt; {
  readonly success: <span class="hljs-built_in">boolean</span>;
  readonly timestamp: <span class="hljs-built_in">Date</span>;
  readonly requestId: <span class="hljs-built_in">string</span>;
  data?: T;
  error?: {
    code: <span class="hljs-built_in">string</span>;
    message: <span class="hljs-built_in">string</span>;
    details?: Record&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt;;
  };
  pagination?: {
    page: <span class="hljs-built_in">number</span>;
    limit: <span class="hljs-built_in">number</span>;
    total: <span class="hljs-built_in">number</span>;
    hasNext: <span class="hljs-built_in">boolean</span>;
  };
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">handleApiResponse</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params">response: ApiResponse&lt;T&gt;</span>): <span class="hljs-title">T</span> | <span class="hljs-title">null</span> </span>{
  <span class="hljs-keyword">if</span> (response.success &amp;&amp; response.data) {
    <span class="hljs-keyword">return</span> response.data;
  }

  <span class="hljs-keyword">if</span> (response.error) {
    <span class="hljs-built_in">console</span>.error(
      <span class="hljs-string">`API Error <span class="hljs-subst">${response.error.code}</span>: <span class="hljs-subst">${response.error.message}</span>`</span>
    );
    <span class="hljs-keyword">if</span> (response.error.details) {
      <span class="hljs-built_in">console</span>.error(<span class="hljs-string">"Details:"</span>, response.error.details);
    }
  }

  <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
}
</div></code></pre>
<h3 id="form-validation">Form Validation</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">interface</span> FormData {
  email: <span class="hljs-built_in">string</span>;
  password: <span class="hljs-built_in">string</span>;
  confirmPassword?: <span class="hljs-built_in">string</span>;
  firstName?: <span class="hljs-built_in">string</span>;
  lastName?: <span class="hljs-built_in">string</span>;
  agreeToTerms: <span class="hljs-built_in">boolean</span>;
  newsletter?: <span class="hljs-built_in">boolean</span>;
}

<span class="hljs-keyword">interface</span> ValidationResult {
  readonly isValid: <span class="hljs-built_in">boolean</span>;
  readonly errors: readonly <span class="hljs-built_in">string</span>[];
  readonly warnings?: readonly <span class="hljs-built_in">string</span>[];
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">validateForm</span>(<span class="hljs-params">data: FormData</span>): <span class="hljs-title">ValidationResult</span> </span>{
  <span class="hljs-keyword">const</span> errors: <span class="hljs-built_in">string</span>[] = [];
  <span class="hljs-keyword">const</span> warnings: <span class="hljs-built_in">string</span>[] = [];

  <span class="hljs-comment">// Required field validation</span>
  <span class="hljs-keyword">if</span> (!data.email.includes(<span class="hljs-string">"@"</span>)) {
    errors.push(<span class="hljs-string">"Invalid email format"</span>);
  }

  <span class="hljs-keyword">if</span> (data.password.length &lt; <span class="hljs-number">8</span>) {
    errors.push(<span class="hljs-string">"Password must be at least 8 characters"</span>);
  }

  <span class="hljs-comment">// Optional field validation</span>
  <span class="hljs-keyword">if</span> (data.confirmPassword &amp;&amp; data.confirmPassword !== data.password) {
    errors.push(<span class="hljs-string">"Passwords do not match"</span>);
  }

  <span class="hljs-keyword">if</span> (!data.firstName &amp;&amp; !data.lastName) {
    warnings.push(<span class="hljs-string">"Consider providing your name for better experience"</span>);
  }

  <span class="hljs-keyword">return</span> {
    isValid: errors.length === <span class="hljs-number">0</span>,
    errors,
    warnings: warnings.length &gt; <span class="hljs-number">0</span> ? warnings : <span class="hljs-literal">undefined</span>,
  };
}
</div></code></pre>
<h2 id="best-practices">Best Practices</h2>
<h3 id="%E2%9C%85-good-practices">‚úÖ Good Practices</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Use optional properties for truly optional data</span>
<span class="hljs-keyword">interface</span> User {
  id: <span class="hljs-built_in">number</span>;
  name: <span class="hljs-built_in">string</span>;
  email: <span class="hljs-built_in">string</span>;
  avatar?: <span class="hljs-built_in">string</span>; <span class="hljs-comment">// Truly optional</span>
  lastLoginAt?: <span class="hljs-built_in">Date</span>; <span class="hljs-comment">// May not exist for new users</span>
}

<span class="hljs-comment">// Use readonly for immutable data</span>
<span class="hljs-keyword">interface</span> Event {
  readonly id: <span class="hljs-built_in">string</span>;
  readonly timestamp: <span class="hljs-built_in">Date</span>;
  readonly <span class="hljs-keyword">type</span>: <span class="hljs-built_in">string</span>;
  data: <span class="hljs-built_in">any</span>; <span class="hljs-comment">// Can be modified</span>
}

<span class="hljs-comment">// Provide sensible defaults</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createApiClient</span>(<span class="hljs-params">{
  baseUrl,
  timeout = 5000, <span class="hljs-comment">// Reasonable default</span>
  retries = 3,
  debug = <span class="hljs-literal">false</span>,
}: {
  baseUrl: <span class="hljs-built_in">string</span>;
  timeout?: <span class="hljs-built_in">number</span>;
  retries?: <span class="hljs-built_in">number</span>;
  debug?: <span class="hljs-built_in">boolean</span>;
}</span>): <span class="hljs-title">ApiClient</span> </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> ApiClient(baseUrl, timeout, retries, debug);
}

<span class="hljs-comment">// Use const assertions for immutable data</span>
<span class="hljs-keyword">const</span> config = {
  apiUrl: <span class="hljs-string">"https://api.example.com"</span>,
  version: <span class="hljs-string">"1.0.0"</span>,
  features: [<span class="hljs-string">"auth"</span>, <span class="hljs-string">"analytics"</span>],
} <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>;
</div></code></pre>
<h3 id="%E2%9D%8C-avoid">‚ùå Avoid</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Don't make everything optional</span>
<span class="hljs-keyword">interface</span> BadUser {
  id?: <span class="hljs-built_in">number</span>; <span class="hljs-comment">// ID should be required</span>
  name?: <span class="hljs-built_in">string</span>; <span class="hljs-comment">// Name should be required</span>
  email?: <span class="hljs-built_in">string</span>; <span class="hljs-comment">// Email should be required</span>
}

<span class="hljs-comment">// Don't use readonly for data that needs to change</span>
<span class="hljs-keyword">interface</span> BadCounter {
  readonly count: <span class="hljs-built_in">number</span>; <span class="hljs-comment">// Should be mutable</span>
  readonly increment: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-built_in">void</span>; <span class="hljs-comment">// Methods don't need readonly</span>
}

<span class="hljs-comment">// Don't use optional when undefined union is clearer</span>
<span class="hljs-keyword">interface</span> ConfusingApi {
  data?: <span class="hljs-built_in">any</span>; <span class="hljs-comment">// Is this missing data or undefined data?</span>
}

<span class="hljs-comment">// Better:</span>
<span class="hljs-keyword">interface</span> ClearApi {
  data: <span class="hljs-built_in">any</span> | <span class="hljs-literal">null</span>; <span class="hljs-comment">// Explicitly nullable</span>
}
</div></code></pre>
<h2 id="summary-checklist">Summary Checklist</h2>
<ul>
<li><input type="checkbox" id="checkbox44"><label for="checkbox44">Use optional properties (</label><code>?</code>) for truly optional data</li>
<li><input type="checkbox" id="checkbox45"><label for="checkbox45">Use readonly for immutable properties</label></li>
<li><input type="checkbox" id="checkbox46"><label for="checkbox46">Understand the difference between optional and undefined union</label></li>
<li><input type="checkbox" id="checkbox47"><label for="checkbox47">Use default parameters for function arguments</label></li>
<li><input type="checkbox" id="checkbox48"><label for="checkbox48">Use </label><code>Readonly&lt;T&gt;</code> utility type when needed</li>
<li><input type="checkbox" id="checkbox49"><label for="checkbox49">Consider deep readonly for nested immutability</label></li>
<li><input type="checkbox" id="checkbox50"><label for="checkbox50">Use const assertions for compile-time immutability</label></li>
<li><input type="checkbox" id="checkbox51"><label for="checkbox51">Provide sensible defaults in destructuring</label></li>
<li><input type="checkbox" id="checkbox52"><label for="checkbox52">Use optional chaining (</label><code>?.</code>) for safe property access</li>
<li><input type="checkbox" id="checkbox53"><label for="checkbox53">Use nullish coalescing (</label><code>??</code>) for default values</li>
</ul>
<h2 id="next-steps">Next Steps</h2>
<p>Now that you understand optional and readonly properties, let's explore classes, access modifiers, and inheritance in TypeScript.</p>
<hr>
<p><em>Continue to: <a href="10-classes-oop.md">Classes and Object-Oriented Programming</a></em></p>
<h1 id="classes-and-object-oriented-programming">Classes and Object-Oriented Programming</h1>
<blockquote>
<p>Master TypeScript classes, access modifiers, inheritance, and object-oriented programming patterns</p>
</blockquote>
<h2 id="basic-classes">Basic Classes</h2>
<h3 id="class-declaration-and-constructor">Class Declaration and Constructor</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Basic class with constructor</span>
<span class="hljs-keyword">class</span> User {
  <span class="hljs-comment">// Properties</span>
  id: <span class="hljs-built_in">number</span>;
  name: <span class="hljs-built_in">string</span>;
  email: <span class="hljs-built_in">string</span>;

  <span class="hljs-comment">// Constructor</span>
  <span class="hljs-keyword">constructor</span>(<span class="hljs-params">id: <span class="hljs-built_in">number</span>, name: <span class="hljs-built_in">string</span>, email: <span class="hljs-built_in">string</span></span>) {
    <span class="hljs-keyword">this</span>.id = id;
    <span class="hljs-keyword">this</span>.name = name;
    <span class="hljs-keyword">this</span>.email = email;
  }

  <span class="hljs-comment">// Methods</span>
  getDisplayName(): <span class="hljs-built_in">string</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-keyword">this</span>.name}</span> (<span class="hljs-subst">${<span class="hljs-keyword">this</span>.email}</span>)`</span>;
  }

  updateEmail(newEmail: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">void</span> {
    <span class="hljs-keyword">this</span>.email = newEmail;
  }
}

<span class="hljs-comment">// Creating instances</span>
<span class="hljs-keyword">const</span> user1 = <span class="hljs-keyword">new</span> User(<span class="hljs-number">1</span>, <span class="hljs-string">"John Doe"</span>, <span class="hljs-string">"john@example.com"</span>);
<span class="hljs-keyword">const</span> user2 = <span class="hljs-keyword">new</span> User(<span class="hljs-number">2</span>, <span class="hljs-string">"Jane Smith"</span>, <span class="hljs-string">"jane@example.com"</span>);

<span class="hljs-built_in">console</span>.log(user1.getDisplayName()); <span class="hljs-comment">// "John Doe (john@example.com)"</span>
user1.updateEmail(<span class="hljs-string">"john.doe@example.com"</span>);
</div></code></pre>
<h3 id="property-initialization">Property Initialization</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Property initialization in declaration</span>
<span class="hljs-keyword">class</span> Counter {
  count: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>; <span class="hljs-comment">// Default value</span>
  step: <span class="hljs-built_in">number</span> = <span class="hljs-number">1</span>;

  <span class="hljs-keyword">constructor</span>(<span class="hljs-params">initialCount?: <span class="hljs-built_in">number</span>, step?: <span class="hljs-built_in">number</span></span>) {
    <span class="hljs-keyword">if</span> (initialCount !== <span class="hljs-literal">undefined</span>) {
      <span class="hljs-keyword">this</span>.count = initialCount;
    }
    <span class="hljs-keyword">if</span> (step !== <span class="hljs-literal">undefined</span>) {
      <span class="hljs-keyword">this</span>.step = step;
    }
  }

  increment(): <span class="hljs-built_in">void</span> {
    <span class="hljs-keyword">this</span>.count += <span class="hljs-keyword">this</span>.step;
  }

  decrement(): <span class="hljs-built_in">void</span> {
    <span class="hljs-keyword">this</span>.count -= <span class="hljs-keyword">this</span>.step;
  }

  reset(): <span class="hljs-built_in">void</span> {
    <span class="hljs-keyword">this</span>.count = <span class="hljs-number">0</span>;
  }
}

<span class="hljs-comment">// Shorthand constructor parameter properties</span>
<span class="hljs-keyword">class</span> Product {
  <span class="hljs-keyword">constructor</span>(<span class="hljs-params">
    <span class="hljs-keyword">public</span> id: <span class="hljs-built_in">number</span>,
    <span class="hljs-keyword">public</span> name: <span class="hljs-built_in">string</span>,
    <span class="hljs-keyword">public</span> price: <span class="hljs-built_in">number</span>,
    <span class="hljs-keyword">public</span> category: <span class="hljs-built_in">string</span> = "general"
  </span>) {
    <span class="hljs-comment">// Properties are automatically created and assigned</span>
  }

  getFormattedPrice(): <span class="hljs-built_in">string</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">`$<span class="hljs-subst">${<span class="hljs-keyword">this</span>.price.toFixed(<span class="hljs-number">2</span>)}</span>`</span>;
  }
}

<span class="hljs-keyword">const</span> product = <span class="hljs-keyword">new</span> Product(<span class="hljs-number">1</span>, <span class="hljs-string">"Laptop"</span>, <span class="hljs-number">999.99</span>, <span class="hljs-string">"electronics"</span>);
<span class="hljs-built_in">console</span>.log(product.name); <span class="hljs-comment">// "Laptop"</span>
<span class="hljs-built_in">console</span>.log(product.getFormattedPrice()); <span class="hljs-comment">// "$999.99"</span>
</div></code></pre>
<h2 id="access-modifiers">Access Modifiers</h2>
<h3 id="public-private-and-protected">Public, Private, and Protected</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">class</span> BankAccount {
  <span class="hljs-keyword">public</span> accountNumber: <span class="hljs-built_in">string</span>; <span class="hljs-comment">// Accessible everywhere</span>
  <span class="hljs-keyword">private</span> balance: <span class="hljs-built_in">number</span>; <span class="hljs-comment">// Only accessible within this class</span>
  <span class="hljs-keyword">protected</span> accountType: <span class="hljs-built_in">string</span>; <span class="hljs-comment">// Accessible in this class and subclasses</span>

  <span class="hljs-keyword">constructor</span>(<span class="hljs-params">
    accountNumber: <span class="hljs-built_in">string</span>,
    initialBalance: <span class="hljs-built_in">number</span>,
    accountType: <span class="hljs-built_in">string</span>
  </span>) {
    <span class="hljs-keyword">this</span>.accountNumber = accountNumber;
    <span class="hljs-keyword">this</span>.balance = initialBalance;
    <span class="hljs-keyword">this</span>.accountType = accountType;
  }

  <span class="hljs-comment">// Public method</span>
  <span class="hljs-keyword">public</span> getBalance(): <span class="hljs-built_in">number</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.balance;
  }

  <span class="hljs-comment">// Public method</span>
  <span class="hljs-keyword">public</span> deposit(amount: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">void</span> {
    <span class="hljs-keyword">if</span> (amount &gt; <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">this</span>.balance += amount;
    }
  }

  <span class="hljs-comment">// Public method</span>
  <span class="hljs-keyword">public</span> withdraw(amount: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">boolean</span> {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.canWithdraw(amount)) {
      <span class="hljs-keyword">this</span>.balance -= amount;
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }

  <span class="hljs-comment">// Private method - only accessible within this class</span>
  <span class="hljs-keyword">private</span> canWithdraw(amount: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">boolean</span> {
    <span class="hljs-keyword">return</span> amount &gt; <span class="hljs-number">0</span> &amp;&amp; amount &lt;= <span class="hljs-keyword">this</span>.balance;
  }

  <span class="hljs-comment">// Protected method - accessible in subclasses</span>
  <span class="hljs-keyword">protected</span> getAccountInfo(): <span class="hljs-built_in">string</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-keyword">this</span>.accountType}</span> Account: <span class="hljs-subst">${<span class="hljs-keyword">this</span>.accountNumber}</span>`</span>;
  }
}

<span class="hljs-keyword">const</span> account = <span class="hljs-keyword">new</span> BankAccount(<span class="hljs-string">"123456789"</span>, <span class="hljs-number">1000</span>, <span class="hljs-string">"Checking"</span>);
<span class="hljs-built_in">console</span>.log(account.accountNumber); <span class="hljs-comment">// OK: public</span>
<span class="hljs-built_in">console</span>.log(account.getBalance()); <span class="hljs-comment">// OK: public method</span>
<span class="hljs-comment">// console.log(account.balance); // Error: private</span>
<span class="hljs-comment">// account.canWithdraw(100); // Error: private method</span>
</div></code></pre>
<h3 id="private-fields-es2022">Private Fields (ES2022)</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Using # for truly private fields (runtime private)</span>
<span class="hljs-keyword">class</span> SecureUser {
  #password: <span class="hljs-built_in">string</span>; <span class="hljs-comment">// Truly private</span>
  #salt: <span class="hljs-built_in">string</span>;
  <span class="hljs-keyword">public</span> username: <span class="hljs-built_in">string</span>;

  <span class="hljs-keyword">constructor</span>(<span class="hljs-params">username: <span class="hljs-built_in">string</span>, password: <span class="hljs-built_in">string</span></span>) {
    <span class="hljs-keyword">this</span>.username = username;
    <span class="hljs-keyword">this</span>.#salt = <span class="hljs-keyword">this</span>.generateSalt();
    <span class="hljs-keyword">this</span>.#password = <span class="hljs-keyword">this</span>.hashPassword(password);
  }

  #generateSalt(): <span class="hljs-built_in">string</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.random().toString(<span class="hljs-number">36</span>).substring(<span class="hljs-number">2</span>);
  }

  #hashPassword(password: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">string</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${password}</span>_<span class="hljs-subst">${<span class="hljs-keyword">this</span>.#salt}</span>_hashed`</span>;
  }

  <span class="hljs-keyword">public</span> verifyPassword(password: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">boolean</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.#hashPassword(password) === <span class="hljs-keyword">this</span>.#password;
  }

  <span class="hljs-keyword">public</span> changePassword(oldPassword: <span class="hljs-built_in">string</span>, newPassword: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">boolean</span> {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.verifyPassword(oldPassword)) {
      <span class="hljs-keyword">this</span>.#password = <span class="hljs-keyword">this</span>.hashPassword(newPassword);
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }
}

<span class="hljs-keyword">const</span> user = <span class="hljs-keyword">new</span> SecureUser(<span class="hljs-string">"john"</span>, <span class="hljs-string">"secret123"</span>);
<span class="hljs-built_in">console</span>.log(user.username); <span class="hljs-comment">// OK</span>
<span class="hljs-comment">// console.log(user.#password); // SyntaxError: Private field '#password' must be declared in an enclosing class</span>
</div></code></pre>
<h2 id="getters-and-setters">Getters and Setters</h2>
<h3 id="property-accessors">Property Accessors</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">class</span> Temperature {
  <span class="hljs-keyword">private</span> _celsius: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;

  <span class="hljs-keyword">constructor</span>(<span class="hljs-params">celsius: <span class="hljs-built_in">number</span></span>) {
    <span class="hljs-keyword">this</span>.celsius = celsius; <span class="hljs-comment">// Uses setter for validation</span>
  }

  <span class="hljs-comment">// Getter</span>
  <span class="hljs-keyword">get</span> celsius(): <span class="hljs-built_in">number</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._celsius;
  }

  <span class="hljs-comment">// Setter with validation</span>
  <span class="hljs-keyword">set</span> celsius(value: <span class="hljs-built_in">number</span>) {
    <span class="hljs-keyword">if</span> (value &lt; <span class="hljs-number">-273.15</span>) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"Temperature cannot be below absolute zero"</span>);
    }
    <span class="hljs-keyword">this</span>._celsius = value;
  }

  <span class="hljs-comment">// Computed property</span>
  <span class="hljs-keyword">get</span> fahrenheit(): <span class="hljs-built_in">number</span> {
    <span class="hljs-keyword">return</span> (<span class="hljs-keyword">this</span>._celsius * <span class="hljs-number">9</span>) / <span class="hljs-number">5</span> + <span class="hljs-number">32</span>;
  }

  <span class="hljs-keyword">set</span> fahrenheit(value: <span class="hljs-built_in">number</span>) {
    <span class="hljs-keyword">this</span>.celsius = ((value - <span class="hljs-number">32</span>) * <span class="hljs-number">5</span>) / <span class="hljs-number">9</span>;
  }

  <span class="hljs-keyword">get</span> kelvin(): <span class="hljs-built_in">number</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._celsius + <span class="hljs-number">273.15</span>;
  }

  <span class="hljs-keyword">set</span> kelvin(value: <span class="hljs-built_in">number</span>) {
    <span class="hljs-keyword">this</span>.celsius = value - <span class="hljs-number">273.15</span>;
  }
}

<span class="hljs-keyword">const</span> temp = <span class="hljs-keyword">new</span> Temperature(<span class="hljs-number">25</span>);
<span class="hljs-built_in">console</span>.log(temp.celsius); <span class="hljs-comment">// 25</span>
<span class="hljs-built_in">console</span>.log(temp.fahrenheit); <span class="hljs-comment">// 77</span>
<span class="hljs-built_in">console</span>.log(temp.kelvin); <span class="hljs-comment">// 298.15</span>

temp.fahrenheit = <span class="hljs-number">100</span>;
<span class="hljs-built_in">console</span>.log(temp.celsius); <span class="hljs-comment">// 37.77777777777778</span>
</div></code></pre>
<h3 id="read-only-properties">Read-only Properties</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">class</span> ImmutablePoint {
  <span class="hljs-keyword">private</span> _x: <span class="hljs-built_in">number</span>;
  <span class="hljs-keyword">private</span> _y: <span class="hljs-built_in">number</span>;

  <span class="hljs-keyword">constructor</span>(<span class="hljs-params">x: <span class="hljs-built_in">number</span>, y: <span class="hljs-built_in">number</span></span>) {
    <span class="hljs-keyword">this</span>._x = x;
    <span class="hljs-keyword">this</span>._y = y;
  }

  <span class="hljs-comment">// Read-only getters</span>
  <span class="hljs-keyword">get</span> x(): <span class="hljs-built_in">number</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._x;
  }

  <span class="hljs-keyword">get</span> y(): <span class="hljs-built_in">number</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._y;
  }

  <span class="hljs-comment">// Computed properties</span>
  <span class="hljs-keyword">get</span> magnitude(): <span class="hljs-built_in">number</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.sqrt(<span class="hljs-keyword">this</span>._x * <span class="hljs-keyword">this</span>._x + <span class="hljs-keyword">this</span>._y * <span class="hljs-keyword">this</span>._y);
  }

  <span class="hljs-keyword">get</span> angle(): <span class="hljs-built_in">number</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.atan2(<span class="hljs-keyword">this</span>._y, <span class="hljs-keyword">this</span>._x);
  }

  <span class="hljs-comment">// Methods that return new instances (immutable pattern)</span>
  translate(dx: <span class="hljs-built_in">number</span>, dy: <span class="hljs-built_in">number</span>): ImmutablePoint {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> ImmutablePoint(<span class="hljs-keyword">this</span>._x + dx, <span class="hljs-keyword">this</span>._y + dy);
  }

  scale(factor: <span class="hljs-built_in">number</span>): ImmutablePoint {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> ImmutablePoint(<span class="hljs-keyword">this</span>._x * factor, <span class="hljs-keyword">this</span>._y * factor);
  }
}

<span class="hljs-keyword">const</span> point = <span class="hljs-keyword">new</span> ImmutablePoint(<span class="hljs-number">3</span>, <span class="hljs-number">4</span>);
<span class="hljs-built_in">console</span>.log(point.x, point.y); <span class="hljs-comment">// 3, 4</span>
<span class="hljs-built_in">console</span>.log(point.magnitude); <span class="hljs-comment">// 5</span>
<span class="hljs-comment">// point.x = 5; // Error: Cannot assign to 'x' because it is a read-only property</span>

<span class="hljs-keyword">const</span> newPoint = point.translate(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>);
<span class="hljs-built_in">console</span>.log(newPoint.x, newPoint.y); <span class="hljs-comment">// 4, 5</span>
</div></code></pre>
<h2 id="inheritance">Inheritance</h2>
<h3 id="basic-inheritance-with-extends">Basic Inheritance with extends</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Base class</span>
<span class="hljs-keyword">class</span> Animal {
  <span class="hljs-keyword">protected</span> name: <span class="hljs-built_in">string</span>;
  <span class="hljs-keyword">protected</span> age: <span class="hljs-built_in">number</span>;

  <span class="hljs-keyword">constructor</span>(<span class="hljs-params">name: <span class="hljs-built_in">string</span>, age: <span class="hljs-built_in">number</span></span>) {
    <span class="hljs-keyword">this</span>.name = name;
    <span class="hljs-keyword">this</span>.age = age;
  }

  <span class="hljs-keyword">public</span> makeSound(): <span class="hljs-built_in">string</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">"Some generic animal sound"</span>;
  }

  <span class="hljs-keyword">public</span> getInfo(): <span class="hljs-built_in">string</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-keyword">this</span>.name}</span> is <span class="hljs-subst">${<span class="hljs-keyword">this</span>.age}</span> years old`</span>;
  }

  <span class="hljs-keyword">protected</span> sleep(): <span class="hljs-built_in">string</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-keyword">this</span>.name}</span> is sleeping`</span>;
  }
}

<span class="hljs-comment">// Derived class</span>
<span class="hljs-keyword">class</span> Dog <span class="hljs-keyword">extends</span> Animal {
  <span class="hljs-keyword">private</span> breed: <span class="hljs-built_in">string</span>;

  <span class="hljs-keyword">constructor</span>(<span class="hljs-params">name: <span class="hljs-built_in">string</span>, age: <span class="hljs-built_in">number</span>, breed: <span class="hljs-built_in">string</span></span>) {
    <span class="hljs-keyword">super</span>(name, age); <span class="hljs-comment">// Call parent constructor</span>
    <span class="hljs-keyword">this</span>.breed = breed;
  }

  <span class="hljs-comment">// Override parent method</span>
  <span class="hljs-keyword">public</span> makeSound(): <span class="hljs-built_in">string</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">"Woof! Woof!"</span>;
  }

  <span class="hljs-comment">// Add new method</span>
  <span class="hljs-keyword">public</span> fetch(): <span class="hljs-built_in">string</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-keyword">this</span>.name}</span> is fetching the ball`</span>;
  }

  <span class="hljs-comment">// Override and extend parent method</span>
  <span class="hljs-keyword">public</span> getInfo(): <span class="hljs-built_in">string</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-keyword">super</span>.getInfo()}</span> and is a <span class="hljs-subst">${<span class="hljs-keyword">this</span>.breed}</span>`</span>;
  }

  <span class="hljs-comment">// Access protected method from parent</span>
  <span class="hljs-keyword">public</span> rest(): <span class="hljs-built_in">string</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.sleep(); <span class="hljs-comment">// Can access protected method</span>
  }
}

<span class="hljs-keyword">class</span> Cat <span class="hljs-keyword">extends</span> Animal {
  <span class="hljs-keyword">private</span> indoor: <span class="hljs-built_in">boolean</span>;

  <span class="hljs-keyword">constructor</span>(<span class="hljs-params">name: <span class="hljs-built_in">string</span>, age: <span class="hljs-built_in">number</span>, indoor: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">true</span></span>) {
    <span class="hljs-keyword">super</span>(name, age);
    <span class="hljs-keyword">this</span>.indoor = indoor;
  }

  <span class="hljs-keyword">public</span> makeSound(): <span class="hljs-built_in">string</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">"Meow!"</span>;
  }

  <span class="hljs-keyword">public</span> climb(): <span class="hljs-built_in">string</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-keyword">this</span>.name}</span> is climbing`</span>;
  }

  <span class="hljs-keyword">public</span> getInfo(): <span class="hljs-built_in">string</span> {
    <span class="hljs-keyword">const</span> location = <span class="hljs-keyword">this</span>.indoor ? <span class="hljs-string">"indoor"</span> : <span class="hljs-string">"outdoor"</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-keyword">super</span>.getInfo()}</span> and is an <span class="hljs-subst">${location}</span> cat`</span>;
  }
}

<span class="hljs-comment">// Usage</span>
<span class="hljs-keyword">const</span> dog = <span class="hljs-keyword">new</span> Dog(<span class="hljs-string">"Buddy"</span>, <span class="hljs-number">3</span>, <span class="hljs-string">"Golden Retriever"</span>);
<span class="hljs-keyword">const</span> cat = <span class="hljs-keyword">new</span> Cat(<span class="hljs-string">"Whiskers"</span>, <span class="hljs-number">2</span>, <span class="hljs-literal">true</span>);

<span class="hljs-built_in">console</span>.log(dog.makeSound()); <span class="hljs-comment">// "Woof! Woof!"</span>
<span class="hljs-built_in">console</span>.log(cat.makeSound()); <span class="hljs-comment">// "Meow!"</span>
<span class="hljs-built_in">console</span>.log(dog.getInfo()); <span class="hljs-comment">// "Buddy is 3 years old and is a Golden Retriever"</span>
<span class="hljs-built_in">console</span>.log(cat.getInfo()); <span class="hljs-comment">// "Whiskers is 2 years old and is an indoor cat"</span>
</div></code></pre>
<h3 id="method-overriding-and-super">Method Overriding and super</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">class</span> Vehicle {
  <span class="hljs-keyword">protected</span> brand: <span class="hljs-built_in">string</span>;
  <span class="hljs-keyword">protected</span> model: <span class="hljs-built_in">string</span>;
  <span class="hljs-keyword">protected</span> year: <span class="hljs-built_in">number</span>;

  <span class="hljs-keyword">constructor</span>(<span class="hljs-params">brand: <span class="hljs-built_in">string</span>, model: <span class="hljs-built_in">string</span>, year: <span class="hljs-built_in">number</span></span>) {
    <span class="hljs-keyword">this</span>.brand = brand;
    <span class="hljs-keyword">this</span>.model = model;
    <span class="hljs-keyword">this</span>.year = year;
  }

  <span class="hljs-keyword">public</span> start(): <span class="hljs-built_in">string</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">`Starting the <span class="hljs-subst">${<span class="hljs-keyword">this</span>.brand}</span> <span class="hljs-subst">${<span class="hljs-keyword">this</span>.model}</span>`</span>;
  }

  <span class="hljs-keyword">public</span> getDescription(): <span class="hljs-built_in">string</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-keyword">this</span>.year}</span> <span class="hljs-subst">${<span class="hljs-keyword">this</span>.brand}</span> <span class="hljs-subst">${<span class="hljs-keyword">this</span>.model}</span>`</span>;
  }

  <span class="hljs-keyword">protected</span> performMaintenance(): <span class="hljs-built_in">string</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">"Performing basic maintenance"</span>;
  }
}

<span class="hljs-keyword">class</span> ElectricCar <span class="hljs-keyword">extends</span> Vehicle {
  <span class="hljs-keyword">private</span> batteryCapacity: <span class="hljs-built_in">number</span>;
  <span class="hljs-keyword">private</span> currentCharge: <span class="hljs-built_in">number</span>;

  <span class="hljs-keyword">constructor</span>(<span class="hljs-params">
    brand: <span class="hljs-built_in">string</span>,
    model: <span class="hljs-built_in">string</span>,
    year: <span class="hljs-built_in">number</span>,
    batteryCapacity: <span class="hljs-built_in">number</span>
  </span>) {
    <span class="hljs-keyword">super</span>(brand, model, year);
    <span class="hljs-keyword">this</span>.batteryCapacity = batteryCapacity;
    <span class="hljs-keyword">this</span>.currentCharge = batteryCapacity; <span class="hljs-comment">// Start fully charged</span>
  }

  <span class="hljs-comment">// Override start method</span>
  <span class="hljs-keyword">public</span> start(): <span class="hljs-built_in">string</span> {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.currentCharge &gt; <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-keyword">super</span>.start()}</span> - Electric motor engaged`</span>;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-string">"Cannot start - battery depleted"</span>;
  }

  <span class="hljs-comment">// Override and extend getDescription</span>
  <span class="hljs-keyword">public</span> getDescription(): <span class="hljs-built_in">string</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-keyword">super</span>.getDescription()}</span> (Electric - <span class="hljs-subst">${<span class="hljs-keyword">this</span>.batteryCapacity}</span>kWh)`</span>;
  }

  <span class="hljs-comment">// New methods specific to electric cars</span>
  <span class="hljs-keyword">public</span> charge(amount: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">void</span> {
    <span class="hljs-keyword">this</span>.currentCharge = <span class="hljs-built_in">Math</span>.min(
      <span class="hljs-keyword">this</span>.currentCharge + amount,
      <span class="hljs-keyword">this</span>.batteryCapacity
    );
  }

  <span class="hljs-keyword">public</span> getBatteryLevel(): <span class="hljs-built_in">number</span> {
    <span class="hljs-keyword">return</span> (<span class="hljs-keyword">this</span>.currentCharge / <span class="hljs-keyword">this</span>.batteryCapacity) * <span class="hljs-number">100</span>;
  }

  <span class="hljs-comment">// Override protected method</span>
  <span class="hljs-keyword">protected</span> performMaintenance(): <span class="hljs-built_in">string</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-keyword">super</span>.performMaintenance()}</span> + Battery health check`</span>;
  }

  <span class="hljs-keyword">public</span> scheduleMaintenance(): <span class="hljs-built_in">string</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.performMaintenance(); <span class="hljs-comment">// Can access overridden protected method</span>
  }
}

<span class="hljs-keyword">const</span> tesla = <span class="hljs-keyword">new</span> ElectricCar(<span class="hljs-string">"Tesla"</span>, <span class="hljs-string">"Model 3"</span>, <span class="hljs-number">2023</span>, <span class="hljs-number">75</span>);
<span class="hljs-built_in">console</span>.log(tesla.start()); <span class="hljs-comment">// "Starting the Tesla Model 3 - Electric motor engaged"</span>
<span class="hljs-built_in">console</span>.log(tesla.getDescription()); <span class="hljs-comment">// "2023 Tesla Model 3 (Electric - 75kWh)"</span>
<span class="hljs-built_in">console</span>.log(tesla.getBatteryLevel()); <span class="hljs-comment">// 100</span>
</div></code></pre>
<h2 id="static-members">Static Members</h2>
<h3 id="static-properties-and-methods">Static Properties and Methods</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">class</span> MathUtils {
  <span class="hljs-comment">// Static properties</span>
  <span class="hljs-keyword">static</span> readonly PI = <span class="hljs-number">3.14159</span>;
  <span class="hljs-keyword">static</span> readonly E = <span class="hljs-number">2.71828</span>;
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> instanceCount = <span class="hljs-number">0</span>;

  <span class="hljs-comment">// Instance property</span>
  <span class="hljs-keyword">private</span> id: <span class="hljs-built_in">number</span>;

  <span class="hljs-keyword">constructor</span>(<span class="hljs-params"></span>) {
    MathUtils.instanceCount++;
    <span class="hljs-keyword">this</span>.id = MathUtils.instanceCount;
  }

  <span class="hljs-comment">// Static methods</span>
  <span class="hljs-keyword">static</span> add(a: <span class="hljs-built_in">number</span>, b: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">number</span> {
    <span class="hljs-keyword">return</span> a + b;
  }

  <span class="hljs-keyword">static</span> multiply(a: <span class="hljs-built_in">number</span>, b: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">number</span> {
    <span class="hljs-keyword">return</span> a * b;
  }

  <span class="hljs-keyword">static</span> circleArea(radius: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">number</span> {
    <span class="hljs-keyword">return</span> MathUtils.PI * radius * radius;
  }

  <span class="hljs-keyword">static</span> getInstanceCount(): <span class="hljs-built_in">number</span> {
    <span class="hljs-keyword">return</span> MathUtils.instanceCount;
  }

  <span class="hljs-comment">// Instance method</span>
  getId(): <span class="hljs-built_in">number</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.id;
  }

  <span class="hljs-comment">// Instance method accessing static member</span>
  getCircleArea(radius: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">number</span> {
    <span class="hljs-keyword">return</span> MathUtils.circleArea(radius); <span class="hljs-comment">// Access static method</span>
  }
}

<span class="hljs-comment">// Using static members without creating instances</span>
<span class="hljs-built_in">console</span>.log(MathUtils.PI); <span class="hljs-comment">// 3.14159</span>
<span class="hljs-built_in">console</span>.log(MathUtils.add(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>)); <span class="hljs-comment">// 8</span>
<span class="hljs-built_in">console</span>.log(MathUtils.circleArea(<span class="hljs-number">5</span>)); <span class="hljs-comment">// 78.5395</span>

<span class="hljs-comment">// Creating instances</span>
<span class="hljs-keyword">const</span> math1 = <span class="hljs-keyword">new</span> MathUtils();
<span class="hljs-keyword">const</span> math2 = <span class="hljs-keyword">new</span> MathUtils();

<span class="hljs-built_in">console</span>.log(math1.getId()); <span class="hljs-comment">// 1</span>
<span class="hljs-built_in">console</span>.log(math2.getId()); <span class="hljs-comment">// 2</span>
<span class="hljs-built_in">console</span>.log(MathUtils.getInstanceCount()); <span class="hljs-comment">// 2</span>
</div></code></pre>
<h3 id="static-factory-methods">Static Factory Methods</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">class</span> User {
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">constructor</span>(<span class="hljs-params">
    <span class="hljs-keyword">public</span> readonly id: <span class="hljs-built_in">string</span>,
    <span class="hljs-keyword">public</span> readonly name: <span class="hljs-built_in">string</span>,
    <span class="hljs-keyword">public</span> readonly email: <span class="hljs-built_in">string</span>,
    <span class="hljs-keyword">public</span> readonly role: "admin" | "user" | "guest"
  </span>) {}

  <span class="hljs-comment">// Static factory methods</span>
  <span class="hljs-keyword">static</span> createAdmin(name: <span class="hljs-built_in">string</span>, email: <span class="hljs-built_in">string</span>): User {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> User(<span class="hljs-string">`admin_<span class="hljs-subst">${<span class="hljs-built_in">Date</span>.now()}</span>`</span>, name, email, <span class="hljs-string">"admin"</span>);
  }

  <span class="hljs-keyword">static</span> createUser(name: <span class="hljs-built_in">string</span>, email: <span class="hljs-built_in">string</span>): User {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> User(<span class="hljs-string">`user_<span class="hljs-subst">${<span class="hljs-built_in">Date</span>.now()}</span>`</span>, name, email, <span class="hljs-string">"user"</span>);
  }

  <span class="hljs-keyword">static</span> createGuest(): User {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> User(
      <span class="hljs-string">`guest_<span class="hljs-subst">${<span class="hljs-built_in">Date</span>.now()}</span>`</span>,
      <span class="hljs-string">"Guest"</span>,
      <span class="hljs-string">"guest@example.com"</span>,
      <span class="hljs-string">"guest"</span>
    );
  }

  <span class="hljs-comment">// Static validation method</span>
  <span class="hljs-keyword">static</span> isValidEmail(email: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">boolean</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-regexp">/^[^\s@]+@[^\s@]+\.[^\s@]+$/</span>.test(email);
  }

  <span class="hljs-comment">// Static factory with validation</span>
  <span class="hljs-keyword">static</span> fromData(data: {
    name: <span class="hljs-built_in">string</span>;
    email: <span class="hljs-built_in">string</span>;
    role?: <span class="hljs-string">"admin"</span> | <span class="hljs-string">"user"</span>;
  }): User | <span class="hljs-literal">null</span> {
    <span class="hljs-keyword">if</span> (!User.isValidEmail(data.email)) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }

    <span class="hljs-keyword">const</span> role = data.role || <span class="hljs-string">"user"</span>;
    <span class="hljs-keyword">return</span> role === <span class="hljs-string">"admin"</span>
      ? User.createAdmin(data.name, data.email)
      : User.createUser(data.name, data.email);
  }
}

<span class="hljs-comment">// Usage</span>
<span class="hljs-keyword">const</span> admin = User.createAdmin(<span class="hljs-string">"John Doe"</span>, <span class="hljs-string">"john@admin.com"</span>);
<span class="hljs-keyword">const</span> user = User.createUser(<span class="hljs-string">"Jane Smith"</span>, <span class="hljs-string">"jane@user.com"</span>);
<span class="hljs-keyword">const</span> guest = User.createGuest();

<span class="hljs-keyword">const</span> userFromData = User.fromData({
  name: <span class="hljs-string">"Bob Wilson"</span>,
  email: <span class="hljs-string">"bob@example.com"</span>,
  role: <span class="hljs-string">"user"</span>,
});
</div></code></pre>
<h2 id="abstract-classes">Abstract Classes</h2>
<h3 id="abstract-classes-and-methods">Abstract Classes and Methods</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Abstract base class</span>
<span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> Shape {
  <span class="hljs-keyword">protected</span> color: <span class="hljs-built_in">string</span>;

  <span class="hljs-keyword">constructor</span>(<span class="hljs-params">color: <span class="hljs-built_in">string</span></span>) {
    <span class="hljs-keyword">this</span>.color = color;
  }

  <span class="hljs-comment">// Abstract method - must be implemented by subclasses</span>
  <span class="hljs-keyword">abstract</span> calculateArea(): <span class="hljs-built_in">number</span>;
  <span class="hljs-keyword">abstract</span> calculatePerimeter(): <span class="hljs-built_in">number</span>;

  <span class="hljs-comment">// Concrete method - can be used by subclasses</span>
  getColor(): <span class="hljs-built_in">string</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.color;
  }

  <span class="hljs-comment">// Concrete method using abstract methods</span>
  getDescription(): <span class="hljs-built_in">string</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">`A <span class="hljs-subst">${<span class="hljs-keyword">this</span>.color}</span> shape with area <span class="hljs-subst">${<span class="hljs-keyword">this</span>.calculateArea().toFixed(
      <span class="hljs-number">2</span>
    )}</span> and perimeter <span class="hljs-subst">${<span class="hljs-keyword">this</span>.calculatePerimeter().toFixed(<span class="hljs-number">2</span>)}</span>`</span>;
  }

  <span class="hljs-comment">// Abstract method with default implementation</span>
  display(): <span class="hljs-built_in">void</span> {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">this</span>.getDescription());
  }
}

<span class="hljs-comment">// Concrete implementation</span>
<span class="hljs-keyword">class</span> Circle <span class="hljs-keyword">extends</span> Shape {
  <span class="hljs-keyword">private</span> radius: <span class="hljs-built_in">number</span>;

  <span class="hljs-keyword">constructor</span>(<span class="hljs-params">color: <span class="hljs-built_in">string</span>, radius: <span class="hljs-built_in">number</span></span>) {
    <span class="hljs-keyword">super</span>(color);
    <span class="hljs-keyword">this</span>.radius = radius;
  }

  <span class="hljs-comment">// Must implement abstract methods</span>
  calculateArea(): <span class="hljs-built_in">number</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.PI * <span class="hljs-keyword">this</span>.radius * <span class="hljs-keyword">this</span>.radius;
  }

  calculatePerimeter(): <span class="hljs-built_in">number</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-number">2</span> * <span class="hljs-built_in">Math</span>.PI * <span class="hljs-keyword">this</span>.radius;
  }

  <span class="hljs-comment">// Additional method specific to Circle</span>
  getDiameter(): <span class="hljs-built_in">number</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.radius * <span class="hljs-number">2</span>;
  }
}

<span class="hljs-keyword">class</span> Rectangle <span class="hljs-keyword">extends</span> Shape {
  <span class="hljs-keyword">private</span> width: <span class="hljs-built_in">number</span>;
  <span class="hljs-keyword">private</span> height: <span class="hljs-built_in">number</span>;

  <span class="hljs-keyword">constructor</span>(<span class="hljs-params">color: <span class="hljs-built_in">string</span>, width: <span class="hljs-built_in">number</span>, height: <span class="hljs-built_in">number</span></span>) {
    <span class="hljs-keyword">super</span>(color);
    <span class="hljs-keyword">this</span>.width = width;
    <span class="hljs-keyword">this</span>.height = height;
  }

  calculateArea(): <span class="hljs-built_in">number</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.width * <span class="hljs-keyword">this</span>.height;
  }

  calculatePerimeter(): <span class="hljs-built_in">number</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-number">2</span> * (<span class="hljs-keyword">this</span>.width + <span class="hljs-keyword">this</span>.height);
  }

  <span class="hljs-comment">// Override display method</span>
  display(): <span class="hljs-built_in">void</span> {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`Rectangle: <span class="hljs-subst">${<span class="hljs-keyword">this</span>.getDescription()}</span>`</span>);
  }
}

<span class="hljs-comment">// Usage</span>
<span class="hljs-keyword">const</span> circle = <span class="hljs-keyword">new</span> Circle(<span class="hljs-string">"red"</span>, <span class="hljs-number">5</span>);
<span class="hljs-keyword">const</span> rectangle = <span class="hljs-keyword">new</span> Rectangle(<span class="hljs-string">"blue"</span>, <span class="hljs-number">4</span>, <span class="hljs-number">6</span>);

circle.display(); <span class="hljs-comment">// "A red shape with area 78.54 and perimeter 31.42"</span>
rectangle.display(); <span class="hljs-comment">// "Rectangle: A blue shape with area 24.00 and perimeter 20.00"</span>

<span class="hljs-comment">// Cannot instantiate abstract class</span>
<span class="hljs-comment">// const shape = new Shape("green"); // Error: Cannot create an instance of an abstract class</span>

<span class="hljs-comment">// Array of shapes</span>
<span class="hljs-keyword">const</span> shapes: Shape[] = [circle, rectangle];
shapes.forEach(<span class="hljs-function">(<span class="hljs-params">shape</span>) =&gt;</span> shape.display());
</div></code></pre>
<h2 id="implementing-interfaces">Implementing Interfaces</h2>
<h3 id="classes-implementing-interfaces">Classes Implementing Interfaces</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Interface definitions</span>
<span class="hljs-keyword">interface</span> Flyable {
  fly(): <span class="hljs-built_in">string</span>;
  altitude: <span class="hljs-built_in">number</span>;
}

<span class="hljs-keyword">interface</span> Swimmable {
  swim(): <span class="hljs-built_in">string</span>;
  depth: <span class="hljs-built_in">number</span>;
}

<span class="hljs-keyword">interface</span> Walkable {
  walk(): <span class="hljs-built_in">string</span>;
  speed: <span class="hljs-built_in">number</span>;
}

<span class="hljs-comment">// Class implementing single interface</span>
<span class="hljs-keyword">class</span> Bird <span class="hljs-keyword">implements</span> Flyable {
  altitude: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;

  <span class="hljs-keyword">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> species: <span class="hljs-built_in">string</span></span>) {}

  fly(): <span class="hljs-built_in">string</span> {
    <span class="hljs-keyword">this</span>.altitude = <span class="hljs-number">100</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-keyword">this</span>.species}</span> is flying at <span class="hljs-subst">${<span class="hljs-keyword">this</span>.altitude}</span> feet`</span>;
  }

  land(): <span class="hljs-built_in">void</span> {
    <span class="hljs-keyword">this</span>.altitude = <span class="hljs-number">0</span>;
  }
}

<span class="hljs-comment">// Class implementing multiple interfaces</span>
<span class="hljs-keyword">class</span> Duck <span class="hljs-keyword">implements</span> Flyable, Swimmable, Walkable {
  altitude: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;
  depth: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;
  speed: <span class="hljs-built_in">number</span> = <span class="hljs-number">2</span>;

  <span class="hljs-keyword">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> name: <span class="hljs-built_in">string</span></span>) {}

  fly(): <span class="hljs-built_in">string</span> {
    <span class="hljs-keyword">this</span>.altitude = <span class="hljs-number">50</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-keyword">this</span>.name}</span> is flying at <span class="hljs-subst">${<span class="hljs-keyword">this</span>.altitude}</span> feet`</span>;
  }

  swim(): <span class="hljs-built_in">string</span> {
    <span class="hljs-keyword">this</span>.depth = <span class="hljs-number">3</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-keyword">this</span>.name}</span> is swimming at <span class="hljs-subst">${<span class="hljs-keyword">this</span>.depth}</span> feet deep`</span>;
  }

  walk(): <span class="hljs-built_in">string</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-keyword">this</span>.name}</span> is walking at <span class="hljs-subst">${<span class="hljs-keyword">this</span>.speed}</span> mph`</span>;
  }

  <span class="hljs-comment">// Additional methods</span>
  quack(): <span class="hljs-built_in">string</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-keyword">this</span>.name}</span> says quack!`</span>;
  }
}

<span class="hljs-comment">// Interface for class structure</span>
<span class="hljs-keyword">interface</span> Drawable {
  draw(): <span class="hljs-built_in">void</span>;
  getArea(): <span class="hljs-built_in">number</span>;
}

<span class="hljs-keyword">class</span> Square <span class="hljs-keyword">implements</span> Drawable {
  <span class="hljs-keyword">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> sideLength: <span class="hljs-built_in">number</span></span>) {}

  draw(): <span class="hljs-built_in">void</span> {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`Drawing a square with side length <span class="hljs-subst">${<span class="hljs-keyword">this</span>.sideLength}</span>`</span>);
  }

  getArea(): <span class="hljs-built_in">number</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.sideLength * <span class="hljs-keyword">this</span>.sideLength;
  }
}

<span class="hljs-comment">// Usage</span>
<span class="hljs-keyword">const</span> bird = <span class="hljs-keyword">new</span> Bird(<span class="hljs-string">"Eagle"</span>);
<span class="hljs-keyword">const</span> duck = <span class="hljs-keyword">new</span> Duck(<span class="hljs-string">"Donald"</span>);
<span class="hljs-keyword">const</span> square = <span class="hljs-keyword">new</span> Square(<span class="hljs-number">5</span>);

<span class="hljs-built_in">console</span>.log(bird.fly()); <span class="hljs-comment">// "Eagle is flying at 100 feet"</span>
<span class="hljs-built_in">console</span>.log(duck.swim()); <span class="hljs-comment">// "Donald is swimming at 3 feet deep"</span>
<span class="hljs-built_in">console</span>.log(duck.quack()); <span class="hljs-comment">// "Donald says quack!"</span>

square.draw(); <span class="hljs-comment">// "Drawing a square with side length 5"</span>
<span class="hljs-built_in">console</span>.log(square.getArea()); <span class="hljs-comment">// 25</span>
</div></code></pre>
<h2 id="practical-examples">Practical Examples</h2>
<h3 id="event-system">Event System</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Event system using classes</span>
<span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> EventEmitter {
  <span class="hljs-keyword">private</span> listeners: Map&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">Function</span>[]&gt; = <span class="hljs-keyword">new</span> Map();

  on(event: <span class="hljs-built_in">string</span>, listener: <span class="hljs-built_in">Function</span>): <span class="hljs-built_in">void</span> {
    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.listeners.has(event)) {
      <span class="hljs-keyword">this</span>.listeners.set(event, []);
    }
    <span class="hljs-keyword">this</span>.listeners.get(event)!.push(listener);
  }

  off(event: <span class="hljs-built_in">string</span>, listener: <span class="hljs-built_in">Function</span>): <span class="hljs-built_in">void</span> {
    <span class="hljs-keyword">const</span> eventListeners = <span class="hljs-keyword">this</span>.listeners.get(event);
    <span class="hljs-keyword">if</span> (eventListeners) {
      <span class="hljs-keyword">const</span> index = eventListeners.indexOf(listener);
      <span class="hljs-keyword">if</span> (index &gt; <span class="hljs-number">-1</span>) {
        eventListeners.splice(index, <span class="hljs-number">1</span>);
      }
    }
  }

  <span class="hljs-keyword">protected</span> emit(event: <span class="hljs-built_in">string</span>, ...args: <span class="hljs-built_in">any</span>[]): <span class="hljs-built_in">void</span> {
    <span class="hljs-keyword">const</span> eventListeners = <span class="hljs-keyword">this</span>.listeners.get(event);
    <span class="hljs-keyword">if</span> (eventListeners) {
      eventListeners.forEach(<span class="hljs-function">(<span class="hljs-params">listener</span>) =&gt;</span> listener(...args));
    }
  }
}

<span class="hljs-keyword">class</span> HttpClient <span class="hljs-keyword">extends</span> EventEmitter {
  <span class="hljs-keyword">private</span> baseUrl: <span class="hljs-built_in">string</span>;

  <span class="hljs-keyword">constructor</span>(<span class="hljs-params">baseUrl: <span class="hljs-built_in">string</span></span>) {
    <span class="hljs-keyword">super</span>();
    <span class="hljs-keyword">this</span>.baseUrl = baseUrl;
  }

  <span class="hljs-keyword">async</span> <span class="hljs-keyword">get</span>(endpoint: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">Promise</span>&lt;<span class="hljs-built_in">any</span>&gt; {
    <span class="hljs-keyword">this</span>.emit(<span class="hljs-string">"request:start"</span>, { method: <span class="hljs-string">"GET"</span>, endpoint });

    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> fetch(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-keyword">this</span>.baseUrl}</span><span class="hljs-subst">${endpoint}</span>`</span>);
      <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> response.json();

      <span class="hljs-keyword">this</span>.emit(<span class="hljs-string">"request:success"</span>, { method: <span class="hljs-string">"GET"</span>, endpoint, data });
      <span class="hljs-keyword">return</span> data;
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-keyword">this</span>.emit(<span class="hljs-string">"request:error"</span>, { method: <span class="hljs-string">"GET"</span>, endpoint, error });
      <span class="hljs-keyword">throw</span> error;
    }
  }
}

<span class="hljs-comment">// Usage</span>
<span class="hljs-keyword">const</span> client = <span class="hljs-keyword">new</span> HttpClient(<span class="hljs-string">"https://api.example.com"</span>);

client.on(<span class="hljs-string">"request:start"</span>, <span class="hljs-function">(<span class="hljs-params">details</span>) =&gt;</span> {
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Request started:"</span>, details);
});

client.on(<span class="hljs-string">"request:success"</span>, <span class="hljs-function">(<span class="hljs-params">details</span>) =&gt;</span> {
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Request successful:"</span>, details);
});

client.on(<span class="hljs-string">"request:error"</span>, <span class="hljs-function">(<span class="hljs-params">details</span>) =&gt;</span> {
  <span class="hljs-built_in">console</span>.error(<span class="hljs-string">"Request failed:"</span>, details);
});
</div></code></pre>
<h3 id="repository-pattern">Repository Pattern</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Repository pattern with classes</span>
<span class="hljs-keyword">interface</span> Repository&lt;T&gt; {
  findById(id: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">Promise</span>&lt;T | <span class="hljs-literal">null</span>&gt;;
  findAll(): <span class="hljs-built_in">Promise</span>&lt;T[]&gt;;
  create(entity: Omit&lt;T, <span class="hljs-string">"id"</span>&gt;): <span class="hljs-built_in">Promise</span>&lt;T&gt;;
  update(id: <span class="hljs-built_in">string</span>, updates: Partial&lt;T&gt;): <span class="hljs-built_in">Promise</span>&lt;T | <span class="hljs-literal">null</span>&gt;;
  <span class="hljs-keyword">delete</span>(id: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">Promise</span>&lt;<span class="hljs-built_in">boolean</span>&gt;;
}

<span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> BaseRepository&lt;T <span class="hljs-keyword">extends</span> { id: <span class="hljs-built_in">string</span> }&gt;
  <span class="hljs-keyword">implements</span> Repository&lt;T&gt;
{
  <span class="hljs-keyword">protected</span> items: Map&lt;<span class="hljs-built_in">string</span>, T&gt; = <span class="hljs-keyword">new</span> Map();

  <span class="hljs-keyword">async</span> findById(id: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">Promise</span>&lt;T | <span class="hljs-literal">null</span>&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.items.get(id) || <span class="hljs-literal">null</span>;
  }

  <span class="hljs-keyword">async</span> findAll(): <span class="hljs-built_in">Promise</span>&lt;T[]&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Array</span>.from(<span class="hljs-keyword">this</span>.items.values());
  }

  <span class="hljs-keyword">async</span> create(entity: Omit&lt;T, <span class="hljs-string">"id"</span>&gt;): <span class="hljs-built_in">Promise</span>&lt;T&gt; {
    <span class="hljs-keyword">const</span> id = <span class="hljs-keyword">this</span>.generateId();
    <span class="hljs-keyword">const</span> newEntity = { ...entity, id } <span class="hljs-keyword">as</span> T;
    <span class="hljs-keyword">this</span>.items.set(id, newEntity);
    <span class="hljs-keyword">return</span> newEntity;
  }

  <span class="hljs-keyword">async</span> update(id: <span class="hljs-built_in">string</span>, updates: Partial&lt;T&gt;): <span class="hljs-built_in">Promise</span>&lt;T | <span class="hljs-literal">null</span>&gt; {
    <span class="hljs-keyword">const</span> existing = <span class="hljs-keyword">this</span>.items.get(id);
    <span class="hljs-keyword">if</span> (!existing) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;

    <span class="hljs-keyword">const</span> updated = { ...existing, ...updates };
    <span class="hljs-keyword">this</span>.items.set(id, updated);
    <span class="hljs-keyword">return</span> updated;
  }

  <span class="hljs-keyword">async</span> <span class="hljs-keyword">delete</span>(id: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">Promise</span>&lt;<span class="hljs-built_in">boolean</span>&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.items.delete(id);
  }

  <span class="hljs-keyword">protected</span> <span class="hljs-keyword">abstract</span> generateId(): <span class="hljs-built_in">string</span>;
}

<span class="hljs-keyword">interface</span> User {
  id: <span class="hljs-built_in">string</span>;
  name: <span class="hljs-built_in">string</span>;
  email: <span class="hljs-built_in">string</span>;
  createdAt: <span class="hljs-built_in">Date</span>;
}

<span class="hljs-keyword">class</span> UserRepository <span class="hljs-keyword">extends</span> BaseRepository&lt;User&gt; {
  <span class="hljs-keyword">protected</span> generateId(): <span class="hljs-built_in">string</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">`user_<span class="hljs-subst">${<span class="hljs-built_in">Date</span>.now()}</span>_<span class="hljs-subst">${<span class="hljs-built_in">Math</span>.random().toString(<span class="hljs-number">36</span>).substr(<span class="hljs-number">2</span>, <span class="hljs-number">9</span>)}</span>`</span>;
  }

  <span class="hljs-comment">// Additional user-specific methods</span>
  <span class="hljs-keyword">async</span> findByEmail(email: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">Promise</span>&lt;User | <span class="hljs-literal">null</span>&gt; {
    <span class="hljs-keyword">const</span> users = <span class="hljs-keyword">await</span> <span class="hljs-keyword">this</span>.findAll();
    <span class="hljs-keyword">return</span> users.find(<span class="hljs-function">(<span class="hljs-params">user</span>) =&gt;</span> user.email === email) || <span class="hljs-literal">null</span>;
  }

  <span class="hljs-keyword">async</span> findActiveUsers(): <span class="hljs-built_in">Promise</span>&lt;User[]&gt; {
    <span class="hljs-keyword">const</span> users = <span class="hljs-keyword">await</span> <span class="hljs-keyword">this</span>.findAll();
    <span class="hljs-keyword">const</span> thirtyDaysAgo = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(<span class="hljs-built_in">Date</span>.now() - <span class="hljs-number">30</span> * <span class="hljs-number">24</span> * <span class="hljs-number">60</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>);
    <span class="hljs-keyword">return</span> users.filter(<span class="hljs-function">(<span class="hljs-params">user</span>) =&gt;</span> user.createdAt &gt; thirtyDaysAgo);
  }
}

<span class="hljs-comment">// Usage</span>
<span class="hljs-keyword">const</span> userRepo = <span class="hljs-keyword">new</span> UserRepository();

<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">example</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> userRepo.create({
    name: <span class="hljs-string">"John Doe"</span>,
    email: <span class="hljs-string">"john@example.com"</span>,
    createdAt: <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(),
  });

  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Created user:"</span>, user);

  <span class="hljs-keyword">const</span> foundUser = <span class="hljs-keyword">await</span> userRepo.findByEmail(<span class="hljs-string">"john@example.com"</span>);
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Found user:"</span>, foundUser);
}
</div></code></pre>
<h2 id="best-practices">Best Practices</h2>
<h3 id="%E2%9C%85-good-practices">‚úÖ Good Practices</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Use access modifiers appropriately</span>
<span class="hljs-keyword">class</span> GoodExample {
  <span class="hljs-keyword">private</span> _data: <span class="hljs-built_in">string</span>[]; <span class="hljs-comment">// Private implementation detail</span>
  <span class="hljs-keyword">protected</span> config: object; <span class="hljs-comment">// For subclasses</span>
  <span class="hljs-keyword">public</span> readonly id: <span class="hljs-built_in">string</span>; <span class="hljs-comment">// Public immutable property</span>

  <span class="hljs-keyword">constructor</span>(<span class="hljs-params">id: <span class="hljs-built_in">string</span></span>) {
    <span class="hljs-keyword">this</span>.id = id;
    <span class="hljs-keyword">this</span>._data = [];
    <span class="hljs-keyword">this</span>.config = {};
  }

  <span class="hljs-comment">// Public interface</span>
  <span class="hljs-keyword">public</span> addItem(item: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">void</span> {
    <span class="hljs-keyword">this</span>.validateItem(item);
    <span class="hljs-keyword">this</span>._data.push(item);
  }

  <span class="hljs-comment">// Private helper</span>
  <span class="hljs-keyword">private</span> validateItem(item: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">void</span> {
    <span class="hljs-keyword">if</span> (!item.trim()) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"Item cannot be empty"</span>);
    }
  }
}

<span class="hljs-comment">// Use composition over inheritance when appropriate</span>
<span class="hljs-keyword">class</span> Logger {
  log(message: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">void</span> {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`[<span class="hljs-subst">${<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().toISOString()}</span>] <span class="hljs-subst">${message}</span>`</span>);
  }
}

<span class="hljs-keyword">class</span> UserService {
  <span class="hljs-keyword">private</span> logger = <span class="hljs-keyword">new</span> Logger(); <span class="hljs-comment">// Composition</span>

  createUser(userData: <span class="hljs-built_in">any</span>): User {
    <span class="hljs-keyword">this</span>.logger.log(<span class="hljs-string">"Creating user"</span>);
    <span class="hljs-comment">// Implementation</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> User(userData);
  }
}

<span class="hljs-comment">// Use interfaces for contracts</span>
<span class="hljs-keyword">interface</span> PaymentProcessor {
  processPayment(amount: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">Promise</span>&lt;<span class="hljs-built_in">boolean</span>&gt;;
}

<span class="hljs-keyword">class</span> StripeProcessor <span class="hljs-keyword">implements</span> PaymentProcessor {
  <span class="hljs-keyword">async</span> processPayment(amount: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">Promise</span>&lt;<span class="hljs-built_in">boolean</span>&gt; {
    <span class="hljs-comment">// Stripe implementation</span>
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  }
}

<span class="hljs-keyword">class</span> PayPalProcessor <span class="hljs-keyword">implements</span> PaymentProcessor {
  <span class="hljs-keyword">async</span> processPayment(amount: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">Promise</span>&lt;<span class="hljs-built_in">boolean</span>&gt; {
    <span class="hljs-comment">// PayPal implementation</span>
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  }
}
</div></code></pre>
<h3 id="%E2%9D%8C-avoid">‚ùå Avoid</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Don't make everything public</span>
<span class="hljs-keyword">class</span> BadExample {
  <span class="hljs-keyword">public</span> internalData: <span class="hljs-built_in">any</span>; <span class="hljs-comment">// Should be private</span>
  <span class="hljs-keyword">public</span> helperMethod(): <span class="hljs-built_in">void</span> {} <span class="hljs-comment">// Should be private</span>
}

<span class="hljs-comment">// Don't use inheritance for code reuse only</span>
<span class="hljs-keyword">class</span> BadInheritance <span class="hljs-keyword">extends</span> <span class="hljs-built_in">Array</span> {
  <span class="hljs-comment">// This is confusing - is it an array or something else?</span>
}

<span class="hljs-comment">// Don't ignore access modifiers</span>
<span class="hljs-keyword">class</span> IgnoredModifiers {
  <span class="hljs-keyword">private</span> secret: <span class="hljs-built_in">string</span>;

  <span class="hljs-keyword">constructor</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">this</span>.secret = <span class="hljs-string">"secret"</span>;
  }
}

<span class="hljs-comment">// Accessing private members (bad practice)</span>
<span class="hljs-keyword">const</span> bad = <span class="hljs-keyword">new</span> IgnoredModifiers();
<span class="hljs-comment">// (bad as any).secret; // Don't do this!</span>
</div></code></pre>
<h2 id="summary-checklist">Summary Checklist</h2>
<ul>
<li><input type="checkbox" id="checkbox54"><label for="checkbox54">Use appropriate access modifiers (public, private, protected)</label></li>
<li><input type="checkbox" id="checkbox55"><label for="checkbox55">Understand the difference between TypeScript private and # private fields</label></li>
<li><input type="checkbox" id="checkbox56"><label for="checkbox56">Use getters and setters for controlled property access</label></li>
<li><input type="checkbox" id="checkbox57"><label for="checkbox57">Implement inheritance with extends and super</label></li>
<li><input type="checkbox" id="checkbox58"><label for="checkbox58">Use abstract classes for shared behavior with required implementations</label></li>
<li><input type="checkbox" id="checkbox59"><label for="checkbox59">Implement interfaces to define contracts</label></li>
<li><input type="checkbox" id="checkbox60"><label for="checkbox60">Use static members for class-level functionality</label></li>
<li><input type="checkbox" id="checkbox61"><label for="checkbox61">Prefer composition over inheritance when appropriate</label></li>
<li><input type="checkbox" id="checkbox62"><label for="checkbox62">Use readonly for immutable properties</label></li>
<li><input type="checkbox" id="checkbox63"><label for="checkbox63">Follow the principle of least privilege for access modifiers</label></li>
</ul>
<h2 id="next-steps">Next Steps</h2>
<p>Now that you understand classes and OOP in TypeScript, let's explore generics for creating reusable and type-safe code.</p>
<hr>
<p><em>Continue to: <a href="11-generics.md">Generics and Reusable Code</a></em></p>
<h1 id="generics-and-reusable-code">Generics and Reusable Code</h1>
<blockquote>
<p>Master TypeScript generics to create flexible, reusable, and type-safe code components</p>
</blockquote>
<h2 id="introduction-to-generics">Introduction to Generics</h2>
<p>Generics allow you to create reusable components that work with multiple types while maintaining type safety.</p>
<h3 id="basic-generic-functions">Basic Generic Functions</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Without generics - limited to specific types</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">identityString</span>(<span class="hljs-params">arg: <span class="hljs-built_in">string</span></span>): <span class="hljs-title">string</span> </span>{
  <span class="hljs-keyword">return</span> arg;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">identityNumber</span>(<span class="hljs-params">arg: <span class="hljs-built_in">number</span></span>): <span class="hljs-title">number</span> </span>{
  <span class="hljs-keyword">return</span> arg;
}

<span class="hljs-comment">// With generics - works with any type</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">identity</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params">arg: T</span>): <span class="hljs-title">T</span> </span>{
  <span class="hljs-keyword">return</span> arg;
}

<span class="hljs-comment">// Usage</span>
<span class="hljs-keyword">const</span> stringResult = identity&lt;<span class="hljs-built_in">string</span>&gt;(<span class="hljs-string">"hello"</span>); <span class="hljs-comment">// Type: string</span>
<span class="hljs-keyword">const</span> numberResult = identity&lt;<span class="hljs-built_in">number</span>&gt;(<span class="hljs-number">42</span>); <span class="hljs-comment">// Type: number</span>
<span class="hljs-keyword">const</span> booleanResult = identity&lt;<span class="hljs-built_in">boolean</span>&gt;(<span class="hljs-literal">true</span>); <span class="hljs-comment">// Type: boolean</span>

<span class="hljs-comment">// Type inference - TypeScript can infer the type</span>
<span class="hljs-keyword">const</span> inferredString = identity(<span class="hljs-string">"hello"</span>); <span class="hljs-comment">// Type: string (inferred)</span>
<span class="hljs-keyword">const</span> inferredNumber = identity(<span class="hljs-number">42</span>); <span class="hljs-comment">// Type: number (inferred)</span>

<span class="hljs-comment">// Generic function with multiple type parameters</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">pair</span>&lt;<span class="hljs-title">T</span>, <span class="hljs-title">U</span>&gt;(<span class="hljs-params">first: T, second: U</span>): [<span class="hljs-title">T</span>, <span class="hljs-title">U</span>] </span>{
  <span class="hljs-keyword">return</span> [first, second];
}

<span class="hljs-keyword">const</span> stringNumberPair = pair(<span class="hljs-string">"hello"</span>, <span class="hljs-number">42</span>); <span class="hljs-comment">// Type: [string, number]</span>
<span class="hljs-keyword">const</span> booleanStringPair = pair(<span class="hljs-literal">true</span>, <span class="hljs-string">"world"</span>); <span class="hljs-comment">// Type: [boolean, string]</span>
</div></code></pre>
<h3 id="generic-array-functions">Generic Array Functions</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Generic function working with arrays</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getFirstElement</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params">array: T[]</span>): <span class="hljs-title">T</span> | <span class="hljs-title">undefined</span> </span>{
  <span class="hljs-keyword">return</span> array.length &gt; <span class="hljs-number">0</span> ? array[<span class="hljs-number">0</span>] : <span class="hljs-literal">undefined</span>;
}

<span class="hljs-keyword">const</span> numbers = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>];
<span class="hljs-keyword">const</span> strings = [<span class="hljs-string">"a"</span>, <span class="hljs-string">"b"</span>, <span class="hljs-string">"c"</span>];
<span class="hljs-keyword">const</span> booleans = [<span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>];

<span class="hljs-keyword">const</span> firstNumber = getFirstElement(numbers); <span class="hljs-comment">// Type: number | undefined</span>
<span class="hljs-keyword">const</span> firstString = getFirstElement(strings); <span class="hljs-comment">// Type: string | undefined</span>
<span class="hljs-keyword">const</span> firstBoolean = getFirstElement(booleans); <span class="hljs-comment">// Type: boolean | undefined</span>

<span class="hljs-comment">// Generic function for array manipulation</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">map</span>&lt;<span class="hljs-title">T</span>, <span class="hljs-title">U</span>&gt;(<span class="hljs-params">array: T[], transform: (item: T) =&gt; U</span>): <span class="hljs-title">U</span>[] </span>{
  <span class="hljs-keyword">const</span> result: U[] = [];
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> item of array) {
    result.push(transform(item));
  }
  <span class="hljs-keyword">return</span> result;
}

<span class="hljs-comment">// Usage</span>
<span class="hljs-keyword">const</span> doubled = map([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], <span class="hljs-function">(<span class="hljs-params">x</span>) =&gt;</span> x * <span class="hljs-number">2</span>); <span class="hljs-comment">// Type: number[]</span>
<span class="hljs-keyword">const</span> lengths = map([<span class="hljs-string">"hello"</span>, <span class="hljs-string">"world"</span>], <span class="hljs-function">(<span class="hljs-params">s</span>) =&gt;</span> s.length); <span class="hljs-comment">// Type: number[]</span>
<span class="hljs-keyword">const</span> uppercased = map([<span class="hljs-string">"a"</span>, <span class="hljs-string">"b"</span>, <span class="hljs-string">"c"</span>], <span class="hljs-function">(<span class="hljs-params">s</span>) =&gt;</span> s.toUpperCase()); <span class="hljs-comment">// Type: string[]</span>

<span class="hljs-comment">// Generic filter function</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">filter</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params">array: T[], predicate: (item: T) =&gt; <span class="hljs-built_in">boolean</span></span>): <span class="hljs-title">T</span>[] </span>{
  <span class="hljs-keyword">const</span> result: T[] = [];
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> item of array) {
    <span class="hljs-keyword">if</span> (predicate(item)) {
      result.push(item);
    }
  }
  <span class="hljs-keyword">return</span> result;
}

<span class="hljs-keyword">const</span> evenNumbers = filter([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>], <span class="hljs-function">(<span class="hljs-params">n</span>) =&gt;</span> n % <span class="hljs-number">2</span> === <span class="hljs-number">0</span>); <span class="hljs-comment">// [2, 4]</span>
<span class="hljs-keyword">const</span> longStrings = filter([<span class="hljs-string">"a"</span>, <span class="hljs-string">"hello"</span>, <span class="hljs-string">"hi"</span>, <span class="hljs-string">"world"</span>], <span class="hljs-function">(<span class="hljs-params">s</span>) =&gt;</span> s.length &gt; <span class="hljs-number">2</span>); <span class="hljs-comment">// ["hello", "world"]</span>
</div></code></pre>
<h2 id="generic-interfaces">Generic Interfaces</h2>
<h3 id="basic-generic-interfaces">Basic Generic Interfaces</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Generic interface for a container</span>
<span class="hljs-keyword">interface</span> Container&lt;T&gt; {
  value: T;
  getValue(): T;
  setValue(value: T): <span class="hljs-built_in">void</span>;
}

<span class="hljs-comment">// Implementation for different types</span>
<span class="hljs-keyword">class</span> StringContainer <span class="hljs-keyword">implements</span> Container&lt;<span class="hljs-built_in">string</span>&gt; {
  <span class="hljs-keyword">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">public</span> value: <span class="hljs-built_in">string</span></span>) {}

  getValue(): <span class="hljs-built_in">string</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.value;
  }

  setValue(value: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">void</span> {
    <span class="hljs-keyword">this</span>.value = value;
  }
}

<span class="hljs-keyword">class</span> NumberContainer <span class="hljs-keyword">implements</span> Container&lt;<span class="hljs-built_in">number</span>&gt; {
  <span class="hljs-keyword">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">public</span> value: <span class="hljs-built_in">number</span></span>) {}

  getValue(): <span class="hljs-built_in">number</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.value;
  }

  setValue(value: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">void</span> {
    <span class="hljs-keyword">this</span>.value = value;
  }
}

<span class="hljs-comment">// Generic implementation</span>
<span class="hljs-keyword">class</span> GenericContainer&lt;T&gt; <span class="hljs-keyword">implements</span> Container&lt;T&gt; {
  <span class="hljs-keyword">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">public</span> value: T</span>) {}

  getValue(): T {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.value;
  }

  setValue(value: T): <span class="hljs-built_in">void</span> {
    <span class="hljs-keyword">this</span>.value = value;
  }
}

<span class="hljs-comment">// Usage</span>
<span class="hljs-keyword">const</span> stringContainer = <span class="hljs-keyword">new</span> GenericContainer&lt;<span class="hljs-built_in">string</span>&gt;(<span class="hljs-string">"hello"</span>);
<span class="hljs-keyword">const</span> numberContainer = <span class="hljs-keyword">new</span> GenericContainer&lt;<span class="hljs-built_in">number</span>&gt;(<span class="hljs-number">42</span>);
<span class="hljs-keyword">const</span> booleanContainer = <span class="hljs-keyword">new</span> GenericContainer&lt;<span class="hljs-built_in">boolean</span>&gt;(<span class="hljs-literal">true</span>);
</div></code></pre>
<h3 id="generic-interfaces-for-data-structures">Generic Interfaces for Data Structures</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Generic interface for a key-value store</span>
<span class="hljs-keyword">interface</span> KeyValueStore&lt;K, V&gt; {
  <span class="hljs-keyword">get</span>(key: K): V | <span class="hljs-literal">undefined</span>;
  <span class="hljs-keyword">set</span>(key: K, value: V): <span class="hljs-built_in">void</span>;
  has(key: K): <span class="hljs-built_in">boolean</span>;
  <span class="hljs-keyword">delete</span>(key: K): <span class="hljs-built_in">boolean</span>;
  keys(): K[];
  values(): V[];
  entries(): [K, V][];
}

<span class="hljs-comment">// Implementation using Map</span>
<span class="hljs-keyword">class</span> MapStore&lt;K, V&gt; <span class="hljs-keyword">implements</span> KeyValueStore&lt;K, V&gt; {
  <span class="hljs-keyword">private</span> store = <span class="hljs-keyword">new</span> Map&lt;K, V&gt;();

  <span class="hljs-keyword">get</span>(key: K): V | <span class="hljs-literal">undefined</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.store.get(key);
  }

  <span class="hljs-keyword">set</span>(key: K, value: V): <span class="hljs-built_in">void</span> {
    <span class="hljs-keyword">this</span>.store.set(key, value);
  }

  has(key: K): <span class="hljs-built_in">boolean</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.store.has(key);
  }

  <span class="hljs-keyword">delete</span>(key: K): <span class="hljs-built_in">boolean</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.store.delete(key);
  }

  keys(): K[] {
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Array</span>.from(<span class="hljs-keyword">this</span>.store.keys());
  }

  values(): V[] {
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Array</span>.from(<span class="hljs-keyword">this</span>.store.values());
  }

  entries(): [K, V][] {
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Array</span>.from(<span class="hljs-keyword">this</span>.store.entries());
  }
}

<span class="hljs-comment">// Usage</span>
<span class="hljs-keyword">const</span> userStore = <span class="hljs-keyword">new</span> MapStore&lt;<span class="hljs-built_in">string</span>, { name: <span class="hljs-built_in">string</span>; age: <span class="hljs-built_in">number</span> }&gt;();
userStore.set(<span class="hljs-string">"user1"</span>, { name: <span class="hljs-string">"John"</span>, age: <span class="hljs-number">30</span> });
userStore.set(<span class="hljs-string">"user2"</span>, { name: <span class="hljs-string">"Jane"</span>, age: <span class="hljs-number">25</span> });

<span class="hljs-keyword">const</span> user = userStore.get(<span class="hljs-string">"user1"</span>); <span class="hljs-comment">// Type: { name: string; age: number } | undefined</span>

<span class="hljs-comment">// Generic interface for API responses</span>
<span class="hljs-keyword">interface</span> ApiResponse&lt;T&gt; {
  data: T;
  status: <span class="hljs-built_in">number</span>;
  message: <span class="hljs-built_in">string</span>;
  timestamp: <span class="hljs-built_in">Date</span>;
}

<span class="hljs-keyword">interface</span> User {
  id: <span class="hljs-built_in">number</span>;
  name: <span class="hljs-built_in">string</span>;
  email: <span class="hljs-built_in">string</span>;
}

<span class="hljs-keyword">interface</span> Product {
  id: <span class="hljs-built_in">number</span>;
  name: <span class="hljs-built_in">string</span>;
  price: <span class="hljs-built_in">number</span>;
}

<span class="hljs-comment">// Usage with different data types</span>
<span class="hljs-keyword">const</span> userResponse: ApiResponse&lt;User&gt; = {
  data: { id: <span class="hljs-number">1</span>, name: <span class="hljs-string">"John"</span>, email: <span class="hljs-string">"john@example.com"</span> },
  status: <span class="hljs-number">200</span>,
  message: <span class="hljs-string">"Success"</span>,
  timestamp: <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(),
};

<span class="hljs-keyword">const</span> productsResponse: ApiResponse&lt;Product[]&gt; = {
  data: [
    { id: <span class="hljs-number">1</span>, name: <span class="hljs-string">"Laptop"</span>, price: <span class="hljs-number">999</span> },
    { id: <span class="hljs-number">2</span>, name: <span class="hljs-string">"Mouse"</span>, price: <span class="hljs-number">25</span> },
  ],
  status: <span class="hljs-number">200</span>,
  message: <span class="hljs-string">"Success"</span>,
  timestamp: <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(),
};
</div></code></pre>
<h2 id="generic-classes">Generic Classes</h2>
<h3 id="basic-generic-classes">Basic Generic Classes</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Generic class for a simple stack</span>
<span class="hljs-keyword">class</span> Stack&lt;T&gt; {
  <span class="hljs-keyword">private</span> items: T[] = [];

  push(item: T): <span class="hljs-built_in">void</span> {
    <span class="hljs-keyword">this</span>.items.push(item);
  }

  pop(): T | <span class="hljs-literal">undefined</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.items.pop();
  }

  peek(): T | <span class="hljs-literal">undefined</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.items[<span class="hljs-keyword">this</span>.items.length - <span class="hljs-number">1</span>];
  }

  isEmpty(): <span class="hljs-built_in">boolean</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.items.length === <span class="hljs-number">0</span>;
  }

  size(): <span class="hljs-built_in">number</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.items.length;
  }

  toArray(): T[] {
    <span class="hljs-keyword">return</span> [...this.items];
  }
}

<span class="hljs-comment">// Usage</span>
<span class="hljs-keyword">const</span> numberStack = <span class="hljs-keyword">new</span> Stack&lt;<span class="hljs-built_in">number</span>&gt;();
numberStack.push(<span class="hljs-number">1</span>);
numberStack.push(<span class="hljs-number">2</span>);
numberStack.push(<span class="hljs-number">3</span>);

<span class="hljs-built_in">console</span>.log(numberStack.pop()); <span class="hljs-comment">// 3</span>
<span class="hljs-built_in">console</span>.log(numberStack.peek()); <span class="hljs-comment">// 2</span>

<span class="hljs-keyword">const</span> stringStack = <span class="hljs-keyword">new</span> Stack&lt;<span class="hljs-built_in">string</span>&gt;();
stringStack.push(<span class="hljs-string">"hello"</span>);
stringStack.push(<span class="hljs-string">"world"</span>);

<span class="hljs-built_in">console</span>.log(stringStack.toArray()); <span class="hljs-comment">// ["hello", "world"]</span>
</div></code></pre>
<h3 id="generic-classes-with-multiple-type-parameters">Generic Classes with Multiple Type Parameters</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Generic class for a result type (similar to Rust's Result or Haskell's Either)</span>
<span class="hljs-keyword">class</span> Result&lt;T, E&gt; {
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">constructor</span>(<span class="hljs-params">
    <span class="hljs-keyword">private</span> readonly _value: T | <span class="hljs-literal">null</span>,
    <span class="hljs-keyword">private</span> readonly _error: E | <span class="hljs-literal">null</span>,
    <span class="hljs-keyword">private</span> readonly _isSuccess: <span class="hljs-built_in">boolean</span>
  </span>) {}

  <span class="hljs-keyword">static</span> success&lt;T, E&gt;(value: T): Result&lt;T, E&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Result&lt;T, E&gt;(value, <span class="hljs-literal">null</span>, <span class="hljs-literal">true</span>);
  }

  <span class="hljs-keyword">static</span> failure&lt;T, E&gt;(error: E): Result&lt;T, E&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Result&lt;T, E&gt;(<span class="hljs-literal">null</span>, error, <span class="hljs-literal">false</span>);
  }

  isSuccess(): <span class="hljs-built_in">boolean</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._isSuccess;
  }

  isFailure(): <span class="hljs-built_in">boolean</span> {
    <span class="hljs-keyword">return</span> !<span class="hljs-keyword">this</span>._isSuccess;
  }

  getValue(): T {
    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>._isSuccess) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"Cannot get value from failed result"</span>);
    }
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._value!;
  }

  getError(): E {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._isSuccess) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"Cannot get error from successful result"</span>);
    }
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._error!;
  }

  map&lt;U&gt;<span class="hljs-function">(<span class="hljs-params">fn: (<span class="hljs-params">value: T</span>) =&gt; U</span>): <span class="hljs-params">Result</span>&lt;<span class="hljs-params">U</span>, <span class="hljs-params">E</span>&gt; {
    <span class="hljs-params">if</span> (<span class="hljs-params"><span class="hljs-keyword">this</span>._isSuccess</span>) {
      <span class="hljs-params">return</span> <span class="hljs-params">Result</span>.<span class="hljs-params">success</span>&lt;<span class="hljs-params">U</span>, <span class="hljs-params">E</span>&gt;(<span class="hljs-params">fn(<span class="hljs-params"><span class="hljs-keyword">this</span>._value!</span>)</span>);
    }
    <span class="hljs-params">return</span> <span class="hljs-params">Result</span>.<span class="hljs-params">failure</span>&lt;<span class="hljs-params">U</span>, <span class="hljs-params">E</span>&gt;(<span class="hljs-params"><span class="hljs-keyword">this</span>._error!</span>);
  }

  <span class="hljs-params">flatMap</span>&lt;<span class="hljs-params">U</span>&gt;(<span class="hljs-params">fn: (<span class="hljs-params">value: T</span>) =&gt; Result&lt;U, E&gt;</span>): <span class="hljs-params">Result</span>&lt;<span class="hljs-params">U</span>, <span class="hljs-params">E</span>&gt; {
    <span class="hljs-params">if</span> (<span class="hljs-params"><span class="hljs-keyword">this</span>._isSuccess</span>) {
      <span class="hljs-params">return</span> <span class="hljs-params">fn</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>._value!</span>);
    }
    <span class="hljs-params">return</span> <span class="hljs-params">Result</span>.<span class="hljs-params">failure</span>&lt;<span class="hljs-params">U</span>, <span class="hljs-params">E</span>&gt;(<span class="hljs-params"><span class="hljs-keyword">this</span>._error!</span>);
  }
}

// <span class="hljs-params">Usage</span>
<span class="hljs-params">function</span> <span class="hljs-params">divide</span>(<span class="hljs-params">a: <span class="hljs-built_in">number</span>, b: <span class="hljs-built_in">number</span></span>): <span class="hljs-params">Result</span>&lt;<span class="hljs-params">number</span>, <span class="hljs-params">string</span>&gt; {
  <span class="hljs-params">if</span> (<span class="hljs-params">b === 0</span>) {
    <span class="hljs-params">return</span> <span class="hljs-params">Result</span>.<span class="hljs-params">failure</span>(<span class="hljs-params">"Division by zero"</span>);
  }
  <span class="hljs-params">return</span> <span class="hljs-params">Result</span>.<span class="hljs-params">success</span>(<span class="hljs-params">a / b</span>);
}

<span class="hljs-params">function</span> <span class="hljs-params">sqrt</span>(<span class="hljs-params">x: <span class="hljs-built_in">number</span></span>): <span class="hljs-params">Result</span>&lt;<span class="hljs-params">number</span>, <span class="hljs-params">string</span>&gt; {
  <span class="hljs-params">if</span> (<span class="hljs-params">x &lt; 0</span>) {
    <span class="hljs-params">return</span> <span class="hljs-params">Result</span>.<span class="hljs-params">failure</span>(<span class="hljs-params">"Cannot take square root of negative <span class="hljs-built_in">number</span>"</span>);
  }
  <span class="hljs-params">return</span> <span class="hljs-params">Result</span>.<span class="hljs-params">success</span>(<span class="hljs-params"><span class="hljs-built_in">Math</span>.sqrt(<span class="hljs-params">x</span>)</span>);
}

// <span class="hljs-params">Chaining</span> <span class="hljs-params">operations</span>
<span class="hljs-params">const</span> <span class="hljs-params">result</span> = <span class="hljs-params">divide</span>(<span class="hljs-params">10, 2</span>)
  .<span class="hljs-params">flatMap</span>(<span class="hljs-params">(<span class="hljs-params">x</span>) =&gt; sqrt(<span class="hljs-params">x</span>)</span>)
  .<span class="hljs-params">map</span>(<span class="hljs-params">(<span class="hljs-params">x</span>) =&gt; x.toFixed(<span class="hljs-params">2</span>)</span>);

<span class="hljs-params">if</span> (<span class="hljs-params">result.isSuccess(<span class="hljs-params"></span>)</span>) {
  <span class="hljs-params">console</span>.<span class="hljs-params">log</span>(<span class="hljs-params">"Result:", result.getValue(<span class="hljs-params"></span>)</span>); // "2.24"
} <span class="hljs-params">else</span> {
  <span class="hljs-params">console</span>.<span class="hljs-params">log</span>(<span class="hljs-params">"<span class="hljs-built_in">Error</span>:", result.getError(<span class="hljs-params"></span>)</span>);
}
</span></div></code></pre>
<h2 id="generic-constraints">Generic Constraints</h2>
<h3 id="basic-constraints-with-extends">Basic Constraints with extends</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Constraint: T must have a length property</span>
<span class="hljs-keyword">interface</span> Lengthwise {
  length: <span class="hljs-built_in">number</span>;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">logLength</span>&lt;<span class="hljs-title">T</span> <span class="hljs-title">extends</span> <span class="hljs-title">Lengthwise</span>&gt;(<span class="hljs-params">arg: T</span>): <span class="hljs-title">T</span> </span>{
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`Length: <span class="hljs-subst">${arg.length}</span>`</span>);
  <span class="hljs-keyword">return</span> arg;
}

<span class="hljs-comment">// Valid calls</span>
logLength(<span class="hljs-string">"hello"</span>); <span class="hljs-comment">// string has length</span>
logLength([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]); <span class="hljs-comment">// array has length</span>
logLength({ length: <span class="hljs-number">10</span>, value: <span class="hljs-string">"test"</span> }); <span class="hljs-comment">// object with length property</span>

<span class="hljs-comment">// Invalid call</span>
<span class="hljs-comment">// logLength(123); // Error: number doesn't have length property</span>

<span class="hljs-comment">// Constraint: T must extend a specific type</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getProperty</span>&lt;<span class="hljs-title">T</span>, <span class="hljs-title">K</span> <span class="hljs-title">extends</span> <span class="hljs-title">keyof</span> <span class="hljs-title">T</span>&gt;(<span class="hljs-params">obj: T, key: K</span>): <span class="hljs-title">T</span>[<span class="hljs-title">K</span>] </span>{
  <span class="hljs-keyword">return</span> obj[key];
}

<span class="hljs-keyword">const</span> person = { name: <span class="hljs-string">"John"</span>, age: <span class="hljs-number">30</span>, email: <span class="hljs-string">"john@example.com"</span> };

<span class="hljs-keyword">const</span> name = getProperty(person, <span class="hljs-string">"name"</span>); <span class="hljs-comment">// Type: string</span>
<span class="hljs-keyword">const</span> age = getProperty(person, <span class="hljs-string">"age"</span>); <span class="hljs-comment">// Type: number</span>
<span class="hljs-comment">// const invalid = getProperty(person, "invalid"); // Error: "invalid" is not a key of person</span>
</div></code></pre>
<h3 id="multiple-constraints">Multiple Constraints</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Multiple constraints</span>
<span class="hljs-keyword">interface</span> Serializable {
  serialize(): <span class="hljs-built_in">string</span>;
}

<span class="hljs-keyword">interface</span> Timestamped {
  timestamp: <span class="hljs-built_in">Date</span>;
}

<span class="hljs-comment">// T must implement both interfaces</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">processData</span>&lt;<span class="hljs-title">T</span> <span class="hljs-title">extends</span> <span class="hljs-title">Serializable</span> &amp; <span class="hljs-title">Timestamped</span>&gt;(<span class="hljs-params">data: T</span>): <span class="hljs-title">string</span> </span>{
  <span class="hljs-keyword">const</span> serialized = data.serialize();
  <span class="hljs-keyword">const</span> time = data.timestamp.toISOString();
  <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${time}</span>: <span class="hljs-subst">${serialized}</span>`</span>;
}

<span class="hljs-keyword">class</span> LogEntry <span class="hljs-keyword">implements</span> Serializable, Timestamped {
  <span class="hljs-keyword">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">public</span> message: <span class="hljs-built_in">string</span>, <span class="hljs-keyword">public</span> timestamp: <span class="hljs-built_in">Date</span> = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>()</span>) {}

  serialize(): <span class="hljs-built_in">string</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">JSON</span>.stringify({ message: <span class="hljs-keyword">this</span>.message, timestamp: <span class="hljs-keyword">this</span>.timestamp });
  }
}

<span class="hljs-keyword">const</span> entry = <span class="hljs-keyword">new</span> LogEntry(<span class="hljs-string">"User logged in"</span>);
<span class="hljs-keyword">const</span> processed = processData(entry);

<span class="hljs-comment">// Constraint with conditional types</span>
<span class="hljs-keyword">type</span> NonNullable&lt;T&gt; = T <span class="hljs-keyword">extends</span> <span class="hljs-literal">null</span> | <span class="hljs-literal">undefined</span> ? never : T;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ensureNonNull</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params">value: T</span>): <span class="hljs-title">NonNullable</span>&lt;<span class="hljs-title">T</span>&gt; </span>{
  <span class="hljs-keyword">if</span> (value === <span class="hljs-literal">null</span> || value === <span class="hljs-literal">undefined</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"Value cannot be null or undefined"</span>);
  }
  <span class="hljs-keyword">return</span> value <span class="hljs-keyword">as</span> NonNullable&lt;T&gt;;
}

<span class="hljs-keyword">const</span> maybeString: <span class="hljs-built_in">string</span> | <span class="hljs-literal">null</span> = <span class="hljs-string">"hello"</span>;
<span class="hljs-keyword">const</span> definiteString = ensureNonNull(maybeString); <span class="hljs-comment">// Type: string</span>
</div></code></pre>
<h3 id="constraints-with-class-types">Constraints with Class Types</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Generic constraint with constructor</span>
<span class="hljs-keyword">interface</span> Constructable {
  <span class="hljs-keyword">new</span> (...args: <span class="hljs-built_in">any</span>[]): <span class="hljs-built_in">any</span>;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createInstance</span>&lt;<span class="hljs-title">T</span> <span class="hljs-title">extends</span> <span class="hljs-title">Constructable</span>&gt;(<span class="hljs-params">
  ctor: T,
  ...args: <span class="hljs-built_in">any</span>[]
</span>): <span class="hljs-title">InstanceType</span>&lt;<span class="hljs-title">T</span>&gt; </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> ctor(...args);
}

<span class="hljs-keyword">class</span> User {
  <span class="hljs-keyword">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">public</span> name: <span class="hljs-built_in">string</span>, <span class="hljs-keyword">public</span> age: <span class="hljs-built_in">number</span></span>) {}
}

<span class="hljs-keyword">class</span> Product {
  <span class="hljs-keyword">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">public</span> name: <span class="hljs-built_in">string</span>, <span class="hljs-keyword">public</span> price: <span class="hljs-built_in">number</span></span>) {}
}

<span class="hljs-keyword">const</span> user = createInstance(User, <span class="hljs-string">"John"</span>, <span class="hljs-number">30</span>); <span class="hljs-comment">// Type: User</span>
<span class="hljs-keyword">const</span> product = createInstance(Product, <span class="hljs-string">"Laptop"</span>, <span class="hljs-number">999</span>); <span class="hljs-comment">// Type: Product</span>

<span class="hljs-comment">// Generic factory with constraints</span>
<span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> Animal {
  <span class="hljs-keyword">abstract</span> makeSound(): <span class="hljs-built_in">string</span>;
}

<span class="hljs-keyword">class</span> Dog <span class="hljs-keyword">extends</span> Animal {
  makeSound(): <span class="hljs-built_in">string</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">"Woof!"</span>;
  }
}

<span class="hljs-keyword">class</span> Cat <span class="hljs-keyword">extends</span> Animal {
  makeSound(): <span class="hljs-built_in">string</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">"Meow!"</span>;
  }
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createAnimal</span>&lt;<span class="hljs-title">T</span> <span class="hljs-title">extends</span> <span class="hljs-title">Animal</span>&gt;(<span class="hljs-params">AnimalClass: <span class="hljs-keyword">new</span> () =&gt; T</span>): <span class="hljs-title">T</span> </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> AnimalClass();
}

<span class="hljs-keyword">const</span> dog = createAnimal(Dog); <span class="hljs-comment">// Type: Dog</span>
<span class="hljs-keyword">const</span> cat = createAnimal(Cat); <span class="hljs-comment">// Type: Cat</span>
</div></code></pre>
<h2 id="advanced-generic-patterns">Advanced Generic Patterns</h2>
<h3 id="conditional-types">Conditional Types</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Basic conditional type</span>
<span class="hljs-keyword">type</span> IsString&lt;T&gt; = T <span class="hljs-keyword">extends</span> <span class="hljs-built_in">string</span> ? <span class="hljs-literal">true</span> : <span class="hljs-literal">false</span>;

<span class="hljs-keyword">type</span> Test1 = IsString&lt;<span class="hljs-built_in">string</span>&gt;; <span class="hljs-comment">// true</span>
<span class="hljs-keyword">type</span> Test2 = IsString&lt;<span class="hljs-built_in">number</span>&gt;; <span class="hljs-comment">// false</span>

<span class="hljs-comment">// Conditional type for extracting array element type</span>
<span class="hljs-keyword">type</span> ArrayElement&lt;T&gt; = T <span class="hljs-keyword">extends</span> (infer U)[] ? U : never;

<span class="hljs-keyword">type</span> StringArrayElement = ArrayElement&lt;<span class="hljs-built_in">string</span>[]&gt;; <span class="hljs-comment">// string</span>
<span class="hljs-keyword">type</span> NumberArrayElement = ArrayElement&lt;<span class="hljs-built_in">number</span>[]&gt;; <span class="hljs-comment">// number</span>
<span class="hljs-keyword">type</span> NotArrayElement = ArrayElement&lt;<span class="hljs-built_in">string</span>&gt;; <span class="hljs-comment">// never</span>

<span class="hljs-comment">// Conditional type for function return type</span>
<span class="hljs-keyword">type</span> ReturnType&lt;T&gt; = T <span class="hljs-keyword">extends</span> (...args: <span class="hljs-built_in">any</span>[]) =&gt; infer R ? R : never;

<span class="hljs-keyword">type</span> FunctionReturn = ReturnType&lt;<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-built_in">string</span>&gt;; <span class="hljs-comment">// string</span>
<span class="hljs-keyword">type</span> MethodReturn = ReturnType&lt;<span class="hljs-function">(<span class="hljs-params">x: <span class="hljs-built_in">number</span></span>) =&gt;</span> <span class="hljs-built_in">boolean</span>&gt;; <span class="hljs-comment">// boolean</span>

<span class="hljs-comment">// Practical conditional type for API responses</span>
<span class="hljs-keyword">type</span> ApiResult&lt;T&gt; = T <span class="hljs-keyword">extends</span> { error: <span class="hljs-built_in">any</span> }
  ? { success: <span class="hljs-literal">false</span>; error: T[<span class="hljs-string">"error"</span>] }
  : { success: <span class="hljs-literal">true</span>; data: T };

<span class="hljs-keyword">type</span> SuccessResult = ApiResult&lt;{ name: <span class="hljs-built_in">string</span> }&gt;; <span class="hljs-comment">// { success: true; data: { name: string } }</span>
<span class="hljs-keyword">type</span> ErrorResult = ApiResult&lt;{ error: <span class="hljs-built_in">string</span> }&gt;; <span class="hljs-comment">// { success: false; error: string }</span>
</div></code></pre>
<h3 id="mapped-types-with-generics">Mapped Types with Generics</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Generic mapped type for making properties optional</span>
<span class="hljs-keyword">type</span> Partial&lt;T&gt; = {
  [P <span class="hljs-keyword">in</span> keyof T]?: T[P];
};

<span class="hljs-comment">// Generic mapped type for making properties required</span>
<span class="hljs-keyword">type</span> Required&lt;T&gt; = {
  [P <span class="hljs-keyword">in</span> keyof T]-?: T[P];
};

<span class="hljs-comment">// Generic mapped type for making properties readonly</span>
<span class="hljs-keyword">type</span> Readonly&lt;T&gt; = {
  readonly [P <span class="hljs-keyword">in</span> keyof T]: T[P];
};

<span class="hljs-comment">// Custom mapped type for nullable properties</span>
<span class="hljs-keyword">type</span> Nullable&lt;T&gt; = {
  [P <span class="hljs-keyword">in</span> keyof T]: T[P] | <span class="hljs-literal">null</span>;
};

<span class="hljs-keyword">interface</span> User {
  id: <span class="hljs-built_in">number</span>;
  name: <span class="hljs-built_in">string</span>;
  email: <span class="hljs-built_in">string</span>;
  age?: <span class="hljs-built_in">number</span>;
}

<span class="hljs-keyword">type</span> PartialUser = Partial&lt;User&gt;; <span class="hljs-comment">// All properties optional</span>
<span class="hljs-keyword">type</span> RequiredUser = Required&lt;User&gt;; <span class="hljs-comment">// All properties required (including age)</span>
<span class="hljs-keyword">type</span> ReadonlyUser = Readonly&lt;User&gt;; <span class="hljs-comment">// All properties readonly</span>
<span class="hljs-keyword">type</span> NullableUser = Nullable&lt;User&gt;; <span class="hljs-comment">// All properties can be null</span>

<span class="hljs-comment">// Generic mapped type with transformation</span>
<span class="hljs-keyword">type</span> Stringify&lt;T&gt; = {
  [P <span class="hljs-keyword">in</span> keyof T]: <span class="hljs-built_in">string</span>;
};

<span class="hljs-keyword">type</span> StringifiedUser = Stringify&lt;User&gt;; <span class="hljs-comment">// All properties are strings</span>

<span class="hljs-comment">// Generic mapped type with filtering</span>
<span class="hljs-keyword">type</span> PickByType&lt;T, U&gt; = {
  [P <span class="hljs-keyword">in</span> keyof T <span class="hljs-keyword">as</span> T[P] <span class="hljs-keyword">extends</span> U ? P : never]: T[P];
};

<span class="hljs-keyword">type</span> StringProperties = PickByType&lt;User, <span class="hljs-built_in">string</span>&gt;; <span class="hljs-comment">// { name: string; email: string }</span>
<span class="hljs-keyword">type</span> NumberProperties = PickByType&lt;User, <span class="hljs-built_in">number</span>&gt;; <span class="hljs-comment">// { id: number; age?: number }</span>
</div></code></pre>
<h3 id="generic-utility-functions">Generic Utility Functions</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Generic deep clone function</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">deepClone</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params">obj: T</span>): <span class="hljs-title">T</span> </span>{
  <span class="hljs-keyword">if</span> (obj === <span class="hljs-literal">null</span> || <span class="hljs-keyword">typeof</span> obj !== <span class="hljs-string">"object"</span>) {
    <span class="hljs-keyword">return</span> obj;
  }

  <span class="hljs-keyword">if</span> (obj <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Date</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(obj.getTime()) <span class="hljs-keyword">as</span> T;
  }

  <span class="hljs-keyword">if</span> (obj <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Array</span>) {
    <span class="hljs-keyword">return</span> obj.map(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> deepClone(item)) <span class="hljs-keyword">as</span> T;
  }

  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> obj === <span class="hljs-string">"object"</span>) {
    <span class="hljs-keyword">const</span> cloned = {} <span class="hljs-keyword">as</span> T;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> key <span class="hljs-keyword">in</span> obj) {
      <span class="hljs-keyword">if</span> (obj.hasOwnProperty(key)) {
        cloned[key] = deepClone(obj[key]);
      }
    }
    <span class="hljs-keyword">return</span> cloned;
  }

  <span class="hljs-keyword">return</span> obj;
}

<span class="hljs-comment">// Generic memoization function</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">memoize</span>&lt;<span class="hljs-title">TArgs</span> <span class="hljs-title">extends</span> <span class="hljs-title">any</span>[], <span class="hljs-title">TReturn</span>&gt;(<span class="hljs-params">
  fn: (...args: TArgs) =&gt; TReturn
</span>): (<span class="hljs-params">...args: TArgs</span>) =&gt; <span class="hljs-title">TReturn</span> </span>{
  <span class="hljs-keyword">const</span> cache = <span class="hljs-keyword">new</span> Map&lt;<span class="hljs-built_in">string</span>, TReturn&gt;();

  <span class="hljs-keyword">return</span> (...args: TArgs): <span class="hljs-function"><span class="hljs-params">TReturn</span> =&gt;</span> {
    <span class="hljs-keyword">const</span> key = <span class="hljs-built_in">JSON</span>.stringify(args);

    <span class="hljs-keyword">if</span> (cache.has(key)) {
      <span class="hljs-keyword">return</span> cache.get(key)!;
    }

    <span class="hljs-keyword">const</span> result = fn(...args);
    cache.set(key, result);
    <span class="hljs-keyword">return</span> result;
  };
}

<span class="hljs-comment">// Usage</span>
<span class="hljs-keyword">const</span> expensiveFunction = (x: <span class="hljs-built_in">number</span>, y: <span class="hljs-built_in">number</span>): <span class="hljs-function"><span class="hljs-params">number</span> =&gt;</span> {
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`Computing <span class="hljs-subst">${x}</span> + <span class="hljs-subst">${y}</span>`</span>);
  <span class="hljs-keyword">return</span> x + y;
};

<span class="hljs-keyword">const</span> memoizedFunction = memoize(expensiveFunction);

<span class="hljs-built_in">console</span>.log(memoizedFunction(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)); <span class="hljs-comment">// "Computing 1 + 2", returns 3</span>
<span class="hljs-built_in">console</span>.log(memoizedFunction(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)); <span class="hljs-comment">// Returns 3 (from cache, no console.log)</span>

<span class="hljs-comment">// Generic retry function</span>
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">retry</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params">
  fn: () =&gt; <span class="hljs-built_in">Promise</span>&lt;T&gt;,
  maxAttempts: <span class="hljs-built_in">number</span> = 3,
  delay: <span class="hljs-built_in">number</span> = 1000
</span>): <span class="hljs-title">Promise</span>&lt;<span class="hljs-title">T</span>&gt; </span>{
  <span class="hljs-keyword">let</span> lastError: <span class="hljs-built_in">Error</span>;

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> attempt = <span class="hljs-number">1</span>; attempt &lt;= maxAttempts; attempt++) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> fn();
    } <span class="hljs-keyword">catch</span> (error) {
      lastError = error <span class="hljs-keyword">as</span> <span class="hljs-built_in">Error</span>;

      <span class="hljs-keyword">if</span> (attempt === maxAttempts) {
        <span class="hljs-keyword">throw</span> lastError;
      }

      <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> setTimeout(resolve, delay));
    }
  }

  <span class="hljs-keyword">throw</span> lastError!;
}

<span class="hljs-comment">// Usage</span>
<span class="hljs-keyword">const</span> fetchData = <span class="hljs-keyword">async</span> (): <span class="hljs-built_in">Promise</span>&lt;<span class="hljs-built_in">string</span>&gt; =&gt; {
  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> fetch(<span class="hljs-string">"https://api.example.com/data"</span>);
  <span class="hljs-keyword">if</span> (!response.ok) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"Failed to fetch"</span>);
  }
  <span class="hljs-keyword">return</span> response.text();
};

<span class="hljs-keyword">const</span> dataWithRetry = <span class="hljs-keyword">await</span> retry(fetchData, <span class="hljs-number">3</span>, <span class="hljs-number">2000</span>);
</div></code></pre>
<h2 id="practical-examples">Practical Examples</h2>
<h3 id="generic-repository-pattern">Generic Repository Pattern</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Generic repository interface</span>
<span class="hljs-keyword">interface</span> Repository&lt;T, ID&gt; {
  findById(id: ID): <span class="hljs-built_in">Promise</span>&lt;T | <span class="hljs-literal">null</span>&gt;;
  findAll(): <span class="hljs-built_in">Promise</span>&lt;T[]&gt;;
  create(entity: Omit&lt;T, <span class="hljs-string">"id"</span>&gt;): <span class="hljs-built_in">Promise</span>&lt;T&gt;;
  update(id: ID, updates: Partial&lt;T&gt;): <span class="hljs-built_in">Promise</span>&lt;T | <span class="hljs-literal">null</span>&gt;;
  <span class="hljs-keyword">delete</span>(id: ID): <span class="hljs-built_in">Promise</span>&lt;<span class="hljs-built_in">boolean</span>&gt;;
}

<span class="hljs-comment">// Generic base repository implementation</span>
<span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> BaseRepository&lt;T <span class="hljs-keyword">extends</span> { id: ID }, ID&gt;
  <span class="hljs-keyword">implements</span> Repository&lt;T, ID&gt;
{
  <span class="hljs-keyword">protected</span> items: Map&lt;ID, T&gt; = <span class="hljs-keyword">new</span> Map();

  <span class="hljs-keyword">async</span> findById(id: ID): <span class="hljs-built_in">Promise</span>&lt;T | <span class="hljs-literal">null</span>&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.items.get(id) || <span class="hljs-literal">null</span>;
  }

  <span class="hljs-keyword">async</span> findAll(): <span class="hljs-built_in">Promise</span>&lt;T[]&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Array</span>.from(<span class="hljs-keyword">this</span>.items.values());
  }

  <span class="hljs-keyword">async</span> create(entity: Omit&lt;T, <span class="hljs-string">"id"</span>&gt;): <span class="hljs-built_in">Promise</span>&lt;T&gt; {
    <span class="hljs-keyword">const</span> id = <span class="hljs-keyword">this</span>.generateId();
    <span class="hljs-keyword">const</span> newEntity = { ...entity, id } <span class="hljs-keyword">as</span> T;
    <span class="hljs-keyword">this</span>.items.set(id, newEntity);
    <span class="hljs-keyword">return</span> newEntity;
  }

  <span class="hljs-keyword">async</span> update(id: ID, updates: Partial&lt;T&gt;): <span class="hljs-built_in">Promise</span>&lt;T | <span class="hljs-literal">null</span>&gt; {
    <span class="hljs-keyword">const</span> existing = <span class="hljs-keyword">this</span>.items.get(id);
    <span class="hljs-keyword">if</span> (!existing) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;

    <span class="hljs-keyword">const</span> updated = { ...existing, ...updates };
    <span class="hljs-keyword">this</span>.items.set(id, updated);
    <span class="hljs-keyword">return</span> updated;
  }

  <span class="hljs-keyword">async</span> <span class="hljs-keyword">delete</span>(id: ID): <span class="hljs-built_in">Promise</span>&lt;<span class="hljs-built_in">boolean</span>&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.items.delete(id);
  }

  <span class="hljs-keyword">protected</span> <span class="hljs-keyword">abstract</span> generateId(): ID;
}

<span class="hljs-comment">// Specific repository implementations</span>
<span class="hljs-keyword">interface</span> User {
  id: <span class="hljs-built_in">string</span>;
  name: <span class="hljs-built_in">string</span>;
  email: <span class="hljs-built_in">string</span>;
  createdAt: <span class="hljs-built_in">Date</span>;
}

<span class="hljs-keyword">class</span> UserRepository <span class="hljs-keyword">extends</span> BaseRepository&lt;User, <span class="hljs-built_in">string</span>&gt; {
  <span class="hljs-keyword">protected</span> generateId(): <span class="hljs-built_in">string</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">`user_<span class="hljs-subst">${<span class="hljs-built_in">Date</span>.now()}</span>_<span class="hljs-subst">${<span class="hljs-built_in">Math</span>.random().toString(<span class="hljs-number">36</span>).substr(<span class="hljs-number">2</span>, <span class="hljs-number">9</span>)}</span>`</span>;
  }

  <span class="hljs-keyword">async</span> findByEmail(email: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">Promise</span>&lt;User | <span class="hljs-literal">null</span>&gt; {
    <span class="hljs-keyword">const</span> users = <span class="hljs-keyword">await</span> <span class="hljs-keyword">this</span>.findAll();
    <span class="hljs-keyword">return</span> users.find(<span class="hljs-function">(<span class="hljs-params">user</span>) =&gt;</span> user.email === email) || <span class="hljs-literal">null</span>;
  }
}

<span class="hljs-keyword">interface</span> Product {
  id: <span class="hljs-built_in">number</span>;
  name: <span class="hljs-built_in">string</span>;
  price: <span class="hljs-built_in">number</span>;
  category: <span class="hljs-built_in">string</span>;
}

<span class="hljs-keyword">class</span> ProductRepository <span class="hljs-keyword">extends</span> BaseRepository&lt;Product, <span class="hljs-built_in">number</span>&gt; {
  <span class="hljs-keyword">private</span> nextId = <span class="hljs-number">1</span>;

  <span class="hljs-keyword">protected</span> generateId(): <span class="hljs-built_in">number</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.nextId++;
  }

  <span class="hljs-keyword">async</span> findByCategory(category: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">Promise</span>&lt;Product[]&gt; {
    <span class="hljs-keyword">const</span> products = <span class="hljs-keyword">await</span> <span class="hljs-keyword">this</span>.findAll();
    <span class="hljs-keyword">return</span> products.filter(<span class="hljs-function">(<span class="hljs-params">product</span>) =&gt;</span> product.category === category);
  }
}
</div></code></pre>
<h3 id="generic-event-system">Generic Event System</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Generic event system</span>
<span class="hljs-keyword">type</span> EventMap = Record&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt;;

<span class="hljs-keyword">class</span> TypedEventEmitter&lt;TEvents <span class="hljs-keyword">extends</span> EventMap&gt; {
  <span class="hljs-keyword">private</span> listeners: {
    [K <span class="hljs-keyword">in</span> keyof TEvents]?: <span class="hljs-built_in">Array</span>&lt;<span class="hljs-function">(<span class="hljs-params">data: TEvents[K]</span>) =&gt;</span> <span class="hljs-built_in">void</span>&gt;;
  } = {};

  on&lt;K <span class="hljs-keyword">extends</span> keyof TEvents&gt;(
    event: K,
    listener: <span class="hljs-function">(<span class="hljs-params">data: TEvents[K]</span>) =&gt;</span> <span class="hljs-built_in">void</span>
  ): <span class="hljs-built_in">void</span> {
    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.listeners[event]) {
      <span class="hljs-keyword">this</span>.listeners[event] = [];
    }
    <span class="hljs-keyword">this</span>.listeners[event]!.push(listener);
  }

  off&lt;K <span class="hljs-keyword">extends</span> keyof TEvents&gt;(
    event: K,
    listener: <span class="hljs-function">(<span class="hljs-params">data: TEvents[K]</span>) =&gt;</span> <span class="hljs-built_in">void</span>
  ): <span class="hljs-built_in">void</span> {
    <span class="hljs-keyword">const</span> eventListeners = <span class="hljs-keyword">this</span>.listeners[event];
    <span class="hljs-keyword">if</span> (eventListeners) {
      <span class="hljs-keyword">const</span> index = eventListeners.indexOf(listener);
      <span class="hljs-keyword">if</span> (index &gt; <span class="hljs-number">-1</span>) {
        eventListeners.splice(index, <span class="hljs-number">1</span>);
      }
    }
  }

  emit&lt;K <span class="hljs-keyword">extends</span> keyof TEvents&gt;(event: K, data: TEvents[K]): <span class="hljs-built_in">void</span> {
    <span class="hljs-keyword">const</span> eventListeners = <span class="hljs-keyword">this</span>.listeners[event];
    <span class="hljs-keyword">if</span> (eventListeners) {
      eventListeners.forEach(<span class="hljs-function">(<span class="hljs-params">listener</span>) =&gt;</span> listener(data));
    }
  }
}

<span class="hljs-comment">// Define event types</span>
<span class="hljs-keyword">interface</span> AppEvents {
  <span class="hljs-string">"user:login"</span>: { userId: <span class="hljs-built_in">string</span>; timestamp: <span class="hljs-built_in">Date</span> };
  <span class="hljs-string">"user:logout"</span>: { userId: <span class="hljs-built_in">string</span>; timestamp: <span class="hljs-built_in">Date</span> };
  <span class="hljs-string">"product:created"</span>: { productId: <span class="hljs-built_in">number</span>; name: <span class="hljs-built_in">string</span> };
  <span class="hljs-string">"product:updated"</span>: { productId: <span class="hljs-built_in">number</span>; changes: <span class="hljs-built_in">string</span>[] };
}

<span class="hljs-comment">// Usage with type safety</span>
<span class="hljs-keyword">const</span> eventEmitter = <span class="hljs-keyword">new</span> TypedEventEmitter&lt;AppEvents&gt;();

<span class="hljs-comment">// Type-safe event listeners</span>
eventEmitter.on(<span class="hljs-string">"user:login"</span>, <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`User <span class="hljs-subst">${data.userId}</span> logged in at <span class="hljs-subst">${data.timestamp}</span>`</span>);
});

eventEmitter.on(<span class="hljs-string">"product:created"</span>, <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`Product <span class="hljs-subst">${data.name}</span> created with ID <span class="hljs-subst">${data.productId}</span>`</span>);
});

<span class="hljs-comment">// Type-safe event emission</span>
eventEmitter.emit(<span class="hljs-string">"user:login"</span>, {
  userId: <span class="hljs-string">"user123"</span>,
  timestamp: <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(),
});

eventEmitter.emit(<span class="hljs-string">"product:created"</span>, {
  productId: <span class="hljs-number">1</span>,
  name: <span class="hljs-string">"Laptop"</span>,
});

<span class="hljs-comment">// TypeScript will catch errors</span>
<span class="hljs-comment">// eventEmitter.emit('user:login', { userId: 123 }); // Error: userId should be string</span>
<span class="hljs-comment">// eventEmitter.emit('invalid:event', {}); // Error: event doesn't exist</span>
</div></code></pre>
<h2 id="best-practices">Best Practices</h2>
<h3 id="%E2%9C%85-good-practices">‚úÖ Good Practices</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Use meaningful generic parameter names</span>
<span class="hljs-keyword">interface</span> Repository&lt;TEntity, TKey&gt; {
  <span class="hljs-comment">// Clear what T represents</span>
  findById(id: TKey): <span class="hljs-built_in">Promise</span>&lt;TEntity | <span class="hljs-literal">null</span>&gt;;
}

<span class="hljs-comment">// Use constraints to make generics more specific</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">processItems</span>&lt;<span class="hljs-title">T</span> <span class="hljs-title">extends</span> </span>{ id: <span class="hljs-built_in">string</span> }&gt;(items: T[]): T[] {
  <span class="hljs-keyword">return</span> items.filter(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> item.id.length &gt; <span class="hljs-number">0</span>);
}

<span class="hljs-comment">// Provide default type parameters when appropriate</span>
<span class="hljs-keyword">interface</span> ApiResponse&lt;TData = any, TError = string&gt; {
  data?: TData;
  error?: TError;
  success: <span class="hljs-built_in">boolean</span>;
}

<span class="hljs-comment">// Use generic constraints for better type safety</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">updateEntity</span>&lt;<span class="hljs-title">T</span> <span class="hljs-title">extends</span> </span>{ id: <span class="hljs-built_in">string</span> }&gt;(
  entity: T,
  updates: Partial&lt;Omit&lt;T, <span class="hljs-string">"id"</span>&gt;&gt;
): T {
  <span class="hljs-keyword">return</span> { ...entity, ...updates };
}

<span class="hljs-comment">// Use conditional types for complex type transformations</span>
<span class="hljs-keyword">type</span> NonNullable&lt;T&gt; = T <span class="hljs-keyword">extends</span> <span class="hljs-literal">null</span> | <span class="hljs-literal">undefined</span> ? never : T;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">assertNonNull</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params">value: T</span>): <span class="hljs-title">asserts</span> <span class="hljs-title">value</span> <span class="hljs-title">is</span> <span class="hljs-title">NonNullable</span>&lt;<span class="hljs-title">T</span>&gt; </span>{
  <span class="hljs-keyword">if</span> (value === <span class="hljs-literal">null</span> || value === <span class="hljs-literal">undefined</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"Value is null or undefined"</span>);
  }
}
</div></code></pre>
<h3 id="%E2%9D%8C-avoid">‚ùå Avoid</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Don't use single-letter names without context</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bad</span>&lt;<span class="hljs-title">T</span>, <span class="hljs-title">U</span>, <span class="hljs-title">V</span>&gt;(<span class="hljs-params">a: T, b: U</span>): <span class="hljs-title">V</span> </span>{
  <span class="hljs-comment">// What do these represent?</span>
  <span class="hljs-comment">// Implementation</span>
}

<span class="hljs-comment">// Don't make everything generic unnecessarily</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">unnecessarilyGeneric</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params">value: T</span>): <span class="hljs-title">T</span> </span>{
  <span class="hljs-keyword">return</span> value; <span class="hljs-comment">// This doesn't add value</span>
}

<span class="hljs-comment">// Better: Only make it generic if it needs to be</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">identity</span>(<span class="hljs-params">value: <span class="hljs-built_in">string</span></span>): <span class="hljs-title">string</span> </span>{
  <span class="hljs-keyword">return</span> value;
}

<span class="hljs-comment">// Don't use any in generic constraints</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">badConstraint</span>&lt;<span class="hljs-title">T</span> <span class="hljs-title">extends</span> <span class="hljs-title">any</span>&gt;(<span class="hljs-params">value: T</span>): <span class="hljs-title">T</span> </span>{
  <span class="hljs-keyword">return</span> value; <span class="hljs-comment">// any defeats the purpose</span>
}

<span class="hljs-comment">// Don't ignore type safety with generics</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">unsafe</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params">value: <span class="hljs-built_in">any</span></span>): <span class="hljs-title">T</span> </span>{
  <span class="hljs-keyword">return</span> value <span class="hljs-keyword">as</span> T; <span class="hljs-comment">// Dangerous casting</span>
}
</div></code></pre>
<h2 id="summary-checklist">Summary Checklist</h2>
<ul>
<li><input type="checkbox" id="checkbox64"><label for="checkbox64">Understand basic generic syntax with </label><code>&lt;T&gt;</code></li>
<li><input type="checkbox" id="checkbox65"><label for="checkbox65">Use generics for functions, interfaces, and classes</label></li>
<li><input type="checkbox" id="checkbox66"><label for="checkbox66">Apply generic constraints with </label><code>extends</code></li>
<li><input type="checkbox" id="checkbox67"><label for="checkbox67">Use multiple type parameters when needed</label></li>
<li><input type="checkbox" id="checkbox68"><label for="checkbox68">Understand conditional types and mapped types</label></li>
<li><input type="checkbox" id="checkbox69"><label for="checkbox69">Use meaningful names for generic parameters</label></li>
<li><input type="checkbox" id="checkbox70"><label for="checkbox70">Apply constraints to make generics more specific</label></li>
<li><input type="checkbox" id="checkbox71"><label for="checkbox71">Leverage type inference when possible</label></li>
<li><input type="checkbox" id="checkbox72"><label for="checkbox72">Use utility types like </label><code>Partial&lt;T&gt;</code>, <code>Required&lt;T&gt;</code>, etc.</li>
<li><input type="checkbox" id="checkbox73"><label for="checkbox73">Create reusable generic patterns for common scenarios</label></li>
</ul>
<h2 id="next-steps">Next Steps</h2>
<p>Now that you understand generics, let's explore type guards and advanced type checking techniques in TypeScript.</p>
<hr>
<p><em>Continue to: <a href="12-type-guards.md">Type Guards and Advanced Type Checking</a></em></p>
<h1 id="type-guards-and-advanced-type-checking">Type Guards and Advanced Type Checking</h1>
<blockquote>
<p>Master TypeScript's type guards, type predicates, and advanced type checking techniques for runtime type safety</p>
</blockquote>
<h2 id="introduction-to-type-guards">Introduction to Type Guards</h2>
<p>Type guards are runtime checks that help TypeScript narrow down types within conditional blocks, providing both runtime safety and compile-time type information.</p>
<h3 id="built-in-type-guards">Built-in Type Guards</h3>
<h4 id="typeof-type-guard">typeof Type Guard</h4>
<pre class="hljs"><code><div><span class="hljs-comment">// Basic typeof type guard</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">processValue</span>(<span class="hljs-params">value: <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span> | <span class="hljs-built_in">boolean</span></span>): <span class="hljs-title">string</span> </span>{
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> value === <span class="hljs-string">"string"</span>) {
    <span class="hljs-comment">// TypeScript knows value is string here</span>
    <span class="hljs-keyword">return</span> value.toUpperCase();
  }

  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> value === <span class="hljs-string">"number"</span>) {
    <span class="hljs-comment">// TypeScript knows value is number here</span>
    <span class="hljs-keyword">return</span> value.toFixed(<span class="hljs-number">2</span>);
  }

  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> value === <span class="hljs-string">"boolean"</span>) {
    <span class="hljs-comment">// TypeScript knows value is boolean here</span>
    <span class="hljs-keyword">return</span> value ? <span class="hljs-string">"true"</span> : <span class="hljs-string">"false"</span>;
  }

  <span class="hljs-comment">// TypeScript knows this is unreachable</span>
  <span class="hljs-keyword">return</span> <span class="hljs-string">"unknown"</span>;
}

<span class="hljs-comment">// More complex typeof usage</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">handleInput</span>(<span class="hljs-params">input: unknown</span>): <span class="hljs-title">string</span> </span>{
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> input === <span class="hljs-string">"string"</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">`String: <span class="hljs-subst">${input}</span>`</span>;
  }

  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> input === <span class="hljs-string">"number"</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">`Number: <span class="hljs-subst">${input}</span>`</span>;
  }

  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> input === <span class="hljs-string">"object"</span> &amp;&amp; input !== <span class="hljs-literal">null</span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Array</span>.isArray(input)) {
      <span class="hljs-keyword">return</span> <span class="hljs-string">`Array with <span class="hljs-subst">${input.length}</span> items`</span>;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-string">`Object: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(input)}</span>`</span>;
  }

  <span class="hljs-keyword">return</span> <span class="hljs-string">`Unknown type: <span class="hljs-subst">${<span class="hljs-keyword">typeof</span> input}</span>`</span>;
}

<span class="hljs-comment">// Function type checking</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">executeIfFunction</span>(<span class="hljs-params">value: unknown</span>): <span class="hljs-title">any</span> </span>{
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> value === <span class="hljs-string">"function"</span>) {
    <span class="hljs-comment">// TypeScript knows value is a function</span>
    <span class="hljs-keyword">return</span> value();
  }

  <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"Value is not a function"</span>);
}
</div></code></pre>
<h4 id="instanceof-type-guard">instanceof Type Guard</h4>
<pre class="hljs"><code><div><span class="hljs-comment">// Classes for instanceof examples</span>
<span class="hljs-keyword">class</span> Dog {
  <span class="hljs-keyword">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">public</span> name: <span class="hljs-built_in">string</span></span>) {}

  bark(): <span class="hljs-built_in">string</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-keyword">this</span>.name}</span> says woof!`</span>;
  }
}

<span class="hljs-keyword">class</span> Cat {
  <span class="hljs-keyword">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">public</span> name: <span class="hljs-built_in">string</span></span>) {}

  meow(): <span class="hljs-built_in">string</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-keyword">this</span>.name}</span> says meow!`</span>;
  }
}

<span class="hljs-keyword">class</span> Bird {
  <span class="hljs-keyword">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">public</span> name: <span class="hljs-built_in">string</span></span>) {}

  fly(): <span class="hljs-built_in">string</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-keyword">this</span>.name}</span> is flying!`</span>;
  }
}

<span class="hljs-comment">// instanceof type guard</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">handleAnimal</span>(<span class="hljs-params">animal: Dog | Cat | Bird</span>): <span class="hljs-title">string</span> </span>{
  <span class="hljs-keyword">if</span> (animal <span class="hljs-keyword">instanceof</span> Dog) {
    <span class="hljs-comment">// TypeScript knows animal is Dog</span>
    <span class="hljs-keyword">return</span> animal.bark();
  }

  <span class="hljs-keyword">if</span> (animal <span class="hljs-keyword">instanceof</span> Cat) {
    <span class="hljs-comment">// TypeScript knows animal is Cat</span>
    <span class="hljs-keyword">return</span> animal.meow();
  }

  <span class="hljs-keyword">if</span> (animal <span class="hljs-keyword">instanceof</span> Bird) {
    <span class="hljs-comment">// TypeScript knows animal is Bird</span>
    <span class="hljs-keyword">return</span> animal.fly();
  }

  <span class="hljs-comment">// TypeScript knows this is unreachable</span>
  <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"Unknown animal type"</span>);
}

<span class="hljs-comment">// instanceof with built-in types</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">processError</span>(<span class="hljs-params">error: unknown</span>): <span class="hljs-title">string</span> </span>{
  <span class="hljs-keyword">if</span> (error <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Error</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">`Error: <span class="hljs-subst">${error.message}</span>`</span>;
  }

  <span class="hljs-keyword">if</span> (error <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">TypeError</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">`Type Error: <span class="hljs-subst">${error.message}</span>`</span>;
  }

  <span class="hljs-keyword">if</span> (error <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">RangeError</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">`Range Error: <span class="hljs-subst">${error.message}</span>`</span>;
  }

  <span class="hljs-keyword">return</span> <span class="hljs-string">`Unknown error: <span class="hljs-subst">${<span class="hljs-built_in">String</span>(error)}</span>`</span>;
}

<span class="hljs-comment">// instanceof with Date, Array, etc.</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">handleValue</span>(<span class="hljs-params">value: unknown</span>): <span class="hljs-title">string</span> </span>{
  <span class="hljs-keyword">if</span> (value <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Date</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">`Date: <span class="hljs-subst">${value.toISOString()}</span>`</span>;
  }

  <span class="hljs-keyword">if</span> (value <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Array</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">`Array with <span class="hljs-subst">${value.length}</span> items`</span>;
  }

  <span class="hljs-keyword">if</span> (value <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">RegExp</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">`RegExp: <span class="hljs-subst">${value.source}</span>`</span>;
  }

  <span class="hljs-keyword">return</span> <span class="hljs-string">"Unknown value type"</span>;
}
</div></code></pre>
<h4 id="in-operator-type-guard">in Operator Type Guard</h4>
<pre class="hljs"><code><div><span class="hljs-comment">// Interfaces for 'in' operator examples</span>
<span class="hljs-keyword">interface</span> Car {
  brand: <span class="hljs-built_in">string</span>;
  model: <span class="hljs-built_in">string</span>;
  drive(): <span class="hljs-built_in">void</span>;
}

<span class="hljs-keyword">interface</span> Boat {
  name: <span class="hljs-built_in">string</span>;
  length: <span class="hljs-built_in">number</span>;
  sail(): <span class="hljs-built_in">void</span>;
}

<span class="hljs-keyword">interface</span> Plane {
  model: <span class="hljs-built_in">string</span>;
  capacity: <span class="hljs-built_in">number</span>;
  fly(): <span class="hljs-built_in">void</span>;
}

<span class="hljs-comment">// 'in' operator type guard</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">operateVehicle</span>(<span class="hljs-params">vehicle: Car | Boat | Plane</span>): <span class="hljs-title">string</span> </span>{
  <span class="hljs-keyword">if</span> (<span class="hljs-string">"drive"</span> <span class="hljs-keyword">in</span> vehicle) {
    <span class="hljs-comment">// TypeScript knows vehicle is Car</span>
    vehicle.drive();
    <span class="hljs-keyword">return</span> <span class="hljs-string">`Driving <span class="hljs-subst">${vehicle.brand}</span> <span class="hljs-subst">${vehicle.model}</span>`</span>;
  }

  <span class="hljs-keyword">if</span> (<span class="hljs-string">"sail"</span> <span class="hljs-keyword">in</span> vehicle) {
    <span class="hljs-comment">// TypeScript knows vehicle is Boat</span>
    vehicle.sail();
    <span class="hljs-keyword">return</span> <span class="hljs-string">`Sailing <span class="hljs-subst">${vehicle.name}</span> (<span class="hljs-subst">${vehicle.length}</span>ft)`</span>;
  }

  <span class="hljs-keyword">if</span> (<span class="hljs-string">"fly"</span> <span class="hljs-keyword">in</span> vehicle) {
    <span class="hljs-comment">// TypeScript knows vehicle is Plane</span>
    vehicle.fly();
    <span class="hljs-keyword">return</span> <span class="hljs-string">`Flying <span class="hljs-subst">${vehicle.model}</span> (capacity: <span class="hljs-subst">${vehicle.capacity}</span>)`</span>;
  }

  <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"Unknown vehicle type"</span>);
}

<span class="hljs-comment">// 'in' operator with optional properties</span>
<span class="hljs-keyword">interface</span> User {
  id: <span class="hljs-built_in">number</span>;
  name: <span class="hljs-built_in">string</span>;
  email?: <span class="hljs-built_in">string</span>;
  phone?: <span class="hljs-built_in">string</span>;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getContactInfo</span>(<span class="hljs-params">user: User</span>): <span class="hljs-title">string</span> </span>{
  <span class="hljs-keyword">const</span> contacts: <span class="hljs-built_in">string</span>[] = [];

  <span class="hljs-keyword">if</span> (<span class="hljs-string">"email"</span> <span class="hljs-keyword">in</span> user &amp;&amp; user.email) {
    contacts.push(<span class="hljs-string">`Email: <span class="hljs-subst">${user.email}</span>`</span>);
  }

  <span class="hljs-keyword">if</span> (<span class="hljs-string">"phone"</span> <span class="hljs-keyword">in</span> user &amp;&amp; user.phone) {
    contacts.push(<span class="hljs-string">`Phone: <span class="hljs-subst">${user.phone}</span>`</span>);
  }

  <span class="hljs-keyword">return</span> contacts.length &gt; <span class="hljs-number">0</span>
    ? contacts.join(<span class="hljs-string">", "</span>)
    : <span class="hljs-string">"No contact information available"</span>;
}

<span class="hljs-comment">// Complex 'in' operator usage</span>
<span class="hljs-keyword">interface</span> ApiSuccessResponse {
  success: <span class="hljs-literal">true</span>;
  data: <span class="hljs-built_in">any</span>;
}

<span class="hljs-keyword">interface</span> ApiErrorResponse {
  success: <span class="hljs-literal">false</span>;
  error: <span class="hljs-built_in">string</span>;
  code: <span class="hljs-built_in">number</span>;
}

<span class="hljs-keyword">type</span> ApiResponse = ApiSuccessResponse | ApiErrorResponse;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">handleApiResponse</span>(<span class="hljs-params">response: ApiResponse</span>): <span class="hljs-title">string</span> </span>{
  <span class="hljs-keyword">if</span> (<span class="hljs-string">"data"</span> <span class="hljs-keyword">in</span> response) {
    <span class="hljs-comment">// TypeScript knows response is ApiSuccessResponse</span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">`Success: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(response.data)}</span>`</span>;
  }

  <span class="hljs-keyword">if</span> (<span class="hljs-string">"error"</span> <span class="hljs-keyword">in</span> response) {
    <span class="hljs-comment">// TypeScript knows response is ApiErrorResponse</span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">`Error <span class="hljs-subst">${response.code}</span>: <span class="hljs-subst">${response.error}</span>`</span>;
  }

  <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"Invalid response format"</span>);
}
</div></code></pre>
<h2 id="custom-type-guards">Custom Type Guards</h2>
<h3 id="type-predicate-functions">Type Predicate Functions</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Basic type predicate</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isString</span>(<span class="hljs-params">value: unknown</span>): <span class="hljs-title">value</span> <span class="hljs-title">is</span> <span class="hljs-title">string</span> </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> value === <span class="hljs-string">"string"</span>;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isNumber</span>(<span class="hljs-params">value: unknown</span>): <span class="hljs-title">value</span> <span class="hljs-title">is</span> <span class="hljs-title">number</span> </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> value === <span class="hljs-string">"number"</span> &amp;&amp; !<span class="hljs-built_in">isNaN</span>(value);
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isBoolean</span>(<span class="hljs-params">value: unknown</span>): <span class="hljs-title">value</span> <span class="hljs-title">is</span> <span class="hljs-title">boolean</span> </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> value === <span class="hljs-string">"boolean"</span>;
}

<span class="hljs-comment">// Usage of type predicates</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">processUnknownValue</span>(<span class="hljs-params">value: unknown</span>): <span class="hljs-title">string</span> </span>{
  <span class="hljs-keyword">if</span> (isString(value)) {
    <span class="hljs-comment">// TypeScript knows value is string</span>
    <span class="hljs-keyword">return</span> value.toUpperCase();
  }

  <span class="hljs-keyword">if</span> (isNumber(value)) {
    <span class="hljs-comment">// TypeScript knows value is number</span>
    <span class="hljs-keyword">return</span> value.toFixed(<span class="hljs-number">2</span>);
  }

  <span class="hljs-keyword">if</span> (isBoolean(value)) {
    <span class="hljs-comment">// TypeScript knows value is boolean</span>
    <span class="hljs-keyword">return</span> value ? <span class="hljs-string">"YES"</span> : <span class="hljs-string">"NO"</span>;
  }

  <span class="hljs-keyword">return</span> <span class="hljs-string">"Unknown type"</span>;
}

<span class="hljs-comment">// Complex type predicate for objects</span>
<span class="hljs-keyword">interface</span> Person {
  name: <span class="hljs-built_in">string</span>;
  age: <span class="hljs-built_in">number</span>;
  email?: <span class="hljs-built_in">string</span>;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isPerson</span>(<span class="hljs-params">value: unknown</span>): <span class="hljs-title">value</span> <span class="hljs-title">is</span> <span class="hljs-title">Person</span> </span>{
  <span class="hljs-keyword">return</span> (
    <span class="hljs-keyword">typeof</span> value === <span class="hljs-string">"object"</span> &amp;&amp;
    value !== <span class="hljs-literal">null</span> &amp;&amp;
    <span class="hljs-string">"name"</span> <span class="hljs-keyword">in</span> value &amp;&amp;
    <span class="hljs-string">"age"</span> <span class="hljs-keyword">in</span> value &amp;&amp;
    <span class="hljs-keyword">typeof</span> (value <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>).name === <span class="hljs-string">"string"</span> &amp;&amp;
    <span class="hljs-keyword">typeof</span> (value <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>).age === <span class="hljs-string">"number"</span> &amp;&amp;
    ((value <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>).email === <span class="hljs-literal">undefined</span> ||
      <span class="hljs-keyword">typeof</span> (value <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>).email === <span class="hljs-string">"string"</span>)
  );
}

<span class="hljs-comment">// Array type predicate</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isStringArray</span>(<span class="hljs-params">value: unknown</span>): <span class="hljs-title">value</span> <span class="hljs-title">is</span> <span class="hljs-title">string</span>[] </span>{
  <span class="hljs-keyword">return</span> (
    <span class="hljs-built_in">Array</span>.isArray(value) &amp;&amp; value.every(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> <span class="hljs-keyword">typeof</span> item === <span class="hljs-string">"string"</span>)
  );
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isNumberArray</span>(<span class="hljs-params">value: unknown</span>): <span class="hljs-title">value</span> <span class="hljs-title">is</span> <span class="hljs-title">number</span>[] </span>{
  <span class="hljs-keyword">return</span> (
    <span class="hljs-built_in">Array</span>.isArray(value) &amp;&amp; value.every(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> <span class="hljs-keyword">typeof</span> item === <span class="hljs-string">"number"</span>)
  );
}

<span class="hljs-comment">// Generic type predicate</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isArrayOf</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params">
  value: unknown,
  itemGuard: (item: unknown) =&gt; item is T
</span>): <span class="hljs-title">value</span> <span class="hljs-title">is</span> <span class="hljs-title">T</span>[] </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">Array</span>.isArray(value) &amp;&amp; value.every(itemGuard);
}

<span class="hljs-comment">// Usage of generic type predicate</span>
<span class="hljs-keyword">const</span> data: unknown = [<span class="hljs-string">"hello"</span>, <span class="hljs-string">"world"</span>, <span class="hljs-string">"typescript"</span>];

<span class="hljs-keyword">if</span> (isArrayOf(data, isString)) {
  <span class="hljs-comment">// TypeScript knows data is string[]</span>
  <span class="hljs-built_in">console</span>.log(data.map(<span class="hljs-function">(<span class="hljs-params">s</span>) =&gt;</span> s.toUpperCase()));
}
</div></code></pre>
<h3 id="advanced-type-predicates">Advanced Type Predicates</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Type predicate for discriminated unions</span>
<span class="hljs-keyword">interface</span> Circle {
  kind: <span class="hljs-string">"circle"</span>;
  radius: <span class="hljs-built_in">number</span>;
}

<span class="hljs-keyword">interface</span> Rectangle {
  kind: <span class="hljs-string">"rectangle"</span>;
  width: <span class="hljs-built_in">number</span>;
  height: <span class="hljs-built_in">number</span>;
}

<span class="hljs-keyword">interface</span> Triangle {
  kind: <span class="hljs-string">"triangle"</span>;
  base: <span class="hljs-built_in">number</span>;
  height: <span class="hljs-built_in">number</span>;
}

<span class="hljs-keyword">type</span> Shape = Circle | Rectangle | Triangle;

<span class="hljs-comment">// Type predicates for each shape</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isCircle</span>(<span class="hljs-params">shape: Shape</span>): <span class="hljs-title">shape</span> <span class="hljs-title">is</span> <span class="hljs-title">Circle</span> </span>{
  <span class="hljs-keyword">return</span> shape.kind === <span class="hljs-string">"circle"</span>;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isRectangle</span>(<span class="hljs-params">shape: Shape</span>): <span class="hljs-title">shape</span> <span class="hljs-title">is</span> <span class="hljs-title">Rectangle</span> </span>{
  <span class="hljs-keyword">return</span> shape.kind === <span class="hljs-string">"rectangle"</span>;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isTriangle</span>(<span class="hljs-params">shape: Shape</span>): <span class="hljs-title">shape</span> <span class="hljs-title">is</span> <span class="hljs-title">Triangle</span> </span>{
  <span class="hljs-keyword">return</span> shape.kind === <span class="hljs-string">"triangle"</span>;
}

<span class="hljs-comment">// Calculate area using type predicates</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">calculateArea</span>(<span class="hljs-params">shape: Shape</span>): <span class="hljs-title">number</span> </span>{
  <span class="hljs-keyword">if</span> (isCircle(shape)) {
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.PI * shape.radius * shape.radius;
  }

  <span class="hljs-keyword">if</span> (isRectangle(shape)) {
    <span class="hljs-keyword">return</span> shape.width * shape.height;
  }

  <span class="hljs-keyword">if</span> (isTriangle(shape)) {
    <span class="hljs-keyword">return</span> (shape.base * shape.height) / <span class="hljs-number">2</span>;
  }

  <span class="hljs-comment">// TypeScript knows this is unreachable</span>
  <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"Unknown shape"</span>);
}

<span class="hljs-comment">// Type predicate for nullable values</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isNotNull</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params">value: T | <span class="hljs-literal">null</span></span>): <span class="hljs-title">value</span> <span class="hljs-title">is</span> <span class="hljs-title">T</span> </span>{
  <span class="hljs-keyword">return</span> value !== <span class="hljs-literal">null</span>;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isNotUndefined</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params">value: T | <span class="hljs-literal">undefined</span></span>): <span class="hljs-title">value</span> <span class="hljs-title">is</span> <span class="hljs-title">T</span> </span>{
  <span class="hljs-keyword">return</span> value !== <span class="hljs-literal">undefined</span>;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isNotNullOrUndefined</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params">value: T | <span class="hljs-literal">null</span> | <span class="hljs-literal">undefined</span></span>): <span class="hljs-title">value</span> <span class="hljs-title">is</span> <span class="hljs-title">T</span> </span>{
  <span class="hljs-keyword">return</span> value !== <span class="hljs-literal">null</span> &amp;&amp; value !== <span class="hljs-literal">undefined</span>;
}

<span class="hljs-comment">// Usage with array filtering</span>
<span class="hljs-keyword">const</span> mixedArray: (<span class="hljs-built_in">string</span> | <span class="hljs-literal">null</span> | <span class="hljs-literal">undefined</span>)[] = [
  <span class="hljs-string">"hello"</span>,
  <span class="hljs-literal">null</span>,
  <span class="hljs-string">"world"</span>,
  <span class="hljs-literal">undefined</span>,
  <span class="hljs-string">"typescript"</span>,
];

<span class="hljs-keyword">const</span> validStrings = mixedArray.filter(isNotNullOrUndefined);
<span class="hljs-comment">// TypeScript knows validStrings is string[]</span>

<span class="hljs-built_in">console</span>.log(validStrings.map(<span class="hljs-function">(<span class="hljs-params">s</span>) =&gt;</span> s.toUpperCase()));
</div></code></pre>
<h3 id="type-guards-for-api-responses">Type Guards for API Responses</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// API response type guards</span>
<span class="hljs-keyword">interface</span> User {
  id: <span class="hljs-built_in">number</span>;
  name: <span class="hljs-built_in">string</span>;
  email: <span class="hljs-built_in">string</span>;
  createdAt: <span class="hljs-built_in">string</span>;
}

<span class="hljs-keyword">interface</span> Product {
  id: <span class="hljs-built_in">number</span>;
  name: <span class="hljs-built_in">string</span>;
  price: <span class="hljs-built_in">number</span>;
  category: <span class="hljs-built_in">string</span>;
}

<span class="hljs-comment">// Type guard for User</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isUser</span>(<span class="hljs-params">value: unknown</span>): <span class="hljs-title">value</span> <span class="hljs-title">is</span> <span class="hljs-title">User</span> </span>{
  <span class="hljs-keyword">return</span> (
    <span class="hljs-keyword">typeof</span> value === <span class="hljs-string">"object"</span> &amp;&amp;
    value !== <span class="hljs-literal">null</span> &amp;&amp;
    <span class="hljs-keyword">typeof</span> (value <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>).id === <span class="hljs-string">"number"</span> &amp;&amp;
    <span class="hljs-keyword">typeof</span> (value <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>).name === <span class="hljs-string">"string"</span> &amp;&amp;
    <span class="hljs-keyword">typeof</span> (value <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>).email === <span class="hljs-string">"string"</span> &amp;&amp;
    <span class="hljs-keyword">typeof</span> (value <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>).createdAt === <span class="hljs-string">"string"</span>
  );
}

<span class="hljs-comment">// Type guard for Product</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isProduct</span>(<span class="hljs-params">value: unknown</span>): <span class="hljs-title">value</span> <span class="hljs-title">is</span> <span class="hljs-title">Product</span> </span>{
  <span class="hljs-keyword">return</span> (
    <span class="hljs-keyword">typeof</span> value === <span class="hljs-string">"object"</span> &amp;&amp;
    value !== <span class="hljs-literal">null</span> &amp;&amp;
    <span class="hljs-keyword">typeof</span> (value <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>).id === <span class="hljs-string">"number"</span> &amp;&amp;
    <span class="hljs-keyword">typeof</span> (value <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>).name === <span class="hljs-string">"string"</span> &amp;&amp;
    <span class="hljs-keyword">typeof</span> (value <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>).price === <span class="hljs-string">"number"</span> &amp;&amp;
    <span class="hljs-keyword">typeof</span> (value <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>).category === <span class="hljs-string">"string"</span>
  );
}

<span class="hljs-comment">// Generic API response type guard</span>
<span class="hljs-keyword">interface</span> ApiResponse&lt;T&gt; {
  success: <span class="hljs-built_in">boolean</span>;
  data?: T;
  error?: <span class="hljs-built_in">string</span>;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isApiResponse</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params">
  value: unknown,
  dataGuard: (data: unknown) =&gt; data is T
</span>): <span class="hljs-title">value</span> <span class="hljs-title">is</span> <span class="hljs-title">ApiResponse</span>&lt;<span class="hljs-title">T</span>&gt; </span>{
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> value !== <span class="hljs-string">"object"</span> || value === <span class="hljs-literal">null</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }

  <span class="hljs-keyword">const</span> response = value <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>;

  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> response.success !== <span class="hljs-string">"boolean"</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }

  <span class="hljs-keyword">if</span> (response.data !== <span class="hljs-literal">undefined</span> &amp;&amp; !dataGuard(response.data)) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }

  <span class="hljs-keyword">if</span> (response.error !== <span class="hljs-literal">undefined</span> &amp;&amp; <span class="hljs-keyword">typeof</span> response.error !== <span class="hljs-string">"string"</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }

  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
}

<span class="hljs-comment">// Usage</span>
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fetchUser</span>(<span class="hljs-params">id: <span class="hljs-built_in">number</span></span>): <span class="hljs-title">Promise</span>&lt;<span class="hljs-title">User</span>&gt; </span>{
  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> fetch(<span class="hljs-string">`/api/users/<span class="hljs-subst">${id}</span>`</span>);
  <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> response.json();

  <span class="hljs-keyword">if</span> (isApiResponse(data, isUser)) {
    <span class="hljs-keyword">if</span> (data.success &amp;&amp; data.data) {
      <span class="hljs-keyword">return</span> data.data; <span class="hljs-comment">// TypeScript knows this is User</span>
    }
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(data.error || <span class="hljs-string">"Unknown error"</span>);
  }

  <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"Invalid API response format"</span>);
}
</div></code></pre>
<h2 id="discriminated-unions-and-exhaustive-checking">Discriminated Unions and Exhaustive Checking</h2>
<h3 id="basic-discriminated-unions">Basic Discriminated Unions</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Discriminated union with literal types</span>
<span class="hljs-keyword">interface</span> LoadingState {
  status: <span class="hljs-string">"loading"</span>;
}

<span class="hljs-keyword">interface</span> SuccessState {
  status: <span class="hljs-string">"success"</span>;
  data: <span class="hljs-built_in">any</span>;
}

<span class="hljs-keyword">interface</span> ErrorState {
  status: <span class="hljs-string">"error"</span>;
  error: <span class="hljs-built_in">string</span>;
}

<span class="hljs-keyword">type</span> AsyncState = LoadingState | SuccessState | ErrorState;

<span class="hljs-comment">// Type guard using discriminant property</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">handleAsyncState</span>(<span class="hljs-params">state: AsyncState</span>): <span class="hljs-title">string</span> </span>{
  <span class="hljs-keyword">switch</span> (state.status) {
    <span class="hljs-keyword">case</span> <span class="hljs-string">"loading"</span>:
      <span class="hljs-keyword">return</span> <span class="hljs-string">"Loading..."</span>;

    <span class="hljs-keyword">case</span> <span class="hljs-string">"success"</span>:
      <span class="hljs-comment">// TypeScript knows state is SuccessState</span>
      <span class="hljs-keyword">return</span> <span class="hljs-string">`Success: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(state.data)}</span>`</span>;

    <span class="hljs-keyword">case</span> <span class="hljs-string">"error"</span>:
      <span class="hljs-comment">// TypeScript knows state is ErrorState</span>
      <span class="hljs-keyword">return</span> <span class="hljs-string">`Error: <span class="hljs-subst">${state.error}</span>`</span>;

    <span class="hljs-keyword">default</span>:
      <span class="hljs-comment">// Exhaustive check - TypeScript ensures all cases are handled</span>
      <span class="hljs-keyword">const</span> exhaustiveCheck: never = state;
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">`Unhandled state: <span class="hljs-subst">${exhaustiveCheck}</span>`</span>);
  }
}

<span class="hljs-comment">// Type predicate for discriminated union</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isSuccessState</span>(<span class="hljs-params">state: AsyncState</span>): <span class="hljs-title">state</span> <span class="hljs-title">is</span> <span class="hljs-title">SuccessState</span> </span>{
  <span class="hljs-keyword">return</span> state.status === <span class="hljs-string">"success"</span>;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isErrorState</span>(<span class="hljs-params">state: AsyncState</span>): <span class="hljs-title">state</span> <span class="hljs-title">is</span> <span class="hljs-title">ErrorState</span> </span>{
  <span class="hljs-keyword">return</span> state.status === <span class="hljs-string">"error"</span>;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isLoadingState</span>(<span class="hljs-params">state: AsyncState</span>): <span class="hljs-title">state</span> <span class="hljs-title">is</span> <span class="hljs-title">LoadingState</span> </span>{
  <span class="hljs-keyword">return</span> state.status === <span class="hljs-string">"loading"</span>;
}
</div></code></pre>
<h3 id="complex-discriminated-unions">Complex Discriminated Unions</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Complex discriminated union for form validation</span>
<span class="hljs-keyword">interface</span> ValidField {
  <span class="hljs-keyword">type</span>: <span class="hljs-string">"valid"</span>;
  value: <span class="hljs-built_in">string</span>;
}

<span class="hljs-keyword">interface</span> InvalidField {
  <span class="hljs-keyword">type</span>: <span class="hljs-string">"invalid"</span>;
  value: <span class="hljs-built_in">string</span>;
  errors: <span class="hljs-built_in">string</span>[];
}

<span class="hljs-keyword">interface</span> PendingField {
  <span class="hljs-keyword">type</span>: <span class="hljs-string">"pending"</span>;
  value: <span class="hljs-built_in">string</span>;
  validationPromise: <span class="hljs-built_in">Promise</span>&lt;<span class="hljs-built_in">boolean</span>&gt;;
}

<span class="hljs-keyword">type</span> FieldState = ValidField | InvalidField | PendingField;

<span class="hljs-comment">// Type guards for field states</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isValidField</span>(<span class="hljs-params">field: FieldState</span>): <span class="hljs-title">field</span> <span class="hljs-title">is</span> <span class="hljs-title">ValidField</span> </span>{
  <span class="hljs-keyword">return</span> field.type === <span class="hljs-string">"valid"</span>;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isInvalidField</span>(<span class="hljs-params">field: FieldState</span>): <span class="hljs-title">field</span> <span class="hljs-title">is</span> <span class="hljs-title">InvalidField</span> </span>{
  <span class="hljs-keyword">return</span> field.type === <span class="hljs-string">"invalid"</span>;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isPendingField</span>(<span class="hljs-params">field: FieldState</span>): <span class="hljs-title">field</span> <span class="hljs-title">is</span> <span class="hljs-title">PendingField</span> </span>{
  <span class="hljs-keyword">return</span> field.type === <span class="hljs-string">"pending"</span>;
}

<span class="hljs-comment">// Form validation handler</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">renderField</span>(<span class="hljs-params">field: FieldState</span>): <span class="hljs-title">string</span> </span>{
  <span class="hljs-keyword">if</span> (isValidField(field)) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">`‚úì <span class="hljs-subst">${field.value}</span>`</span>;
  }

  <span class="hljs-keyword">if</span> (isInvalidField(field)) {
    <span class="hljs-keyword">const</span> errorList = field.errors.join(<span class="hljs-string">", "</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-string">`‚úó <span class="hljs-subst">${field.value}</span> (<span class="hljs-subst">${errorList}</span>)`</span>;
  }

  <span class="hljs-keyword">if</span> (isPendingField(field)) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">`‚è≥ <span class="hljs-subst">${field.value}</span> (validating...)`</span>;
  }

  <span class="hljs-comment">// Exhaustive check</span>
  <span class="hljs-keyword">const</span> exhaustiveCheck: never = field;
  <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">`Unhandled field type: <span class="hljs-subst">${exhaustiveCheck}</span>`</span>);
}

<span class="hljs-comment">// Event system with discriminated unions</span>
<span class="hljs-keyword">interface</span> UserLoginEvent {
  <span class="hljs-keyword">type</span>: <span class="hljs-string">"user:login"</span>;
  userId: <span class="hljs-built_in">string</span>;
  timestamp: <span class="hljs-built_in">Date</span>;
}

<span class="hljs-keyword">interface</span> UserLogoutEvent {
  <span class="hljs-keyword">type</span>: <span class="hljs-string">"user:logout"</span>;
  userId: <span class="hljs-built_in">string</span>;
  timestamp: <span class="hljs-built_in">Date</span>;
}

<span class="hljs-keyword">interface</span> ProductCreatedEvent {
  <span class="hljs-keyword">type</span>: <span class="hljs-string">"product:created"</span>;
  productId: <span class="hljs-built_in">number</span>;
  name: <span class="hljs-built_in">string</span>;
  timestamp: <span class="hljs-built_in">Date</span>;
}

<span class="hljs-keyword">interface</span> ProductUpdatedEvent {
  <span class="hljs-keyword">type</span>: <span class="hljs-string">"product:updated"</span>;
  productId: <span class="hljs-built_in">number</span>;
  changes: Record&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt;;
  timestamp: <span class="hljs-built_in">Date</span>;
}

<span class="hljs-keyword">type</span> AppEvent =
  | UserLoginEvent
  | UserLogoutEvent
  | ProductCreatedEvent
  | ProductUpdatedEvent;

<span class="hljs-comment">// Event handler with type guards</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">handleEvent</span>(<span class="hljs-params">event: AppEvent</span>): <span class="hljs-title">void</span> </span>{
  <span class="hljs-keyword">switch</span> (event.type) {
    <span class="hljs-keyword">case</span> <span class="hljs-string">"user:login"</span>:
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`User <span class="hljs-subst">${event.userId}</span> logged in at <span class="hljs-subst">${event.timestamp}</span>`</span>);
      <span class="hljs-keyword">break</span>;

    <span class="hljs-keyword">case</span> <span class="hljs-string">"user:logout"</span>:
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`User <span class="hljs-subst">${event.userId}</span> logged out at <span class="hljs-subst">${event.timestamp}</span>`</span>);
      <span class="hljs-keyword">break</span>;

    <span class="hljs-keyword">case</span> <span class="hljs-string">"product:created"</span>:
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`Product "<span class="hljs-subst">${event.name}</span>" created with ID <span class="hljs-subst">${event.productId}</span>`</span>);
      <span class="hljs-keyword">break</span>;

    <span class="hljs-keyword">case</span> <span class="hljs-string">"product:updated"</span>:
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`Product <span class="hljs-subst">${event.productId}</span> updated:`</span>, event.changes);
      <span class="hljs-keyword">break</span>;

    <span class="hljs-keyword">default</span>:
      <span class="hljs-comment">// Exhaustive check ensures all event types are handled</span>
      <span class="hljs-keyword">const</span> exhaustiveCheck: never = event;
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">`Unhandled event type: <span class="hljs-subst">${exhaustiveCheck}</span>`</span>);
  }
}
</div></code></pre>
<h2 id="assertion-functions">Assertion Functions</h2>
<h3 id="basic-assertion-functions">Basic Assertion Functions</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Basic assertion function</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">assert</span>(<span class="hljs-params">condition: <span class="hljs-built_in">any</span>, message?: <span class="hljs-built_in">string</span></span>): <span class="hljs-title">asserts</span> <span class="hljs-title">condition</span> </span>{
  <span class="hljs-keyword">if</span> (!condition) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(message || <span class="hljs-string">"Assertion failed"</span>);
  }
}

<span class="hljs-comment">// Type assertion function</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">assertIsString</span>(<span class="hljs-params">value: unknown</span>): <span class="hljs-title">asserts</span> <span class="hljs-title">value</span> <span class="hljs-title">is</span> <span class="hljs-title">string</span> </span>{
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> value !== <span class="hljs-string">"string"</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">`Expected string, got <span class="hljs-subst">${<span class="hljs-keyword">typeof</span> value}</span>`</span>);
  }
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">assertIsNumber</span>(<span class="hljs-params">value: unknown</span>): <span class="hljs-title">asserts</span> <span class="hljs-title">value</span> <span class="hljs-title">is</span> <span class="hljs-title">number</span> </span>{
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> value !== <span class="hljs-string">"number"</span> || <span class="hljs-built_in">isNaN</span>(value)) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">`Expected number, got <span class="hljs-subst">${<span class="hljs-keyword">typeof</span> value}</span>`</span>);
  }
}

<span class="hljs-comment">// Usage of assertion functions</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">processUserInput</span>(<span class="hljs-params">input: unknown</span>): <span class="hljs-title">string</span> </span>{
  assertIsString(input);
  <span class="hljs-comment">// TypeScript now knows input is string</span>
  <span class="hljs-keyword">return</span> input.toUpperCase();
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">calculateSquare</span>(<span class="hljs-params">input: unknown</span>): <span class="hljs-title">number</span> </span>{
  assertIsNumber(input);
  <span class="hljs-comment">// TypeScript now knows input is number</span>
  <span class="hljs-keyword">return</span> input * input;
}

<span class="hljs-comment">// Complex assertion function</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">assertIsUser</span>(<span class="hljs-params">value: unknown</span>): <span class="hljs-title">asserts</span> <span class="hljs-title">value</span> <span class="hljs-title">is</span> <span class="hljs-title">User</span> </span>{
  <span class="hljs-keyword">if</span> (!isPerson(value)) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"Value is not a valid User object"</span>);
  }
}

<span class="hljs-comment">// Assertion function for non-null values</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">assertNotNull</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params">value: T | <span class="hljs-literal">null</span></span>): <span class="hljs-title">asserts</span> <span class="hljs-title">value</span> <span class="hljs-title">is</span> <span class="hljs-title">T</span> </span>{
  <span class="hljs-keyword">if</span> (value === <span class="hljs-literal">null</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"Value is null"</span>);
  }
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">assertNotUndefined</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params">value: T | <span class="hljs-literal">undefined</span></span>): <span class="hljs-title">asserts</span> <span class="hljs-title">value</span> <span class="hljs-title">is</span> <span class="hljs-title">T</span> </span>{
  <span class="hljs-keyword">if</span> (value === <span class="hljs-literal">undefined</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"Value is undefined"</span>);
  }
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">assertNotNullOrUndefined</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params">
  value: T | <span class="hljs-literal">null</span> | <span class="hljs-literal">undefined</span>
</span>): <span class="hljs-title">asserts</span> <span class="hljs-title">value</span> <span class="hljs-title">is</span> <span class="hljs-title">T</span> </span>{
  <span class="hljs-keyword">if</span> (value === <span class="hljs-literal">null</span> || value === <span class="hljs-literal">undefined</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"Value is null or undefined"</span>);
  }
}
</div></code></pre>
<h3 id="advanced-assertion-functions">Advanced Assertion Functions</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Assertion function for array validation</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">assertIsArrayOf</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params">
  value: unknown,
  itemAssertion: (item: unknown) =&gt; asserts item is T
</span>): <span class="hljs-title">asserts</span> <span class="hljs-title">value</span> <span class="hljs-title">is</span> <span class="hljs-title">T</span>[] </span>{
  <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">Array</span>.isArray(value)) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"Value is not an array"</span>);
  }

  value.forEach(<span class="hljs-function">(<span class="hljs-params">item, index</span>) =&gt;</span> {
    <span class="hljs-keyword">try</span> {
      itemAssertion(item);
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">`Item at index <span class="hljs-subst">${index}</span> is invalid: <span class="hljs-subst">${error.message}</span>`</span>);
    }
  });
}

<span class="hljs-comment">// Assertion function for object properties</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">assertHasProperty</span>&lt;<span class="hljs-title">T</span>, <span class="hljs-title">K</span> <span class="hljs-title">extends</span> <span class="hljs-title">string</span>&gt;(<span class="hljs-params">
  obj: T,
  key: K
</span>): <span class="hljs-title">asserts</span> <span class="hljs-title">obj</span> <span class="hljs-title">is</span> <span class="hljs-title">T</span> &amp; <span class="hljs-title">Record</span>&lt;<span class="hljs-title">K</span>, <span class="hljs-title">unknown</span>&gt; </span>{
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> obj !== <span class="hljs-string">"object"</span> || obj === <span class="hljs-literal">null</span> || !(key <span class="hljs-keyword">in</span> obj)) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">`Object does not have property '<span class="hljs-subst">${key}</span>'`</span>);
  }
}

<span class="hljs-comment">// Usage examples</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">processApiData</span>(<span class="hljs-params">data: unknown</span>): <span class="hljs-title">void</span> </span>{
  assertIsArrayOf(data, assertIsUser);
  <span class="hljs-comment">// TypeScript now knows data is User[]</span>

  data.forEach(<span class="hljs-function">(<span class="hljs-params">user</span>) =&gt;</span> {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`Processing user: <span class="hljs-subst">${user.name}</span>`</span>);
  });
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">processConfig</span>(<span class="hljs-params">config: unknown</span>): <span class="hljs-title">void</span> </span>{
  assertHasProperty(config, <span class="hljs-string">"apiUrl"</span>);
  assertHasProperty(config, <span class="hljs-string">"timeout"</span>);

  <span class="hljs-comment">// TypeScript knows config has apiUrl and timeout properties</span>
  assertIsString(config.apiUrl);
  assertIsNumber(config.timeout);

  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`API URL: <span class="hljs-subst">${config.apiUrl}</span>, Timeout: <span class="hljs-subst">${config.timeout}</span>`</span>);
}
</div></code></pre>
<h2 id="practical-examples">Practical Examples</h2>
<h3 id="form-validation-with-type-guards">Form Validation with Type Guards</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Form field types</span>
<span class="hljs-keyword">interface</span> FormField {
  name: <span class="hljs-built_in">string</span>;
  value: <span class="hljs-built_in">string</span>;
  required: <span class="hljs-built_in">boolean</span>;
}

<span class="hljs-keyword">interface</span> EmailField <span class="hljs-keyword">extends</span> FormField {
  <span class="hljs-keyword">type</span>: <span class="hljs-string">"email"</span>;
}

<span class="hljs-keyword">interface</span> PasswordField <span class="hljs-keyword">extends</span> FormField {
  <span class="hljs-keyword">type</span>: <span class="hljs-string">"password"</span>;
  minLength: <span class="hljs-built_in">number</span>;
}

<span class="hljs-keyword">interface</span> NumberField <span class="hljs-keyword">extends</span> FormField {
  <span class="hljs-keyword">type</span>: <span class="hljs-string">"number"</span>;
  min?: <span class="hljs-built_in">number</span>;
  max?: <span class="hljs-built_in">number</span>;
}

<span class="hljs-keyword">type</span> Field = EmailField | PasswordField | NumberField;

<span class="hljs-comment">// Type guards for field types</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isEmailField</span>(<span class="hljs-params">field: Field</span>): <span class="hljs-title">field</span> <span class="hljs-title">is</span> <span class="hljs-title">EmailField</span> </span>{
  <span class="hljs-keyword">return</span> field.type === <span class="hljs-string">"email"</span>;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isPasswordField</span>(<span class="hljs-params">field: Field</span>): <span class="hljs-title">field</span> <span class="hljs-title">is</span> <span class="hljs-title">PasswordField</span> </span>{
  <span class="hljs-keyword">return</span> field.type === <span class="hljs-string">"password"</span>;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isNumberField</span>(<span class="hljs-params">field: Field</span>): <span class="hljs-title">field</span> <span class="hljs-title">is</span> <span class="hljs-title">NumberField</span> </span>{
  <span class="hljs-keyword">return</span> field.type === <span class="hljs-string">"number"</span>;
}

<span class="hljs-comment">// Validation functions</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">validateEmail</span>(<span class="hljs-params">email: <span class="hljs-built_in">string</span></span>): <span class="hljs-title">boolean</span> </span>{
  <span class="hljs-keyword">const</span> emailRegex = <span class="hljs-regexp">/^[^\s@]+@[^\s@]+\.[^\s@]+$/</span>;
  <span class="hljs-keyword">return</span> emailRegex.test(email);
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">validatePassword</span>(<span class="hljs-params">password: <span class="hljs-built_in">string</span>, minLength: <span class="hljs-built_in">number</span></span>): <span class="hljs-title">boolean</span> </span>{
  <span class="hljs-keyword">return</span> password.length &gt;= minLength;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">validateNumber</span>(<span class="hljs-params">value: <span class="hljs-built_in">string</span>, min?: <span class="hljs-built_in">number</span>, max?: <span class="hljs-built_in">number</span></span>): <span class="hljs-title">boolean</span> </span>{
  <span class="hljs-keyword">const</span> num = <span class="hljs-built_in">parseFloat</span>(value);
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">isNaN</span>(num)) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  <span class="hljs-keyword">if</span> (min !== <span class="hljs-literal">undefined</span> &amp;&amp; num &lt; min) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  <span class="hljs-keyword">if</span> (max !== <span class="hljs-literal">undefined</span> &amp;&amp; num &gt; max) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
}

<span class="hljs-comment">// Main validation function using type guards</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">validateField</span>(<span class="hljs-params">field: Field</span>): </span>{ isValid: <span class="hljs-built_in">boolean</span>; error?: <span class="hljs-built_in">string</span> } {
  <span class="hljs-keyword">if</span> (field.required &amp;&amp; !field.value.trim()) {
    <span class="hljs-keyword">return</span> { isValid: <span class="hljs-literal">false</span>, error: <span class="hljs-string">`<span class="hljs-subst">${field.name}</span> is required`</span> };
  }

  <span class="hljs-keyword">if</span> (isEmailField(field)) {
    <span class="hljs-keyword">if</span> (field.value &amp;&amp; !validateEmail(field.value)) {
      <span class="hljs-keyword">return</span> { isValid: <span class="hljs-literal">false</span>, error: <span class="hljs-string">"Invalid email format"</span> };
    }
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isPasswordField(field)) {
    <span class="hljs-keyword">if</span> (field.value &amp;&amp; !validatePassword(field.value, field.minLength)) {
      <span class="hljs-keyword">return</span> {
        isValid: <span class="hljs-literal">false</span>,
        error: <span class="hljs-string">`Password must be at least <span class="hljs-subst">${field.minLength}</span> characters`</span>,
      };
    }
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isNumberField(field)) {
    <span class="hljs-keyword">if</span> (field.value &amp;&amp; !validateNumber(field.value, field.min, field.max)) {
      <span class="hljs-keyword">let</span> error = <span class="hljs-string">"Invalid number"</span>;
      <span class="hljs-keyword">if</span> (field.min !== <span class="hljs-literal">undefined</span> &amp;&amp; field.max !== <span class="hljs-literal">undefined</span>) {
        error += <span class="hljs-string">` (must be between <span class="hljs-subst">${field.min}</span> and <span class="hljs-subst">${field.max}</span>)`</span>;
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (field.min !== <span class="hljs-literal">undefined</span>) {
        error += <span class="hljs-string">` (must be at least <span class="hljs-subst">${field.min}</span>)`</span>;
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (field.max !== <span class="hljs-literal">undefined</span>) {
        error += <span class="hljs-string">` (must be at most <span class="hljs-subst">${field.max}</span>)`</span>;
      }
      <span class="hljs-keyword">return</span> { isValid: <span class="hljs-literal">false</span>, error };
    }
  }

  <span class="hljs-keyword">return</span> { isValid: <span class="hljs-literal">true</span> };
}
</div></code></pre>
<h3 id="api-client-with-type-guards">API Client with Type Guards</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// API response types</span>
<span class="hljs-keyword">interface</span> ApiSuccessResponse&lt;T&gt; {
  success: <span class="hljs-literal">true</span>;
  data: T;
  timestamp: <span class="hljs-built_in">string</span>;
}

<span class="hljs-keyword">interface</span> ApiErrorResponse {
  success: <span class="hljs-literal">false</span>;
  error: {
    code: <span class="hljs-built_in">string</span>;
    message: <span class="hljs-built_in">string</span>;
    details?: <span class="hljs-built_in">any</span>;
  };
  timestamp: <span class="hljs-built_in">string</span>;
}

<span class="hljs-keyword">type</span> ApiResponse&lt;T&gt; = ApiSuccessResponse&lt;T&gt; | ApiErrorResponse;

<span class="hljs-comment">// Type guards for API responses</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isApiSuccessResponse</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params">
  response: ApiResponse&lt;T&gt;
</span>): <span class="hljs-title">response</span> <span class="hljs-title">is</span> <span class="hljs-title">ApiSuccessResponse</span>&lt;<span class="hljs-title">T</span>&gt; </span>{
  <span class="hljs-keyword">return</span> response.success === <span class="hljs-literal">true</span>;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isApiErrorResponse</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params">
  response: ApiResponse&lt;T&gt;
</span>): <span class="hljs-title">response</span> <span class="hljs-title">is</span> <span class="hljs-title">ApiErrorResponse</span> </span>{
  <span class="hljs-keyword">return</span> response.success === <span class="hljs-literal">false</span>;
}

<span class="hljs-comment">// Generic API client</span>
<span class="hljs-keyword">class</span> ApiClient {
  <span class="hljs-keyword">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> baseUrl: <span class="hljs-built_in">string</span></span>) {}

  <span class="hljs-keyword">async</span> request&lt;T&gt;(endpoint: <span class="hljs-built_in">string</span>, options: RequestInit = {}): <span class="hljs-built_in">Promise</span>&lt;T&gt; {
    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> fetch(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-keyword">this</span>.baseUrl}</span><span class="hljs-subst">${endpoint}</span>`</span>, {
      headers: {
        <span class="hljs-string">"Content-Type"</span>: <span class="hljs-string">"application/json"</span>,
        ...options.headers,
      },
      ...options,
    });

    <span class="hljs-keyword">const</span> data: ApiResponse&lt;T&gt; = <span class="hljs-keyword">await</span> response.json();

    <span class="hljs-keyword">if</span> (isApiSuccessResponse(data)) {
      <span class="hljs-keyword">return</span> data.data;
    }

    <span class="hljs-keyword">if</span> (isApiErrorResponse(data)) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">`API Error <span class="hljs-subst">${data.error.code}</span>: <span class="hljs-subst">${data.error.message}</span>`</span>);
    }

    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"Invalid API response format"</span>);
  }

  <span class="hljs-keyword">async</span> <span class="hljs-keyword">get</span>&lt;T&gt;(endpoint: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">Promise</span>&lt;T&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.request&lt;T&gt;(endpoint, { method: <span class="hljs-string">"GET"</span> });
  }

  <span class="hljs-keyword">async</span> post&lt;T&gt;(endpoint: <span class="hljs-built_in">string</span>, body: <span class="hljs-built_in">any</span>): <span class="hljs-built_in">Promise</span>&lt;T&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.request&lt;T&gt;(endpoint, {
      method: <span class="hljs-string">"POST"</span>,
      body: <span class="hljs-built_in">JSON</span>.stringify(body),
    });
  }
}

<span class="hljs-comment">// Usage with type safety</span>
<span class="hljs-keyword">const</span> apiClient = <span class="hljs-keyword">new</span> ApiClient(<span class="hljs-string">"https://api.example.com"</span>);

<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fetchUser</span>(<span class="hljs-params">id: <span class="hljs-built_in">number</span></span>): <span class="hljs-title">Promise</span>&lt;<span class="hljs-title">User</span>&gt; </span>{
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> apiClient.get&lt;User&gt;(<span class="hljs-string">`/users/<span class="hljs-subst">${id}</span>`</span>);
    <span class="hljs-keyword">return</span> user;
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-built_in">console</span>.error(<span class="hljs-string">"Failed to fetch user:"</span>, error);
    <span class="hljs-keyword">throw</span> error;
  }
}
</div></code></pre>
<h2 id="best-practices">Best Practices</h2>
<h3 id="%E2%9C%85-good-practices">‚úÖ Good Practices</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Use type predicates for reusable type checking</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isValidEmail</span>(<span class="hljs-params">value: <span class="hljs-built_in">string</span></span>): <span class="hljs-title">boolean</span> </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-regexp">/^[^\s@]+@[^\s@]+\.[^\s@]+$/</span>.test(value);
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isUser</span>(<span class="hljs-params">value: unknown</span>): <span class="hljs-title">value</span> <span class="hljs-title">is</span> <span class="hljs-title">User</span> </span>{
  <span class="hljs-keyword">return</span> (
    <span class="hljs-keyword">typeof</span> value === <span class="hljs-string">"object"</span> &amp;&amp;
    value !== <span class="hljs-literal">null</span> &amp;&amp;
    <span class="hljs-string">"id"</span> <span class="hljs-keyword">in</span> value &amp;&amp;
    <span class="hljs-string">"name"</span> <span class="hljs-keyword">in</span> value &amp;&amp;
    <span class="hljs-string">"email"</span> <span class="hljs-keyword">in</span> value &amp;&amp;
    <span class="hljs-keyword">typeof</span> (value <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>).id === <span class="hljs-string">"number"</span> &amp;&amp;
    <span class="hljs-keyword">typeof</span> (value <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>).name === <span class="hljs-string">"string"</span> &amp;&amp;
    isValidEmail((value <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>).email)
  );
}

<span class="hljs-comment">// Use discriminated unions for state management</span>
<span class="hljs-keyword">type</span> RequestState =
  | { status: <span class="hljs-string">"idle"</span> }
  | { status: <span class="hljs-string">"loading"</span> }
  | { status: <span class="hljs-string">"success"</span>; data: <span class="hljs-built_in">any</span> }
  | { status: <span class="hljs-string">"error"</span>; error: <span class="hljs-built_in">string</span> };

<span class="hljs-comment">// Use assertion functions for runtime validation</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">assertIsPositiveNumber</span>(<span class="hljs-params">value: unknown</span>): <span class="hljs-title">asserts</span> <span class="hljs-title">value</span> <span class="hljs-title">is</span> <span class="hljs-title">number</span> </span>{
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> value !== <span class="hljs-string">"number"</span> || value &lt;= <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"Expected positive number"</span>);
  }
}

<span class="hljs-comment">// Use exhaustive checking with never</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">handleState</span>(<span class="hljs-params">state: RequestState</span>): <span class="hljs-title">string</span> </span>{
  <span class="hljs-keyword">switch</span> (state.status) {
    <span class="hljs-keyword">case</span> <span class="hljs-string">"idle"</span>:
      <span class="hljs-keyword">return</span> <span class="hljs-string">"Ready"</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">"loading"</span>:
      <span class="hljs-keyword">return</span> <span class="hljs-string">"Loading..."</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">"success"</span>:
      <span class="hljs-keyword">return</span> <span class="hljs-string">`Success: <span class="hljs-subst">${state.data}</span>`</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">"error"</span>:
      <span class="hljs-keyword">return</span> <span class="hljs-string">`Error: <span class="hljs-subst">${state.error}</span>`</span>;
    <span class="hljs-keyword">default</span>:
      <span class="hljs-keyword">const</span> exhaustiveCheck: never = state;
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">`Unhandled state: <span class="hljs-subst">${exhaustiveCheck}</span>`</span>);
  }
}
</div></code></pre>
<h3 id="%E2%9D%8C-avoid">‚ùå Avoid</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Don't use type assertions without validation</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">badTypeAssertion</span>(<span class="hljs-params">value: unknown</span>): <span class="hljs-title">User</span> </span>{
  <span class="hljs-keyword">return</span> value <span class="hljs-keyword">as</span> User; <span class="hljs-comment">// Dangerous - no runtime check</span>
}

<span class="hljs-comment">// Don't ignore exhaustive checking</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">incompleteHandler</span>(<span class="hljs-params">state: RequestState</span>): <span class="hljs-title">string</span> </span>{
  <span class="hljs-keyword">switch</span> (state.status) {
    <span class="hljs-keyword">case</span> <span class="hljs-string">"idle"</span>:
      <span class="hljs-keyword">return</span> <span class="hljs-string">"Ready"</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">"loading"</span>:
      <span class="hljs-keyword">return</span> <span class="hljs-string">"Loading..."</span>;
    <span class="hljs-comment">// Missing success and error cases</span>
  }
  <span class="hljs-keyword">return</span> <span class="hljs-string">"Unknown"</span>; <span class="hljs-comment">// This hides missing cases</span>
}

<span class="hljs-comment">// Don't make type guards too complex</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">overlyComplexGuard</span>(<span class="hljs-params">value: unknown</span>): <span class="hljs-title">value</span> <span class="hljs-title">is</span> <span class="hljs-title">ComplexType</span> </span>{
  <span class="hljs-comment">// 50 lines of validation logic...</span>
  <span class="hljs-comment">// Better to break into smaller, focused guards</span>
}

<span class="hljs-comment">// Don't use any in type guards</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">badGuard</span>(<span class="hljs-params">value: <span class="hljs-built_in">any</span></span>): <span class="hljs-title">value</span> <span class="hljs-title">is</span> <span class="hljs-title">User</span> </span>{
  <span class="hljs-keyword">return</span> value.id &amp;&amp; value.name; <span class="hljs-comment">// Loses type safety</span>
}
</div></code></pre>
<h2 id="summary-checklist">Summary Checklist</h2>
<ul>
<li><input type="checkbox" id="checkbox74"><label for="checkbox74">Use built-in type guards (</label><code>typeof</code>, <code>instanceof</code>, <code>in</code>)</li>
<li><input type="checkbox" id="checkbox75"><label for="checkbox75">Create custom type predicates with </label><code>value is Type</code></li>
<li><input type="checkbox" id="checkbox76"><label for="checkbox76">Use discriminated unions for complex state management</label></li>
<li><input type="checkbox" id="checkbox77"><label for="checkbox77">Implement exhaustive checking with </label><code>never</code></li>
<li><input type="checkbox" id="checkbox78"><label for="checkbox78">Use assertion functions for runtime validation</label></li>
<li><input type="checkbox" id="checkbox79"><label for="checkbox79">Combine type guards with control flow analysis</label></li>
<li><input type="checkbox" id="checkbox80"><label for="checkbox80">Validate API responses with type guards</label></li>
<li><input type="checkbox" id="checkbox81"><label for="checkbox81">Use type guards in array filtering and mapping</label></li>
<li><input type="checkbox" id="checkbox82"><label for="checkbox82">Avoid unsafe type assertions</label></li>
<li><input type="checkbox" id="checkbox83"><label for="checkbox83">Keep type guards focused and reusable</label></li>
</ul>
<h2 id="next-steps">Next Steps</h2>
<p>Now that you understand type guards and advanced type checking, let's explore advanced TypeScript features like keyof, typeof, and conditional types.</p>
<hr>
<p><em>Continue to: <a href="13-advanced-features.md">Advanced TypeScript Features</a></em></p>
<h1 id="advanced-typescript-features">Advanced TypeScript Features</h1>
<blockquote>
<p>Explore advanced TypeScript features including keyof, typeof, conditional types, mapped types, and template literal types</p>
</blockquote>
<h2 id="keyof-operator">keyof Operator</h2>
<p>The <code>keyof</code> operator creates a union type of all property names of a given type.</p>
<h3 id="basic-keyof-usage">Basic keyof Usage</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Basic keyof example</span>
<span class="hljs-keyword">interface</span> User {
  id: <span class="hljs-built_in">number</span>;
  name: <span class="hljs-built_in">string</span>;
  email: <span class="hljs-built_in">string</span>;
  age: <span class="hljs-built_in">number</span>;
}

<span class="hljs-comment">// keyof creates a union of property names</span>
<span class="hljs-keyword">type</span> UserKeys = keyof User; <span class="hljs-comment">// "id" | "name" | "email" | "age"</span>

<span class="hljs-comment">// Using keyof in function parameters</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getProperty</span>&lt;<span class="hljs-title">T</span>, <span class="hljs-title">K</span> <span class="hljs-title">extends</span> <span class="hljs-title">keyof</span> <span class="hljs-title">T</span>&gt;(<span class="hljs-params">obj: T, key: K</span>): <span class="hljs-title">T</span>[<span class="hljs-title">K</span>] </span>{
  <span class="hljs-keyword">return</span> obj[key];
}

<span class="hljs-keyword">const</span> user: User = {
  id: <span class="hljs-number">1</span>,
  name: <span class="hljs-string">"John Doe"</span>,
  email: <span class="hljs-string">"john@example.com"</span>,
  age: <span class="hljs-number">30</span>,
};

<span class="hljs-keyword">const</span> name = getProperty(user, <span class="hljs-string">"name"</span>); <span class="hljs-comment">// Type: string</span>
<span class="hljs-keyword">const</span> age = getProperty(user, <span class="hljs-string">"age"</span>); <span class="hljs-comment">// Type: number</span>
<span class="hljs-comment">// const invalid = getProperty(user, "invalid"); // Error: Argument of type '"invalid"' is not assignable</span>

<span class="hljs-comment">// keyof with arrays</span>
<span class="hljs-keyword">const</span> fruits = [<span class="hljs-string">"apple"</span>, <span class="hljs-string">"banana"</span>, <span class="hljs-string">"orange"</span>] <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>;
<span class="hljs-keyword">type</span> FruitKeys = keyof <span class="hljs-keyword">typeof</span> fruits; <span class="hljs-comment">// "0" | "1" | "2" | "length" | "toString" | ...</span>

<span class="hljs-comment">// keyof with string literal types</span>
<span class="hljs-keyword">type</span> Colors = {
  red: <span class="hljs-built_in">string</span>;
  green: <span class="hljs-built_in">string</span>;
  blue: <span class="hljs-built_in">string</span>;
};

<span class="hljs-keyword">type</span> ColorKeys = keyof Colors; <span class="hljs-comment">// "red" | "green" | "blue"</span>
</div></code></pre>
<h3 id="advanced-keyof-patterns">Advanced keyof Patterns</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// keyof with generic constraints</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">updateProperty</span>&lt;<span class="hljs-title">T</span>, <span class="hljs-title">K</span> <span class="hljs-title">extends</span> <span class="hljs-title">keyof</span> <span class="hljs-title">T</span>&gt;(<span class="hljs-params">obj: T, key: K, value: T[K]</span>): <span class="hljs-title">T</span> </span>{
  <span class="hljs-keyword">return</span> {
    ...obj,
    [key]: value,
  };
}

<span class="hljs-keyword">const</span> updatedUser = updateProperty(user, <span class="hljs-string">"name"</span>, <span class="hljs-string">"Jane Doe"</span>);
<span class="hljs-keyword">const</span> updatedAge = updateProperty(user, <span class="hljs-string">"age"</span>, <span class="hljs-number">31</span>);
<span class="hljs-comment">// const invalid = updateProperty(user, "name", 123); // Error: Type 'number' is not assignable to type 'string'</span>

<span class="hljs-comment">// keyof with multiple objects</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">copyProperty</span>&lt;<span class="hljs-title">T</span>, <span class="hljs-title">U</span>, <span class="hljs-title">K</span> <span class="hljs-title">extends</span> <span class="hljs-title">keyof</span> <span class="hljs-title">T</span> &amp; <span class="hljs-title">keyof</span> <span class="hljs-title">U</span>&gt;(<span class="hljs-params">
  source: T,
  target: U,
  key: K
</span>): <span class="hljs-title">U</span> </span>{
  <span class="hljs-keyword">return</span> {
    ...target,
    [key]: source[key],
  };
}

<span class="hljs-keyword">interface</span> Employee {
  id: <span class="hljs-built_in">number</span>;
  name: <span class="hljs-built_in">string</span>;
  department: <span class="hljs-built_in">string</span>;
}

<span class="hljs-keyword">const</span> employee: Employee = {
  id: <span class="hljs-number">1</span>,
  name: <span class="hljs-string">"John"</span>,
  department: <span class="hljs-string">"Engineering"</span>,
};

<span class="hljs-comment">// Can copy properties that exist in both types</span>
<span class="hljs-keyword">const</span> result = copyProperty(user, employee, <span class="hljs-string">"name"</span>); <span class="hljs-comment">// OK: both have 'name'</span>
<span class="hljs-comment">// const invalid = copyProperty(user, employee, "email"); // Error: 'email' doesn't exist in Employee</span>

<span class="hljs-comment">// keyof with conditional types</span>
<span class="hljs-keyword">type</span> StringPropertyNames&lt;T&gt; = {
  [K <span class="hljs-keyword">in</span> keyof T]: T[K] <span class="hljs-keyword">extends</span> <span class="hljs-built_in">string</span> ? K : never;
}[keyof T];

<span class="hljs-keyword">type</span> UserStringProps = StringPropertyNames&lt;User&gt;; <span class="hljs-comment">// "name" | "email"</span>

<span class="hljs-comment">// keyof with filtering</span>
<span class="hljs-keyword">type</span> PickByType&lt;T, U&gt; = {
  [P <span class="hljs-keyword">in</span> keyof T <span class="hljs-keyword">as</span> T[P] <span class="hljs-keyword">extends</span> U ? P : never]: T[P];
};

<span class="hljs-keyword">type</span> UserStringProperties = PickByType&lt;User, <span class="hljs-built_in">string</span>&gt;; <span class="hljs-comment">// { name: string; email: string }</span>
<span class="hljs-keyword">type</span> UserNumberProperties = PickByType&lt;User, <span class="hljs-built_in">number</span>&gt;; <span class="hljs-comment">// { id: number; age: number }</span>
</div></code></pre>
<h2 id="typeof-operator">typeof Operator</h2>
<p>The <code>typeof</code> operator captures the type of a value or variable.</p>
<h3 id="basic-typeof-usage">Basic typeof Usage</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// typeof with variables</span>
<span class="hljs-keyword">const</span> message = <span class="hljs-string">"Hello, TypeScript!"</span>;
<span class="hljs-keyword">type</span> MessageType = <span class="hljs-keyword">typeof</span> message; <span class="hljs-comment">// string</span>

<span class="hljs-keyword">const</span> count = <span class="hljs-number">42</span>;
<span class="hljs-keyword">type</span> CountType = <span class="hljs-keyword">typeof</span> count; <span class="hljs-comment">// number</span>

<span class="hljs-keyword">const</span> isActive = <span class="hljs-literal">true</span>;
<span class="hljs-keyword">type</span> IsActiveType = <span class="hljs-keyword">typeof</span> isActive; <span class="hljs-comment">// boolean</span>

<span class="hljs-comment">// typeof with objects</span>
<span class="hljs-keyword">const</span> config = {
  apiUrl: <span class="hljs-string">"https://api.example.com"</span>,
  timeout: <span class="hljs-number">5000</span>,
  retries: <span class="hljs-number">3</span>,
  debug: <span class="hljs-literal">false</span>,
};

<span class="hljs-keyword">type</span> Config = <span class="hljs-keyword">typeof</span> config;
<span class="hljs-comment">// {</span>
<span class="hljs-comment">//   apiUrl: string;</span>
<span class="hljs-comment">//   timeout: number;</span>
<span class="hljs-comment">//   retries: number;</span>
<span class="hljs-comment">//   debug: boolean;</span>
<span class="hljs-comment">// }</span>

<span class="hljs-comment">// typeof with functions</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">calculateArea</span>(<span class="hljs-params">width: <span class="hljs-built_in">number</span>, height: <span class="hljs-built_in">number</span></span>): <span class="hljs-title">number</span> </span>{
  <span class="hljs-keyword">return</span> width * height;
}

<span class="hljs-keyword">type</span> CalculateAreaType = <span class="hljs-keyword">typeof</span> calculateArea;
<span class="hljs-comment">// (width: number, height: number) =&gt; number</span>

<span class="hljs-comment">// typeof with classes</span>
<span class="hljs-keyword">class</span> DatabaseConnection {
  <span class="hljs-keyword">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">public</span> connectionString: <span class="hljs-built_in">string</span></span>) {}

  connect(): <span class="hljs-built_in">void</span> {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Connecting to database..."</span>);
  }
}

<span class="hljs-keyword">type</span> DatabaseConnectionType = <span class="hljs-keyword">typeof</span> DatabaseConnection;
<span class="hljs-comment">// typeof DatabaseConnection (constructor type)</span>

<span class="hljs-keyword">type</span> DatabaseInstanceType = InstanceType&lt;<span class="hljs-keyword">typeof</span> DatabaseConnection&gt;;
<span class="hljs-comment">// DatabaseConnection (instance type)</span>
</div></code></pre>
<h3 id="advanced-typeof-patterns">Advanced typeof Patterns</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// typeof with const assertions</span>
<span class="hljs-keyword">const</span> themes = {
  light: {
    background: <span class="hljs-string">"#ffffff"</span>,
    text: <span class="hljs-string">"#000000"</span>,
  },
  dark: {
    background: <span class="hljs-string">"#000000"</span>,
    text: <span class="hljs-string">"#ffffff"</span>,
  },
} <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>;

<span class="hljs-keyword">type</span> Themes = <span class="hljs-keyword">typeof</span> themes;
<span class="hljs-comment">// {</span>
<span class="hljs-comment">//   readonly light: {</span>
<span class="hljs-comment">//     readonly background: "#ffffff";</span>
<span class="hljs-comment">//     readonly text: "#000000";</span>
<span class="hljs-comment">//   };</span>
<span class="hljs-comment">//   readonly dark: {</span>
<span class="hljs-comment">//     readonly background: "#000000";</span>
<span class="hljs-comment">//     readonly text: "#ffffff";</span>
<span class="hljs-comment">//   };</span>
<span class="hljs-comment">// }</span>

<span class="hljs-keyword">type</span> ThemeNames = keyof <span class="hljs-keyword">typeof</span> themes; <span class="hljs-comment">// "light" | "dark"</span>
<span class="hljs-keyword">type</span> ThemeColors = (<span class="hljs-keyword">typeof</span> themes)[<span class="hljs-string">"light"</span>]; <span class="hljs-comment">// { readonly background: "#ffffff"; readonly text: "#000000"; }</span>

<span class="hljs-comment">// typeof with arrays</span>
<span class="hljs-keyword">const</span> statusCodes = [<span class="hljs-number">200</span>, <span class="hljs-number">404</span>, <span class="hljs-number">500</span>] <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>;
<span class="hljs-keyword">type</span> StatusCodes = <span class="hljs-keyword">typeof</span> statusCodes; <span class="hljs-comment">// readonly [200, 404, 500]</span>
<span class="hljs-keyword">type</span> StatusCode = (<span class="hljs-keyword">typeof</span> statusCodes)[<span class="hljs-built_in">number</span>]; <span class="hljs-comment">// 200 | 404 | 500</span>

<span class="hljs-comment">// typeof with enum-like objects</span>
<span class="hljs-keyword">const</span> UserRole = {
  ADMIN: <span class="hljs-string">"admin"</span>,
  USER: <span class="hljs-string">"user"</span>,
  GUEST: <span class="hljs-string">"guest"</span>,
} <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>;

<span class="hljs-keyword">type</span> UserRoleType = <span class="hljs-keyword">typeof</span> UserRole;
<span class="hljs-keyword">type</span> UserRoleValue = (<span class="hljs-keyword">typeof</span> UserRole)[keyof <span class="hljs-keyword">typeof</span> UserRole]; <span class="hljs-comment">// "admin" | "user" | "guest"</span>

<span class="hljs-comment">// typeof with complex nested structures</span>
<span class="hljs-keyword">const</span> apiEndpoints = {
  users: {
    list: <span class="hljs-string">"/api/users"</span>,
    create: <span class="hljs-string">"/api/users"</span>,
    update: <span class="hljs-function">(<span class="hljs-params">id: <span class="hljs-built_in">number</span></span>) =&gt;</span> <span class="hljs-string">`/api/users/<span class="hljs-subst">${id}</span>`</span>,
    <span class="hljs-keyword">delete</span>: <span class="hljs-function">(<span class="hljs-params">id: <span class="hljs-built_in">number</span></span>) =&gt;</span> <span class="hljs-string">`/api/users/<span class="hljs-subst">${id}</span>`</span>,
  },
  products: {
    list: <span class="hljs-string">"/api/products"</span>,
    create: <span class="hljs-string">"/api/products"</span>,
    update: <span class="hljs-function">(<span class="hljs-params">id: <span class="hljs-built_in">number</span></span>) =&gt;</span> <span class="hljs-string">`/api/products/<span class="hljs-subst">${id}</span>`</span>,
  },
} <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>;

<span class="hljs-keyword">type</span> ApiEndpoints = <span class="hljs-keyword">typeof</span> apiEndpoints;
<span class="hljs-keyword">type</span> UserEndpoints = <span class="hljs-keyword">typeof</span> apiEndpoints.users;
<span class="hljs-keyword">type</span> UpdateUserEndpoint = <span class="hljs-keyword">typeof</span> apiEndpoints.users.update; <span class="hljs-comment">// (id: number) =&gt; string</span>
</div></code></pre>
<h2 id="conditional-types">Conditional Types</h2>
<p>Conditional types allow you to create types that depend on a condition.</p>
<h3 id="basic-conditional-types">Basic Conditional Types</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Basic conditional type syntax: T extends U ? X : Y</span>
<span class="hljs-keyword">type</span> IsString&lt;T&gt; = T <span class="hljs-keyword">extends</span> <span class="hljs-built_in">string</span> ? <span class="hljs-literal">true</span> : <span class="hljs-literal">false</span>;

<span class="hljs-keyword">type</span> Test1 = IsString&lt;<span class="hljs-built_in">string</span>&gt;; <span class="hljs-comment">// true</span>
<span class="hljs-keyword">type</span> Test2 = IsString&lt;<span class="hljs-built_in">number</span>&gt;; <span class="hljs-comment">// false</span>
<span class="hljs-keyword">type</span> Test3 = IsString&lt;<span class="hljs-string">"hello"</span>&gt;; <span class="hljs-comment">// true</span>

<span class="hljs-comment">// Conditional type with generic constraints</span>
<span class="hljs-keyword">type</span> ArrayElement&lt;T&gt; = T <span class="hljs-keyword">extends</span> (infer U)[] ? U : never;

<span class="hljs-keyword">type</span> StringArrayElement = ArrayElement&lt;<span class="hljs-built_in">string</span>[]&gt;; <span class="hljs-comment">// string</span>
<span class="hljs-keyword">type</span> NumberArrayElement = ArrayElement&lt;<span class="hljs-built_in">number</span>[]&gt;; <span class="hljs-comment">// number</span>
<span class="hljs-keyword">type</span> NotArrayElement = ArrayElement&lt;<span class="hljs-built_in">string</span>&gt;; <span class="hljs-comment">// never</span>

<span class="hljs-comment">// Conditional type for function return types</span>
<span class="hljs-keyword">type</span> ReturnType&lt;T&gt; = T <span class="hljs-keyword">extends</span> (...args: <span class="hljs-built_in">any</span>[]) =&gt; infer R ? R : never;

<span class="hljs-keyword">type</span> FunctionReturn = ReturnType&lt;<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-built_in">string</span>&gt;; <span class="hljs-comment">// string</span>
<span class="hljs-keyword">type</span> MethodReturn = ReturnType&lt;<span class="hljs-function">(<span class="hljs-params">x: <span class="hljs-built_in">number</span></span>) =&gt;</span> <span class="hljs-built_in">boolean</span>&gt;; <span class="hljs-comment">// boolean</span>
<span class="hljs-keyword">type</span> NotFunctionReturn = ReturnType&lt;<span class="hljs-built_in">string</span>&gt;; <span class="hljs-comment">// never</span>

<span class="hljs-comment">// Conditional type for promise unwrapping</span>
<span class="hljs-keyword">type</span> Awaited&lt;T&gt; = T <span class="hljs-keyword">extends</span> <span class="hljs-built_in">Promise</span>&lt;infer U&gt; ? U : T;

<span class="hljs-keyword">type</span> PromiseString = Awaited&lt;<span class="hljs-built_in">Promise</span>&lt;<span class="hljs-built_in">string</span>&gt;&gt;; <span class="hljs-comment">// string</span>
<span class="hljs-keyword">type</span> PromiseNumber = Awaited&lt;<span class="hljs-built_in">Promise</span>&lt;<span class="hljs-built_in">number</span>&gt;&gt;; <span class="hljs-comment">// number</span>
<span class="hljs-keyword">type</span> NotPromise = Awaited&lt;<span class="hljs-built_in">string</span>&gt;; <span class="hljs-comment">// string</span>
</div></code></pre>
<h3 id="advanced-conditional-types">Advanced Conditional Types</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Nested conditional types</span>
<span class="hljs-keyword">type</span> DeepAwaited&lt;T&gt; = T <span class="hljs-keyword">extends</span> <span class="hljs-built_in">Promise</span>&lt;infer U&gt; ? DeepAwaited&lt;U&gt; : T;

<span class="hljs-keyword">type</span> NestedPromise = DeepAwaited&lt;<span class="hljs-built_in">Promise</span>&lt;<span class="hljs-built_in">Promise</span>&lt;<span class="hljs-built_in">string</span>&gt;&gt;&gt;; <span class="hljs-comment">// string</span>

<span class="hljs-comment">// Conditional types with union distribution</span>
<span class="hljs-keyword">type</span> ToArray&lt;T&gt; = T <span class="hljs-keyword">extends</span> <span class="hljs-built_in">any</span> ? T[] : never;

<span class="hljs-keyword">type</span> UnionArrays = ToArray&lt;<span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span>&gt;; <span class="hljs-comment">// string[] | number[]</span>

<span class="hljs-comment">// Non-distributive conditional types</span>
<span class="hljs-keyword">type</span> ToArrayNonDistributive&lt;T&gt; = [T] <span class="hljs-keyword">extends</span> [<span class="hljs-built_in">any</span>] ? T[] : never;

<span class="hljs-keyword">type</span> NonDistributiveResult = ToArrayNonDistributive&lt;<span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span>&gt;; <span class="hljs-comment">// (string | number)[]</span>

<span class="hljs-comment">// Conditional types for filtering</span>
<span class="hljs-keyword">type</span> NonNullable&lt;T&gt; = T <span class="hljs-keyword">extends</span> <span class="hljs-literal">null</span> | <span class="hljs-literal">undefined</span> ? never : T;

<span class="hljs-keyword">type</span> FilteredType = NonNullable&lt;<span class="hljs-built_in">string</span> | <span class="hljs-literal">null</span> | <span class="hljs-literal">undefined</span>&gt;; <span class="hljs-comment">// string</span>

<span class="hljs-comment">// Conditional types with multiple conditions</span>
<span class="hljs-keyword">type</span> TypeName&lt;T&gt; = T <span class="hljs-keyword">extends</span> <span class="hljs-built_in">string</span>
  ? <span class="hljs-string">"string"</span>
  : T <span class="hljs-keyword">extends</span> <span class="hljs-built_in">number</span>
  ? <span class="hljs-string">"number"</span>
  : T <span class="hljs-keyword">extends</span> <span class="hljs-built_in">boolean</span>
  ? <span class="hljs-string">"boolean"</span>
  : T <span class="hljs-keyword">extends</span> <span class="hljs-literal">undefined</span>
  ? <span class="hljs-string">"undefined"</span>
  : T <span class="hljs-keyword">extends</span> <span class="hljs-built_in">Function</span>
  ? <span class="hljs-string">"function"</span>
  : <span class="hljs-string">"object"</span>;

<span class="hljs-keyword">type</span> StringTypeName = TypeName&lt;<span class="hljs-built_in">string</span>&gt;; <span class="hljs-comment">// "string"</span>
<span class="hljs-keyword">type</span> NumberTypeName = TypeName&lt;<span class="hljs-number">42</span>&gt;; <span class="hljs-comment">// "number"</span>
<span class="hljs-keyword">type</span> FunctionTypeName = TypeName&lt;<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-built_in">void</span>&gt;; <span class="hljs-comment">// "function"</span>

<span class="hljs-comment">// Conditional types for object property extraction</span>
<span class="hljs-keyword">type</span> GetProperty&lt;T, K&gt; = K <span class="hljs-keyword">extends</span> keyof T ? T[K] : never;

<span class="hljs-keyword">type</span> UserName = GetProperty&lt;User, <span class="hljs-string">"name"</span>&gt;; <span class="hljs-comment">// string</span>
<span class="hljs-keyword">type</span> UserInvalid = GetProperty&lt;User, <span class="hljs-string">"invalid"</span>&gt;; <span class="hljs-comment">// never</span>
</div></code></pre>
<h3 id="practical-conditional-types">Practical Conditional Types</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// API response type transformation</span>
<span class="hljs-keyword">type</span> ApiResponse&lt;T&gt; = {
  data: T;
  status: <span class="hljs-built_in">number</span>;
  message: <span class="hljs-built_in">string</span>;
};

<span class="hljs-keyword">type</span> UnwrapApiResponse&lt;T&gt; = T <span class="hljs-keyword">extends</span> ApiResponse&lt;infer U&gt; ? U : T;

<span class="hljs-keyword">type</span> UserData = UnwrapApiResponse&lt;ApiResponse&lt;User&gt;&gt;; <span class="hljs-comment">// User</span>
<span class="hljs-keyword">type</span> DirectData = UnwrapApiResponse&lt;<span class="hljs-built_in">string</span>&gt;; <span class="hljs-comment">// string</span>

<span class="hljs-comment">// Function parameter extraction</span>
<span class="hljs-keyword">type</span> Parameters&lt;T <span class="hljs-keyword">extends</span> (...args: <span class="hljs-built_in">any</span>) =&gt; <span class="hljs-built_in">any</span>&gt; = T <span class="hljs-keyword">extends</span> (
  ...args: infer P
) =&gt; <span class="hljs-built_in">any</span>
  ? P
  : never;

<span class="hljs-keyword">type</span> CalcParams = Parameters&lt;<span class="hljs-keyword">typeof</span> calculateArea&gt;; <span class="hljs-comment">// [number, number]</span>

<span class="hljs-comment">// Object value types</span>
<span class="hljs-keyword">type</span> ValueOf&lt;T&gt; = T[keyof T];

<span class="hljs-keyword">type</span> UserValues = ValueOf&lt;User&gt;; <span class="hljs-comment">// string | number</span>

<span class="hljs-comment">// Required vs Optional property detection</span>
<span class="hljs-keyword">type</span> RequiredKeys&lt;T&gt; = {
  [K <span class="hljs-keyword">in</span> keyof T]-?: {} <span class="hljs-keyword">extends</span> Pick&lt;T, K&gt; ? never : K;
}[keyof T];

<span class="hljs-keyword">type</span> OptionalKeys&lt;T&gt; = {
  [K <span class="hljs-keyword">in</span> keyof T]-?: {} <span class="hljs-keyword">extends</span> Pick&lt;T, K&gt; ? K : never;
}[keyof T];

<span class="hljs-keyword">interface</span> PartialUser {
  id: <span class="hljs-built_in">number</span>;
  name?: <span class="hljs-built_in">string</span>;
  email?: <span class="hljs-built_in">string</span>;
}

<span class="hljs-keyword">type</span> RequiredUserKeys = RequiredKeys&lt;PartialUser&gt;; <span class="hljs-comment">// "id"</span>
<span class="hljs-keyword">type</span> OptionalUserKeys = OptionalKeys&lt;PartialUser&gt;; <span class="hljs-comment">// "name" | "email"</span>
</div></code></pre>
<h2 id="mapped-types">Mapped Types</h2>
<p>Mapped types create new types by transforming properties of existing types.</p>
<h3 id="basic-mapped-types">Basic Mapped Types</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Basic mapped type syntax</span>
<span class="hljs-keyword">type</span> Readonly&lt;T&gt; = {
  readonly [P <span class="hljs-keyword">in</span> keyof T]: T[P];
};

<span class="hljs-keyword">type</span> Partial&lt;T&gt; = {
  [P <span class="hljs-keyword">in</span> keyof T]?: T[P];
};

<span class="hljs-keyword">type</span> Required&lt;T&gt; = {
  [P <span class="hljs-keyword">in</span> keyof T]-?: T[P];
};

<span class="hljs-comment">// Usage</span>
<span class="hljs-keyword">type</span> ReadonlyUser = Readonly&lt;User&gt;;
<span class="hljs-keyword">type</span> PartialUser = Partial&lt;User&gt;;
<span class="hljs-keyword">type</span> RequiredUser = Required&lt;PartialUser&gt;;

<span class="hljs-comment">// Custom mapped types</span>
<span class="hljs-keyword">type</span> Nullable&lt;T&gt; = {
  [P <span class="hljs-keyword">in</span> keyof T]: T[P] | <span class="hljs-literal">null</span>;
};

<span class="hljs-keyword">type</span> Stringify&lt;T&gt; = {
  [P <span class="hljs-keyword">in</span> keyof T]: <span class="hljs-built_in">string</span>;
};

<span class="hljs-keyword">type</span> NullableUser = Nullable&lt;User&gt;; <span class="hljs-comment">// All properties can be null</span>
<span class="hljs-keyword">type</span> StringifiedUser = Stringify&lt;User&gt;; <span class="hljs-comment">// All properties are strings</span>
</div></code></pre>
<h3 id="advanced-mapped-types">Advanced Mapped Types</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Mapped types with key remapping</span>
<span class="hljs-keyword">type</span> Getters&lt;T&gt; = {
  [P <span class="hljs-keyword">in</span> keyof T <span class="hljs-keyword">as</span> <span class="hljs-string">`get<span class="hljs-subst">${Capitalize&lt;<span class="hljs-built_in">string</span> &amp; P&gt;}</span>`</span>]: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> T[P];
};

<span class="hljs-keyword">type</span> UserGetters = Getters&lt;User&gt;;
<span class="hljs-comment">// {</span>
<span class="hljs-comment">//   getId: () =&gt; number;</span>
<span class="hljs-comment">//   getName: () =&gt; string;</span>
<span class="hljs-comment">//   getEmail: () =&gt; string;</span>
<span class="hljs-comment">//   getAge: () =&gt; number;</span>
<span class="hljs-comment">// }</span>

<span class="hljs-comment">// Mapped types with filtering</span>
<span class="hljs-keyword">type</span> PickByType&lt;T, U&gt; = {
  [P <span class="hljs-keyword">in</span> keyof T <span class="hljs-keyword">as</span> T[P] <span class="hljs-keyword">extends</span> U ? P : never]: T[P];
};

<span class="hljs-keyword">type</span> UserStringProps = PickByType&lt;User, <span class="hljs-built_in">string</span>&gt;; <span class="hljs-comment">// { name: string; email: string }</span>

<span class="hljs-comment">// Mapped types with transformation</span>
<span class="hljs-keyword">type</span> EventHandlers&lt;T&gt; = {
  [P <span class="hljs-keyword">in</span> keyof T <span class="hljs-keyword">as</span> <span class="hljs-string">`on<span class="hljs-subst">${Capitalize&lt;<span class="hljs-built_in">string</span> &amp; P&gt;}</span>Change`</span>]: <span class="hljs-function">(<span class="hljs-params">value: T[P]</span>) =&gt;</span> <span class="hljs-built_in">void</span>;
};

<span class="hljs-keyword">type</span> UserEventHandlers = EventHandlers&lt;User&gt;;
<span class="hljs-comment">// {</span>
<span class="hljs-comment">//   onIdChange: (value: number) =&gt; void;</span>
<span class="hljs-comment">//   onNameChange: (value: string) =&gt; void;</span>
<span class="hljs-comment">//   onEmailChange: (value: string) =&gt; void;</span>
<span class="hljs-comment">//   onAgeChange: (value: number) =&gt; void;</span>
<span class="hljs-comment">// }</span>

<span class="hljs-comment">// Deep mapped types</span>
<span class="hljs-keyword">type</span> DeepReadonly&lt;T&gt; = {
  readonly [P <span class="hljs-keyword">in</span> keyof T]: T[P] <span class="hljs-keyword">extends</span> object ? DeepReadonly&lt;T[P]&gt; : T[P];
};

<span class="hljs-keyword">type</span> DeepPartial&lt;T&gt; = {
  [P <span class="hljs-keyword">in</span> keyof T]?: T[P] <span class="hljs-keyword">extends</span> object ? DeepPartial&lt;T[P]&gt; : T[P];
};

<span class="hljs-keyword">interface</span> NestedUser {
  id: <span class="hljs-built_in">number</span>;
  profile: {
    name: <span class="hljs-built_in">string</span>;
    settings: {
      theme: <span class="hljs-built_in">string</span>;
      notifications: <span class="hljs-built_in">boolean</span>;
    };
  };
}

<span class="hljs-keyword">type</span> DeepReadonlyUser = DeepReadonly&lt;NestedUser&gt;;
<span class="hljs-keyword">type</span> DeepPartialUser = DeepPartial&lt;NestedUser&gt;;
</div></code></pre>
<h2 id="template-literal-types">Template Literal Types</h2>
<p>Template literal types allow you to create types using template literal syntax.</p>
<h3 id="basic-template-literal-types">Basic Template Literal Types</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Basic template literal types</span>
<span class="hljs-keyword">type</span> Greeting = <span class="hljs-string">`Hello, <span class="hljs-subst">${<span class="hljs-built_in">string</span>}</span>!`</span>;

<span class="hljs-keyword">type</span> PersonalGreeting = <span class="hljs-string">`Hello, <span class="hljs-subst">${<span class="hljs-string">"John"</span> | <span class="hljs-string">"Jane"</span>}</span>!`</span>; <span class="hljs-comment">// "Hello, John!" | "Hello, Jane!"</span>

<span class="hljs-comment">// Template literals with unions</span>
<span class="hljs-keyword">type</span> HttpMethod = <span class="hljs-string">"GET"</span> | <span class="hljs-string">"POST"</span> | <span class="hljs-string">"PUT"</span> | <span class="hljs-string">"DELETE"</span>;
<span class="hljs-keyword">type</span> ApiEndpoint = <span class="hljs-string">`/api/<span class="hljs-subst">${<span class="hljs-built_in">string</span>}</span>`</span>;
<span class="hljs-keyword">type</span> HttpRequest = <span class="hljs-string">`<span class="hljs-subst">${HttpMethod}</span> <span class="hljs-subst">${ApiEndpoint}</span>`</span>;

<span class="hljs-comment">// Examples of HttpRequest:</span>
<span class="hljs-comment">// "GET /api/users" | "POST /api/users" | "PUT /api/users" | "DELETE /api/users" | ...</span>

<span class="hljs-comment">// Template literals with specific strings</span>
<span class="hljs-keyword">type</span> Color = <span class="hljs-string">"red"</span> | <span class="hljs-string">"green"</span> | <span class="hljs-string">"blue"</span>;
<span class="hljs-keyword">type</span> Shade = <span class="hljs-string">"light"</span> | <span class="hljs-string">"dark"</span>;
<span class="hljs-keyword">type</span> ColorVariant = <span class="hljs-string">`<span class="hljs-subst">${Shade}</span>-<span class="hljs-subst">${Color}</span>`</span>;
<span class="hljs-comment">// "light-red" | "light-green" | "light-blue" | "dark-red" | "dark-green" | "dark-blue"</span>
</div></code></pre>
<h3 id="advanced-template-literal-types">Advanced Template Literal Types</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Template literals with utility types</span>
<span class="hljs-keyword">type</span> EventName&lt;T&gt; = {
  [K <span class="hljs-keyword">in</span> keyof T]: <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-built_in">string</span> &amp; K}</span>Changed`</span>;
}[keyof T];

<span class="hljs-keyword">type</span> UserEventNames = EventName&lt;User&gt;; <span class="hljs-comment">// "idChanged" | "nameChanged" | "emailChanged" | "ageChanged"</span>

<span class="hljs-comment">// Template literals for CSS properties</span>
<span class="hljs-keyword">type</span> CSSUnit = <span class="hljs-string">"px"</span> | <span class="hljs-string">"em"</span> | <span class="hljs-string">"rem"</span> | <span class="hljs-string">"%"</span> | <span class="hljs-string">"vh"</span> | <span class="hljs-string">"vw"</span>;
<span class="hljs-keyword">type</span> CSSValue = <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-built_in">number</span>}</span><span class="hljs-subst">${CSSUnit}</span>`</span>;

<span class="hljs-keyword">type</span> Margin = CSSValue; <span class="hljs-comment">// "10px" | "1em" | "100%" | etc.</span>

<span class="hljs-comment">// Template literals for database operations</span>
<span class="hljs-keyword">type</span> TableName = <span class="hljs-string">"users"</span> | <span class="hljs-string">"products"</span> | <span class="hljs-string">"orders"</span>;
<span class="hljs-keyword">type</span> Operation = <span class="hljs-string">"select"</span> | <span class="hljs-string">"insert"</span> | <span class="hljs-string">"update"</span> | <span class="hljs-string">"delete"</span>;
<span class="hljs-keyword">type</span> SqlOperation = <span class="hljs-string">`<span class="hljs-subst">${Operation}</span>_<span class="hljs-subst">${TableName}</span>`</span>;
<span class="hljs-comment">// "select_users" | "insert_users" | "update_users" | "delete_users" | ...</span>

<span class="hljs-comment">// Template literals with conditional types</span>
<span class="hljs-keyword">type</span> AddPrefix&lt;T, P <span class="hljs-keyword">extends</span> <span class="hljs-built_in">string</span>&gt; = {
  [K <span class="hljs-keyword">in</span> keyof T <span class="hljs-keyword">as</span> K <span class="hljs-keyword">extends</span> <span class="hljs-built_in">string</span> ? <span class="hljs-string">`<span class="hljs-subst">${P}</span><span class="hljs-subst">${K}</span>`</span> : never]: T[K];
};

<span class="hljs-keyword">type</span> PrefixedUser = AddPrefix&lt;User, <span class="hljs-string">"user_"</span>&gt;;
<span class="hljs-comment">// {</span>
<span class="hljs-comment">//   user_id: number;</span>
<span class="hljs-comment">//   user_name: string;</span>
<span class="hljs-comment">//   user_email: string;</span>
<span class="hljs-comment">//   user_age: number;</span>
<span class="hljs-comment">// }</span>

<span class="hljs-comment">// Template literals for path building</span>
<span class="hljs-keyword">type</span> PathSegment = <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span>;
<span class="hljs-keyword">type</span> BuildPath&lt;T <span class="hljs-keyword">extends</span> readonly PathSegment[]&gt; = T <span class="hljs-keyword">extends</span> readonly [
  infer First,
  ...infer Rest
]
  ? First <span class="hljs-keyword">extends</span> PathSegment
    ? Rest <span class="hljs-keyword">extends</span> readonly PathSegment[]
      ? Rest[<span class="hljs-string">"length"</span>] <span class="hljs-keyword">extends</span> <span class="hljs-number">0</span>
        ? <span class="hljs-string">`<span class="hljs-subst">${First}</span>`</span>
        : <span class="hljs-string">`<span class="hljs-subst">${First}</span>/<span class="hljs-subst">${BuildPath&lt;Rest&gt;}</span>`</span>
      : never
    : never
  : <span class="hljs-string">""</span>;

<span class="hljs-keyword">type</span> ApiPath = BuildPath&lt;[<span class="hljs-string">"api"</span>, <span class="hljs-string">"v1"</span>, <span class="hljs-string">"users"</span>, <span class="hljs-built_in">number</span>]&gt;; <span class="hljs-comment">// "api/v1/users/number"</span>
</div></code></pre>
<h3 id="practical-template-literal-examples">Practical Template Literal Examples</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Type-safe event system</span>
<span class="hljs-keyword">type</span> EventMap = {
  user: { id: <span class="hljs-built_in">number</span>; name: <span class="hljs-built_in">string</span> };
  product: { id: <span class="hljs-built_in">number</span>; price: <span class="hljs-built_in">number</span> };
  order: { id: <span class="hljs-built_in">number</span>; total: <span class="hljs-built_in">number</span> };
};

<span class="hljs-keyword">type</span> EventType = keyof EventMap;
<span class="hljs-keyword">type</span> EventAction = <span class="hljs-string">"created"</span> | <span class="hljs-string">"updated"</span> | <span class="hljs-string">"deleted"</span>;
<span class="hljs-keyword">type</span> EventName = <span class="hljs-string">`<span class="hljs-subst">${EventType}</span>:<span class="hljs-subst">${EventAction}</span>`</span>;

<span class="hljs-keyword">class</span> TypedEventEmitter {
  <span class="hljs-keyword">private</span> listeners: Map&lt;EventName, <span class="hljs-built_in">Function</span>[]&gt; = <span class="hljs-keyword">new</span> Map();

  on&lt;T <span class="hljs-keyword">extends</span> EventType, A <span class="hljs-keyword">extends</span> EventAction&gt;(
    event: <span class="hljs-string">`<span class="hljs-subst">${T}</span>:<span class="hljs-subst">${A}</span>`</span>,
    listener: <span class="hljs-function">(<span class="hljs-params">data: EventMap[T]</span>) =&gt;</span> <span class="hljs-built_in">void</span>
  ): <span class="hljs-built_in">void</span> {
    <span class="hljs-keyword">const</span> eventName = event <span class="hljs-keyword">as</span> EventName;
    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.listeners.has(eventName)) {
      <span class="hljs-keyword">this</span>.listeners.set(eventName, []);
    }
    <span class="hljs-keyword">this</span>.listeners.get(eventName)!.push(listener);
  }

  emit&lt;T <span class="hljs-keyword">extends</span> EventType, A <span class="hljs-keyword">extends</span> EventAction&gt;(
    event: <span class="hljs-string">`<span class="hljs-subst">${T}</span>:<span class="hljs-subst">${A}</span>`</span>,
    data: EventMap[T]
  ): <span class="hljs-built_in">void</span> {
    <span class="hljs-keyword">const</span> eventName = event <span class="hljs-keyword">as</span> EventName;
    <span class="hljs-keyword">const</span> eventListeners = <span class="hljs-keyword">this</span>.listeners.get(eventName);
    <span class="hljs-keyword">if</span> (eventListeners) {
      eventListeners.forEach(<span class="hljs-function">(<span class="hljs-params">listener</span>) =&gt;</span> listener(data));
    }
  }
}

<span class="hljs-comment">// Usage</span>
<span class="hljs-keyword">const</span> emitter = <span class="hljs-keyword">new</span> TypedEventEmitter();

emitter.on(<span class="hljs-string">"user:created"</span>, <span class="hljs-function">(<span class="hljs-params">user</span>) =&gt;</span> {
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`User created: <span class="hljs-subst">${user.name}</span>`</span>);
});

emitter.emit(<span class="hljs-string">"user:created"</span>, { id: <span class="hljs-number">1</span>, name: <span class="hljs-string">"John"</span> });

<span class="hljs-comment">// Type-safe CSS-in-JS</span>
<span class="hljs-keyword">type</span> CSSProperty =
  | <span class="hljs-string">"color"</span>
  | <span class="hljs-string">"background-color"</span>
  | <span class="hljs-string">"font-size"</span>
  | <span class="hljs-string">"margin"</span>
  | <span class="hljs-string">"padding"</span>
  | <span class="hljs-string">"width"</span>
  | <span class="hljs-string">"height"</span>;

<span class="hljs-keyword">type</span> CSSValue = <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span>;

<span class="hljs-keyword">type</span> CSSRule = <span class="hljs-string">`<span class="hljs-subst">${CSSProperty}</span>: <span class="hljs-subst">${CSSValue}</span>`</span>;

<span class="hljs-keyword">type</span> StyleObject = {
  [K <span class="hljs-keyword">in</span> CSSProperty]?: CSSValue;
};

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createStyles</span>(<span class="hljs-params">styles: StyleObject</span>): <span class="hljs-title">string</span> </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">Object</span>.entries(styles)
    .map(<span class="hljs-function">(<span class="hljs-params">[property, value]</span>) =&gt;</span> <span class="hljs-string">`<span class="hljs-subst">${property}</span>: <span class="hljs-subst">${value}</span>`</span>)
    .join(<span class="hljs-string">"; "</span>);
}

<span class="hljs-keyword">const</span> buttonStyles = createStyles({
  <span class="hljs-string">"background-color"</span>: <span class="hljs-string">"#007bff"</span>,
  color: <span class="hljs-string">"white"</span>,
  padding: <span class="hljs-string">"10px 20px"</span>,
  border: <span class="hljs-string">"none"</span>,
});
</div></code></pre>
<h2 id="utility-types">Utility Types</h2>
<p>TypeScript provides many built-in utility types for common type transformations.</p>
<h3 id="built-in-utility-types">Built-in Utility Types</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Pick - Select specific properties</span>
<span class="hljs-keyword">type</span> UserSummary = Pick&lt;User, <span class="hljs-string">"id"</span> | <span class="hljs-string">"name"</span>&gt;;
<span class="hljs-comment">// { id: number; name: string }</span>

<span class="hljs-comment">// Omit - Exclude specific properties</span>
<span class="hljs-keyword">type</span> UserWithoutId = Omit&lt;User, <span class="hljs-string">"id"</span>&gt;;
<span class="hljs-comment">// { name: string; email: string; age: number }</span>

<span class="hljs-comment">// Record - Create object type with specific keys and values</span>
<span class="hljs-keyword">type</span> UserRoles = Record&lt;<span class="hljs-string">"admin"</span> | <span class="hljs-string">"user"</span> | <span class="hljs-string">"guest"</span>, <span class="hljs-built_in">string</span>[]&gt;;
<span class="hljs-comment">// {</span>
<span class="hljs-comment">//   admin: string[];</span>
<span class="hljs-comment">//   user: string[];</span>
<span class="hljs-comment">//   guest: string[];</span>
<span class="hljs-comment">// }</span>

<span class="hljs-comment">// Exclude - Remove types from union</span>
<span class="hljs-keyword">type</span> NonStringTypes = Exclude&lt;<span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span> | <span class="hljs-built_in">boolean</span>, <span class="hljs-built_in">string</span>&gt;;
<span class="hljs-comment">// number | boolean</span>

<span class="hljs-comment">// Extract - Keep only specific types from union</span>
<span class="hljs-keyword">type</span> StringTypes = Extract&lt;<span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span> | <span class="hljs-built_in">boolean</span>, <span class="hljs-built_in">string</span>&gt;;
<span class="hljs-comment">// string</span>

<span class="hljs-comment">// ReturnType - Get function return type</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getUser</span>(<span class="hljs-params"></span>): <span class="hljs-title">User</span> </span>{
  <span class="hljs-keyword">return</span> { id: <span class="hljs-number">1</span>, name: <span class="hljs-string">"John"</span>, email: <span class="hljs-string">"john@example.com"</span>, age: <span class="hljs-number">30</span> };
}

<span class="hljs-keyword">type</span> GetUserReturn = ReturnType&lt;<span class="hljs-keyword">typeof</span> getUser&gt;; <span class="hljs-comment">// User</span>

<span class="hljs-comment">// Parameters - Get function parameter types</span>
<span class="hljs-keyword">type</span> GetUserParams = Parameters&lt;<span class="hljs-keyword">typeof</span> getProperty&gt;; <span class="hljs-comment">// [T, K]</span>

<span class="hljs-comment">// ConstructorParameters - Get constructor parameter types</span>
<span class="hljs-keyword">type</span> DbConnectionParams = ConstructorParameters&lt;<span class="hljs-keyword">typeof</span> DatabaseConnection&gt;; <span class="hljs-comment">// [string]</span>

<span class="hljs-comment">// InstanceType - Get instance type of constructor</span>
<span class="hljs-keyword">type</span> DbInstance = InstanceType&lt;<span class="hljs-keyword">typeof</span> DatabaseConnection&gt;; <span class="hljs-comment">// DatabaseConnection</span>
</div></code></pre>
<h3 id="custom-utility-types">Custom Utility Types</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Deep Pick - Pick nested properties</span>
<span class="hljs-keyword">type</span> DeepPick&lt;T, K <span class="hljs-keyword">extends</span> <span class="hljs-built_in">string</span>&gt; = K <span class="hljs-keyword">extends</span> <span class="hljs-string">`<span class="hljs-subst">${infer Key}</span>.<span class="hljs-subst">${infer Rest}</span>`</span>
  ? Key <span class="hljs-keyword">extends</span> keyof T
    ? { [P <span class="hljs-keyword">in</span> Key]: DeepPick&lt;T[Key], Rest&gt; }
    : never
  : K <span class="hljs-keyword">extends</span> keyof T
  ? { [P <span class="hljs-keyword">in</span> K]: T[K] }
  : never;

<span class="hljs-keyword">interface</span> NestedData {
  user: {
    profile: {
      name: <span class="hljs-built_in">string</span>;
      age: <span class="hljs-built_in">number</span>;
    };
    settings: {
      theme: <span class="hljs-built_in">string</span>;
    };
  };
}

<span class="hljs-keyword">type</span> UserName = DeepPick&lt;NestedData, <span class="hljs-string">"user.profile.name"</span>&gt;;
<span class="hljs-comment">// { user: { profile: { name: string } } }</span>

<span class="hljs-comment">// Mutable - Remove readonly modifiers</span>
<span class="hljs-keyword">type</span> Mutable&lt;T&gt; = {
  -readonly [P <span class="hljs-keyword">in</span> keyof T]: T[P];
};

<span class="hljs-keyword">type</span> MutableReadonlyUser = Mutable&lt;Readonly&lt;User&gt;&gt;;
<span class="hljs-comment">// { id: number; name: string; email: string; age: number }</span>

<span class="hljs-comment">// Optional to Required - Make specific properties required</span>
<span class="hljs-keyword">type</span> MakeRequired&lt;T, K <span class="hljs-keyword">extends</span> keyof T&gt; = T &amp; Required&lt;Pick&lt;T, K&gt;&gt;;

<span class="hljs-keyword">interface</span> PartialProfile {
  name?: <span class="hljs-built_in">string</span>;
  email?: <span class="hljs-built_in">string</span>;
  age?: <span class="hljs-built_in">number</span>;
}

<span class="hljs-keyword">type</span> ProfileWithRequiredName = MakeRequired&lt;PartialProfile, <span class="hljs-string">"name"</span>&gt;;
<span class="hljs-comment">// { name: string; email?: string; age?: number }</span>

<span class="hljs-comment">// Function property names</span>
<span class="hljs-keyword">type</span> FunctionPropertyNames&lt;T&gt; = {
  [K <span class="hljs-keyword">in</span> keyof T]: T[K] <span class="hljs-keyword">extends</span> <span class="hljs-built_in">Function</span> ? K : never;
}[keyof T];

<span class="hljs-keyword">type</span> NonFunctionPropertyNames&lt;T&gt; = {
  [K <span class="hljs-keyword">in</span> keyof T]: T[K] <span class="hljs-keyword">extends</span> <span class="hljs-built_in">Function</span> ? never : K;
}[keyof T];

<span class="hljs-keyword">class</span> Example {
  name: <span class="hljs-built_in">string</span> = <span class="hljs-string">""</span>;
  age: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;
  getName(): <span class="hljs-built_in">string</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.name;
  }
  setAge(age: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">void</span> {
    <span class="hljs-keyword">this</span>.age = age;
  }
}

<span class="hljs-keyword">type</span> ExampleFunctions = FunctionPropertyNames&lt;Example&gt;; <span class="hljs-comment">// "getName" | "setAge"</span>
<span class="hljs-keyword">type</span> ExampleProperties = NonFunctionPropertyNames&lt;Example&gt;; <span class="hljs-comment">// "name" | "age"</span>
</div></code></pre>
<h2 id="practical-examples">Practical Examples</h2>
<h3 id="type-safe-configuration-system">Type-Safe Configuration System</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Configuration schema</span>
<span class="hljs-keyword">interface</span> ConfigSchema {
  database: {
    host: <span class="hljs-built_in">string</span>;
    port: <span class="hljs-built_in">number</span>;
    username: <span class="hljs-built_in">string</span>;
    password: <span class="hljs-built_in">string</span>;
  };
  api: {
    baseUrl: <span class="hljs-built_in">string</span>;
    timeout: <span class="hljs-built_in">number</span>;
    retries: <span class="hljs-built_in">number</span>;
  };
  features: {
    authentication: <span class="hljs-built_in">boolean</span>;
    logging: <span class="hljs-built_in">boolean</span>;
    analytics: <span class="hljs-built_in">boolean</span>;
  };
}

<span class="hljs-comment">// Type-safe configuration access</span>
<span class="hljs-keyword">type</span> ConfigPath&lt;T, K <span class="hljs-keyword">extends</span> <span class="hljs-built_in">string</span> = <span class="hljs-string">""</span>&gt; = {
  [P <span class="hljs-keyword">in</span> keyof T]: T[P] <span class="hljs-keyword">extends</span> object
    ? ConfigPath&lt;T[P], K <span class="hljs-keyword">extends</span> <span class="hljs-string">""</span> ? <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-built_in">string</span> &amp; P}</span>`</span> : <span class="hljs-string">`<span class="hljs-subst">${K}</span>.<span class="hljs-subst">${<span class="hljs-built_in">string</span> &amp; P}</span>`</span>&gt;
    : K <span class="hljs-keyword">extends</span> <span class="hljs-string">""</span>
    ? P
    : <span class="hljs-string">`<span class="hljs-subst">${K}</span>.<span class="hljs-subst">${<span class="hljs-built_in">string</span> &amp; P}</span>`</span>;
}[keyof T];

<span class="hljs-keyword">type</span> ConfigPaths = ConfigPath&lt;ConfigSchema&gt;;
<span class="hljs-comment">// "database.host" | "database.port" | "database.username" | "database.password" |</span>
<span class="hljs-comment">// "api.baseUrl" | "api.timeout" | "api.retries" |</span>
<span class="hljs-comment">// "features.authentication" | "features.logging" | "features.analytics"</span>

<span class="hljs-comment">// Get nested value type</span>
<span class="hljs-keyword">type</span> GetConfigValue&lt;
  T,
  P <span class="hljs-keyword">extends</span> <span class="hljs-built_in">string</span>
&gt; = P <span class="hljs-keyword">extends</span> <span class="hljs-string">`<span class="hljs-subst">${infer Key}</span>.<span class="hljs-subst">${infer Rest}</span>`</span>
  ? Key <span class="hljs-keyword">extends</span> keyof T
    ? GetConfigValue&lt;T[Key], Rest&gt;
    : never
  : P <span class="hljs-keyword">extends</span> keyof T
  ? T[P]
  : never;

<span class="hljs-keyword">class</span> ConfigManager {
  <span class="hljs-keyword">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> config: ConfigSchema</span>) {}

  <span class="hljs-keyword">get</span>&lt;P <span class="hljs-keyword">extends</span> ConfigPaths&gt;(path: P): GetConfigValue&lt;ConfigSchema, P&gt; {
    <span class="hljs-keyword">const</span> keys = path.split(<span class="hljs-string">"."</span>);
    <span class="hljs-keyword">let</span> value: <span class="hljs-built_in">any</span> = <span class="hljs-keyword">this</span>.config;

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> key of keys) {
      value = value[key];
    }

    <span class="hljs-keyword">return</span> value;
  }
}

<span class="hljs-comment">// Usage</span>
<span class="hljs-keyword">const</span> config = <span class="hljs-keyword">new</span> ConfigManager({
  database: {
    host: <span class="hljs-string">"localhost"</span>,
    port: <span class="hljs-number">5432</span>,
    username: <span class="hljs-string">"admin"</span>,
    password: <span class="hljs-string">"secret"</span>,
  },
  api: {
    baseUrl: <span class="hljs-string">"https://api.example.com"</span>,
    timeout: <span class="hljs-number">5000</span>,
    retries: <span class="hljs-number">3</span>,
  },
  features: {
    authentication: <span class="hljs-literal">true</span>,
    logging: <span class="hljs-literal">false</span>,
    analytics: <span class="hljs-literal">true</span>,
  },
});

<span class="hljs-keyword">const</span> dbHost = config.get(<span class="hljs-string">"database.host"</span>); <span class="hljs-comment">// Type: string</span>
<span class="hljs-keyword">const</span> apiTimeout = config.get(<span class="hljs-string">"api.timeout"</span>); <span class="hljs-comment">// Type: number</span>
<span class="hljs-keyword">const</span> authEnabled = config.get(<span class="hljs-string">"features.authentication"</span>); <span class="hljs-comment">// Type: boolean</span>
</div></code></pre>
<h3 id="advanced-form-validation">Advanced Form Validation</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Form field types</span>
<span class="hljs-keyword">type</span> FieldType =
  | <span class="hljs-string">"text"</span>
  | <span class="hljs-string">"email"</span>
  | <span class="hljs-string">"password"</span>
  | <span class="hljs-string">"number"</span>
  | <span class="hljs-string">"select"</span>
  | <span class="hljs-string">"checkbox"</span>;

<span class="hljs-keyword">interface</span> BaseField {
  <span class="hljs-keyword">type</span>: FieldType;
  label: <span class="hljs-built_in">string</span>;
  required?: <span class="hljs-built_in">boolean</span>;
}

<span class="hljs-keyword">interface</span> TextField <span class="hljs-keyword">extends</span> BaseField {
  <span class="hljs-keyword">type</span>: <span class="hljs-string">"text"</span> | <span class="hljs-string">"email"</span> | <span class="hljs-string">"password"</span>;
  minLength?: <span class="hljs-built_in">number</span>;
  maxLength?: <span class="hljs-built_in">number</span>;
  pattern?: <span class="hljs-built_in">RegExp</span>;
}

<span class="hljs-keyword">interface</span> NumberField <span class="hljs-keyword">extends</span> BaseField {
  <span class="hljs-keyword">type</span>: <span class="hljs-string">"number"</span>;
  min?: <span class="hljs-built_in">number</span>;
  max?: <span class="hljs-built_in">number</span>;
  step?: <span class="hljs-built_in">number</span>;
}

<span class="hljs-keyword">interface</span> SelectField <span class="hljs-keyword">extends</span> BaseField {
  <span class="hljs-keyword">type</span>: <span class="hljs-string">"select"</span>;
  options: { value: <span class="hljs-built_in">string</span>; label: <span class="hljs-built_in">string</span> }[];
}

<span class="hljs-keyword">interface</span> CheckboxField <span class="hljs-keyword">extends</span> BaseField {
  <span class="hljs-keyword">type</span>: <span class="hljs-string">"checkbox"</span>;
}

<span class="hljs-keyword">type</span> Field = TextField | NumberField | SelectField | CheckboxField;

<span class="hljs-comment">// Form schema type</span>
<span class="hljs-keyword">type</span> FormSchema = Record&lt;<span class="hljs-built_in">string</span>, Field&gt;;

<span class="hljs-comment">// Extract form data type from schema</span>
<span class="hljs-keyword">type</span> FormData&lt;T <span class="hljs-keyword">extends</span> FormSchema&gt; = {
  [K <span class="hljs-keyword">in</span> keyof T]: T[K] <span class="hljs-keyword">extends</span> { <span class="hljs-keyword">type</span>: <span class="hljs-string">"checkbox"</span> }
    ? <span class="hljs-built_in">boolean</span>
    : T[K] <span class="hljs-keyword">extends</span> { <span class="hljs-keyword">type</span>: <span class="hljs-string">"number"</span> }
    ? <span class="hljs-built_in">number</span>
    : <span class="hljs-built_in">string</span>;
};

<span class="hljs-comment">// Validation result type</span>
<span class="hljs-keyword">type</span> ValidationResult&lt;T <span class="hljs-keyword">extends</span> FormSchema&gt; = {
  [K <span class="hljs-keyword">in</span> keyof T]?: <span class="hljs-built_in">string</span>[];
};

<span class="hljs-comment">// Form validator</span>
<span class="hljs-keyword">class</span> FormValidator&lt;T <span class="hljs-keyword">extends</span> FormSchema&gt; {
  <span class="hljs-keyword">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> schema: T</span>) {}

  validate(data: Partial&lt;FormData&lt;T&gt;&gt;): ValidationResult&lt;T&gt; {
    <span class="hljs-keyword">const</span> errors: ValidationResult&lt;T&gt; = {};

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> [fieldName, field] of <span class="hljs-built_in">Object</span>.entries(<span class="hljs-keyword">this</span>.schema)) {
      <span class="hljs-keyword">const</span> value = data[fieldName <span class="hljs-keyword">as</span> keyof T];
      <span class="hljs-keyword">const</span> fieldErrors: <span class="hljs-built_in">string</span>[] = [];

      <span class="hljs-comment">// Required validation</span>
      <span class="hljs-keyword">if</span> (
        field.required &amp;&amp;
        (value === <span class="hljs-literal">undefined</span> || value === <span class="hljs-literal">null</span> || value === <span class="hljs-string">""</span>)
      ) {
        fieldErrors.push(<span class="hljs-string">`<span class="hljs-subst">${field.label}</span> is required`</span>);
        <span class="hljs-keyword">continue</span>;
      }

      <span class="hljs-keyword">if</span> (value !== <span class="hljs-literal">undefined</span> &amp;&amp; value !== <span class="hljs-literal">null</span> &amp;&amp; value !== <span class="hljs-string">""</span>) {
        <span class="hljs-comment">// Type-specific validation</span>
        <span class="hljs-keyword">if</span> (field.type === <span class="hljs-string">"email"</span> &amp;&amp; <span class="hljs-keyword">typeof</span> value === <span class="hljs-string">"string"</span>) {
          <span class="hljs-keyword">const</span> emailRegex = <span class="hljs-regexp">/^[^\s@]+@[^\s@]+\.[^\s@]+$/</span>;
          <span class="hljs-keyword">if</span> (!emailRegex.test(value)) {
            fieldErrors.push(<span class="hljs-string">"Invalid email format"</span>);
          }
        }

        <span class="hljs-keyword">if</span> (
          field.type === <span class="hljs-string">"text"</span> ||
          field.type === <span class="hljs-string">"email"</span> ||
          field.type === <span class="hljs-string">"password"</span>
        ) {
          <span class="hljs-keyword">const</span> textField = field <span class="hljs-keyword">as</span> TextField;
          <span class="hljs-keyword">const</span> stringValue = value <span class="hljs-keyword">as</span> <span class="hljs-built_in">string</span>;

          <span class="hljs-keyword">if</span> (textField.minLength &amp;&amp; stringValue.length &lt; textField.minLength) {
            fieldErrors.push(<span class="hljs-string">`Minimum length is <span class="hljs-subst">${textField.minLength}</span>`</span>);
          }

          <span class="hljs-keyword">if</span> (textField.maxLength &amp;&amp; stringValue.length &gt; textField.maxLength) {
            fieldErrors.push(<span class="hljs-string">`Maximum length is <span class="hljs-subst">${textField.maxLength}</span>`</span>);
          }

          <span class="hljs-keyword">if</span> (textField.pattern &amp;&amp; !textField.pattern.test(stringValue)) {
            fieldErrors.push(<span class="hljs-string">"Invalid format"</span>);
          }
        }

        <span class="hljs-keyword">if</span> (field.type === <span class="hljs-string">"number"</span>) {
          <span class="hljs-keyword">const</span> numberField = field <span class="hljs-keyword">as</span> NumberField;
          <span class="hljs-keyword">const</span> numberValue = value <span class="hljs-keyword">as</span> <span class="hljs-built_in">number</span>;

          <span class="hljs-keyword">if</span> (numberField.min !== <span class="hljs-literal">undefined</span> &amp;&amp; numberValue &lt; numberField.min) {
            fieldErrors.push(<span class="hljs-string">`Minimum value is <span class="hljs-subst">${numberField.min}</span>`</span>);
          }

          <span class="hljs-keyword">if</span> (numberField.max !== <span class="hljs-literal">undefined</span> &amp;&amp; numberValue &gt; numberField.max) {
            fieldErrors.push(<span class="hljs-string">`Maximum value is <span class="hljs-subst">${numberField.max}</span>`</span>);
          }
        }
      }

      <span class="hljs-keyword">if</span> (fieldErrors.length &gt; <span class="hljs-number">0</span>) {
        errors[fieldName <span class="hljs-keyword">as</span> keyof T] = fieldErrors;
      }
    }

    <span class="hljs-keyword">return</span> errors;
  }
}

<span class="hljs-comment">// Usage</span>
<span class="hljs-keyword">const</span> userFormSchema = {
  name: {
    <span class="hljs-keyword">type</span>: <span class="hljs-string">"text"</span> <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>,
    label: <span class="hljs-string">"Full Name"</span>,
    required: <span class="hljs-literal">true</span>,
    minLength: <span class="hljs-number">2</span>,
    maxLength: <span class="hljs-number">50</span>,
  },
  email: {
    <span class="hljs-keyword">type</span>: <span class="hljs-string">"email"</span> <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>,
    label: <span class="hljs-string">"Email Address"</span>,
    required: <span class="hljs-literal">true</span>,
  },
  age: {
    <span class="hljs-keyword">type</span>: <span class="hljs-string">"number"</span> <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>,
    label: <span class="hljs-string">"Age"</span>,
    min: <span class="hljs-number">18</span>,
    max: <span class="hljs-number">120</span>,
  },
  newsletter: {
    <span class="hljs-keyword">type</span>: <span class="hljs-string">"checkbox"</span> <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>,
    label: <span class="hljs-string">"Subscribe to newsletter"</span>,
  },
};

<span class="hljs-keyword">type</span> UserFormData = FormData&lt;<span class="hljs-keyword">typeof</span> userFormSchema&gt;;
<span class="hljs-comment">// {</span>
<span class="hljs-comment">//   name: string;</span>
<span class="hljs-comment">//   email: string;</span>
<span class="hljs-comment">//   age: number;</span>
<span class="hljs-comment">//   newsletter: boolean;</span>
<span class="hljs-comment">// }</span>

<span class="hljs-keyword">const</span> validator = <span class="hljs-keyword">new</span> FormValidator(userFormSchema);

<span class="hljs-keyword">const</span> formData: Partial&lt;UserFormData&gt; = {
  name: <span class="hljs-string">"John Doe"</span>,
  email: <span class="hljs-string">"invalid-email"</span>,
  age: <span class="hljs-number">15</span>,
  newsletter: <span class="hljs-literal">true</span>,
};

<span class="hljs-keyword">const</span> validationErrors = validator.validate(formData);
<span class="hljs-built_in">console</span>.log(validationErrors);
<span class="hljs-comment">// {</span>
<span class="hljs-comment">//   email: ['Invalid email format'],</span>
<span class="hljs-comment">//   age: ['Minimum value is 18']</span>
<span class="hljs-comment">// }</span>
</div></code></pre>
<h2 id="best-practices">Best Practices</h2>
<h3 id="%E2%9C%85-good-practices">‚úÖ Good Practices</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Use meaningful names for type parameters</span>
<span class="hljs-keyword">type</span> ApiResponse&lt;TData, TError = <span class="hljs-built_in">string</span>&gt; = {
  data?: TData;
  error?: TError;
  success: <span class="hljs-built_in">boolean</span>;
};

<span class="hljs-comment">// Use conditional types for complex type logic</span>
<span class="hljs-keyword">type</span> NonNullable&lt;T&gt; = T <span class="hljs-keyword">extends</span> <span class="hljs-literal">null</span> | <span class="hljs-literal">undefined</span> ? never : T;

<span class="hljs-comment">// Use mapped types for systematic transformations</span>
<span class="hljs-keyword">type</span> EventHandlers&lt;T&gt; = {
  [K <span class="hljs-keyword">in</span> keyof T <span class="hljs-keyword">as</span> <span class="hljs-string">`on<span class="hljs-subst">${Capitalize&lt;<span class="hljs-built_in">string</span> &amp; K&gt;}</span>Change`</span>]: <span class="hljs-function">(<span class="hljs-params">value: T[K]</span>) =&gt;</span> <span class="hljs-built_in">void</span>;
};

<span class="hljs-comment">// Use template literal types for type-safe string manipulation</span>
<span class="hljs-keyword">type</span> HttpMethod = <span class="hljs-string">"GET"</span> | <span class="hljs-string">"POST"</span> | <span class="hljs-string">"PUT"</span> | <span class="hljs-string">"DELETE"</span>;
<span class="hljs-keyword">type</span> ApiEndpoint = <span class="hljs-string">`/api/<span class="hljs-subst">${<span class="hljs-built_in">string</span>}</span>`</span>;
<span class="hljs-keyword">type</span> ApiCall = <span class="hljs-string">`<span class="hljs-subst">${HttpMethod}</span> <span class="hljs-subst">${ApiEndpoint}</span>`</span>;

<span class="hljs-comment">// Use utility types to avoid repetition</span>
<span class="hljs-keyword">type</span> CreateUserRequest = Omit&lt;User, <span class="hljs-string">"id"</span>&gt;;
<span class="hljs-keyword">type</span> UpdateUserRequest = Partial&lt;Omit&lt;User, <span class="hljs-string">"id"</span>&gt;&gt;;
</div></code></pre>
<h3 id="%E2%9D%8C-avoid">‚ùå Avoid</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Don't overuse complex type manipulations</span>
<span class="hljs-keyword">type</span> OverlyComplex&lt;T&gt; = {
  [K <span class="hljs-keyword">in</span> keyof T <span class="hljs-keyword">as</span> T[K] <span class="hljs-keyword">extends</span> <span class="hljs-built_in">Function</span>
    ? never
    : K <span class="hljs-keyword">extends</span> <span class="hljs-string">`<span class="hljs-subst">${infer Prefix}</span>_<span class="hljs-subst">${infer Suffix}</span>`</span>
    ? <span class="hljs-string">`<span class="hljs-subst">${Prefix}</span><span class="hljs-subst">${Capitalize&lt;Suffix&gt;}</span>`</span>
    : K]: T[K] <span class="hljs-keyword">extends</span> object ? OverlyComplex&lt;T[K]&gt; : T[K];
}; <span class="hljs-comment">// Too complex, hard to understand</span>

<span class="hljs-comment">// Don't use any in advanced types</span>
<span class="hljs-keyword">type</span> BadConditional&lt;T&gt; = T <span class="hljs-keyword">extends</span> <span class="hljs-built_in">any</span> ? <span class="hljs-built_in">any</span> : never; <span class="hljs-comment">// Defeats the purpose</span>

<span class="hljs-comment">// Don't create overly nested conditional types</span>
<span class="hljs-keyword">type</span> TooNested&lt;T&gt; = T <span class="hljs-keyword">extends</span> A
  ? T <span class="hljs-keyword">extends</span> B
    ? T <span class="hljs-keyword">extends</span> C
      ? T <span class="hljs-keyword">extends</span> D
        ? E
        : F
      : G
    : H
  : I; <span class="hljs-comment">// Hard to read and maintain</span>

<span class="hljs-comment">// Don't ignore type safety with assertions</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">unsafeTypeManipulation</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params">value: unknown</span>): <span class="hljs-title">T</span> </span>{
  <span class="hljs-keyword">return</span> value <span class="hljs-keyword">as</span> T; <span class="hljs-comment">// Dangerous</span>
}
</div></code></pre>
<h2 id="summary-checklist">Summary Checklist</h2>
<ul>
<li><input type="checkbox" id="checkbox84"><label for="checkbox84">Use </label><code>keyof</code> to create unions of property names</li>
<li><input type="checkbox" id="checkbox85"><label for="checkbox85">Use </label><code>typeof</code> to capture types from values</li>
<li><input type="checkbox" id="checkbox86"><label for="checkbox86">Create conditional types with </label><code>T extends U ? X : Y</code></li>
<li><input type="checkbox" id="checkbox87"><label for="checkbox87">Use </label><code>infer</code> to extract types in conditional types</li>
<li><input type="checkbox" id="checkbox88"><label for="checkbox88">Create mapped types for systematic transformations</label></li>
<li><input type="checkbox" id="checkbox89"><label for="checkbox89">Use template literal types for string manipulation</label></li>
<li><input type="checkbox" id="checkbox90"><label for="checkbox90">Leverage built-in utility types (</label><code>Pick</code>, <code>Omit</code>, <code>Record</code>, etc.)</li>
<li><input type="checkbox" id="checkbox91"><label for="checkbox91">Create custom utility types for common patterns</label></li>
<li><input type="checkbox" id="checkbox92"><label for="checkbox92">Use distributive conditional types appropriately</label></li>
<li><input type="checkbox" id="checkbox93"><label for="checkbox93">Combine advanced features for complex type logic</label></li>
</ul>
<h2 id="next-steps">Next Steps</h2>
<p>Now that you understand advanced TypeScript features, let's explore modules, namespaces, and code organization patterns.</p>
<hr>
<p><em>Continue to: <a href="14-modules-namespaces.md">Modules and Namespaces</a></em></p>
<h1 id="modules-and-namespaces">Modules and Namespaces</h1>
<blockquote>
<p>Learn how to organize and structure TypeScript code using modules and namespaces for better maintainability and scalability</p>
</blockquote>
<h2 id="es6-modules-in-typescript">ES6 Modules in TypeScript</h2>
<p>TypeScript fully supports ES6 modules, which are the standard way to organize code in modern JavaScript and TypeScript applications.</p>
<h3 id="basic-module-exports-and-imports">Basic Module Exports and Imports</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// math.ts - Named exports</span>
<span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">add</span>(<span class="hljs-params">a: <span class="hljs-built_in">number</span>, b: <span class="hljs-built_in">number</span></span>): <span class="hljs-title">number</span> </span>{
  <span class="hljs-keyword">return</span> a + b;
}

<span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">subtract</span>(<span class="hljs-params">a: <span class="hljs-built_in">number</span>, b: <span class="hljs-built_in">number</span></span>): <span class="hljs-title">number</span> </span>{
  <span class="hljs-keyword">return</span> a - b;
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> PI = <span class="hljs-number">3.14159</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> Calculator {
  add(a: <span class="hljs-built_in">number</span>, b: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">number</span>;
  subtract(a: <span class="hljs-built_in">number</span>, b: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">number</span>;
}

<span class="hljs-comment">// logger.ts - Default export</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> Logger {
  <span class="hljs-keyword">private</span> prefix: <span class="hljs-built_in">string</span>;

  <span class="hljs-keyword">constructor</span>(<span class="hljs-params">prefix: <span class="hljs-built_in">string</span> = "LOG"</span>) {
    <span class="hljs-keyword">this</span>.prefix = prefix;
  }

  log(message: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">void</span> {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`[<span class="hljs-subst">${<span class="hljs-keyword">this</span>.prefix}</span>] <span class="hljs-subst">${message}</span>`</span>);
  }

  error(message: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">void</span> {
    <span class="hljs-built_in">console</span>.error(<span class="hljs-string">`[<span class="hljs-subst">${<span class="hljs-keyword">this</span>.prefix}</span>] ERROR: <span class="hljs-subst">${message}</span>`</span>);
  }
}

<span class="hljs-comment">// utils.ts - Mixed exports</span>
<span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">formatDate</span>(<span class="hljs-params">date: <span class="hljs-built_in">Date</span></span>): <span class="hljs-title">string</span> </span>{
  <span class="hljs-keyword">return</span> date.toISOString().split(<span class="hljs-string">"T"</span>)[<span class="hljs-number">0</span>];
}

<span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">generateId</span>(<span class="hljs-params"></span>): <span class="hljs-title">string</span> </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.random().toString(<span class="hljs-number">36</span>).substr(<span class="hljs-number">2</span>, <span class="hljs-number">9</span>);
}

<span class="hljs-keyword">const</span> DEFAULT_CONFIG = {
  timeout: <span class="hljs-number">5000</span>,
  retries: <span class="hljs-number">3</span>,
};

<span class="hljs-keyword">export</span> { DEFAULT_CONFIG };
<span class="hljs-keyword">export</span> { DEFAULT_CONFIG <span class="hljs-keyword">as</span> Config }; <span class="hljs-comment">// Export with alias</span>

<span class="hljs-comment">// Re-export from another module</span>
<span class="hljs-keyword">export</span> { add, subtract } <span class="hljs-keyword">from</span> <span class="hljs-string">"./math"</span>;
</div></code></pre>
<h3 id="importing-modules">Importing Modules</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// app.ts - Various import patterns</span>

<span class="hljs-comment">// Named imports</span>
<span class="hljs-keyword">import</span> { add, subtract, PI } <span class="hljs-keyword">from</span> <span class="hljs-string">"./math"</span>;
<span class="hljs-keyword">import</span> { formatDate, generateId } <span class="hljs-keyword">from</span> <span class="hljs-string">"./utils"</span>;

<span class="hljs-comment">// Default import</span>
<span class="hljs-keyword">import</span> Logger <span class="hljs-keyword">from</span> <span class="hljs-string">"./logger"</span>;

<span class="hljs-comment">// Import with alias</span>
<span class="hljs-keyword">import</span> { Calculator <span class="hljs-keyword">as</span> MathCalculator } <span class="hljs-keyword">from</span> <span class="hljs-string">"./math"</span>;
<span class="hljs-keyword">import</span> { DEFAULT_CONFIG <span class="hljs-keyword">as</span> AppConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">"./utils"</span>;

<span class="hljs-comment">// Import entire module as namespace</span>
<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> MathUtils <span class="hljs-keyword">from</span> <span class="hljs-string">"./math"</span>;
<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> Utils <span class="hljs-keyword">from</span> <span class="hljs-string">"./utils"</span>;

<span class="hljs-comment">// Side-effect import (runs module code without importing anything)</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">"./polyfills"</span>;

<span class="hljs-comment">// Dynamic imports (returns Promise)</span>
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">loadMath</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">const</span> mathModule = <span class="hljs-keyword">await</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">"./math"</span>);
  <span class="hljs-keyword">return</span> mathModule.add(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>);
}

<span class="hljs-comment">// Usage examples</span>
<span class="hljs-keyword">const</span> logger = <span class="hljs-keyword">new</span> Logger(<span class="hljs-string">"APP"</span>);
logger.log(<span class="hljs-string">"Application started"</span>);

<span class="hljs-keyword">const</span> result = add(<span class="hljs-number">10</span>, <span class="hljs-number">5</span>);
<span class="hljs-keyword">const</span> today = formatDate(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>());
<span class="hljs-keyword">const</span> id = generateId();

<span class="hljs-comment">// Using namespace imports</span>
<span class="hljs-keyword">const</span> sum = MathUtils.add(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>);
<span class="hljs-keyword">const</span> difference = MathUtils.subtract(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>);
<span class="hljs-keyword">const</span> formattedDate = Utils.formatDate(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>());

<span class="hljs-comment">// Using aliased imports</span>
<span class="hljs-keyword">class</span> BasicCalculator <span class="hljs-keyword">implements</span> MathCalculator {
  add(a: <span class="hljs-built_in">number</span>, b: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">number</span> {
    <span class="hljs-keyword">return</span> a + b;
  }

  subtract(a: <span class="hljs-built_in">number</span>, b: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">number</span> {
    <span class="hljs-keyword">return</span> a - b;
  }
}
</div></code></pre>
<h3 id="module-resolution">Module Resolution</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Relative imports</span>
<span class="hljs-keyword">import</span> { UserService } <span class="hljs-keyword">from</span> <span class="hljs-string">"./services/user-service"</span>; <span class="hljs-comment">// Same directory</span>
<span class="hljs-keyword">import</span> { ApiClient } <span class="hljs-keyword">from</span> <span class="hljs-string">"../api/client"</span>; <span class="hljs-comment">// Parent directory</span>
<span class="hljs-keyword">import</span> { Config } <span class="hljs-keyword">from</span> <span class="hljs-string">"../../config/app-config"</span>; <span class="hljs-comment">// Multiple levels up</span>

<span class="hljs-comment">// Non-relative imports (node_modules or paths mapping)</span>
<span class="hljs-keyword">import</span> express <span class="hljs-keyword">from</span> <span class="hljs-string">"express"</span>; <span class="hljs-comment">// npm package</span>
<span class="hljs-keyword">import</span> { Observable } <span class="hljs-keyword">from</span> <span class="hljs-string">"rxjs"</span>; <span class="hljs-comment">// npm package</span>
<span class="hljs-keyword">import</span> { Component } <span class="hljs-keyword">from</span> <span class="hljs-string">"@angular/core"</span>; <span class="hljs-comment">// scoped package</span>

<span class="hljs-comment">// Import with file extensions (sometimes required)</span>
<span class="hljs-keyword">import</span> { helper } <span class="hljs-keyword">from</span> <span class="hljs-string">"./helper.js"</span>;
<span class="hljs-keyword">import</span> data <span class="hljs-keyword">from</span> <span class="hljs-string">"./data.json"</span>;

<span class="hljs-comment">// Import types only (TypeScript 3.8+)</span>
<span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> { User } <span class="hljs-keyword">from</span> <span class="hljs-string">"./types/user"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> { ApiResponse } <span class="hljs-keyword">from</span> <span class="hljs-string">"./api/types"</span>;

<span class="hljs-comment">// Import both value and type</span>
<span class="hljs-keyword">import</span> { <span class="hljs-keyword">type</span> User, createUser } <span class="hljs-keyword">from</span> <span class="hljs-string">"./user"</span>;
</div></code></pre>
<h2 id="advanced-module-patterns">Advanced Module Patterns</h2>
<h3 id="barrel-exports">Barrel Exports</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// types/index.ts - Barrel file for types</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> { User } <span class="hljs-keyword">from</span> <span class="hljs-string">"./user"</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> { Product } <span class="hljs-keyword">from</span> <span class="hljs-string">"./product"</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> { Order } <span class="hljs-keyword">from</span> <span class="hljs-string">"./order"</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> { ApiResponse, ApiError } <span class="hljs-keyword">from</span> <span class="hljs-string">"./api"</span>;

<span class="hljs-comment">// services/index.ts - Barrel file for services</span>
<span class="hljs-keyword">export</span> { UserService } <span class="hljs-keyword">from</span> <span class="hljs-string">"./user-service"</span>;
<span class="hljs-keyword">export</span> { ProductService } <span class="hljs-keyword">from</span> <span class="hljs-string">"./product-service"</span>;
<span class="hljs-keyword">export</span> { OrderService } <span class="hljs-keyword">from</span> <span class="hljs-string">"./order-service"</span>;
<span class="hljs-keyword">export</span> { ApiService } <span class="hljs-keyword">from</span> <span class="hljs-string">"./api-service"</span>;

<span class="hljs-comment">// utils/index.ts - Barrel file for utilities</span>
<span class="hljs-keyword">export</span> * <span class="hljs-keyword">from</span> <span class="hljs-string">"./date-utils"</span>;
<span class="hljs-keyword">export</span> * <span class="hljs-keyword">from</span> <span class="hljs-string">"./string-utils"</span>;
<span class="hljs-keyword">export</span> * <span class="hljs-keyword">from</span> <span class="hljs-string">"./validation-utils"</span>;
<span class="hljs-keyword">export</span> { <span class="hljs-keyword">default</span> <span class="hljs-keyword">as</span> Logger } <span class="hljs-keyword">from</span> <span class="hljs-string">"./logger"</span>;

<span class="hljs-comment">// Now you can import from the barrel</span>
<span class="hljs-keyword">import</span> { User, Product, ApiResponse } <span class="hljs-keyword">from</span> <span class="hljs-string">"./types"</span>;
<span class="hljs-keyword">import</span> { UserService, ProductService } <span class="hljs-keyword">from</span> <span class="hljs-string">"./services"</span>;
<span class="hljs-keyword">import</span> { formatDate, validateEmail, Logger } <span class="hljs-keyword">from</span> <span class="hljs-string">"./utils"</span>;
</div></code></pre>
<h3 id="module-augmentation">Module Augmentation</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Extending existing modules</span>

<span class="hljs-comment">// global.d.ts - Augmenting global scope</span>
<span class="hljs-keyword">declare</span> global {
  <span class="hljs-keyword">interface</span> Window {
    myApp: {
      version: <span class="hljs-built_in">string</span>;
      config: Record&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt;;
    };
  }

  <span class="hljs-keyword">namespace</span> NodeJS {
    <span class="hljs-keyword">interface</span> ProcessEnv {
      NODE_ENV: <span class="hljs-string">"development"</span> | <span class="hljs-string">"production"</span> | <span class="hljs-string">"test"</span>;
      DATABASE_URL: <span class="hljs-built_in">string</span>;
      API_KEY: <span class="hljs-built_in">string</span>;
    }
  }
}

<span class="hljs-comment">// express.d.ts - Augmenting Express Request</span>
<span class="hljs-keyword">import</span> { User } <span class="hljs-keyword">from</span> <span class="hljs-string">"./types/user"</span>;

<span class="hljs-keyword">declare</span> <span class="hljs-keyword">module</span> "express-serve-static-core" {
  <span class="hljs-keyword">interface</span> Request {
    user?: User;
    requestId: <span class="hljs-built_in">string</span>;
  }
}

<span class="hljs-comment">// lodash-extensions.ts - Adding methods to existing library</span>
<span class="hljs-keyword">import</span> _ <span class="hljs-keyword">from</span> <span class="hljs-string">"lodash"</span>;

<span class="hljs-keyword">declare</span> <span class="hljs-keyword">module</span> "lodash" {
  <span class="hljs-keyword">interface</span> LoDashStatic {
    customMethod(value: <span class="hljs-built_in">any</span>): <span class="hljs-built_in">boolean</span>;
  }
}

_.customMethod = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">value: <span class="hljs-built_in">any</span></span>): <span class="hljs-title">boolean</span> </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> value === <span class="hljs-string">"string"</span> &amp;&amp; value.length &gt; <span class="hljs-number">0</span>;
};

<span class="hljs-comment">// Usage</span>
<span class="hljs-keyword">const</span> isValid = _.customMethod(<span class="hljs-string">"hello"</span>); <span class="hljs-comment">// TypeScript knows about this method</span>
</div></code></pre>
<h3 id="conditional-module-loading">Conditional Module Loading</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// feature-loader.ts</span>
<span class="hljs-keyword">interface</span> FeatureModule {
  initialize(): <span class="hljs-built_in">void</span>;
  cleanup(): <span class="hljs-built_in">void</span>;
}

<span class="hljs-keyword">class</span> FeatureLoader {
  <span class="hljs-keyword">private</span> loadedFeatures = <span class="hljs-keyword">new</span> Map&lt;<span class="hljs-built_in">string</span>, FeatureModule&gt;();

  <span class="hljs-keyword">async</span> loadFeature(featureName: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">Promise</span>&lt;FeatureModule | <span class="hljs-literal">null</span>&gt; {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.loadedFeatures.has(featureName)) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.loadedFeatures.get(featureName)!;
    }

    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">let</span> <span class="hljs-keyword">module</span>: FeatureModule;

      switch (featureName) {
        <span class="hljs-keyword">case</span> <span class="hljs-string">"analytics"</span>:
          <span class="hljs-keyword">module</span> = await import("./features/analytics");
          break;
        case "chat":
          <span class="hljs-keyword">module</span> = await import("./features/chat");
          break;
        case "notifications":
          <span class="hljs-keyword">module</span> = await import("./features/notifications");
          break;
        default:
          console.warn(`Unknown feature: ${featureName}<span class="hljs-string">`);
          return null;
      }

      module.initialize();
      this.loadedFeatures.set(featureName, module);
      return module;
    } catch (error) {
      console.error(`</span>Failed to load feature ${featureName}:<span class="hljs-string">`, error);
      return null;
    }
  }

  unloadFeature(featureName: string): void {
    const feature = this.loadedFeatures.get(featureName);
    if (feature) {
      feature.cleanup();
      this.loadedFeatures.delete(featureName);
    }
  }
}

// features/analytics.ts
export function initialize(): void {
  console.log("Analytics feature initialized");
  // Setup analytics tracking
}

export function cleanup(): void {
  console.log("Analytics feature cleaned up");
  // Cleanup analytics resources
}

// Usage
const featureLoader = new FeatureLoader();

// Load features conditionally
if (process.env.NODE_ENV === "production") {
  await featureLoader.loadFeature("analytics");
}

if (userHasPremium) {
  await featureLoader.loadFeature("chat");
}
</span></div></code></pre>
<h2 id="namespaces">Namespaces</h2>
<p>While modules are preferred in modern TypeScript, namespaces can still be useful for organizing code within a single file or for library definitions.</p>
<h3 id="basic-namespace-usage">Basic Namespace Usage</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// geometry.ts</span>
<span class="hljs-keyword">namespace</span> Geometry {
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> Point {
    x: <span class="hljs-built_in">number</span>;
    y: <span class="hljs-built_in">number</span>;
  }

  <span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> Rectangle {
    topLeft: Point;
    bottomRight: Point;
  }

  <span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">distance</span>(<span class="hljs-params">p1: Point, p2: Point</span>): <span class="hljs-title">number</span> </span>{
    <span class="hljs-keyword">const</span> dx = p2.x - p1.x;
    <span class="hljs-keyword">const</span> dy = p2.y - p1.y;
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.sqrt(dx * dx + dy * dy);
  }

  <span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">area</span>(<span class="hljs-params">rect: Rectangle</span>): <span class="hljs-title">number</span> </span>{
    <span class="hljs-keyword">const</span> width = rect.bottomRight.x - rect.topLeft.x;
    <span class="hljs-keyword">const</span> height = rect.bottomRight.y - rect.topLeft.y;
    <span class="hljs-keyword">return</span> width * height;
  }

  <span class="hljs-keyword">export</span> <span class="hljs-keyword">namespace</span> Circle {
    <span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> CircleShape {
      center: Point;
      radius: <span class="hljs-built_in">number</span>;
    }

    <span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">area</span>(<span class="hljs-params">circle: CircleShape</span>): <span class="hljs-title">number</span> </span>{
      <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.PI * circle.radius * circle.radius;
    }

    <span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">circumference</span>(<span class="hljs-params">circle: CircleShape</span>): <span class="hljs-title">number</span> </span>{
      <span class="hljs-keyword">return</span> <span class="hljs-number">2</span> * <span class="hljs-built_in">Math</span>.PI * circle.radius;
    }
  }
}

<span class="hljs-comment">// Usage</span>
<span class="hljs-keyword">const</span> point1: Geometry.Point = { x: <span class="hljs-number">0</span>, y: <span class="hljs-number">0</span> };
<span class="hljs-keyword">const</span> point2: Geometry.Point = { x: <span class="hljs-number">3</span>, y: <span class="hljs-number">4</span> };
<span class="hljs-keyword">const</span> dist = Geometry.distance(point1, point2);

<span class="hljs-keyword">const</span> rectangle: Geometry.Rectangle = {
  topLeft: { x: <span class="hljs-number">0</span>, y: <span class="hljs-number">0</span> },
  bottomRight: { x: <span class="hljs-number">10</span>, y: <span class="hljs-number">5</span> },
};
<span class="hljs-keyword">const</span> rectArea = Geometry.area(rectangle);

<span class="hljs-keyword">const</span> circle: Geometry.Circle.CircleShape = {
  center: { x: <span class="hljs-number">0</span>, y: <span class="hljs-number">0</span> },
  radius: <span class="hljs-number">5</span>,
};
<span class="hljs-keyword">const</span> circleArea = Geometry.Circle.area(circle);
</div></code></pre>
<h3 id="namespace-merging">Namespace Merging</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Multiple namespace declarations with the same name are merged</span>
<span class="hljs-keyword">namespace</span> Utils {
  <span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">formatDate</span>(<span class="hljs-params">date: <span class="hljs-built_in">Date</span></span>): <span class="hljs-title">string</span> </span>{
    <span class="hljs-keyword">return</span> date.toISOString().split(<span class="hljs-string">"T"</span>)[<span class="hljs-number">0</span>];
  }
}

<span class="hljs-keyword">namespace</span> Utils {
  <span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">formatTime</span>(<span class="hljs-params">date: <span class="hljs-built_in">Date</span></span>): <span class="hljs-title">string</span> </span>{
    <span class="hljs-keyword">return</span> date.toTimeString().split(<span class="hljs-string">" "</span>)[<span class="hljs-number">0</span>];
  }
}

<span class="hljs-keyword">namespace</span> Utils {
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> Config {
    dateFormat: <span class="hljs-built_in">string</span>;
    timeFormat: <span class="hljs-built_in">string</span>;
  }

  <span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> defaultConfig: Config = {
    dateFormat: <span class="hljs-string">"YYYY-MM-DD"</span>,
    timeFormat: <span class="hljs-string">"HH:mm:ss"</span>,
  };
}

<span class="hljs-comment">// All declarations are merged into one namespace</span>
<span class="hljs-keyword">const</span> formattedDate = Utils.formatDate(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>());
<span class="hljs-keyword">const</span> formattedTime = Utils.formatTime(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>());
<span class="hljs-keyword">const</span> config = Utils.defaultConfig;
</div></code></pre>
<h3 id="namespace-aliases">Namespace Aliases</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Long namespace names can be aliased</span>
<span class="hljs-keyword">namespace</span> VeryLongCompanyName {
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">namespace</span> ProductManagement {
    <span class="hljs-keyword">export</span> <span class="hljs-keyword">namespace</span> InventorySystem {
      <span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> Product {
        id: <span class="hljs-built_in">string</span>;
        name: <span class="hljs-built_in">string</span>;
        price: <span class="hljs-built_in">number</span>;
      }

      <span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createProduct</span>(<span class="hljs-params">name: <span class="hljs-built_in">string</span>, price: <span class="hljs-built_in">number</span></span>): <span class="hljs-title">Product</span> </span>{
        <span class="hljs-keyword">return</span> {
          id: <span class="hljs-built_in">Math</span>.random().toString(<span class="hljs-number">36</span>),
          name,
          price,
        };
      }
    }
  }
}

<span class="hljs-comment">// Create alias for easier access</span>
<span class="hljs-keyword">import</span> Inventory = VeryLongCompanyName.ProductManagement.InventorySystem;

<span class="hljs-comment">// Now use the shorter alias</span>
<span class="hljs-keyword">const</span> product: Inventory.Product = Inventory.createProduct(<span class="hljs-string">"Widget"</span>, <span class="hljs-number">29.99</span>);
</div></code></pre>
<h2 id="module-vs-namespace-guidelines">Module vs Namespace Guidelines</h2>
<h3 id="when-to-use-modules">When to Use Modules</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// ‚úÖ Use modules for:</span>

<span class="hljs-comment">// 1. Separate files with related functionality</span>
<span class="hljs-comment">// user-service.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> UserService {
  <span class="hljs-keyword">async</span> getUser(id: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">Promise</span>&lt;User&gt; {
    <span class="hljs-comment">// Implementation</span>
  }
}

<span class="hljs-comment">// 2. Third-party library integration</span>
<span class="hljs-comment">// api-client.ts</span>
<span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">"axios"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> ApiClient {
  <span class="hljs-keyword">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> baseURL: <span class="hljs-built_in">string</span></span>) {}

  <span class="hljs-keyword">async</span> <span class="hljs-keyword">get</span>&lt;T&gt;(endpoint: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">Promise</span>&lt;T&gt; {
    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> axios.get(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-keyword">this</span>.baseURL}</span><span class="hljs-subst">${endpoint}</span>`</span>);
    <span class="hljs-keyword">return</span> response.data;
  }
}

<span class="hljs-comment">// 3. Code that needs to be tree-shaken</span>
<span class="hljs-comment">// utils.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">debounce</span>&lt;<span class="hljs-title">T</span> <span class="hljs-title">extends</span> (<span class="hljs-params">...args: <span class="hljs-built_in">any</span>[]</span>) =&gt; <span class="hljs-title">any</span>&gt;(<span class="hljs-params">
  func: T,
  wait: <span class="hljs-built_in">number</span>
</span>): <span class="hljs-title">T</span> </span>{
  <span class="hljs-comment">// Implementation</span>
}

<span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">throttle</span>&lt;<span class="hljs-title">T</span> <span class="hljs-title">extends</span> (<span class="hljs-params">...args: <span class="hljs-built_in">any</span>[]</span>) =&gt; <span class="hljs-title">any</span>&gt;(<span class="hljs-params">
  func: T,
  limit: <span class="hljs-built_in">number</span>
</span>): <span class="hljs-title">T</span> </span>{
  <span class="hljs-comment">// Implementation</span>
}

<span class="hljs-comment">// Only import what you need</span>
<span class="hljs-keyword">import</span> { debounce } <span class="hljs-keyword">from</span> <span class="hljs-string">"./utils"</span>; <span class="hljs-comment">// throttle is not included in bundle</span>
</div></code></pre>
<h3 id="when-to-use-namespaces">When to Use Namespaces</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// ‚úÖ Use namespaces for:</span>

<span class="hljs-comment">// 1. Organizing related types and functions in a single file</span>
<span class="hljs-keyword">namespace</span> ValidationRules {
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> Rule&lt;T&gt; {
    validate(value: T): <span class="hljs-built_in">boolean</span>;
    message: <span class="hljs-built_in">string</span>;
  }

  <span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> required: Rule&lt;<span class="hljs-built_in">any</span>&gt; = {
    validate: <span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> value != <span class="hljs-literal">null</span> &amp;&amp; value !== <span class="hljs-string">""</span>,
    message: <span class="hljs-string">"This field is required"</span>,
  };

  <span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> email: Rule&lt;<span class="hljs-built_in">string</span>&gt; = {
    validate: <span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(value),
    message: <span class="hljs-string">"Invalid email format"</span>,
  };

  <span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">minLength</span>(<span class="hljs-params">min: <span class="hljs-built_in">number</span></span>): <span class="hljs-title">Rule</span>&lt;<span class="hljs-title">string</span>&gt; </span>{
    <span class="hljs-keyword">return</span> {
      validate: <span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> value.length &gt;= min,
      message: <span class="hljs-string">`Minimum length is <span class="hljs-subst">${min}</span>`</span>,
    };
  }
}

<span class="hljs-comment">// 2. Library type definitions</span>
<span class="hljs-keyword">declare</span> <span class="hljs-keyword">namespace</span> MyLibrary {
  <span class="hljs-keyword">interface</span> Config {
    apiKey: <span class="hljs-built_in">string</span>;
    baseUrl: <span class="hljs-built_in">string</span>;
  }

  <span class="hljs-keyword">interface</span> User {
    id: <span class="hljs-built_in">string</span>;
    name: <span class="hljs-built_in">string</span>;
  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">initialize</span>(<span class="hljs-params">config: Config</span>): <span class="hljs-title">void</span></span>;
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getUser</span>(<span class="hljs-params">id: <span class="hljs-built_in">string</span></span>): <span class="hljs-title">Promise</span>&lt;<span class="hljs-title">User</span>&gt;</span>;
}

<span class="hljs-comment">// 3. Global augmentations</span>
<span class="hljs-keyword">declare</span> global {
  <span class="hljs-keyword">namespace</span> Express {
    <span class="hljs-keyword">interface</span> Request {
      user?: User;
    }
  }
}
</div></code></pre>
<h2 id="practical-examples">Practical Examples</h2>
<h3 id="plugin-system-with-modules">Plugin System with Modules</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// plugin-system.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> Plugin {
  name: <span class="hljs-built_in">string</span>;
  version: <span class="hljs-built_in">string</span>;
  initialize(app: Application): <span class="hljs-built_in">void</span>;
  destroy(): <span class="hljs-built_in">void</span>;
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> Application {
  registerRoute(path: <span class="hljs-built_in">string</span>, handler: <span class="hljs-built_in">Function</span>): <span class="hljs-built_in">void</span>;
  registerMiddleware(middleware: <span class="hljs-built_in">Function</span>): <span class="hljs-built_in">void</span>;
  getConfig(key: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">any</span>;
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> PluginManager {
  <span class="hljs-keyword">private</span> plugins = <span class="hljs-keyword">new</span> Map&lt;<span class="hljs-built_in">string</span>, Plugin&gt;();
  <span class="hljs-keyword">private</span> app: Application;

  <span class="hljs-keyword">constructor</span>(<span class="hljs-params">app: Application</span>) {
    <span class="hljs-keyword">this</span>.app = app;
  }

  <span class="hljs-keyword">async</span> loadPlugin(pluginPath: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> pluginModule = <span class="hljs-keyword">await</span> <span class="hljs-keyword">import</span>(pluginPath);
      <span class="hljs-keyword">const</span> plugin: Plugin = pluginModule.default || pluginModule;

      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.plugins.has(plugin.name)) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">`Plugin <span class="hljs-subst">${plugin.name}</span> is already loaded`</span>);
      }

      plugin.initialize(<span class="hljs-keyword">this</span>.app);
      <span class="hljs-keyword">this</span>.plugins.set(plugin.name, plugin);

      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`Plugin <span class="hljs-subst">${plugin.name}</span> v<span class="hljs-subst">${plugin.version}</span> loaded`</span>);
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-built_in">console</span>.error(<span class="hljs-string">`Failed to load plugin from <span class="hljs-subst">${pluginPath}</span>:`</span>, error);
    }
  }

  unloadPlugin(name: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">void</span> {
    <span class="hljs-keyword">const</span> plugin = <span class="hljs-keyword">this</span>.plugins.get(name);
    <span class="hljs-keyword">if</span> (plugin) {
      plugin.destroy();
      <span class="hljs-keyword">this</span>.plugins.delete(name);
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`Plugin <span class="hljs-subst">${name}</span> unloaded`</span>);
    }
  }

  getLoadedPlugins(): <span class="hljs-built_in">string</span>[] {
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Array</span>.from(<span class="hljs-keyword">this</span>.plugins.keys());
  }
}

<span class="hljs-comment">// plugins/auth-plugin.ts</span>
<span class="hljs-keyword">import</span> { Plugin, Application } <span class="hljs-keyword">from</span> <span class="hljs-string">"../plugin-system"</span>;

<span class="hljs-keyword">class</span> AuthPlugin <span class="hljs-keyword">implements</span> Plugin {
  name = <span class="hljs-string">"auth"</span>;
  version = <span class="hljs-string">"1.0.0"</span>;

  initialize(app: Application): <span class="hljs-built_in">void</span> {
    <span class="hljs-comment">// Register authentication middleware</span>
    app.registerMiddleware(<span class="hljs-function">(<span class="hljs-params">req: <span class="hljs-built_in">any</span>, res: <span class="hljs-built_in">any</span>, next: <span class="hljs-built_in">any</span></span>) =&gt;</span> {
      <span class="hljs-comment">// Authentication logic</span>
      next();
    });

    <span class="hljs-comment">// Register auth routes</span>
    app.registerRoute(<span class="hljs-string">"/login"</span>, <span class="hljs-keyword">this</span>.handleLogin);
    app.registerRoute(<span class="hljs-string">"/logout"</span>, <span class="hljs-keyword">this</span>.handleLogout);
  }

  destroy(): <span class="hljs-built_in">void</span> {
    <span class="hljs-comment">// Cleanup resources</span>
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Auth plugin destroyed"</span>);
  }

  <span class="hljs-keyword">private</span> handleLogin(req: <span class="hljs-built_in">any</span>, res: <span class="hljs-built_in">any</span>): <span class="hljs-built_in">void</span> {
    <span class="hljs-comment">// Login logic</span>
  }

  <span class="hljs-keyword">private</span> handleLogout(req: <span class="hljs-built_in">any</span>, res: <span class="hljs-built_in">any</span>): <span class="hljs-built_in">void</span> {
    <span class="hljs-comment">// Logout logic</span>
  }
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> AuthPlugin;

<span class="hljs-comment">// plugins/analytics-plugin.ts</span>
<span class="hljs-keyword">import</span> { Plugin, Application } <span class="hljs-keyword">from</span> <span class="hljs-string">"../plugin-system"</span>;

<span class="hljs-keyword">class</span> AnalyticsPlugin <span class="hljs-keyword">implements</span> Plugin {
  name = <span class="hljs-string">"analytics"</span>;
  version = <span class="hljs-string">"2.1.0"</span>;
  <span class="hljs-keyword">private</span> trackingId: <span class="hljs-built_in">string</span>;

  initialize(app: Application): <span class="hljs-built_in">void</span> {
    <span class="hljs-keyword">this</span>.trackingId = app.getConfig(<span class="hljs-string">"analytics.trackingId"</span>);

    <span class="hljs-comment">// Register analytics middleware</span>
    app.registerMiddleware(<span class="hljs-function">(<span class="hljs-params">req: <span class="hljs-built_in">any</span>, res: <span class="hljs-built_in">any</span>, next: <span class="hljs-built_in">any</span></span>) =&gt;</span> {
      <span class="hljs-keyword">this</span>.trackPageView(req.path);
      next();
    });
  }

  destroy(): <span class="hljs-built_in">void</span> {
    <span class="hljs-comment">// Send final analytics data</span>
    <span class="hljs-keyword">this</span>.flush();
  }

  <span class="hljs-keyword">private</span> trackPageView(path: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">void</span> {
    <span class="hljs-comment">// Track page view</span>
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`Tracking page view: <span class="hljs-subst">${path}</span>`</span>);
  }

  <span class="hljs-keyword">private</span> flush(): <span class="hljs-built_in">void</span> {
    <span class="hljs-comment">// Send remaining analytics data</span>
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Analytics data flushed"</span>);
  }
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> AnalyticsPlugin;

<span class="hljs-comment">// app.ts</span>
<span class="hljs-keyword">import</span> { PluginManager, Application } <span class="hljs-keyword">from</span> <span class="hljs-string">"./plugin-system"</span>;

<span class="hljs-keyword">class</span> MyApplication <span class="hljs-keyword">implements</span> Application {
  <span class="hljs-keyword">private</span> routes = <span class="hljs-keyword">new</span> Map&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">Function</span>&gt;();
  <span class="hljs-keyword">private</span> middlewares: <span class="hljs-built_in">Function</span>[] = [];
  <span class="hljs-keyword">private</span> config = <span class="hljs-keyword">new</span> Map&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt;();

  <span class="hljs-keyword">constructor</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">this</span>.config.set(<span class="hljs-string">"analytics.trackingId"</span>, <span class="hljs-string">"GA-123456789"</span>);
  }

  registerRoute(path: <span class="hljs-built_in">string</span>, handler: <span class="hljs-built_in">Function</span>): <span class="hljs-built_in">void</span> {
    <span class="hljs-keyword">this</span>.routes.set(path, handler);
  }

  registerMiddleware(middleware: <span class="hljs-built_in">Function</span>): <span class="hljs-built_in">void</span> {
    <span class="hljs-keyword">this</span>.middlewares.push(middleware);
  }

  getConfig(key: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">any</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.config.get(key);
  }
}

<span class="hljs-comment">// Usage</span>
<span class="hljs-keyword">const</span> app = <span class="hljs-keyword">new</span> MyApplication();
<span class="hljs-keyword">const</span> pluginManager = <span class="hljs-keyword">new</span> PluginManager(app);

<span class="hljs-comment">// Load plugins dynamically</span>
<span class="hljs-keyword">await</span> pluginManager.loadPlugin(<span class="hljs-string">"./plugins/auth-plugin"</span>);
<span class="hljs-keyword">await</span> pluginManager.loadPlugin(<span class="hljs-string">"./plugins/analytics-plugin"</span>);

<span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Loaded plugins:"</span>, pluginManager.getLoadedPlugins());
</div></code></pre>
<h3 id="configuration-management-system">Configuration Management System</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// config/types.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> DatabaseConfig {
  host: <span class="hljs-built_in">string</span>;
  port: <span class="hljs-built_in">number</span>;
  username: <span class="hljs-built_in">string</span>;
  password: <span class="hljs-built_in">string</span>;
  database: <span class="hljs-built_in">string</span>;
  ssl: <span class="hljs-built_in">boolean</span>;
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> ApiConfig {
  baseUrl: <span class="hljs-built_in">string</span>;
  timeout: <span class="hljs-built_in">number</span>;
  retries: <span class="hljs-built_in">number</span>;
  apiKey: <span class="hljs-built_in">string</span>;
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> LoggingConfig {
  level: <span class="hljs-string">"debug"</span> | <span class="hljs-string">"info"</span> | <span class="hljs-string">"warn"</span> | <span class="hljs-string">"error"</span>;
  format: <span class="hljs-string">"json"</span> | <span class="hljs-string">"text"</span>;
  outputs: (<span class="hljs-string">"console"</span> | <span class="hljs-string">"file"</span> | <span class="hljs-string">"remote"</span>)[];
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> AppConfig {
  environment: <span class="hljs-string">"development"</span> | <span class="hljs-string">"staging"</span> | <span class="hljs-string">"production"</span>;
  port: <span class="hljs-built_in">number</span>;
  database: DatabaseConfig;
  api: ApiConfig;
  logging: LoggingConfig;
  features: {
    authentication: <span class="hljs-built_in">boolean</span>;
    analytics: <span class="hljs-built_in">boolean</span>;
    caching: <span class="hljs-built_in">boolean</span>;
  };
}

<span class="hljs-comment">// config/loaders.ts</span>
<span class="hljs-keyword">import</span> { AppConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">"./types"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> ConfigLoader {
  load(): <span class="hljs-built_in">Promise</span>&lt;Partial&lt;AppConfig&gt;&gt;;
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> EnvironmentConfigLoader <span class="hljs-keyword">implements</span> ConfigLoader {
  <span class="hljs-keyword">async</span> load(): <span class="hljs-built_in">Promise</span>&lt;Partial&lt;AppConfig&gt;&gt; {
    <span class="hljs-keyword">return</span> {
      environment: (process.env.NODE_ENV <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>) || <span class="hljs-string">"development"</span>,
      port: <span class="hljs-built_in">parseInt</span>(process.env.PORT || <span class="hljs-string">"3000"</span>),
      database: {
        host: process.env.DB_HOST || <span class="hljs-string">"localhost"</span>,
        port: <span class="hljs-built_in">parseInt</span>(process.env.DB_PORT || <span class="hljs-string">"5432"</span>),
        username: process.env.DB_USERNAME || <span class="hljs-string">"user"</span>,
        password: process.env.DB_PASSWORD || <span class="hljs-string">"password"</span>,
        database: process.env.DB_NAME || <span class="hljs-string">"myapp"</span>,
        ssl: process.env.DB_SSL === <span class="hljs-string">"true"</span>,
      },
      api: {
        baseUrl: process.env.API_BASE_URL || <span class="hljs-string">"http://localhost:3000"</span>,
        timeout: <span class="hljs-built_in">parseInt</span>(process.env.API_TIMEOUT || <span class="hljs-string">"5000"</span>),
        retries: <span class="hljs-built_in">parseInt</span>(process.env.API_RETRIES || <span class="hljs-string">"3"</span>),
        apiKey: process.env.API_KEY || <span class="hljs-string">""</span>,
      },
    };
  }
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> FileConfigLoader <span class="hljs-keyword">implements</span> ConfigLoader {
  <span class="hljs-keyword">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> filePath: <span class="hljs-built_in">string</span></span>) {}

  <span class="hljs-keyword">async</span> load(): <span class="hljs-built_in">Promise</span>&lt;Partial&lt;AppConfig&gt;&gt; {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> fs = <span class="hljs-keyword">await</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">"fs/promises"</span>);
      <span class="hljs-keyword">const</span> content = <span class="hljs-keyword">await</span> fs.readFile(<span class="hljs-keyword">this</span>.filePath, <span class="hljs-string">"utf-8"</span>);
      <span class="hljs-keyword">return</span> <span class="hljs-built_in">JSON</span>.parse(content);
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-built_in">console</span>.warn(<span class="hljs-string">`Failed to load config from <span class="hljs-subst">${<span class="hljs-keyword">this</span>.filePath}</span>:`</span>, error);
      <span class="hljs-keyword">return</span> {};
    }
  }
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> RemoteConfigLoader <span class="hljs-keyword">implements</span> ConfigLoader {
  <span class="hljs-keyword">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> url: <span class="hljs-built_in">string</span>, <span class="hljs-keyword">private</span> apiKey: <span class="hljs-built_in">string</span></span>) {}

  <span class="hljs-keyword">async</span> load(): <span class="hljs-built_in">Promise</span>&lt;Partial&lt;AppConfig&gt;&gt; {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> fetch(<span class="hljs-keyword">this</span>.url, {
        headers: {
          Authorization: <span class="hljs-string">`Bearer <span class="hljs-subst">${<span class="hljs-keyword">this</span>.apiKey}</span>`</span>,
          <span class="hljs-string">"Content-Type"</span>: <span class="hljs-string">"application/json"</span>,
        },
      });

      <span class="hljs-keyword">if</span> (!response.ok) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">`HTTP <span class="hljs-subst">${response.status}</span>: <span class="hljs-subst">${response.statusText}</span>`</span>);
      }

      <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> response.json();
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-built_in">console</span>.warn(<span class="hljs-string">`Failed to load remote config from <span class="hljs-subst">${<span class="hljs-keyword">this</span>.url}</span>:`</span>, error);
      <span class="hljs-keyword">return</span> {};
    }
  }
}

<span class="hljs-comment">// config/manager.ts</span>
<span class="hljs-keyword">import</span> { AppConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">"./types"</span>;
<span class="hljs-keyword">import</span> { ConfigLoader } <span class="hljs-keyword">from</span> <span class="hljs-string">"./loaders"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> ConfigManager {
  <span class="hljs-keyword">private</span> config: AppConfig;
  <span class="hljs-keyword">private</span> loaders: ConfigLoader[] = [];

  <span class="hljs-keyword">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> defaultConfig: AppConfig</span>) {
    <span class="hljs-keyword">this</span>.config = { ...defaultConfig };
  }

  addLoader(loader: ConfigLoader): <span class="hljs-built_in">void</span> {
    <span class="hljs-keyword">this</span>.loaders.push(loader);
  }

  <span class="hljs-keyword">async</span> load(): <span class="hljs-built_in">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> loader of <span class="hljs-keyword">this</span>.loaders) {
      <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">const</span> partialConfig = <span class="hljs-keyword">await</span> loader.load();
        <span class="hljs-keyword">this</span>.config = <span class="hljs-keyword">this</span>.mergeConfig(<span class="hljs-keyword">this</span>.config, partialConfig);
      } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-built_in">console</span>.error(<span class="hljs-string">"Config loader failed:"</span>, error);
      }
    }
  }

  <span class="hljs-keyword">get</span>&lt;K <span class="hljs-keyword">extends</span> keyof AppConfig&gt;(key: K): AppConfig[K] {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.config[key];
  }

  getAll(): Readonly&lt;AppConfig&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Object</span>.freeze({ ...this.config });
  }

  <span class="hljs-keyword">private</span> mergeConfig(base: AppConfig, partial: Partial&lt;AppConfig&gt;): AppConfig {
    <span class="hljs-keyword">const</span> result = { ...base };

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> [key, value] of <span class="hljs-built_in">Object</span>.entries(partial)) {
      <span class="hljs-keyword">if</span> (value !== <span class="hljs-literal">undefined</span>) {
        <span class="hljs-keyword">if</span> (
          <span class="hljs-keyword">typeof</span> value === <span class="hljs-string">"object"</span> &amp;&amp;
          !<span class="hljs-built_in">Array</span>.isArray(value) &amp;&amp;
          value !== <span class="hljs-literal">null</span>
        ) {
          (result <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>)[key] = { ...(result <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>)[key], ...value };
        } <span class="hljs-keyword">else</span> {
          (result <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>)[key] = value;
        }
      }
    }

    <span class="hljs-keyword">return</span> result;
  }
}

<span class="hljs-comment">// config/index.ts - Barrel export</span>
<span class="hljs-keyword">export</span> * <span class="hljs-keyword">from</span> <span class="hljs-string">"./types"</span>;
<span class="hljs-keyword">export</span> * <span class="hljs-keyword">from</span> <span class="hljs-string">"./loaders"</span>;
<span class="hljs-keyword">export</span> * <span class="hljs-keyword">from</span> <span class="hljs-string">"./manager"</span>;

<span class="hljs-comment">// Default configuration</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> defaultConfig: AppConfig = {
  environment: <span class="hljs-string">"development"</span>,
  port: <span class="hljs-number">3000</span>,
  database: {
    host: <span class="hljs-string">"localhost"</span>,
    port: <span class="hljs-number">5432</span>,
    username: <span class="hljs-string">"user"</span>,
    password: <span class="hljs-string">"password"</span>,
    database: <span class="hljs-string">"myapp"</span>,
    ssl: <span class="hljs-literal">false</span>,
  },
  api: {
    baseUrl: <span class="hljs-string">"http://localhost:3000"</span>,
    timeout: <span class="hljs-number">5000</span>,
    retries: <span class="hljs-number">3</span>,
    apiKey: <span class="hljs-string">""</span>,
  },
  logging: {
    level: <span class="hljs-string">"info"</span>,
    format: <span class="hljs-string">"text"</span>,
    outputs: [<span class="hljs-string">"console"</span>],
  },
  features: {
    authentication: <span class="hljs-literal">true</span>,
    analytics: <span class="hljs-literal">false</span>,
    caching: <span class="hljs-literal">true</span>,
  },
};

<span class="hljs-comment">// app.ts - Usage</span>
<span class="hljs-keyword">import</span> {
  ConfigManager,
  EnvironmentConfigLoader,
  FileConfigLoader,
  RemoteConfigLoader,
  defaultConfig,
} <span class="hljs-keyword">from</span> <span class="hljs-string">"./config"</span>;

<span class="hljs-keyword">const</span> configManager = <span class="hljs-keyword">new</span> ConfigManager(defaultConfig);

<span class="hljs-comment">// Add multiple config sources</span>
configManager.addLoader(<span class="hljs-keyword">new</span> EnvironmentConfigLoader());
configManager.addLoader(<span class="hljs-keyword">new</span> FileConfigLoader(<span class="hljs-string">"./config.json"</span>));

<span class="hljs-keyword">if</span> (process.env.REMOTE_CONFIG_URL) {
  configManager.addLoader(
    <span class="hljs-keyword">new</span> RemoteConfigLoader(
      process.env.REMOTE_CONFIG_URL,
      process.env.REMOTE_CONFIG_API_KEY || <span class="hljs-string">""</span>
    )
  );
}

<span class="hljs-comment">// Load configuration</span>
<span class="hljs-keyword">await</span> configManager.load();

<span class="hljs-comment">// Use configuration</span>
<span class="hljs-keyword">const</span> dbConfig = configManager.get(<span class="hljs-string">"database"</span>);
<span class="hljs-keyword">const</span> apiConfig = configManager.get(<span class="hljs-string">"api"</span>);
<span class="hljs-keyword">const</span> isAnalyticsEnabled = configManager.get(<span class="hljs-string">"features"</span>).analytics;

<span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Database host:"</span>, dbConfig.host);
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">"API base URL:"</span>, apiConfig.baseUrl);
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Analytics enabled:"</span>, isAnalyticsEnabled);
</div></code></pre>
<h2 id="best-practices">Best Practices</h2>
<h3 id="%E2%9C%85-good-practices">‚úÖ Good Practices</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Use barrel exports for clean imports</span>
<span class="hljs-comment">// index.ts</span>
<span class="hljs-keyword">export</span> * <span class="hljs-keyword">from</span> <span class="hljs-string">"./user-service"</span>;
<span class="hljs-keyword">export</span> * <span class="hljs-keyword">from</span> <span class="hljs-string">"./product-service"</span>;
<span class="hljs-keyword">export</span> { <span class="hljs-keyword">default</span> <span class="hljs-keyword">as</span> Logger } <span class="hljs-keyword">from</span> <span class="hljs-string">"./logger"</span>;

<span class="hljs-comment">// Prefer named exports over default exports</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> UserService {
  <span class="hljs-comment">/* ... */</span>
}
<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> User {
  <span class="hljs-comment">/* ... */</span>
}
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> API_VERSION = <span class="hljs-string">"v1"</span>;

<span class="hljs-comment">// Use type-only imports when possible</span>
<span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> { User } <span class="hljs-keyword">from</span> <span class="hljs-string">"./types"</span>;
<span class="hljs-keyword">import</span> { createUser } <span class="hljs-keyword">from</span> <span class="hljs-string">"./user-factory"</span>;

<span class="hljs-comment">// Organize related functionality in modules</span>
<span class="hljs-comment">// user/</span>
<span class="hljs-comment">//   ‚îú‚îÄ‚îÄ types.ts</span>
<span class="hljs-comment">//   ‚îú‚îÄ‚îÄ service.ts</span>
<span class="hljs-comment">//   ‚îú‚îÄ‚îÄ repository.ts</span>
<span class="hljs-comment">//   ‚îú‚îÄ‚îÄ validation.ts</span>
<span class="hljs-comment">//   ‚îî‚îÄ‚îÄ index.ts</span>

<span class="hljs-comment">// Use consistent naming conventions</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> UserService {} <span class="hljs-comment">// PascalCase for classes</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> UserConfig {} <span class="hljs-comment">// PascalCase for interfaces</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> USER_ROLES = {} <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>; <span class="hljs-comment">// UPPER_SNAKE_CASE for constants</span>
<span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createUser</span>(<span class="hljs-params"></span>) </span>{} <span class="hljs-comment">// camelCase for functions</span>
</div></code></pre>
<h3 id="%E2%9D%8C-avoid">‚ùå Avoid</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Don't use namespaces for code that could be modules</span>
<span class="hljs-keyword">namespace</span> UserManagement {
  <span class="hljs-comment">// ‚ùå Should be separate modules</span>
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> UserService {}
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> UserRepository {}
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> UserValidator {}
}

<span class="hljs-comment">// Don't mix default and named exports in the same module</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> UserService {} <span class="hljs-comment">// ‚ùå</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> UserRepository {} <span class="hljs-comment">// ‚ùå Inconsistent</span>

<span class="hljs-comment">// Don't create deep namespace hierarchies</span>
<span class="hljs-keyword">namespace</span> Company.Department.Team.Project.Module {
  <span class="hljs-comment">// ‚ùå Too deep</span>
  <span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">doSomething</span>(<span class="hljs-params"></span>) </span>{}
}

<span class="hljs-comment">// Don't use relative imports for distant files</span>
<span class="hljs-keyword">import</span> { Utils } <span class="hljs-keyword">from</span> <span class="hljs-string">"../../../../../../../utils"</span>; <span class="hljs-comment">// ‚ùå Hard to maintain</span>

<span class="hljs-comment">// Don't export everything</span>
<span class="hljs-keyword">export</span> * <span class="hljs-keyword">from</span> <span class="hljs-string">"./internal-helpers"</span>; <span class="hljs-comment">// ‚ùå Exposes internal implementation</span>
</div></code></pre>
<h2 id="summary-checklist">Summary Checklist</h2>
<ul>
<li><input type="checkbox" id="checkbox94"><label for="checkbox94">Use ES6 modules for organizing code across files</label></li>
<li><input type="checkbox" id="checkbox95"><label for="checkbox95">Prefer named exports over default exports</label></li>
<li><input type="checkbox" id="checkbox96"><label for="checkbox96">Use barrel exports for clean import statements</label></li>
<li><input type="checkbox" id="checkbox97"><label for="checkbox97">Implement proper module resolution strategies</label></li>
<li><input type="checkbox" id="checkbox98"><label for="checkbox98">Use type-only imports when importing only types</label></li>
<li><input type="checkbox" id="checkbox99"><label for="checkbox99">Organize related functionality into cohesive modules</label></li>
<li><input type="checkbox" id="checkbox100"><label for="checkbox100">Use namespaces sparingly, mainly for type definitions</label></li>
<li><input type="checkbox" id="checkbox101"><label for="checkbox101">Implement dynamic imports for code splitting</label></li>
<li><input type="checkbox" id="checkbox102"><label for="checkbox102">Follow consistent naming conventions</label></li>
<li><input type="checkbox" id="checkbox103"><label for="checkbox103">Avoid deep namespace hierarchies</label></li>
</ul>
<h2 id="next-steps">Next Steps</h2>
<p>Now that you understand modules and namespaces, let's explore error handling patterns and best practices in TypeScript.</p>
<hr>
<p><em>Continue to: <a href="15-error-handling.md">Error Handling in TypeScript</a></em></p>
<h1 id="error-handling-in-typescript">Error Handling in TypeScript</h1>
<blockquote>
<p>Learn comprehensive error handling strategies, custom error types, and best practices for building robust TypeScript applications</p>
</blockquote>
<h2 id="basic-error-handling">Basic Error Handling</h2>
<h3 id="try-catch-finally">Try-Catch-Finally</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Basic try-catch structure</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">parseJSON</span>(<span class="hljs-params">jsonString: <span class="hljs-built_in">string</span></span>): <span class="hljs-title">any</span> </span>{
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">JSON</span>.parse(jsonString);
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-built_in">console</span>.error(<span class="hljs-string">"Failed to parse JSON:"</span>, error);
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
  }
}

<span class="hljs-comment">// Try-catch with finally</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">processFile</span>(<span class="hljs-params">filename: <span class="hljs-built_in">string</span></span>): <span class="hljs-title">string</span> | <span class="hljs-title">null</span> </span>{
  <span class="hljs-keyword">let</span> fileHandle: <span class="hljs-built_in">any</span> = <span class="hljs-literal">null</span>;

  <span class="hljs-keyword">try</span> {
    fileHandle = openFile(filename);
    <span class="hljs-keyword">const</span> content = readFile(fileHandle);
    <span class="hljs-keyword">return</span> processContent(content);
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-built_in">console</span>.error(<span class="hljs-string">`Error processing file <span class="hljs-subst">${filename}</span>:`</span>, error);
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
  } <span class="hljs-keyword">finally</span> {
    <span class="hljs-comment">// Always executed, regardless of success or failure</span>
    <span class="hljs-keyword">if</span> (fileHandle) {
      closeFile(fileHandle);
    }
  }
}

<span class="hljs-comment">// Type-safe error handling</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">safeDivide</span>(<span class="hljs-params">a: <span class="hljs-built_in">number</span>, b: <span class="hljs-built_in">number</span></span>): <span class="hljs-title">number</span> </span>{
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">if</span> (b === <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"Division by zero is not allowed"</span>);
    }
    <span class="hljs-keyword">return</span> a / b;
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-keyword">if</span> (error <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Error</span>) {
      <span class="hljs-built_in">console</span>.error(<span class="hljs-string">"Division error:"</span>, error.message);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-built_in">console</span>.error(<span class="hljs-string">"Unknown error:"</span>, error);
    }
    <span class="hljs-keyword">throw</span> error; <span class="hljs-comment">// Re-throw if you want calling code to handle it</span>
  }
}

<span class="hljs-comment">// Multiple catch scenarios (TypeScript doesn't have multiple catch blocks)</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">handleMultipleErrors</span>(<span class="hljs-params">operation: <span class="hljs-built_in">string</span></span>): <span class="hljs-title">void</span> </span>{
  <span class="hljs-keyword">try</span> {
    performOperation(operation);
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-keyword">if</span> (error <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">TypeError</span>) {
      <span class="hljs-built_in">console</span>.error(<span class="hljs-string">"Type error:"</span>, error.message);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (error <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">RangeError</span>) {
      <span class="hljs-built_in">console</span>.error(<span class="hljs-string">"Range error:"</span>, error.message);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (error <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Error</span>) {
      <span class="hljs-built_in">console</span>.error(<span class="hljs-string">"General error:"</span>, error.message);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-built_in">console</span>.error(<span class="hljs-string">"Unknown error:"</span>, error);
    }
  }
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">performOperation</span>(<span class="hljs-params">operation: <span class="hljs-built_in">string</span></span>): <span class="hljs-title">void</span> </span>{
  <span class="hljs-comment">// Implementation that might throw different types of errors</span>
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">openFile</span>(<span class="hljs-params">filename: <span class="hljs-built_in">string</span></span>): <span class="hljs-title">any</span> </span>{
  <span class="hljs-comment">/* Implementation */</span>
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">readFile</span>(<span class="hljs-params">handle: <span class="hljs-built_in">any</span></span>): <span class="hljs-title">string</span> </span>{
  <span class="hljs-comment">/* Implementation */</span>
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">closeFile</span>(<span class="hljs-params">handle: <span class="hljs-built_in">any</span></span>): <span class="hljs-title">void</span> </span>{
  <span class="hljs-comment">/* Implementation */</span>
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">processContent</span>(<span class="hljs-params">content: <span class="hljs-built_in">string</span></span>): <span class="hljs-title">string</span> </span>{
  <span class="hljs-comment">/* Implementation */</span>
}
</div></code></pre>
<h2 id="custom-error-types">Custom Error Types</h2>
<h3 id="creating-custom-error-classes">Creating Custom Error Classes</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Base custom error class</span>
<span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> AppError <span class="hljs-keyword">extends</span> <span class="hljs-built_in">Error</span> {
  <span class="hljs-keyword">abstract</span> readonly statusCode: <span class="hljs-built_in">number</span>;
  <span class="hljs-keyword">abstract</span> readonly isOperational: <span class="hljs-built_in">boolean</span>;

  <span class="hljs-keyword">constructor</span>(<span class="hljs-params">message: <span class="hljs-built_in">string</span>, <span class="hljs-keyword">public</span> readonly context?: Record&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt;</span>) {
    <span class="hljs-keyword">super</span>(message);
    <span class="hljs-keyword">this</span>.name = <span class="hljs-keyword">this</span>.<span class="hljs-keyword">constructor</span>.name;

    <span class="hljs-comment">// Maintains proper stack trace for where our error was thrown (only available on V8)</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Error</span>.captureStackTrace) {
      <span class="hljs-built_in">Error</span>.captureStackTrace(<span class="hljs-keyword">this</span>, <span class="hljs-keyword">this</span>.<span class="hljs-keyword">constructor</span>);
    }
  }
}

<span class="hljs-comment">// Specific error types</span>
<span class="hljs-keyword">class</span> ValidationError <span class="hljs-keyword">extends</span> AppError {
  readonly statusCode = <span class="hljs-number">400</span>;
  readonly isOperational = <span class="hljs-literal">true</span>;

  <span class="hljs-keyword">constructor</span>(<span class="hljs-params">
    message: <span class="hljs-built_in">string</span>,
    <span class="hljs-keyword">public</span> readonly field: <span class="hljs-built_in">string</span>,
    <span class="hljs-keyword">public</span> readonly value: <span class="hljs-built_in">any</span>,
    context?: Record&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt;
  </span>) {
    <span class="hljs-keyword">super</span>(message, context);
  }
}

<span class="hljs-keyword">class</span> NotFoundError <span class="hljs-keyword">extends</span> AppError {
  readonly statusCode = <span class="hljs-number">404</span>;
  readonly isOperational = <span class="hljs-literal">true</span>;

  <span class="hljs-keyword">constructor</span>(<span class="hljs-params">
    <span class="hljs-keyword">public</span> readonly resource: <span class="hljs-built_in">string</span>,
    <span class="hljs-keyword">public</span> readonly id: <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span>,
    context?: Record&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt;
  </span>) {
    <span class="hljs-keyword">super</span>(<span class="hljs-string">`<span class="hljs-subst">${resource}</span> with id <span class="hljs-subst">${id}</span> not found`</span>, context);
  }
}

<span class="hljs-keyword">class</span> DatabaseError <span class="hljs-keyword">extends</span> AppError {
  readonly statusCode = <span class="hljs-number">500</span>;
  readonly isOperational = <span class="hljs-literal">false</span>;

  <span class="hljs-keyword">constructor</span>(<span class="hljs-params">
    message: <span class="hljs-built_in">string</span>,
    <span class="hljs-keyword">public</span> readonly query?: <span class="hljs-built_in">string</span>,
    <span class="hljs-keyword">public</span> readonly originalError?: <span class="hljs-built_in">Error</span>,
    context?: Record&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt;
  </span>) {
    <span class="hljs-keyword">super</span>(message, context);
  }
}

<span class="hljs-keyword">class</span> AuthenticationError <span class="hljs-keyword">extends</span> AppError {
  readonly statusCode = <span class="hljs-number">401</span>;
  readonly isOperational = <span class="hljs-literal">true</span>;

  <span class="hljs-keyword">constructor</span>(<span class="hljs-params">
    message: <span class="hljs-built_in">string</span> = "Authentication failed",
    context?: Record&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt;
  </span>) {
    <span class="hljs-keyword">super</span>(message, context);
  }
}

<span class="hljs-keyword">class</span> AuthorizationError <span class="hljs-keyword">extends</span> AppError {
  readonly statusCode = <span class="hljs-number">403</span>;
  readonly isOperational = <span class="hljs-literal">true</span>;

  <span class="hljs-keyword">constructor</span>(<span class="hljs-params">
    <span class="hljs-keyword">public</span> readonly requiredPermission: <span class="hljs-built_in">string</span>,
    <span class="hljs-keyword">public</span> readonly userPermissions: <span class="hljs-built_in">string</span>[],
    context?: Record&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt;
  </span>) {
    <span class="hljs-keyword">super</span>(<span class="hljs-string">`Access denied. Required permission: <span class="hljs-subst">${requiredPermission}</span>`</span>, context);
  }
}

<span class="hljs-comment">// Business logic specific errors</span>
<span class="hljs-keyword">class</span> InsufficientFundsError <span class="hljs-keyword">extends</span> AppError {
  readonly statusCode = <span class="hljs-number">400</span>;
  readonly isOperational = <span class="hljs-literal">true</span>;

  <span class="hljs-keyword">constructor</span>(<span class="hljs-params">
    <span class="hljs-keyword">public</span> readonly requestedAmount: <span class="hljs-built_in">number</span>,
    <span class="hljs-keyword">public</span> readonly availableAmount: <span class="hljs-built_in">number</span>,
    context?: Record&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt;
  </span>) {
    <span class="hljs-keyword">super</span>(
      <span class="hljs-string">`Insufficient funds. Requested: <span class="hljs-subst">${requestedAmount}</span>, Available: <span class="hljs-subst">${availableAmount}</span>`</span>,
      context
    );
  }
}

<span class="hljs-keyword">class</span> RateLimitError <span class="hljs-keyword">extends</span> AppError {
  readonly statusCode = <span class="hljs-number">429</span>;
  readonly isOperational = <span class="hljs-literal">true</span>;

  <span class="hljs-keyword">constructor</span>(<span class="hljs-params">
    <span class="hljs-keyword">public</span> readonly limit: <span class="hljs-built_in">number</span>,
    <span class="hljs-keyword">public</span> readonly resetTime: <span class="hljs-built_in">Date</span>,
    context?: Record&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt;
  </span>) {
    <span class="hljs-keyword">super</span>(
      <span class="hljs-string">`Rate limit exceeded. Limit: <span class="hljs-subst">${limit}</span>, Reset time: <span class="hljs-subst">${resetTime.toISOString()}</span>`</span>,
      context
    );
  }
}
</div></code></pre>
<h3 id="error-factory-pattern">Error Factory Pattern</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Error factory for consistent error creation</span>
<span class="hljs-keyword">class</span> ErrorFactory {
  <span class="hljs-keyword">static</span> validation(
    field: <span class="hljs-built_in">string</span>,
    value: <span class="hljs-built_in">any</span>,
    message: <span class="hljs-built_in">string</span>
  ): ValidationError {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> ValidationError(message, field, value, {
      timestamp: <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().toISOString(),
      <span class="hljs-keyword">type</span>: <span class="hljs-string">"validation"</span>,
    });
  }

  <span class="hljs-keyword">static</span> notFound(resource: <span class="hljs-built_in">string</span>, id: <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span>): NotFoundError {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> NotFoundError(resource, id, {
      timestamp: <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().toISOString(),
      <span class="hljs-keyword">type</span>: <span class="hljs-string">"not_found"</span>,
    });
  }

  <span class="hljs-keyword">static</span> database(
    message: <span class="hljs-built_in">string</span>,
    query?: <span class="hljs-built_in">string</span>,
    originalError?: <span class="hljs-built_in">Error</span>
  ): DatabaseError {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> DatabaseError(message, query, originalError, {
      timestamp: <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().toISOString(),
      <span class="hljs-keyword">type</span>: <span class="hljs-string">"database"</span>,
    });
  }

  <span class="hljs-keyword">static</span> authentication(message?: <span class="hljs-built_in">string</span>): AuthenticationError {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> AuthenticationError(message, {
      timestamp: <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().toISOString(),
      <span class="hljs-keyword">type</span>: <span class="hljs-string">"authentication"</span>,
    });
  }

  <span class="hljs-keyword">static</span> authorization(
    requiredPermission: <span class="hljs-built_in">string</span>,
    userPermissions: <span class="hljs-built_in">string</span>[]
  ): AuthorizationError {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> AuthorizationError(requiredPermission, userPermissions, {
      timestamp: <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().toISOString(),
      <span class="hljs-keyword">type</span>: <span class="hljs-string">"authorization"</span>,
    });
  }

  <span class="hljs-keyword">static</span> rateLimit(limit: <span class="hljs-built_in">number</span>, resetTime: <span class="hljs-built_in">Date</span>): RateLimitError {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> RateLimitError(limit, resetTime, {
      timestamp: <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().toISOString(),
      <span class="hljs-keyword">type</span>: <span class="hljs-string">"rate_limit"</span>,
    });
  }
}

<span class="hljs-comment">// Usage</span>
<span class="hljs-keyword">try</span> {
  validateEmail(<span class="hljs-string">"invalid-email"</span>);
} <span class="hljs-keyword">catch</span> (error) {
  <span class="hljs-keyword">throw</span> ErrorFactory.validation(
    <span class="hljs-string">"email"</span>,
    <span class="hljs-string">"invalid-email"</span>,
    <span class="hljs-string">"Invalid email format"</span>
  );
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">validateEmail</span>(<span class="hljs-params">email: <span class="hljs-built_in">string</span></span>): <span class="hljs-title">void</span> </span>{
  <span class="hljs-keyword">if</span> (!email.includes(<span class="hljs-string">"@"</span>)) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"Invalid email"</span>);
  }
}
</div></code></pre>
<h2 id="result-pattern">Result Pattern</h2>
<p>The Result pattern is an alternative to throwing exceptions, providing explicit error handling.</p>
<h3 id="basic-result-implementation">Basic Result Implementation</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Result type definition</span>
<span class="hljs-keyword">type</span> Result&lt;T, E = <span class="hljs-built_in">Error</span>&gt; = Success&lt;T&gt; | Failure&lt;E&gt;;

<span class="hljs-keyword">class</span> Success&lt;T&gt; {
  readonly isSuccess = <span class="hljs-literal">true</span>;
  readonly isFailure = <span class="hljs-literal">false</span>;

  <span class="hljs-keyword">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">public</span> readonly value: T</span>) {}

  map&lt;U&gt;<span class="hljs-function">(<span class="hljs-params">fn: (<span class="hljs-params">value: T</span>) =&gt; U</span>): <span class="hljs-params">Result</span>&lt;<span class="hljs-params">U</span>, <span class="hljs-params">never</span>&gt; {
    <span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">Success</span>(<span class="hljs-params">fn(<span class="hljs-params"><span class="hljs-keyword">this</span>.value</span>)</span>);
  }

  <span class="hljs-params">flatMap</span>&lt;<span class="hljs-params">U</span>, <span class="hljs-params">F</span>&gt;(<span class="hljs-params">fn: (<span class="hljs-params">value: T</span>) =&gt; Result&lt;U, F&gt;</span>): <span class="hljs-params">Result</span>&lt;<span class="hljs-params">U</span>, <span class="hljs-params">F</span>&gt; {
    <span class="hljs-params">return</span> <span class="hljs-params">fn</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.value</span>);
  }

  <span class="hljs-params">mapError</span>&lt;<span class="hljs-params">F</span>&gt;(<span class="hljs-params">_fn: (<span class="hljs-params">error: never</span>) =&gt; F</span>): <span class="hljs-params">Result</span>&lt;<span class="hljs-params">T</span>, <span class="hljs-params">F</span>&gt; {
    <span class="hljs-params">return</span> <span class="hljs-params">this</span> <span class="hljs-params">as</span> <span class="hljs-params">any</span>;
  }

  <span class="hljs-params">unwrap</span><span class="hljs-params">()</span>: <span class="hljs-params">T</span> {
    <span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">value</span>;
  }

  <span class="hljs-params">unwrapOr</span>(<span class="hljs-params">_defaultValue: T</span>): <span class="hljs-params">T</span> {
    <span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">value</span>;
  }
}

<span class="hljs-params">class</span> <span class="hljs-params">Failure</span>&lt;<span class="hljs-params">E</span>&gt; {
  <span class="hljs-params">readonly</span> <span class="hljs-params">isSuccess</span> = <span class="hljs-params">false</span>;
  <span class="hljs-params">readonly</span> <span class="hljs-params">isFailure</span> = <span class="hljs-params">true</span>;

  <span class="hljs-params">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">public</span> readonly error: E</span>) {}

  <span class="hljs-params">map</span>&lt;<span class="hljs-params">U</span>&gt;(<span class="hljs-params">_fn: (<span class="hljs-params">value: never</span>) =&gt; U</span>): <span class="hljs-params">Result</span>&lt;<span class="hljs-params">U</span>, <span class="hljs-params">E</span>&gt; {
    <span class="hljs-params">return</span> <span class="hljs-params">this</span> <span class="hljs-params">as</span> <span class="hljs-params">any</span>;
  }

  <span class="hljs-params">flatMap</span>&lt;<span class="hljs-params">U</span>, <span class="hljs-params">F</span>&gt;(<span class="hljs-params">_fn: (<span class="hljs-params">value: never</span>) =&gt; Result&lt;U, F&gt;</span>): <span class="hljs-params">Result</span>&lt;<span class="hljs-params">U</span>, <span class="hljs-params">E</span> | <span class="hljs-params">F</span>&gt; {
    <span class="hljs-params">return</span> <span class="hljs-params">this</span> <span class="hljs-params">as</span> <span class="hljs-params">any</span>;
  }

  <span class="hljs-params">mapError</span>&lt;<span class="hljs-params">F</span>&gt;(<span class="hljs-params">fn: (<span class="hljs-params">error: E</span>) =&gt; F</span>): <span class="hljs-params">Result</span>&lt;<span class="hljs-params">never</span>, <span class="hljs-params">F</span>&gt; {
    <span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">Failure</span>(<span class="hljs-params">fn(<span class="hljs-params"><span class="hljs-keyword">this</span>.error</span>)</span>);
  }

  <span class="hljs-params">unwrap</span><span class="hljs-params">()</span>: <span class="hljs-params">never</span> {
    <span class="hljs-params">throw</span> <span class="hljs-params">new</span> <span class="hljs-params">Error</span>(<span class="hljs-params">"Called unwrap on a Failure"</span>);
  }

  <span class="hljs-params">unwrapOr</span>&lt;<span class="hljs-params">T</span>&gt;(<span class="hljs-params">defaultValue: T</span>): <span class="hljs-params">T</span> {
    <span class="hljs-params">return</span> <span class="hljs-params">defaultValue</span>;
  }
}

// <span class="hljs-params">Helper</span> <span class="hljs-params">functions</span>
<span class="hljs-params">function</span> <span class="hljs-params">success</span>&lt;<span class="hljs-params">T</span>&gt;(<span class="hljs-params">value: T</span>): <span class="hljs-params">Success</span>&lt;<span class="hljs-params">T</span>&gt; {
  <span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">Success</span>(<span class="hljs-params">value</span>);
}

<span class="hljs-params">function</span> <span class="hljs-params">failure</span>&lt;<span class="hljs-params">E</span>&gt;(<span class="hljs-params">error: E</span>): <span class="hljs-params">Failure</span>&lt;<span class="hljs-params">E</span>&gt; {
  <span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">Failure</span>(<span class="hljs-params">error</span>);
}

// <span class="hljs-params">Utility</span> <span class="hljs-params">function</span> <span class="hljs-params">to</span> <span class="hljs-params">wrap</span> <span class="hljs-params">try</span>-<span class="hljs-params">catch</span> <span class="hljs-params">in</span> <span class="hljs-params">Result</span>
<span class="hljs-params">function</span> <span class="hljs-params">tryCatch</span>&lt;<span class="hljs-params">T</span>&gt;(<span class="hljs-params">fn: (<span class="hljs-params"></span>) =&gt; T</span>): <span class="hljs-params">Result</span>&lt;<span class="hljs-params">T</span>, <span class="hljs-params">Error</span>&gt; {
  <span class="hljs-params">try</span> {
    <span class="hljs-params">return</span> <span class="hljs-params">success</span>(<span class="hljs-params">fn(<span class="hljs-params"></span>)</span>);
  } <span class="hljs-params">catch</span> (<span class="hljs-params">error</span>) {
    <span class="hljs-params">return</span> <span class="hljs-params">failure</span>(<span class="hljs-params">error <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Error</span> ? error : <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-params"><span class="hljs-built_in">String</span>(<span class="hljs-params">error</span>)</span>)</span>);
  }
}

// <span class="hljs-params">Async</span> <span class="hljs-params">version</span>
<span class="hljs-params">async</span> <span class="hljs-params">function</span> <span class="hljs-params">tryAsync</span>&lt;<span class="hljs-params">T</span>&gt;(<span class="hljs-params">fn: (<span class="hljs-params"></span>) =&gt; <span class="hljs-built_in">Promise</span>&lt;T&gt;</span>): <span class="hljs-params">Promise</span>&lt;<span class="hljs-params">Result</span>&lt;<span class="hljs-params">T</span>, <span class="hljs-params">Error</span>&gt;&gt; {
  <span class="hljs-params">try</span> {
    <span class="hljs-params">const</span> <span class="hljs-params">value</span> = <span class="hljs-params">await</span> <span class="hljs-params">fn</span><span class="hljs-params">()</span>;
    <span class="hljs-params">return</span> <span class="hljs-params">success</span>(<span class="hljs-params">value</span>);
  } <span class="hljs-params">catch</span> (<span class="hljs-params">error</span>) {
    <span class="hljs-params">return</span> <span class="hljs-params">failure</span>(<span class="hljs-params">error <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Error</span> ? error : <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-params"><span class="hljs-built_in">String</span>(<span class="hljs-params">error</span>)</span>)</span>);
  }
}
</span></div></code></pre>
<h3 id="using-the-result-pattern">Using the Result Pattern</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Example: User service with Result pattern</span>
<span class="hljs-keyword">interface</span> User {
  id: <span class="hljs-built_in">string</span>;
  name: <span class="hljs-built_in">string</span>;
  email: <span class="hljs-built_in">string</span>;
  age: <span class="hljs-built_in">number</span>;
}

<span class="hljs-keyword">class</span> UserService {
  <span class="hljs-keyword">private</span> users: Map&lt;<span class="hljs-built_in">string</span>, User&gt; = <span class="hljs-keyword">new</span> Map();

  createUser(userData: Omit&lt;User, <span class="hljs-string">"id"</span>&gt;): Result&lt;User, ValidationError&gt; {
    <span class="hljs-comment">// Validate input</span>
    <span class="hljs-keyword">const</span> validationResult = <span class="hljs-keyword">this</span>.validateUserData(userData);
    <span class="hljs-keyword">if</span> (validationResult.isFailure) {
      <span class="hljs-keyword">return</span> validationResult;
    }

    <span class="hljs-comment">// Create user</span>
    <span class="hljs-keyword">const</span> user: User = {
      id: <span class="hljs-keyword">this</span>.generateId(),
      ...userData,
    };

    <span class="hljs-keyword">this</span>.users.set(user.id, user);
    <span class="hljs-keyword">return</span> success(user);
  }

  getUserById(id: <span class="hljs-built_in">string</span>): Result&lt;User, NotFoundError&gt; {
    <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">this</span>.users.get(id);
    <span class="hljs-keyword">if</span> (!user) {
      <span class="hljs-keyword">return</span> failure(ErrorFactory.notFound(<span class="hljs-string">"User"</span>, id));
    }
    <span class="hljs-keyword">return</span> success(user);
  }

  updateUser(
    id: <span class="hljs-built_in">string</span>,
    updates: Partial&lt;Omit&lt;User, <span class="hljs-string">"id"</span>&gt;&gt;
  ): Result&lt;User, NotFoundError | ValidationError&gt; {
    <span class="hljs-keyword">const</span> userResult = <span class="hljs-keyword">this</span>.getUserById(id);
    <span class="hljs-keyword">if</span> (userResult.isFailure) {
      <span class="hljs-keyword">return</span> userResult;
    }

    <span class="hljs-keyword">const</span> user = userResult.value;
    <span class="hljs-keyword">const</span> updatedUserData = { ...user, ...updates };

    <span class="hljs-comment">// Validate updated data</span>
    <span class="hljs-keyword">const</span> validationResult = <span class="hljs-keyword">this</span>.validateUserData(updatedUserData);
    <span class="hljs-keyword">if</span> (validationResult.isFailure) {
      <span class="hljs-keyword">return</span> validationResult;
    }

    <span class="hljs-keyword">const</span> updatedUser = { ...user, ...updates };
    <span class="hljs-keyword">this</span>.users.set(id, updatedUser);
    <span class="hljs-keyword">return</span> success(updatedUser);
  }

  deleteUser(id: <span class="hljs-built_in">string</span>): Result&lt;<span class="hljs-built_in">void</span>, NotFoundError&gt; {
    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.users.has(id)) {
      <span class="hljs-keyword">return</span> failure(ErrorFactory.notFound(<span class="hljs-string">"User"</span>, id));
    }

    <span class="hljs-keyword">this</span>.users.delete(id);
    <span class="hljs-keyword">return</span> success(<span class="hljs-literal">undefined</span>);
  }

  <span class="hljs-keyword">private</span> validateUserData(
    userData: Omit&lt;User, <span class="hljs-string">"id"</span>&gt;
  ): Result&lt;<span class="hljs-built_in">void</span>, ValidationError&gt; {
    <span class="hljs-keyword">if</span> (!userData.name || userData.name.trim().length === <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">return</span> failure(
        ErrorFactory.validation(<span class="hljs-string">"name"</span>, userData.name, <span class="hljs-string">"Name is required"</span>)
      );
    }

    <span class="hljs-keyword">if</span> (!userData.email || !<span class="hljs-keyword">this</span>.isValidEmail(userData.email)) {
      <span class="hljs-keyword">return</span> failure(
        ErrorFactory.validation(
          <span class="hljs-string">"email"</span>,
          userData.email,
          <span class="hljs-string">"Valid email is required"</span>
        )
      );
    }

    <span class="hljs-keyword">if</span> (userData.age &lt; <span class="hljs-number">0</span> || userData.age &gt; <span class="hljs-number">150</span>) {
      <span class="hljs-keyword">return</span> failure(
        ErrorFactory.validation(
          <span class="hljs-string">"age"</span>,
          userData.age,
          <span class="hljs-string">"Age must be between 0 and 150"</span>
        )
      );
    }

    <span class="hljs-keyword">return</span> success(<span class="hljs-literal">undefined</span>);
  }

  <span class="hljs-keyword">private</span> isValidEmail(email: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">boolean</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-regexp">/^[^\s@]+@[^\s@]+\.[^\s@]+$/</span>.test(email);
  }

  <span class="hljs-keyword">private</span> generateId(): <span class="hljs-built_in">string</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.random().toString(<span class="hljs-number">36</span>).substr(<span class="hljs-number">2</span>, <span class="hljs-number">9</span>);
  }
}

<span class="hljs-comment">// Usage with Result pattern</span>
<span class="hljs-keyword">const</span> userService = <span class="hljs-keyword">new</span> UserService();

<span class="hljs-comment">// Creating a user</span>
<span class="hljs-keyword">const</span> createResult = userService.createUser({
  name: <span class="hljs-string">"John Doe"</span>,
  email: <span class="hljs-string">"john@example.com"</span>,
  age: <span class="hljs-number">30</span>,
});

<span class="hljs-keyword">if</span> (createResult.isSuccess) {
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"User created:"</span>, createResult.value);
} <span class="hljs-keyword">else</span> {
  <span class="hljs-built_in">console</span>.error(<span class="hljs-string">"Failed to create user:"</span>, createResult.error.message);
}

<span class="hljs-comment">// Chaining operations with flatMap</span>
<span class="hljs-keyword">const</span> result = userService
  .createUser({
    name: <span class="hljs-string">"Jane Doe"</span>,
    email: <span class="hljs-string">"jane@example.com"</span>,
    age: <span class="hljs-number">25</span>,
  })
  .flatMap(<span class="hljs-function">(<span class="hljs-params">user</span>) =&gt;</span> userService.updateUser(user.id, { age: <span class="hljs-number">26</span> }))
  .map(<span class="hljs-function">(<span class="hljs-params">user</span>) =&gt;</span> ({ ...user, displayName: <span class="hljs-string">`<span class="hljs-subst">${user.name}</span> (<span class="hljs-subst">${user.age}</span>)`</span> }));

<span class="hljs-keyword">if</span> (result.isSuccess) {
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Final result:"</span>, result.value);
} <span class="hljs-keyword">else</span> {
  <span class="hljs-built_in">console</span>.error(<span class="hljs-string">"Operation failed:"</span>, result.error.message);
}
</div></code></pre>
<h2 id="async-error-handling">Async Error Handling</h2>
<h3 id="promise-based-error-handling">Promise-based Error Handling</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Basic async error handling</span>
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fetchUserData</span>(<span class="hljs-params">userId: <span class="hljs-built_in">string</span></span>): <span class="hljs-title">Promise</span>&lt;<span class="hljs-title">User</span>&gt; </span>{
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> fetch(<span class="hljs-string">`/api/users/<span class="hljs-subst">${userId}</span>`</span>);

    <span class="hljs-keyword">if</span> (!response.ok) {
      <span class="hljs-keyword">if</span> (response.status === <span class="hljs-number">404</span>) {
        <span class="hljs-keyword">throw</span> ErrorFactory.notFound(<span class="hljs-string">"User"</span>, userId);
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (response.status === <span class="hljs-number">401</span>) {
        <span class="hljs-keyword">throw</span> ErrorFactory.authentication();
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">`HTTP <span class="hljs-subst">${response.status}</span>: <span class="hljs-subst">${response.statusText}</span>`</span>);
      }
    }

    <span class="hljs-keyword">const</span> userData = <span class="hljs-keyword">await</span> response.json();
    <span class="hljs-keyword">return</span> userData;
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-keyword">if</span> (error <span class="hljs-keyword">instanceof</span> AppError) {
      <span class="hljs-keyword">throw</span> error; <span class="hljs-comment">// Re-throw our custom errors</span>
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (error <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">TypeError</span>) {
      <span class="hljs-comment">// Network errors often manifest as TypeErrors</span>
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"Network error: Unable to fetch user data"</span>);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">`Unexpected error: <span class="hljs-subst">${error}</span>`</span>);
    }
  }
}

<span class="hljs-comment">// Async Result pattern</span>
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fetchUserDataSafe</span>(<span class="hljs-params">
  userId: <span class="hljs-built_in">string</span>
</span>): <span class="hljs-title">Promise</span>&lt;<span class="hljs-title">Result</span>&lt;<span class="hljs-title">User</span>, <span class="hljs-title">AppError</span>&gt;&gt; </span>{
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> fetch(<span class="hljs-string">`/api/users/<span class="hljs-subst">${userId}</span>`</span>);

    <span class="hljs-keyword">if</span> (!response.ok) {
      <span class="hljs-keyword">if</span> (response.status === <span class="hljs-number">404</span>) {
        <span class="hljs-keyword">return</span> failure(ErrorFactory.notFound(<span class="hljs-string">"User"</span>, userId));
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (response.status === <span class="hljs-number">401</span>) {
        <span class="hljs-keyword">return</span> failure(ErrorFactory.authentication());
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">return</span> failure(
          <span class="hljs-keyword">new</span> AppError(<span class="hljs-string">`HTTP <span class="hljs-subst">${response.status}</span>: <span class="hljs-subst">${response.statusText}</span>`</span>) <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>
        );
      }
    }

    <span class="hljs-keyword">const</span> userData = <span class="hljs-keyword">await</span> response.json();
    <span class="hljs-keyword">return</span> success(userData);
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-keyword">if</span> (error <span class="hljs-keyword">instanceof</span> AppError) {
      <span class="hljs-keyword">return</span> failure(error);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">return</span> failure(<span class="hljs-keyword">new</span> AppError(<span class="hljs-string">`Unexpected error: <span class="hljs-subst">${error}</span>`</span>) <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>);
    }
  }
}

<span class="hljs-comment">// Multiple async operations with error handling</span>
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">processUserWorkflow</span>(<span class="hljs-params">
  userId: <span class="hljs-built_in">string</span>
</span>): <span class="hljs-title">Promise</span>&lt;<span class="hljs-title">Result</span>&lt;<span class="hljs-title">string</span>, <span class="hljs-title">AppError</span>&gt;&gt; </span>{
  <span class="hljs-keyword">const</span> userResult = <span class="hljs-keyword">await</span> fetchUserDataSafe(userId);
  <span class="hljs-keyword">if</span> (userResult.isFailure) {
    <span class="hljs-keyword">return</span> userResult <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>;
  }

  <span class="hljs-keyword">const</span> user = userResult.value;

  <span class="hljs-comment">// Validate user permissions</span>
  <span class="hljs-keyword">const</span> permissionsResult = <span class="hljs-keyword">await</span> checkUserPermissions(user.id);
  <span class="hljs-keyword">if</span> (permissionsResult.isFailure) {
    <span class="hljs-keyword">return</span> permissionsResult <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>;
  }

  <span class="hljs-comment">// Process user data</span>
  <span class="hljs-keyword">const</span> processResult = <span class="hljs-keyword">await</span> processUserData(user);
  <span class="hljs-keyword">if</span> (processResult.isFailure) {
    <span class="hljs-keyword">return</span> processResult <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>;
  }

  <span class="hljs-keyword">return</span> success(<span class="hljs-string">`User <span class="hljs-subst">${user.name}</span> processed successfully`</span>);
}

<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">checkUserPermissions</span>(<span class="hljs-params">
  userId: <span class="hljs-built_in">string</span>
</span>): <span class="hljs-title">Promise</span>&lt;<span class="hljs-title">Result</span>&lt;<span class="hljs-title">string</span>[], <span class="hljs-title">AuthorizationError</span>&gt;&gt; </span>{
  <span class="hljs-comment">// Implementation</span>
  <span class="hljs-keyword">return</span> success([<span class="hljs-string">"read"</span>, <span class="hljs-string">"write"</span>]);
}

<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">processUserData</span>(<span class="hljs-params">user: User</span>): <span class="hljs-title">Promise</span>&lt;<span class="hljs-title">Result</span>&lt;<span class="hljs-title">void</span>, <span class="hljs-title">Error</span>&gt;&gt; </span>{
  <span class="hljs-comment">// Implementation</span>
  <span class="hljs-keyword">return</span> success(<span class="hljs-literal">undefined</span>);
}
</div></code></pre>
<h3 id="parallel-error-handling">Parallel Error Handling</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Handle multiple async operations</span>
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fetchMultipleUsers</span>(<span class="hljs-params">
  userIds: <span class="hljs-built_in">string</span>[]
</span>): <span class="hljs-title">Promise</span>&lt;<span class="hljs-title">Result</span>&lt;<span class="hljs-title">User</span>[], <span class="hljs-title">AppError</span>[]&gt;&gt; </span>{
  <span class="hljs-keyword">const</span> results = <span class="hljs-keyword">await</span> <span class="hljs-built_in">Promise</span>.allSettled(
    userIds.map(<span class="hljs-function">(<span class="hljs-params">id</span>) =&gt;</span> fetchUserDataSafe(id))
  );

  <span class="hljs-keyword">const</span> users: User[] = [];
  <span class="hljs-keyword">const</span> errors: AppError[] = [];

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> result of results) {
    <span class="hljs-keyword">if</span> (result.status === <span class="hljs-string">"fulfilled"</span>) {
      <span class="hljs-keyword">if</span> (result.value.isSuccess) {
        users.push(result.value.value);
      } <span class="hljs-keyword">else</span> {
        errors.push(result.value.error);
      }
    } <span class="hljs-keyword">else</span> {
      errors.push(<span class="hljs-keyword">new</span> AppError(<span class="hljs-string">`Promise rejected: <span class="hljs-subst">${result.reason}</span>`</span>) <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>);
    }
  }

  <span class="hljs-keyword">if</span> (errors.length &gt; <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">return</span> failure(errors);
  }

  <span class="hljs-keyword">return</span> success(users);
}

<span class="hljs-comment">// Retry mechanism with exponential backoff</span>
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">withRetry</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params">
  operation: () =&gt; <span class="hljs-built_in">Promise</span>&lt;T&gt;,
  maxRetries: <span class="hljs-built_in">number</span> = 3,
  baseDelay: <span class="hljs-built_in">number</span> = 1000
</span>): <span class="hljs-title">Promise</span>&lt;<span class="hljs-title">T</span>&gt; </span>{
  <span class="hljs-keyword">let</span> lastError: <span class="hljs-built_in">Error</span>;

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> attempt = <span class="hljs-number">0</span>; attempt &lt;= maxRetries; attempt++) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> operation();
    } <span class="hljs-keyword">catch</span> (error) {
      lastError = error <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Error</span> ? error : <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-built_in">String</span>(error));

      <span class="hljs-keyword">if</span> (attempt === maxRetries) {
        <span class="hljs-keyword">break</span>;
      }

      <span class="hljs-comment">// Exponential backoff</span>
      <span class="hljs-keyword">const</span> delay = baseDelay * <span class="hljs-built_in">Math</span>.pow(<span class="hljs-number">2</span>, attempt);
      <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> setTimeout(resolve, delay));
    }
  }

  <span class="hljs-keyword">throw</span> lastError!;
}

<span class="hljs-comment">// Circuit breaker pattern</span>
<span class="hljs-keyword">class</span> CircuitBreaker {
  <span class="hljs-keyword">private</span> failures = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">private</span> lastFailureTime = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">private</span> state: <span class="hljs-string">"CLOSED"</span> | <span class="hljs-string">"OPEN"</span> | <span class="hljs-string">"HALF_OPEN"</span> = <span class="hljs-string">"CLOSED"</span>;

  <span class="hljs-keyword">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> threshold: <span class="hljs-built_in">number</span> = 5, <span class="hljs-keyword">private</span> timeout: <span class="hljs-built_in">number</span> = 60000</span>) {}

  <span class="hljs-keyword">async</span> execute&lt;T&gt;<span class="hljs-function">(<span class="hljs-params">operation: (<span class="hljs-params"></span>) =&gt; <span class="hljs-built_in">Promise</span>&lt;T&gt;</span>): <span class="hljs-params">Promise</span>&lt;<span class="hljs-params">T</span>&gt; {
    <span class="hljs-params">if</span> (<span class="hljs-params"><span class="hljs-keyword">this</span>.state === "OPEN"</span>) {
      <span class="hljs-params">if</span> (<span class="hljs-params"><span class="hljs-built_in">Date</span>.now(<span class="hljs-params"></span>) - <span class="hljs-keyword">this</span>.lastFailureTime &gt; <span class="hljs-keyword">this</span>.timeout</span>) {
        <span class="hljs-params">this</span>.<span class="hljs-params">state</span> = "<span class="hljs-params">HALF_OPEN</span>";
      } <span class="hljs-params">else</span> {
        <span class="hljs-params">throw</span> <span class="hljs-params">new</span> <span class="hljs-params">Error</span>(<span class="hljs-params">"Circuit breaker is OPEN"</span>);
      }
    }

    <span class="hljs-params">try</span> {
      <span class="hljs-params">const</span> <span class="hljs-params">result</span> = <span class="hljs-params">await</span> <span class="hljs-params">operation</span><span class="hljs-params">()</span>;
      <span class="hljs-params">this</span>.<span class="hljs-params">onSuccess</span><span class="hljs-params">()</span>;
      <span class="hljs-params">return</span> <span class="hljs-params">result</span>;
    } <span class="hljs-params">catch</span> (<span class="hljs-params">error</span>) {
      <span class="hljs-params">this</span>.<span class="hljs-params">onFailure</span><span class="hljs-params">()</span>;
      <span class="hljs-params">throw</span> <span class="hljs-params">error</span>;
    }
  }

  <span class="hljs-params">private</span> <span class="hljs-params">onSuccess</span><span class="hljs-params">()</span>: <span class="hljs-params">void</span> {
    <span class="hljs-params">this</span>.<span class="hljs-params">failures</span> = 0;
    <span class="hljs-params">this</span>.<span class="hljs-params">state</span> = "<span class="hljs-params">CLOSED</span>";
  }

  <span class="hljs-params">private</span> <span class="hljs-params">onFailure</span><span class="hljs-params">()</span>: <span class="hljs-params">void</span> {
    <span class="hljs-params">this</span>.<span class="hljs-params">failures</span>++;
    <span class="hljs-params">this</span>.<span class="hljs-params">lastFailureTime</span> = <span class="hljs-params">Date</span>.<span class="hljs-params">now</span><span class="hljs-params">()</span>;

    <span class="hljs-params">if</span> (<span class="hljs-params"><span class="hljs-keyword">this</span>.failures &gt;= <span class="hljs-keyword">this</span>.threshold</span>) {
      <span class="hljs-params">this</span>.<span class="hljs-params">state</span> = "<span class="hljs-params">OPEN</span>";
    }
  }

  <span class="hljs-params">getState</span><span class="hljs-params">()</span>: <span class="hljs-params">string</span> {
    <span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">state</span>;
  }
}

// <span class="hljs-params">Usage</span>
<span class="hljs-params">const</span> <span class="hljs-params">circuitBreaker</span> = <span class="hljs-params">new</span> <span class="hljs-params">CircuitBreaker</span>(<span class="hljs-params">3, 30000</span>);

<span class="hljs-params">async</span> <span class="hljs-params">function</span> <span class="hljs-params">reliableFetchUser</span>(<span class="hljs-params">userId: <span class="hljs-built_in">string</span></span>): <span class="hljs-params">Promise</span>&lt;<span class="hljs-params">User</span>&gt; {
  <span class="hljs-params">return</span> <span class="hljs-params">circuitBreaker</span>.<span class="hljs-params">execute</span>(<span class="hljs-params"><span class="hljs-keyword">async</span> (<span class="hljs-params"></span>) =&gt; {
    <span class="hljs-keyword">return</span> withRetry(<span class="hljs-params">(<span class="hljs-params"></span>) =&gt; fetchUserData(<span class="hljs-params">userId</span>), 2, 500</span>);
  }</span>);
}
</span></div></code></pre>
<h2 id="error-logging-and-monitoring">Error Logging and Monitoring</h2>
<h3 id="structured-error-logging">Structured Error Logging</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Logger interface</span>
<span class="hljs-keyword">interface</span> Logger {
  error(message: <span class="hljs-built_in">string</span>, error?: <span class="hljs-built_in">Error</span>, context?: Record&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt;): <span class="hljs-built_in">void</span>;
  warn(message: <span class="hljs-built_in">string</span>, context?: Record&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt;): <span class="hljs-built_in">void</span>;
  info(message: <span class="hljs-built_in">string</span>, context?: Record&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt;): <span class="hljs-built_in">void</span>;
  debug(message: <span class="hljs-built_in">string</span>, context?: Record&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt;): <span class="hljs-built_in">void</span>;
}

<span class="hljs-comment">// Error context interface</span>
<span class="hljs-keyword">interface</span> ErrorContext {
  userId?: <span class="hljs-built_in">string</span>;
  requestId?: <span class="hljs-built_in">string</span>;
  operation?: <span class="hljs-built_in">string</span>;
  timestamp: <span class="hljs-built_in">string</span>;
  stackTrace?: <span class="hljs-built_in">string</span>;
  additionalData?: Record&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt;;
}

<span class="hljs-comment">// Enhanced error logger</span>
<span class="hljs-keyword">class</span> ErrorLogger <span class="hljs-keyword">implements</span> Logger {
  <span class="hljs-keyword">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> serviceName: <span class="hljs-built_in">string</span>, <span class="hljs-keyword">private</span> environment: <span class="hljs-built_in">string</span></span>) {}

  error(
    message: <span class="hljs-built_in">string</span>,
    error?: <span class="hljs-built_in">Error</span>,
    context: Record&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt; = {}
  ): <span class="hljs-built_in">void</span> {
    <span class="hljs-keyword">const</span> errorContext: ErrorContext = {
      ...context,
      timestamp: <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().toISOString(),
      stackTrace: error?.stack,
    };

    <span class="hljs-keyword">const</span> logEntry = {
      level: <span class="hljs-string">"error"</span>,
      service: <span class="hljs-keyword">this</span>.serviceName,
      environment: <span class="hljs-keyword">this</span>.environment,
      message,
      error: error
        ? {
            name: error.name,
            message: error.message,
            stack: error.stack,
          }
        : <span class="hljs-literal">undefined</span>,
      context: errorContext,
    };

    <span class="hljs-comment">// In production, send to logging service</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.environment === <span class="hljs-string">"production"</span>) {
      <span class="hljs-keyword">this</span>.sendToLoggingService(logEntry);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-built_in">console</span>.error(<span class="hljs-built_in">JSON</span>.stringify(logEntry, <span class="hljs-literal">null</span>, <span class="hljs-number">2</span>));
    }
  }

  warn(message: <span class="hljs-built_in">string</span>, context: Record&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt; = {}): <span class="hljs-built_in">void</span> {
    <span class="hljs-keyword">this</span>.log(<span class="hljs-string">"warn"</span>, message, context);
  }

  info(message: <span class="hljs-built_in">string</span>, context: Record&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt; = {}): <span class="hljs-built_in">void</span> {
    <span class="hljs-keyword">this</span>.log(<span class="hljs-string">"info"</span>, message, context);
  }

  debug(message: <span class="hljs-built_in">string</span>, context: Record&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt; = {}): <span class="hljs-built_in">void</span> {
    <span class="hljs-keyword">this</span>.log(<span class="hljs-string">"debug"</span>, message, context);
  }

  <span class="hljs-keyword">private</span> log(
    level: <span class="hljs-built_in">string</span>,
    message: <span class="hljs-built_in">string</span>,
    context: Record&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt;
  ): <span class="hljs-built_in">void</span> {
    <span class="hljs-keyword">const</span> logEntry = {
      level,
      service: <span class="hljs-keyword">this</span>.serviceName,
      environment: <span class="hljs-keyword">this</span>.environment,
      message,
      context: {
        ...context,
        timestamp: <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().toISOString(),
      },
    };

    <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">JSON</span>.stringify(logEntry, <span class="hljs-literal">null</span>, <span class="hljs-number">2</span>));
  }

  <span class="hljs-keyword">private</span> <span class="hljs-keyword">async</span> sendToLoggingService(logEntry: <span class="hljs-built_in">any</span>): <span class="hljs-built_in">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// Send to external logging service (e.g., CloudWatch, Datadog, etc.)</span>
      <span class="hljs-keyword">await</span> fetch(<span class="hljs-string">"/api/logs"</span>, {
        method: <span class="hljs-string">"POST"</span>,
        headers: { <span class="hljs-string">"Content-Type"</span>: <span class="hljs-string">"application/json"</span> },
        body: <span class="hljs-built_in">JSON</span>.stringify(logEntry),
      });
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-comment">// Fallback to console if logging service is unavailable</span>
      <span class="hljs-built_in">console</span>.error(<span class="hljs-string">"Failed to send log to service:"</span>, error);
      <span class="hljs-built_in">console</span>.error(<span class="hljs-string">"Original log entry:"</span>, logEntry);
    }
  }
}

<span class="hljs-comment">// Error monitoring and metrics</span>
<span class="hljs-keyword">class</span> ErrorMonitor {
  <span class="hljs-keyword">private</span> errorCounts = <span class="hljs-keyword">new</span> Map&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">number</span>&gt;();
  <span class="hljs-keyword">private</span> logger: Logger;

  <span class="hljs-keyword">constructor</span>(<span class="hljs-params">logger: Logger</span>) {
    <span class="hljs-keyword">this</span>.logger = logger;
  }

  recordError(error: <span class="hljs-built_in">Error</span>, context: Record&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt; = {}): <span class="hljs-built_in">void</span> {
    <span class="hljs-keyword">const</span> errorKey = <span class="hljs-string">`<span class="hljs-subst">${error.name}</span>:<span class="hljs-subst">${error.message}</span>`</span>;
    <span class="hljs-keyword">const</span> currentCount = <span class="hljs-keyword">this</span>.errorCounts.get(errorKey) || <span class="hljs-number">0</span>;
    <span class="hljs-keyword">this</span>.errorCounts.set(errorKey, currentCount + <span class="hljs-number">1</span>);

    <span class="hljs-keyword">this</span>.logger.error(<span class="hljs-string">"Error recorded"</span>, error, {
      ...context,
      errorCount: currentCount + <span class="hljs-number">1</span>,
      errorKey,
    });

    <span class="hljs-comment">// Alert if error frequency is high</span>
    <span class="hljs-keyword">if</span> (currentCount + <span class="hljs-number">1</span> &gt;= <span class="hljs-number">10</span>) {
      <span class="hljs-keyword">this</span>.sendAlert(error, currentCount + <span class="hljs-number">1</span>, context);
    }
  }

  getErrorStats(): Record&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">number</span>&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Object</span>.fromEntries(<span class="hljs-keyword">this</span>.errorCounts);
  }

  resetStats(): <span class="hljs-built_in">void</span> {
    <span class="hljs-keyword">this</span>.errorCounts.clear();
  }

  <span class="hljs-keyword">private</span> sendAlert(
    error: <span class="hljs-built_in">Error</span>,
    count: <span class="hljs-built_in">number</span>,
    context: Record&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt;
  ): <span class="hljs-built_in">void</span> {
    <span class="hljs-keyword">this</span>.logger.error(<span class="hljs-string">"High error frequency detected"</span>, error, {
      ...context,
      alertType: <span class="hljs-string">"high_frequency"</span>,
      errorCount: count,
      threshold: <span class="hljs-number">10</span>,
    });

    <span class="hljs-comment">// In production, send to alerting system</span>
    <span class="hljs-comment">// await this.sendToAlertingSystem({ error, count, context });</span>
  }
}
</div></code></pre>
<h2 id="global-error-handling">Global Error Handling</h2>
<h3 id="application-wide-error-handler">Application-wide Error Handler</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Global error handler</span>
<span class="hljs-keyword">class</span> GlobalErrorHandler {
  <span class="hljs-keyword">private</span> logger: Logger;
  <span class="hljs-keyword">private</span> monitor: ErrorMonitor;

  <span class="hljs-keyword">constructor</span>(<span class="hljs-params">logger: Logger, monitor: ErrorMonitor</span>) {
    <span class="hljs-keyword">this</span>.logger = logger;
    <span class="hljs-keyword">this</span>.monitor = monitor;
    <span class="hljs-keyword">this</span>.setupGlobalHandlers();
  }

  <span class="hljs-keyword">private</span> setupGlobalHandlers(): <span class="hljs-built_in">void</span> {
    <span class="hljs-comment">// Handle unhandled promise rejections</span>
    process.on(<span class="hljs-string">"unhandledRejection"</span>, <span class="hljs-function">(<span class="hljs-params">reason: <span class="hljs-built_in">any</span>, promise: <span class="hljs-built_in">Promise</span>&lt;<span class="hljs-built_in">any</span>&gt;</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> error =
        reason <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Error</span> ? reason : <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-built_in">String</span>(reason));
      <span class="hljs-keyword">this</span>.handleError(error, {
        <span class="hljs-keyword">type</span>: <span class="hljs-string">"unhandledRejection"</span>,
        promise: promise.toString(),
      });
    });

    <span class="hljs-comment">// Handle uncaught exceptions</span>
    process.on(<span class="hljs-string">"uncaughtException"</span>, <span class="hljs-function">(<span class="hljs-params">error: <span class="hljs-built_in">Error</span></span>) =&gt;</span> {
      <span class="hljs-keyword">this</span>.handleError(error, {
        <span class="hljs-keyword">type</span>: <span class="hljs-string">"uncaughtException"</span>,
        fatal: <span class="hljs-literal">true</span>,
      });

      <span class="hljs-comment">// Graceful shutdown</span>
      process.exit(<span class="hljs-number">1</span>);
    });

    <span class="hljs-comment">// Handle warnings</span>
    process.on(<span class="hljs-string">"warning"</span>, <span class="hljs-function">(<span class="hljs-params">warning: <span class="hljs-built_in">Error</span></span>) =&gt;</span> {
      <span class="hljs-keyword">this</span>.logger.warn(<span class="hljs-string">"Process warning"</span>, {
        name: warning.name,
        message: warning.message,
        stack: warning.stack,
      });
    });
  }

  handleError(error: <span class="hljs-built_in">Error</span>, context: Record&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt; = {}): <span class="hljs-built_in">void</span> {
    <span class="hljs-comment">// Determine if error is operational or programming error</span>
    <span class="hljs-keyword">const</span> isOperational = error <span class="hljs-keyword">instanceof</span> AppError &amp;&amp; error.isOperational;

    <span class="hljs-keyword">this</span>.monitor.recordError(error, {
      ...context,
      isOperational,
      handled: <span class="hljs-literal">true</span>,
    });

    <span class="hljs-keyword">if</span> (!isOperational) {
      <span class="hljs-comment">// Programming errors should be logged with high priority</span>
      <span class="hljs-keyword">this</span>.logger.error(<span class="hljs-string">"Programming error detected"</span>, error, {
        ...context,
        severity: <span class="hljs-string">"critical"</span>,
      });
    }
  }

  <span class="hljs-comment">// Express.js error middleware</span>
  expressErrorHandler() {
    <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">error: <span class="hljs-built_in">Error</span>, req: <span class="hljs-built_in">any</span>, res: <span class="hljs-built_in">any</span>, next: <span class="hljs-built_in">any</span></span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> context = {
        method: req.method,
        url: req.url,
        userAgent: req.get(<span class="hljs-string">"User-Agent"</span>),
        ip: req.ip,
        userId: req.user?.id,
        requestId: req.requestId,
      };

      <span class="hljs-keyword">this</span>.handleError(error, context);

      <span class="hljs-keyword">if</span> (error <span class="hljs-keyword">instanceof</span> AppError) {
        res.status(error.statusCode).json({
          error: {
            message: error.message,
            <span class="hljs-keyword">type</span>: error.<span class="hljs-keyword">constructor</span>.name,
            ...(<span class="hljs-params">error.isOperational
              ? {}
              : { details: "Internal server error" }</span>),
          },
        });
      } <span class="hljs-keyword">else</span> {
        res.status(<span class="hljs-number">500</span>).json({
          error: {
            message: <span class="hljs-string">"Internal server error"</span>,
            <span class="hljs-keyword">type</span>: <span class="hljs-string">"InternalError"</span>,
          },
        });
      }
    };
  }
}

<span class="hljs-comment">// Application setup</span>
<span class="hljs-keyword">const</span> logger = <span class="hljs-keyword">new</span> ErrorLogger(
  <span class="hljs-string">"user-service"</span>,
  process.env.NODE_ENV || <span class="hljs-string">"development"</span>
);
<span class="hljs-keyword">const</span> monitor = <span class="hljs-keyword">new</span> ErrorMonitor(logger);
<span class="hljs-keyword">const</span> globalErrorHandler = <span class="hljs-keyword">new</span> GlobalErrorHandler(logger, monitor);

<span class="hljs-comment">// Express app setup (example)</span>
<span class="hljs-comment">// app.use(globalErrorHandler.expressErrorHandler());</span>
</div></code></pre>
<h2 id="best-practices">Best Practices</h2>
<h3 id="%E2%9C%85-good-practices">‚úÖ Good Practices</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Create specific error types for different scenarios</span>
<span class="hljs-keyword">class</span> PaymentError <span class="hljs-keyword">extends</span> AppError {
  <span class="hljs-keyword">constructor</span>(<span class="hljs-params">
    message: <span class="hljs-built_in">string</span>,
    <span class="hljs-keyword">public</span> readonly paymentId: <span class="hljs-built_in">string</span>,
    <span class="hljs-keyword">public</span> readonly amount: <span class="hljs-built_in">number</span>,
    <span class="hljs-keyword">public</span> readonly currency: <span class="hljs-built_in">string</span>
  </span>) {
    <span class="hljs-keyword">super</span>(message);
  }
}

<span class="hljs-comment">// Use Result pattern for operations that commonly fail</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">parseConfig</span>(<span class="hljs-params">configString: <span class="hljs-built_in">string</span></span>): <span class="hljs-title">Result</span>&lt;<span class="hljs-title">Config</span>, <span class="hljs-title">ValidationError</span>&gt; </span>{
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> config = <span class="hljs-built_in">JSON</span>.parse(configString);
    <span class="hljs-keyword">return</span> validateConfig(config);
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-keyword">return</span> failure(
      <span class="hljs-keyword">new</span> ValidationError(<span class="hljs-string">"Invalid JSON format"</span>, <span class="hljs-string">"config"</span>, configString)
    );
  }
}

<span class="hljs-comment">// Provide context in error messages</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">processOrder</span>(<span class="hljs-params">orderId: <span class="hljs-built_in">string</span></span>): <span class="hljs-title">void</span> </span>{
  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// Process order</span>
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">`Failed to process order <span class="hljs-subst">${orderId}</span>: <span class="hljs-subst">${error}</span>`</span>);
  }
}

<span class="hljs-comment">// Use type guards for error handling</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isAppError</span>(<span class="hljs-params">error: unknown</span>): <span class="hljs-title">error</span> <span class="hljs-title">is</span> <span class="hljs-title">AppError</span> </span>{
  <span class="hljs-keyword">return</span> error <span class="hljs-keyword">instanceof</span> AppError;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">handleApiError</span>(<span class="hljs-params">error: unknown</span>): <span class="hljs-title">void</span> </span>{
  <span class="hljs-keyword">if</span> (isAppError(error)) {
    <span class="hljs-built_in">console</span>.error(<span class="hljs-string">`App error [<span class="hljs-subst">${error.statusCode}</span>]: <span class="hljs-subst">${error.message}</span>`</span>);
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (error <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Error</span>) {
    <span class="hljs-built_in">console</span>.error(<span class="hljs-string">`Unexpected error: <span class="hljs-subst">${error.message}</span>`</span>);
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-built_in">console</span>.error(<span class="hljs-string">"Unknown error:"</span>, error);
  }
}

<span class="hljs-comment">// Validate inputs early</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createUser</span>(<span class="hljs-params">userData: <span class="hljs-built_in">any</span></span>): <span class="hljs-title">User</span> </span>{
  <span class="hljs-keyword">if</span> (!userData || <span class="hljs-keyword">typeof</span> userData !== <span class="hljs-string">"object"</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> ValidationError(<span class="hljs-string">"Invalid user data"</span>, <span class="hljs-string">"userData"</span>, userData);
  }

  <span class="hljs-keyword">if</span> (!userData.email || <span class="hljs-keyword">typeof</span> userData.email !== <span class="hljs-string">"string"</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> ValidationError(<span class="hljs-string">"Email is required"</span>, <span class="hljs-string">"email"</span>, userData.email);
  }

  <span class="hljs-comment">// Continue with user creation</span>
  <span class="hljs-keyword">return</span> userData <span class="hljs-keyword">as</span> User;
}
</div></code></pre>
<h3 id="%E2%9D%8C-avoid">‚ùå Avoid</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Don't swallow errors silently</span>
<span class="hljs-keyword">try</span> {
  riskyOperation();
} <span class="hljs-keyword">catch</span> (error) {
  <span class="hljs-comment">// ‚ùå Silent failure</span>
}

<span class="hljs-comment">// Don't use generic error messages</span>
<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"Something went wrong"</span>); <span class="hljs-comment">// ‚ùå Not helpful</span>

<span class="hljs-comment">// Don't catch and re-throw without adding value</span>
<span class="hljs-keyword">try</span> {
  operation();
} <span class="hljs-keyword">catch</span> (error) {
  <span class="hljs-keyword">throw</span> error; <span class="hljs-comment">// ‚ùå Pointless catch</span>
}

<span class="hljs-comment">// Don't use string errors</span>
<span class="hljs-keyword">throw</span> <span class="hljs-string">"Error message"</span>; <span class="hljs-comment">// ‚ùå Should be Error object</span>

<span class="hljs-comment">// Don't ignore error types</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">handleError</span>(<span class="hljs-params">error: <span class="hljs-built_in">any</span></span>): <span class="hljs-title">void</span> </span>{
  <span class="hljs-comment">// ‚ùå Should be more specific</span>
  <span class="hljs-built_in">console</span>.log(error.message); <span class="hljs-comment">// Might not exist</span>
}

<span class="hljs-comment">// Don't create overly broad catch blocks</span>
<span class="hljs-keyword">try</span> {
  operation1();
  operation2();
  operation3();
} <span class="hljs-keyword">catch</span> (error) {
  <span class="hljs-comment">// ‚ùå Can't tell which operation failed</span>
  <span class="hljs-built_in">console</span>.error(<span class="hljs-string">"One of the operations failed"</span>);
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">riskyOperation</span>(<span class="hljs-params"></span>): <span class="hljs-title">void</span> </span>{
  <span class="hljs-comment">/* Implementation */</span>
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">operation</span>(<span class="hljs-params"></span>): <span class="hljs-title">void</span> </span>{
  <span class="hljs-comment">/* Implementation */</span>
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">operation1</span>(<span class="hljs-params"></span>): <span class="hljs-title">void</span> </span>{
  <span class="hljs-comment">/* Implementation */</span>
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">operation2</span>(<span class="hljs-params"></span>): <span class="hljs-title">void</span> </span>{
  <span class="hljs-comment">/* Implementation */</span>
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">operation3</span>(<span class="hljs-params"></span>): <span class="hljs-title">void</span> </span>{
  <span class="hljs-comment">/* Implementation */</span>
}
<span class="hljs-keyword">interface</span> Config {
  <span class="hljs-comment">/* Definition */</span>
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">validateConfig</span>(<span class="hljs-params">config: <span class="hljs-built_in">any</span></span>): <span class="hljs-title">Result</span>&lt;<span class="hljs-title">Config</span>, <span class="hljs-title">ValidationError</span>&gt; </span>{
  <span class="hljs-comment">/* Implementation */</span> <span class="hljs-keyword">return</span> success({} <span class="hljs-keyword">as</span> Config);
}
</div></code></pre>
<h2 id="summary-checklist">Summary Checklist</h2>
<ul>
<li><input type="checkbox" id="checkbox104"><label for="checkbox104">Create specific error types for different scenarios</label></li>
<li><input type="checkbox" id="checkbox105"><label for="checkbox105">Use the Result pattern for operations that commonly fail</label></li>
<li><input type="checkbox" id="checkbox106"><label for="checkbox106">Implement proper async error handling</label></li>
<li><input type="checkbox" id="checkbox107"><label for="checkbox107">Set up structured error logging</label></li>
<li><input type="checkbox" id="checkbox108"><label for="checkbox108">Use global error handlers for unhandled errors</label></li>
<li><input type="checkbox" id="checkbox109"><label for="checkbox109">Provide meaningful error messages with context</label></li>
<li><input type="checkbox" id="checkbox110"><label for="checkbox110">Distinguish between operational and programming errors</label></li>
<li><input type="checkbox" id="checkbox111"><label for="checkbox111">Implement retry mechanisms for transient failures</label></li>
<li><input type="checkbox" id="checkbox112"><label for="checkbox112">Use circuit breakers for external service calls</label></li>
<li><input type="checkbox" id="checkbox113"><label for="checkbox113">Monitor and alert on error patterns</label></li>
</ul>
<h2 id="next-steps">Next Steps</h2>
<p>Now that you understand error handling in TypeScript, let's explore utility types and advanced type manipulations.</p>
<hr>
<p><em>Continue to: <a href="16-utility-types.md">Utility Types and Type Manipulations</a></em></p>
<h1 id="utility-types-and-type-manipulations">Utility Types and Type Manipulations</h1>
<blockquote>
<p>Master TypeScript's built-in utility types and learn to create custom type manipulations for advanced type safety and code reusability</p>
</blockquote>
<h2 id="built-in-utility-types">Built-in Utility Types</h2>
<p>TypeScript provides many built-in utility types that help transform and manipulate existing types.</p>
<h3 id="object-manipulation-utilities">Object Manipulation Utilities</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Base interface for examples</span>
<span class="hljs-keyword">interface</span> User {
  id: <span class="hljs-built_in">number</span>;
  name: <span class="hljs-built_in">string</span>;
  email: <span class="hljs-built_in">string</span>;
  age: <span class="hljs-built_in">number</span>;
  isActive: <span class="hljs-built_in">boolean</span>;
  createdAt: <span class="hljs-built_in">Date</span>;
  updatedAt: <span class="hljs-built_in">Date</span>;
}

<span class="hljs-comment">// Partial&lt;T&gt; - Makes all properties optional</span>
<span class="hljs-keyword">type</span> PartialUser = Partial&lt;User&gt;;
<span class="hljs-comment">// {</span>
<span class="hljs-comment">//   id?: number;</span>
<span class="hljs-comment">//   name?: string;</span>
<span class="hljs-comment">//   email?: string;</span>
<span class="hljs-comment">//   age?: number;</span>
<span class="hljs-comment">//   isActive?: boolean;</span>
<span class="hljs-comment">//   createdAt?: Date;</span>
<span class="hljs-comment">//   updatedAt?: Date;</span>
<span class="hljs-comment">// }</span>

<span class="hljs-comment">// Required&lt;T&gt; - Makes all properties required</span>
<span class="hljs-keyword">interface</span> OptionalUser {
  id?: <span class="hljs-built_in">number</span>;
  name?: <span class="hljs-built_in">string</span>;
  email?: <span class="hljs-built_in">string</span>;
}

<span class="hljs-keyword">type</span> RequiredUser = Required&lt;OptionalUser&gt;;
<span class="hljs-comment">// {</span>
<span class="hljs-comment">//   id: number;</span>
<span class="hljs-comment">//   name: string;</span>
<span class="hljs-comment">//   email: string;</span>
<span class="hljs-comment">// }</span>

<span class="hljs-comment">// Readonly&lt;T&gt; - Makes all properties readonly</span>
<span class="hljs-keyword">type</span> ReadonlyUser = Readonly&lt;User&gt;;
<span class="hljs-comment">// {</span>
<span class="hljs-comment">//   readonly id: number;</span>
<span class="hljs-comment">//   readonly name: string;</span>
<span class="hljs-comment">//   readonly email: string;</span>
<span class="hljs-comment">//   // ... all properties are readonly</span>
<span class="hljs-comment">// }</span>

<span class="hljs-comment">// Pick&lt;T, K&gt; - Select specific properties</span>
<span class="hljs-keyword">type</span> UserSummary = Pick&lt;User, <span class="hljs-string">"id"</span> | <span class="hljs-string">"name"</span> | <span class="hljs-string">"email"</span>&gt;;
<span class="hljs-comment">// {</span>
<span class="hljs-comment">//   id: number;</span>
<span class="hljs-comment">//   name: string;</span>
<span class="hljs-comment">//   email: string;</span>
<span class="hljs-comment">// }</span>

<span class="hljs-comment">// Omit&lt;T, K&gt; - Exclude specific properties</span>
<span class="hljs-keyword">type</span> CreateUserRequest = Omit&lt;User, <span class="hljs-string">"id"</span> | <span class="hljs-string">"createdAt"</span> | <span class="hljs-string">"updatedAt"</span>&gt;;
<span class="hljs-comment">// {</span>
<span class="hljs-comment">//   name: string;</span>
<span class="hljs-comment">//   email: string;</span>
<span class="hljs-comment">//   age: number;</span>
<span class="hljs-comment">//   isActive: boolean;</span>
<span class="hljs-comment">// }</span>

<span class="hljs-comment">// Record&lt;K, T&gt; - Create object type with specific keys and values</span>
<span class="hljs-keyword">type</span> UserRoles = Record&lt;<span class="hljs-string">"admin"</span> | <span class="hljs-string">"user"</span> | <span class="hljs-string">"guest"</span>, <span class="hljs-built_in">string</span>[]&gt;;
<span class="hljs-comment">// {</span>
<span class="hljs-comment">//   admin: string[];</span>
<span class="hljs-comment">//   user: string[];</span>
<span class="hljs-comment">//   guest: string[];</span>
<span class="hljs-comment">// }</span>

<span class="hljs-keyword">type</span> StatusMessages = Record&lt;<span class="hljs-built_in">number</span>, <span class="hljs-built_in">string</span>&gt;;
<span class="hljs-comment">// { [key: number]: string }</span>

<span class="hljs-comment">// Example usage</span>
<span class="hljs-keyword">const</span> httpStatusMessages: StatusMessages = {
  <span class="hljs-number">200</span>: <span class="hljs-string">"OK"</span>,
  <span class="hljs-number">404</span>: <span class="hljs-string">"Not Found"</span>,
  <span class="hljs-number">500</span>: <span class="hljs-string">"Internal Server Error"</span>,
};

<span class="hljs-keyword">const</span> rolePermissions: UserRoles = {
  admin: [<span class="hljs-string">"read"</span>, <span class="hljs-string">"write"</span>, <span class="hljs-string">"delete"</span>],
  user: [<span class="hljs-string">"read"</span>, <span class="hljs-string">"write"</span>],
  guest: [<span class="hljs-string">"read"</span>],
};
</div></code></pre>
<h3 id="union-and-intersection-utilities">Union and Intersection Utilities</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Exclude&lt;T, U&gt; - Remove types from union</span>
<span class="hljs-keyword">type</span> PrimaryColors = <span class="hljs-string">"red"</span> | <span class="hljs-string">"green"</span> | <span class="hljs-string">"blue"</span>;
<span class="hljs-keyword">type</span> WarmColors = <span class="hljs-string">"red"</span> | <span class="hljs-string">"orange"</span> | <span class="hljs-string">"yellow"</span>;

<span class="hljs-keyword">type</span> CoolColors = Exclude&lt;PrimaryColors, <span class="hljs-string">"red"</span>&gt;; <span class="hljs-comment">// 'green' | 'blue'</span>
<span class="hljs-keyword">type</span> NonWarmPrimary = Exclude&lt;PrimaryColors, WarmColors&gt;; <span class="hljs-comment">// 'green' | 'blue'</span>

<span class="hljs-comment">// Extract&lt;T, U&gt; - Keep only specific types from union</span>
<span class="hljs-keyword">type</span> WarmPrimaryColors = Extract&lt;PrimaryColors, WarmColors&gt;; <span class="hljs-comment">// 'red'</span>

<span class="hljs-comment">// NonNullable&lt;T&gt; - Remove null and undefined</span>
<span class="hljs-keyword">type</span> MaybeString = <span class="hljs-built_in">string</span> | <span class="hljs-literal">null</span> | <span class="hljs-literal">undefined</span>;
<span class="hljs-keyword">type</span> DefiniteString = NonNullable&lt;MaybeString&gt;; <span class="hljs-comment">// string</span>

<span class="hljs-comment">// Example with more complex types</span>
<span class="hljs-keyword">type</span> ApiResponse&lt;T&gt; = T | <span class="hljs-literal">null</span> | <span class="hljs-literal">undefined</span> | <span class="hljs-built_in">Error</span>;
<span class="hljs-keyword">type</span> ValidApiResponse&lt;T&gt; = NonNullable&lt;ApiResponse&lt;T&gt;&gt;; <span class="hljs-comment">// T | Error</span>

<span class="hljs-comment">// Practical example: filtering union types</span>
<span class="hljs-keyword">type</span> EventType = <span class="hljs-string">"click"</span> | <span class="hljs-string">"hover"</span> | <span class="hljs-string">"focus"</span> | <span class="hljs-string">"blur"</span> | <span class="hljs-string">"keydown"</span> | <span class="hljs-string">"keyup"</span>;
<span class="hljs-keyword">type</span> MouseEvents = Extract&lt;EventType, <span class="hljs-string">"click"</span> | <span class="hljs-string">"hover"</span>&gt;; <span class="hljs-comment">// 'click' | 'hover'</span>
<span class="hljs-keyword">type</span> KeyboardEvents = Extract&lt;EventType, <span class="hljs-string">`key<span class="hljs-subst">${<span class="hljs-built_in">string</span>}</span>`</span>&gt;; <span class="hljs-comment">// 'keydown' | 'keyup'</span>
<span class="hljs-keyword">type</span> NonMouseEvents = Exclude&lt;EventType, MouseEvents&gt;; <span class="hljs-comment">// 'focus' | 'blur' | 'keydown' | 'keyup'</span>
</div></code></pre>
<h3 id="function-utilities">Function Utilities</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Function type for examples</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">calculateTotal</span>(<span class="hljs-params">price: <span class="hljs-built_in">number</span>, tax: <span class="hljs-built_in">number</span>, discount?: <span class="hljs-built_in">number</span></span>): <span class="hljs-title">number</span> </span>{
  <span class="hljs-keyword">const</span> subtotal = price + price * tax;
  <span class="hljs-keyword">return</span> discount ? subtotal - discount : subtotal;
}

<span class="hljs-keyword">class</span> UserService {
  <span class="hljs-keyword">async</span> getUser(id: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">Promise</span>&lt;User&gt; {
    <span class="hljs-comment">// Implementation</span>
    <span class="hljs-keyword">return</span> {} <span class="hljs-keyword">as</span> User;
  }

  updateUser(id: <span class="hljs-built_in">string</span>, updates: Partial&lt;User&gt;): User {
    <span class="hljs-comment">// Implementation</span>
    <span class="hljs-keyword">return</span> {} <span class="hljs-keyword">as</span> User;
  }
}

<span class="hljs-comment">// Parameters&lt;T&gt; - Extract function parameter types</span>
<span class="hljs-keyword">type</span> CalculateTotalParams = Parameters&lt;<span class="hljs-keyword">typeof</span> calculateTotal&gt;;
<span class="hljs-comment">// [price: number, tax: number, discount?: number]</span>

<span class="hljs-keyword">type</span> GetUserParams = Parameters&lt;UserService[<span class="hljs-string">"getUser"</span>]&gt;;
<span class="hljs-comment">// [id: string]</span>

<span class="hljs-comment">// ReturnType&lt;T&gt; - Extract function return type</span>
<span class="hljs-keyword">type</span> CalculateTotalReturn = ReturnType&lt;<span class="hljs-keyword">typeof</span> calculateTotal&gt;; <span class="hljs-comment">// number</span>
<span class="hljs-keyword">type</span> GetUserReturn = ReturnType&lt;UserService[<span class="hljs-string">"getUser"</span>]&gt;; <span class="hljs-comment">// Promise&lt;User&gt;</span>

<span class="hljs-comment">// ConstructorParameters&lt;T&gt; - Extract constructor parameter types</span>
<span class="hljs-keyword">class</span> DatabaseConnection {
  <span class="hljs-keyword">constructor</span>(<span class="hljs-params">host: <span class="hljs-built_in">string</span>, port: <span class="hljs-built_in">number</span>, options?: { ssl: <span class="hljs-built_in">boolean</span> }</span>) {
    <span class="hljs-comment">// Implementation</span>
  }
}

<span class="hljs-keyword">type</span> DbConnectionParams = ConstructorParameters&lt;<span class="hljs-keyword">typeof</span> DatabaseConnection&gt;;
<span class="hljs-comment">// [host: string, port: number, options?: { ssl: boolean }]</span>

<span class="hljs-comment">// InstanceType&lt;T&gt; - Extract instance type from constructor</span>
<span class="hljs-keyword">type</span> DbInstance = InstanceType&lt;<span class="hljs-keyword">typeof</span> DatabaseConnection&gt;; <span class="hljs-comment">// DatabaseConnection</span>

<span class="hljs-comment">// ThisParameterType&lt;T&gt; - Extract 'this' parameter type</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">greetUser</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>: User, message: <span class="hljs-built_in">string</span></span>): <span class="hljs-title">string</span> </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${message}</span>, <span class="hljs-subst">${<span class="hljs-keyword">this</span>.name}</span>!`</span>;
}

<span class="hljs-keyword">type</span> GreetUserThis = ThisParameterType&lt;<span class="hljs-keyword">typeof</span> greetUser&gt;; <span class="hljs-comment">// User</span>

<span class="hljs-comment">// OmitThisParameter&lt;T&gt; - Remove 'this' parameter from function type</span>
<span class="hljs-keyword">type</span> GreetUserWithoutThis = OmitThisParameter&lt;<span class="hljs-keyword">typeof</span> greetUser&gt;;
<span class="hljs-comment">// (message: string) =&gt; string</span>

<span class="hljs-comment">// Practical example: creating type-safe event handlers</span>
<span class="hljs-keyword">interface</span> EventHandlers {
  onClick(<span class="hljs-keyword">this</span>: HTMLButtonElement, event: MouseEvent): <span class="hljs-built_in">void</span>;
  onSubmit(<span class="hljs-keyword">this</span>: HTMLFormElement, event: SubmitEvent): <span class="hljs-built_in">void</span>;
  onChange(<span class="hljs-keyword">this</span>: HTMLInputElement, event: Event): <span class="hljs-built_in">void</span>;
}

<span class="hljs-keyword">type</span> ClickHandler = EventHandlers[<span class="hljs-string">"onClick"</span>];
<span class="hljs-keyword">type</span> ClickHandlerParams = Parameters&lt;ClickHandler&gt;; <span class="hljs-comment">// [event: MouseEvent]</span>
<span class="hljs-keyword">type</span> ClickHandlerThis = ThisParameterType&lt;ClickHandler&gt;; <span class="hljs-comment">// HTMLButtonElement</span>
<span class="hljs-keyword">type</span> ClickHandlerWithoutThis = OmitThisParameter&lt;ClickHandler&gt;; <span class="hljs-comment">// (event: MouseEvent) =&gt; void</span>
</div></code></pre>
<h3 id="string-manipulation-utilities">String Manipulation Utilities</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Uppercase&lt;T&gt; - Convert string literal to uppercase</span>
<span class="hljs-keyword">type</span> UppercaseHello = Uppercase&lt;<span class="hljs-string">"hello"</span>&gt;; <span class="hljs-comment">// 'HELLO'</span>
<span class="hljs-keyword">type</span> UppercaseColors = Uppercase&lt;<span class="hljs-string">"red"</span> | <span class="hljs-string">"green"</span> | <span class="hljs-string">"blue"</span>&gt;; <span class="hljs-comment">// 'RED' | 'GREEN' | 'BLUE'</span>

<span class="hljs-comment">// Lowercase&lt;T&gt; - Convert string literal to lowercase</span>
<span class="hljs-keyword">type</span> LowercaseHello = Lowercase&lt;<span class="hljs-string">"HELLO"</span>&gt;; <span class="hljs-comment">// 'hello'</span>
<span class="hljs-keyword">type</span> LowercaseStatus = Lowercase&lt;<span class="hljs-string">"SUCCESS"</span> | <span class="hljs-string">"ERROR"</span> | <span class="hljs-string">"PENDING"</span>&gt;; <span class="hljs-comment">// 'success' | 'error' | 'pending'</span>

<span class="hljs-comment">// Capitalize&lt;T&gt; - Capitalize first letter</span>
<span class="hljs-keyword">type</span> CapitalizedHello = Capitalize&lt;<span class="hljs-string">"hello world"</span>&gt;; <span class="hljs-comment">// 'Hello world'</span>
<span class="hljs-keyword">type</span> CapitalizedColors = Capitalize&lt;<span class="hljs-string">"red"</span> | <span class="hljs-string">"green"</span> | <span class="hljs-string">"blue"</span>&gt;; <span class="hljs-comment">// 'Red' | 'Green' | 'Blue'</span>

<span class="hljs-comment">// Uncapitalize&lt;T&gt; - Uncapitalize first letter</span>
<span class="hljs-keyword">type</span> UncapitalizedHello = Uncapitalize&lt;<span class="hljs-string">"Hello World"</span>&gt;; <span class="hljs-comment">// 'hello World'</span>

<span class="hljs-comment">// Practical example: API endpoint generation</span>
<span class="hljs-keyword">type</span> HttpMethod = <span class="hljs-string">"get"</span> | <span class="hljs-string">"post"</span> | <span class="hljs-string">"put"</span> | <span class="hljs-string">"delete"</span>;
<span class="hljs-keyword">type</span> Resource = <span class="hljs-string">"user"</span> | <span class="hljs-string">"product"</span> | <span class="hljs-string">"order"</span>;

<span class="hljs-keyword">type</span> ApiEndpoint&lt;
  M <span class="hljs-keyword">extends</span> HttpMethod,
  R <span class="hljs-keyword">extends</span> Resource
&gt; = <span class="hljs-string">`<span class="hljs-subst">${Uppercase&lt;M&gt;}</span> /api/<span class="hljs-subst">${R}</span>s`</span>;

<span class="hljs-keyword">type</span> UserEndpoints = ApiEndpoint&lt;HttpMethod, <span class="hljs-string">"user"</span>&gt;;
<span class="hljs-comment">// 'GET /api/users' | 'POST /api/users' | 'PUT /api/users' | 'DELETE /api/users'</span>

<span class="hljs-comment">// Environment variable types</span>
<span class="hljs-keyword">type</span> EnvPrefix = <span class="hljs-string">"DATABASE"</span> | <span class="hljs-string">"API"</span> | <span class="hljs-string">"REDIS"</span>;
<span class="hljs-keyword">type</span> EnvSuffix = <span class="hljs-string">"HOST"</span> | <span class="hljs-string">"PORT"</span> | <span class="hljs-string">"PASSWORD"</span>;

<span class="hljs-keyword">type</span> EnvVariable&lt;P <span class="hljs-keyword">extends</span> EnvPrefix, S <span class="hljs-keyword">extends</span> EnvSuffix&gt; = <span class="hljs-string">`<span class="hljs-subst">${P}</span>_<span class="hljs-subst">${S}</span>`</span>;

<span class="hljs-keyword">type</span> DatabaseEnvVars = EnvVariable&lt;<span class="hljs-string">"DATABASE"</span>, EnvSuffix&gt;;
<span class="hljs-comment">// 'DATABASE_HOST' | 'DATABASE_PORT' | 'DATABASE_PASSWORD'</span>

<span class="hljs-comment">// CSS property generation</span>
<span class="hljs-keyword">type</span> CSSProperty = <span class="hljs-string">"margin"</span> | <span class="hljs-string">"padding"</span>;
<span class="hljs-keyword">type</span> CSSDirection = <span class="hljs-string">"top"</span> | <span class="hljs-string">"right"</span> | <span class="hljs-string">"bottom"</span> | <span class="hljs-string">"left"</span>;

<span class="hljs-keyword">type</span> CSSDirectionalProperty&lt;
  P <span class="hljs-keyword">extends</span> CSSProperty,
  D <span class="hljs-keyword">extends</span> CSSDirection
&gt; = <span class="hljs-string">`<span class="hljs-subst">${P}</span>-<span class="hljs-subst">${D}</span>`</span>;

<span class="hljs-keyword">type</span> MarginProperties = CSSDirectionalProperty&lt;<span class="hljs-string">"margin"</span>, CSSDirection&gt;;
<span class="hljs-comment">// 'margin-top' | 'margin-right' | 'margin-bottom' | 'margin-left'</span>
</div></code></pre>
<h2 id="custom-utility-types">Custom Utility Types</h2>
<h3 id="advanced-object-manipulation">Advanced Object Manipulation</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// DeepPartial - Make all properties optional recursively</span>
<span class="hljs-keyword">type</span> DeepPartial&lt;T&gt; = {
  [P <span class="hljs-keyword">in</span> keyof T]?: T[P] <span class="hljs-keyword">extends</span> object ? DeepPartial&lt;T[P]&gt; : T[P];
};

<span class="hljs-keyword">interface</span> NestedConfig {
  database: {
    host: <span class="hljs-built_in">string</span>;
    port: <span class="hljs-built_in">number</span>;
    credentials: {
      username: <span class="hljs-built_in">string</span>;
      password: <span class="hljs-built_in">string</span>;
    };
  };
  api: {
    baseUrl: <span class="hljs-built_in">string</span>;
    timeout: <span class="hljs-built_in">number</span>;
  };
}

<span class="hljs-keyword">type</span> PartialNestedConfig = DeepPartial&lt;NestedConfig&gt;;
<span class="hljs-comment">// {</span>
<span class="hljs-comment">//   database?: {</span>
<span class="hljs-comment">//     host?: string;</span>
<span class="hljs-comment">//     port?: number;</span>
<span class="hljs-comment">//     credentials?: {</span>
<span class="hljs-comment">//       username?: string;</span>
<span class="hljs-comment">//       password?: string;</span>
<span class="hljs-comment">//     };</span>
<span class="hljs-comment">//   };</span>
<span class="hljs-comment">//   api?: {</span>
<span class="hljs-comment">//     baseUrl?: string;</span>
<span class="hljs-comment">//     timeout?: number;</span>
<span class="hljs-comment">//   };</span>
<span class="hljs-comment">// }</span>

<span class="hljs-comment">// DeepReadonly - Make all properties readonly recursively</span>
<span class="hljs-keyword">type</span> DeepReadonly&lt;T&gt; = {
  readonly [P <span class="hljs-keyword">in</span> keyof T]: T[P] <span class="hljs-keyword">extends</span> object ? DeepReadonly&lt;T[P]&gt; : T[P];
};

<span class="hljs-keyword">type</span> ReadonlyNestedConfig = DeepReadonly&lt;NestedConfig&gt;;

<span class="hljs-comment">// DeepRequired - Make all properties required recursively</span>
<span class="hljs-keyword">type</span> DeepRequired&lt;T&gt; = {
  [P <span class="hljs-keyword">in</span> keyof T]-?: T[P] <span class="hljs-keyword">extends</span> object ? DeepRequired&lt;T[P]&gt; : T[P];
};

<span class="hljs-comment">// Mutable - Remove readonly modifiers</span>
<span class="hljs-keyword">type</span> Mutable&lt;T&gt; = {
  -readonly [P <span class="hljs-keyword">in</span> keyof T]: T[P];
};

<span class="hljs-keyword">type</span> MutableUser = Mutable&lt;ReadonlyUser&gt;;
<span class="hljs-comment">// Back to regular User interface</span>

<span class="hljs-comment">// PickByType - Pick properties by their type</span>
<span class="hljs-keyword">type</span> PickByType&lt;T, U&gt; = {
  [P <span class="hljs-keyword">in</span> keyof T <span class="hljs-keyword">as</span> T[P] <span class="hljs-keyword">extends</span> U ? P : never]: T[P];
};

<span class="hljs-keyword">type</span> UserStringProperties = PickByType&lt;User, <span class="hljs-built_in">string</span>&gt;;
<span class="hljs-comment">// { name: string; email: string }</span>

<span class="hljs-keyword">type</span> UserNumberProperties = PickByType&lt;User, <span class="hljs-built_in">number</span>&gt;;
<span class="hljs-comment">// { id: number; age: number }</span>

<span class="hljs-keyword">type</span> UserDateProperties = PickByType&lt;User, <span class="hljs-built_in">Date</span>&gt;;
<span class="hljs-comment">// { createdAt: Date; updatedAt: Date }</span>

<span class="hljs-comment">// OmitByType - Omit properties by their type</span>
<span class="hljs-keyword">type</span> OmitByType&lt;T, U&gt; = {
  [P <span class="hljs-keyword">in</span> keyof T <span class="hljs-keyword">as</span> T[P] <span class="hljs-keyword">extends</span> U ? never : P]: T[P];
};

<span class="hljs-keyword">type</span> UserWithoutDates = OmitByType&lt;User, <span class="hljs-built_in">Date</span>&gt;;
<span class="hljs-comment">// { id: number; name: string; email: string; age: number; isActive: boolean }</span>

<span class="hljs-comment">// NonEmptyArray - Ensure array has at least one element</span>
<span class="hljs-keyword">type</span> NonEmptyArray&lt;T&gt; = [T, ...T[]];

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">processItems</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params">items: NonEmptyArray&lt;T&gt;</span>): <span class="hljs-title">T</span> </span>{
  <span class="hljs-keyword">return</span> items[<span class="hljs-number">0</span>]; <span class="hljs-comment">// Safe to access first element</span>
}

<span class="hljs-comment">// Usage</span>
<span class="hljs-keyword">const</span> validItems: NonEmptyArray&lt;<span class="hljs-built_in">string</span>&gt; = [<span class="hljs-string">"first"</span>, <span class="hljs-string">"second"</span>];
<span class="hljs-keyword">const</span> firstItem = processItems(validItems); <span class="hljs-comment">// OK</span>

<span class="hljs-comment">// const emptyItems: NonEmptyArray&lt;string&gt; = []; // Error: Source has 0 element(s) but target requires 1</span>
</div></code></pre>
<h3 id="conditional-type-utilities">Conditional Type Utilities</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// IsNever - Check if type is never</span>
<span class="hljs-keyword">type</span> IsNever&lt;T&gt; = [T] <span class="hljs-keyword">extends</span> [never] ? <span class="hljs-literal">true</span> : <span class="hljs-literal">false</span>;

<span class="hljs-keyword">type</span> TestNever1 = IsNever&lt;never&gt;; <span class="hljs-comment">// true</span>
<span class="hljs-keyword">type</span> TestNever2 = IsNever&lt;<span class="hljs-built_in">string</span>&gt;; <span class="hljs-comment">// false</span>

<span class="hljs-comment">// IsAny - Check if type is any</span>
<span class="hljs-keyword">type</span> IsAny&lt;T&gt; = <span class="hljs-number">0</span> <span class="hljs-keyword">extends</span> <span class="hljs-number">1</span> &amp; T ? <span class="hljs-literal">true</span> : <span class="hljs-literal">false</span>;

<span class="hljs-keyword">type</span> TestAny1 = IsAny&lt;<span class="hljs-built_in">any</span>&gt;; <span class="hljs-comment">// true</span>
<span class="hljs-keyword">type</span> TestAny2 = IsAny&lt;<span class="hljs-built_in">string</span>&gt;; <span class="hljs-comment">// false</span>

<span class="hljs-comment">// IsUnknown - Check if type is unknown</span>
<span class="hljs-keyword">type</span> IsUnknown&lt;T&gt; = IsAny&lt;T&gt; <span class="hljs-keyword">extends</span> <span class="hljs-literal">true</span>
  ? <span class="hljs-literal">false</span>
  : unknown <span class="hljs-keyword">extends</span> T
  ? <span class="hljs-literal">true</span>
  : <span class="hljs-literal">false</span>;

<span class="hljs-keyword">type</span> TestUnknown1 = IsUnknown&lt;unknown&gt;; <span class="hljs-comment">// true</span>
<span class="hljs-keyword">type</span> TestUnknown2 = IsUnknown&lt;<span class="hljs-built_in">string</span>&gt;; <span class="hljs-comment">// false</span>

<span class="hljs-comment">// Equals - Check if two types are equal</span>
<span class="hljs-keyword">type</span> Equals&lt;X, Y&gt; = <span class="hljs-function">(<span class="hljs-params">&lt;T&gt;(<span class="hljs-params"></span>) =&gt; T <span class="hljs-keyword">extends</span> X ? 1 : 2</span>) <span class="hljs-params">extends</span> &lt;<span class="hljs-params">T</span>&gt;<span class="hljs-params">()</span> =&gt;</span> T <span class="hljs-keyword">extends</span> Y
  ? <span class="hljs-number">1</span>
  : <span class="hljs-number">2</span>
  ? <span class="hljs-literal">true</span>
  : <span class="hljs-literal">false</span>;

<span class="hljs-keyword">type</span> TestEquals1 = Equals&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>&gt;; <span class="hljs-comment">// true</span>
<span class="hljs-keyword">type</span> TestEquals2 = Equals&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">number</span>&gt;; <span class="hljs-comment">// false</span>
<span class="hljs-keyword">type</span> TestEquals3 = Equals&lt;<span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span>, <span class="hljs-built_in">number</span> | <span class="hljs-built_in">string</span>&gt;; <span class="hljs-comment">// true</span>

<span class="hljs-comment">// If - Conditional type helper</span>
<span class="hljs-keyword">type</span> If&lt;C <span class="hljs-keyword">extends</span> <span class="hljs-built_in">boolean</span>, T, F&gt; = C <span class="hljs-keyword">extends</span> <span class="hljs-literal">true</span> ? T : F;

<span class="hljs-keyword">type</span> TestIf1 = If&lt;<span class="hljs-literal">true</span>, <span class="hljs-string">"yes"</span>, <span class="hljs-string">"no"</span>&gt;; <span class="hljs-comment">// 'yes'</span>
<span class="hljs-keyword">type</span> TestIf2 = If&lt;<span class="hljs-literal">false</span>, <span class="hljs-string">"yes"</span>, <span class="hljs-string">"no"</span>&gt;; <span class="hljs-comment">// 'no'</span>

<span class="hljs-comment">// Not - Boolean negation</span>
<span class="hljs-keyword">type</span> Not&lt;C <span class="hljs-keyword">extends</span> <span class="hljs-built_in">boolean</span>&gt; = C <span class="hljs-keyword">extends</span> <span class="hljs-literal">true</span> ? <span class="hljs-literal">false</span> : <span class="hljs-literal">true</span>;

<span class="hljs-keyword">type</span> TestNot1 = Not&lt;<span class="hljs-literal">true</span>&gt;; <span class="hljs-comment">// false</span>
<span class="hljs-keyword">type</span> TestNot2 = Not&lt;<span class="hljs-literal">false</span>&gt;; <span class="hljs-comment">// true</span>

<span class="hljs-comment">// And - Boolean AND operation</span>
<span class="hljs-keyword">type</span> And&lt;A <span class="hljs-keyword">extends</span> <span class="hljs-built_in">boolean</span>, B <span class="hljs-keyword">extends</span> <span class="hljs-built_in">boolean</span>&gt; = A <span class="hljs-keyword">extends</span> <span class="hljs-literal">true</span> ? B : <span class="hljs-literal">false</span>;

<span class="hljs-keyword">type</span> TestAnd1 = And&lt;<span class="hljs-literal">true</span>, <span class="hljs-literal">true</span>&gt;; <span class="hljs-comment">// true</span>
<span class="hljs-keyword">type</span> TestAnd2 = And&lt;<span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>&gt;; <span class="hljs-comment">// false</span>
<span class="hljs-keyword">type</span> TestAnd3 = And&lt;<span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>&gt;; <span class="hljs-comment">// false</span>

<span class="hljs-comment">// Or - Boolean OR operation</span>
<span class="hljs-keyword">type</span> Or&lt;A <span class="hljs-keyword">extends</span> <span class="hljs-built_in">boolean</span>, B <span class="hljs-keyword">extends</span> <span class="hljs-built_in">boolean</span>&gt; = A <span class="hljs-keyword">extends</span> <span class="hljs-literal">true</span> ? <span class="hljs-literal">true</span> : B;

<span class="hljs-keyword">type</span> TestOr1 = Or&lt;<span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>&gt;; <span class="hljs-comment">// true</span>
<span class="hljs-keyword">type</span> TestOr2 = Or&lt;<span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>&gt;; <span class="hljs-comment">// false</span>
<span class="hljs-keyword">type</span> TestOr3 = Or&lt;<span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>&gt;; <span class="hljs-comment">// true</span>
</div></code></pre>
<h3 id="array-and-tuple-utilities">Array and Tuple Utilities</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Head - Get first element of array/tuple</span>
<span class="hljs-keyword">type</span> Head&lt;T <span class="hljs-keyword">extends</span> readonly unknown[]&gt; = T <span class="hljs-keyword">extends</span> readonly [
  infer H,
  ...unknown[]
]
  ? H
  : never;

<span class="hljs-keyword">type</span> FirstString = Head&lt;[<span class="hljs-string">"a"</span>, <span class="hljs-string">"b"</span>, <span class="hljs-string">"c"</span>]&gt;; <span class="hljs-comment">// 'a'</span>
<span class="hljs-keyword">type</span> FirstNumber = Head&lt;[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]&gt;; <span class="hljs-comment">// 1</span>
<span class="hljs-keyword">type</span> EmptyHead = Head&lt;[]&gt;; <span class="hljs-comment">// never</span>

<span class="hljs-comment">// Tail - Get all elements except first</span>
<span class="hljs-keyword">type</span> Tail&lt;T <span class="hljs-keyword">extends</span> readonly unknown[]&gt; = T <span class="hljs-keyword">extends</span> readonly [
  unknown,
  ...infer Rest
]
  ? Rest
  : [];

<span class="hljs-keyword">type</span> RestStrings = Tail&lt;[<span class="hljs-string">"a"</span>, <span class="hljs-string">"b"</span>, <span class="hljs-string">"c"</span>]&gt;; <span class="hljs-comment">// ['b', 'c']</span>
<span class="hljs-keyword">type</span> RestNumbers = Tail&lt;[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]&gt;; <span class="hljs-comment">// [2, 3]</span>
<span class="hljs-keyword">type</span> EmptyTail = Tail&lt;[]&gt;; <span class="hljs-comment">// []</span>

<span class="hljs-comment">// Last - Get last element of array/tuple</span>
<span class="hljs-keyword">type</span> Last&lt;T <span class="hljs-keyword">extends</span> readonly unknown[]&gt; = T <span class="hljs-keyword">extends</span> readonly [
  ...unknown[],
  infer L
]
  ? L
  : never;

<span class="hljs-keyword">type</span> LastString = Last&lt;[<span class="hljs-string">"a"</span>, <span class="hljs-string">"b"</span>, <span class="hljs-string">"c"</span>]&gt;; <span class="hljs-comment">// 'c'</span>
<span class="hljs-keyword">type</span> LastNumber = Last&lt;[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]&gt;; <span class="hljs-comment">// 3</span>

<span class="hljs-comment">// Length - Get length of tuple</span>
<span class="hljs-keyword">type</span> Length&lt;T <span class="hljs-keyword">extends</span> readonly unknown[]&gt; = T[<span class="hljs-string">"length"</span>];

<span class="hljs-keyword">type</span> LengthOfTuple = Length&lt;[<span class="hljs-string">"a"</span>, <span class="hljs-string">"b"</span>, <span class="hljs-string">"c"</span>]&gt;; <span class="hljs-comment">// 3</span>
<span class="hljs-keyword">type</span> LengthOfEmpty = Length&lt;[]&gt;; <span class="hljs-comment">// 0</span>

<span class="hljs-comment">// Reverse - Reverse tuple order</span>
<span class="hljs-keyword">type</span> Reverse&lt;T <span class="hljs-keyword">extends</span> readonly unknown[]&gt; = T <span class="hljs-keyword">extends</span> readonly [
  ...infer Rest,
  infer Last
]
  ? [Last, ...Reverse&lt;Rest&gt;]
  : [];

<span class="hljs-keyword">type</span> ReversedTuple = Reverse&lt;[<span class="hljs-string">"a"</span>, <span class="hljs-string">"b"</span>, <span class="hljs-string">"c"</span>]&gt;; <span class="hljs-comment">// ['c', 'b', 'a']</span>
<span class="hljs-keyword">type</span> ReversedNumbers = Reverse&lt;[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>]&gt;; <span class="hljs-comment">// [4, 3, 2, 1]</span>

<span class="hljs-comment">// Flatten - Flatten nested arrays</span>
<span class="hljs-keyword">type</span> Flatten&lt;T <span class="hljs-keyword">extends</span> readonly unknown[]&gt; = T <span class="hljs-keyword">extends</span> readonly [
  infer First,
  ...infer Rest
]
  ? First <span class="hljs-keyword">extends</span> readonly unknown[]
    ? [...Flatten&lt;First&gt;, ...Flatten&lt;Rest&gt;]
    : [First, ...Flatten&lt;Rest&gt;]
  : [];

<span class="hljs-keyword">type</span> FlatArray = Flatten&lt;[<span class="hljs-number">1</span>, [<span class="hljs-number">2</span>, <span class="hljs-number">3</span>], [<span class="hljs-number">4</span>, [<span class="hljs-number">5</span>, <span class="hljs-number">6</span>]]]&gt;; <span class="hljs-comment">// [1, 2, 3, 4, [5, 6]]</span>

<span class="hljs-comment">// Includes - Check if array includes specific type</span>
<span class="hljs-keyword">type</span> Includes&lt;T <span class="hljs-keyword">extends</span> readonly unknown[], U&gt; = T <span class="hljs-keyword">extends</span> readonly [
  infer First,
  ...infer Rest
]
  ? Equals&lt;First, U&gt; <span class="hljs-keyword">extends</span> <span class="hljs-literal">true</span>
    ? <span class="hljs-literal">true</span>
    : Includes&lt;Rest, U&gt;
  : <span class="hljs-literal">false</span>;

<span class="hljs-keyword">type</span> HasString = Includes&lt;[<span class="hljs-string">"a"</span>, <span class="hljs-string">"b"</span>, <span class="hljs-string">"c"</span>], <span class="hljs-string">"b"</span>&gt;; <span class="hljs-comment">// true</span>
<span class="hljs-keyword">type</span> HasNumber = Includes&lt;[<span class="hljs-string">"a"</span>, <span class="hljs-string">"b"</span>, <span class="hljs-string">"c"</span>], <span class="hljs-number">1</span>&gt;; <span class="hljs-comment">// false</span>

<span class="hljs-comment">// Unique - Remove duplicate types from tuple</span>
<span class="hljs-keyword">type</span> Unique&lt;
  T <span class="hljs-keyword">extends</span> readonly unknown[],
  Result <span class="hljs-keyword">extends</span> readonly unknown[] = []
&gt; = T <span class="hljs-keyword">extends</span> readonly [infer First, ...infer Rest]
  ? Includes&lt;Result, First&gt; <span class="hljs-keyword">extends</span> <span class="hljs-literal">true</span>
    ? Unique&lt;Rest, Result&gt;
    : Unique&lt;Rest, [...Result, First]&gt;
  : Result;

<span class="hljs-keyword">type</span> UniqueArray = Unique&lt;[<span class="hljs-string">"a"</span>, <span class="hljs-string">"b"</span>, <span class="hljs-string">"a"</span>, <span class="hljs-string">"c"</span>, <span class="hljs-string">"b"</span>]&gt;; <span class="hljs-comment">// ['a', 'b', 'c']</span>
</div></code></pre>
<h3 id="string-manipulation-utilities">String Manipulation Utilities</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Split - Split string by delimiter</span>
<span class="hljs-keyword">type</span> Split&lt;
  S <span class="hljs-keyword">extends</span> <span class="hljs-built_in">string</span>,
  D <span class="hljs-keyword">extends</span> <span class="hljs-built_in">string</span>
&gt; = S <span class="hljs-keyword">extends</span> <span class="hljs-string">`<span class="hljs-subst">${infer T}</span><span class="hljs-subst">${D}</span><span class="hljs-subst">${infer U}</span>`</span> ? [T, ...Split&lt;U, D&gt;] : [S];

<span class="hljs-keyword">type</span> SplitPath = Split&lt;<span class="hljs-string">"user/profile/settings"</span>, <span class="hljs-string">"/"</span>&gt;; <span class="hljs-comment">// ['user', 'profile', 'settings']</span>
<span class="hljs-keyword">type</span> SplitEmail = Split&lt;<span class="hljs-string">"user@example.com"</span>, <span class="hljs-string">"@"</span>&gt;; <span class="hljs-comment">// ['user', 'example.com']</span>

<span class="hljs-comment">// Join - Join array of strings with delimiter</span>
<span class="hljs-keyword">type</span> Join&lt;T <span class="hljs-keyword">extends</span> readonly <span class="hljs-built_in">string</span>[], D <span class="hljs-keyword">extends</span> <span class="hljs-built_in">string</span>&gt; = T <span class="hljs-keyword">extends</span> readonly [
  infer First,
  ...infer Rest
]
  ? First <span class="hljs-keyword">extends</span> <span class="hljs-built_in">string</span>
    ? Rest <span class="hljs-keyword">extends</span> readonly <span class="hljs-built_in">string</span>[]
      ? Rest[<span class="hljs-string">"length"</span>] <span class="hljs-keyword">extends</span> <span class="hljs-number">0</span>
        ? First
        : <span class="hljs-string">`<span class="hljs-subst">${First}</span><span class="hljs-subst">${D}</span><span class="hljs-subst">${Join&lt;Rest, D&gt;}</span>`</span>
      : never
    : never
  : <span class="hljs-string">""</span>;

<span class="hljs-keyword">type</span> JoinedPath = Join&lt;[<span class="hljs-string">"user"</span>, <span class="hljs-string">"profile"</span>, <span class="hljs-string">"settings"</span>], <span class="hljs-string">"/"</span>&gt;; <span class="hljs-comment">// 'user/profile/settings'</span>
<span class="hljs-keyword">type</span> JoinedWords = Join&lt;[<span class="hljs-string">"hello"</span>, <span class="hljs-string">"world"</span>], <span class="hljs-string">" "</span>&gt;; <span class="hljs-comment">// 'hello world'</span>

<span class="hljs-comment">// Replace - Replace substring in string</span>
<span class="hljs-keyword">type</span> Replace&lt;
  S <span class="hljs-keyword">extends</span> <span class="hljs-built_in">string</span>,
  From <span class="hljs-keyword">extends</span> <span class="hljs-built_in">string</span>,
  To <span class="hljs-keyword">extends</span> <span class="hljs-built_in">string</span>
&gt; = S <span class="hljs-keyword">extends</span> <span class="hljs-string">`<span class="hljs-subst">${infer Prefix}</span><span class="hljs-subst">${From}</span><span class="hljs-subst">${infer Suffix}</span>`</span>
  ? <span class="hljs-string">`<span class="hljs-subst">${Prefix}</span><span class="hljs-subst">${To}</span><span class="hljs-subst">${Suffix}</span>`</span>
  : S;

<span class="hljs-keyword">type</span> ReplacedString = Replace&lt;<span class="hljs-string">"hello world"</span>, <span class="hljs-string">"world"</span>, <span class="hljs-string">"TypeScript"</span>&gt;; <span class="hljs-comment">// 'hello TypeScript'</span>

<span class="hljs-comment">// ReplaceAll - Replace all occurrences of substring</span>
<span class="hljs-keyword">type</span> ReplaceAll&lt;
  S <span class="hljs-keyword">extends</span> <span class="hljs-built_in">string</span>,
  From <span class="hljs-keyword">extends</span> <span class="hljs-built_in">string</span>,
  To <span class="hljs-keyword">extends</span> <span class="hljs-built_in">string</span>
&gt; = S <span class="hljs-keyword">extends</span> <span class="hljs-string">`<span class="hljs-subst">${infer Prefix}</span><span class="hljs-subst">${From}</span><span class="hljs-subst">${infer Suffix}</span>`</span>
  ? <span class="hljs-string">`<span class="hljs-subst">${Prefix}</span><span class="hljs-subst">${To}</span><span class="hljs-subst">${ReplaceAll&lt;Suffix, From, To&gt;}</span>`</span>
  : S;

<span class="hljs-keyword">type</span> ReplacedAllSpaces = ReplaceAll&lt;<span class="hljs-string">"hello world test"</span>, <span class="hljs-string">" "</span>, <span class="hljs-string">"-"</span>&gt;; <span class="hljs-comment">// 'hello-world-test'</span>

<span class="hljs-comment">// StartsWith - Check if string starts with prefix</span>
<span class="hljs-keyword">type</span> StartsWith&lt;
  S <span class="hljs-keyword">extends</span> <span class="hljs-built_in">string</span>,
  Prefix <span class="hljs-keyword">extends</span> <span class="hljs-built_in">string</span>
&gt; = S <span class="hljs-keyword">extends</span> <span class="hljs-string">`<span class="hljs-subst">${Prefix}</span><span class="hljs-subst">${<span class="hljs-built_in">string</span>}</span>`</span> ? <span class="hljs-literal">true</span> : <span class="hljs-literal">false</span>;

<span class="hljs-keyword">type</span> StartsWithHello = StartsWith&lt;<span class="hljs-string">"hello world"</span>, <span class="hljs-string">"hello"</span>&gt;; <span class="hljs-comment">// true</span>
<span class="hljs-keyword">type</span> StartsWithBye = StartsWith&lt;<span class="hljs-string">"hello world"</span>, <span class="hljs-string">"bye"</span>&gt;; <span class="hljs-comment">// false</span>

<span class="hljs-comment">// EndsWith - Check if string ends with suffix</span>
<span class="hljs-keyword">type</span> EndsWith&lt;
  S <span class="hljs-keyword">extends</span> <span class="hljs-built_in">string</span>,
  Suffix <span class="hljs-keyword">extends</span> <span class="hljs-built_in">string</span>
&gt; = S <span class="hljs-keyword">extends</span> <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-built_in">string</span>}</span><span class="hljs-subst">${Suffix}</span>`</span> ? <span class="hljs-literal">true</span> : <span class="hljs-literal">false</span>;

<span class="hljs-keyword">type</span> EndsWithWorld = EndsWith&lt;<span class="hljs-string">"hello world"</span>, <span class="hljs-string">"world"</span>&gt;; <span class="hljs-comment">// true</span>
<span class="hljs-keyword">type</span> EndsWithTest = EndsWith&lt;<span class="hljs-string">"hello world"</span>, <span class="hljs-string">"test"</span>&gt;; <span class="hljs-comment">// false</span>

<span class="hljs-comment">// TrimLeft - Remove leading whitespace</span>
<span class="hljs-keyword">type</span> TrimLeft&lt;S <span class="hljs-keyword">extends</span> <span class="hljs-built_in">string</span>&gt; = S <span class="hljs-keyword">extends</span> <span class="hljs-string">` <span class="hljs-subst">${infer Rest}</span>`</span>
  ? TrimLeft&lt;Rest&gt;
  : S;

<span class="hljs-keyword">type</span> TrimmedLeft = TrimLeft&lt;<span class="hljs-string">"   hello world"</span>&gt;; <span class="hljs-comment">// 'hello world'</span>

<span class="hljs-comment">// TrimRight - Remove trailing whitespace</span>
<span class="hljs-keyword">type</span> TrimRight&lt;S <span class="hljs-keyword">extends</span> <span class="hljs-built_in">string</span>&gt; = S <span class="hljs-keyword">extends</span> <span class="hljs-string">`<span class="hljs-subst">${infer Rest}</span> `</span>
  ? TrimRight&lt;Rest&gt;
  : S;

<span class="hljs-keyword">type</span> TrimmedRight = TrimRight&lt;<span class="hljs-string">"hello world   "</span>&gt;; <span class="hljs-comment">// 'hello world'</span>

<span class="hljs-comment">// Trim - Remove leading and trailing whitespace</span>
<span class="hljs-keyword">type</span> Trim&lt;S <span class="hljs-keyword">extends</span> <span class="hljs-built_in">string</span>&gt; = TrimLeft&lt;TrimRight&lt;S&gt;&gt;;

<span class="hljs-keyword">type</span> TrimmedString = Trim&lt;<span class="hljs-string">"   hello world   "</span>&gt;; <span class="hljs-comment">// 'hello world'</span>
</div></code></pre>
<h3 id="path-and-property-utilities">Path and Property Utilities</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Get - Get nested property type by path</span>
<span class="hljs-keyword">type</span> Get&lt;T, K&gt; = K <span class="hljs-keyword">extends</span> <span class="hljs-string">`<span class="hljs-subst">${infer Key}</span>.<span class="hljs-subst">${infer Rest}</span>`</span>
  ? Key <span class="hljs-keyword">extends</span> keyof T
    ? Get&lt;T[Key], Rest&gt;
    : never
  : K <span class="hljs-keyword">extends</span> keyof T
  ? T[K]
  : never;

<span class="hljs-keyword">interface</span> NestedObject {
  user: {
    profile: {
      name: <span class="hljs-built_in">string</span>;
      age: <span class="hljs-built_in">number</span>;
    };
    settings: {
      theme: <span class="hljs-string">"light"</span> | <span class="hljs-string">"dark"</span>;
      notifications: <span class="hljs-built_in">boolean</span>;
    };
  };
  app: {
    version: <span class="hljs-built_in">string</span>;
  };
}

<span class="hljs-keyword">type</span> UserName = Get&lt;NestedObject, <span class="hljs-string">"user.profile.name"</span>&gt;; <span class="hljs-comment">// string</span>
<span class="hljs-keyword">type</span> UserAge = Get&lt;NestedObject, <span class="hljs-string">"user.profile.age"</span>&gt;; <span class="hljs-comment">// number</span>
<span class="hljs-keyword">type</span> Theme = Get&lt;NestedObject, <span class="hljs-string">"user.settings.theme"</span>&gt;; <span class="hljs-comment">// 'light' | 'dark'</span>
<span class="hljs-keyword">type</span> AppVersion = Get&lt;NestedObject, <span class="hljs-string">"app.version"</span>&gt;; <span class="hljs-comment">// string</span>

<span class="hljs-comment">// Paths - Generate all possible paths in an object</span>
<span class="hljs-keyword">type</span> Paths&lt;T, D <span class="hljs-keyword">extends</span> <span class="hljs-built_in">number</span> = <span class="hljs-number">10</span>&gt; = [D] <span class="hljs-keyword">extends</span> [never]
  ? never
  : T <span class="hljs-keyword">extends</span> object
  ? {
      [K <span class="hljs-keyword">in</span> keyof T]-?: K <span class="hljs-keyword">extends</span> <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span>
        ? <span class="hljs-string">`<span class="hljs-subst">${K}</span>`</span> | Join&lt;[K, Paths&lt;T[K], Prev[D]&gt;], <span class="hljs-string">"."</span>&gt;
        : never;
    }[keyof T]
  : <span class="hljs-string">""</span>;

<span class="hljs-keyword">type</span> Prev = [
  never,
  <span class="hljs-number">0</span>,
  <span class="hljs-number">1</span>,
  <span class="hljs-number">2</span>,
  <span class="hljs-number">3</span>,
  <span class="hljs-number">4</span>,
  <span class="hljs-number">5</span>,
  <span class="hljs-number">6</span>,
  <span class="hljs-number">7</span>,
  <span class="hljs-number">8</span>,
  <span class="hljs-number">9</span>,
  <span class="hljs-number">10</span>,
  <span class="hljs-number">11</span>,
  <span class="hljs-number">12</span>,
  <span class="hljs-number">13</span>,
  <span class="hljs-number">14</span>,
  <span class="hljs-number">15</span>,
  <span class="hljs-number">16</span>,
  <span class="hljs-number">17</span>,
  <span class="hljs-number">18</span>,
  <span class="hljs-number">19</span>,
  <span class="hljs-number">20</span>,
  ..<span class="hljs-number">.0</span>[]
];

<span class="hljs-keyword">type</span> AllPaths = Paths&lt;NestedObject&gt;;
<span class="hljs-comment">// 'user' | 'app' | 'user.profile' | 'user.settings' | 'user.profile.name' |</span>
<span class="hljs-comment">// 'user.profile.age' | 'user.settings.theme' | 'user.settings.notifications' | 'app.version'</span>

<span class="hljs-comment">// Leaves - Get only leaf paths (paths to primitive values)</span>
<span class="hljs-keyword">type</span> Leaves&lt;T, D <span class="hljs-keyword">extends</span> <span class="hljs-built_in">number</span> = <span class="hljs-number">10</span>&gt; = [D] <span class="hljs-keyword">extends</span> [never]
  ? never
  : T <span class="hljs-keyword">extends</span> object
  ? {
      [K <span class="hljs-keyword">in</span> keyof T]-?: Join&lt;[K, Leaves&lt;T[K], Prev[D]&gt;], <span class="hljs-string">"."</span>&gt;;
    }[keyof T]
  : <span class="hljs-string">""</span>;

<span class="hljs-keyword">type</span> LeafPaths = Leaves&lt;NestedObject&gt;;
<span class="hljs-comment">// 'user.profile.name' | 'user.profile.age' | 'user.settings.theme' |</span>
<span class="hljs-comment">// 'user.settings.notifications' | 'app.version'</span>

<span class="hljs-comment">// Set - Set nested property type by path</span>
<span class="hljs-keyword">type</span> Set&lt;T, K <span class="hljs-keyword">extends</span> <span class="hljs-built_in">string</span>, V&gt; = K <span class="hljs-keyword">extends</span> <span class="hljs-string">`<span class="hljs-subst">${infer Key}</span>.<span class="hljs-subst">${infer Rest}</span>`</span>
  ? Key <span class="hljs-keyword">extends</span> keyof T
    ? {
        [P <span class="hljs-keyword">in</span> keyof T]: P <span class="hljs-keyword">extends</span> Key ? Set&lt;T[P], Rest, V&gt; : T[P];
      }
    : T
  : K <span class="hljs-keyword">extends</span> keyof T
  ? {
      [P <span class="hljs-keyword">in</span> keyof T]: P <span class="hljs-keyword">extends</span> K ? V : T[P];
    }
  : T;

<span class="hljs-keyword">type</span> UpdatedObject = Set&lt;NestedObject, <span class="hljs-string">"user.profile.name"</span>, <span class="hljs-built_in">number</span>&gt;;
<span class="hljs-comment">// Changes user.profile.name from string to number</span>
</div></code></pre>
<h2 id="practical-examples">Practical Examples</h2>
<h3 id="type-safe-configuration-system">Type-Safe Configuration System</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Configuration schema with nested structure</span>
<span class="hljs-keyword">interface</span> AppConfig {
  database: {
    host: <span class="hljs-built_in">string</span>;
    port: <span class="hljs-built_in">number</span>;
    ssl: <span class="hljs-built_in">boolean</span>;
    pool: {
      min: <span class="hljs-built_in">number</span>;
      max: <span class="hljs-built_in">number</span>;
    };
  };
  api: {
    baseUrl: <span class="hljs-built_in">string</span>;
    timeout: <span class="hljs-built_in">number</span>;
    retries: <span class="hljs-built_in">number</span>;
  };
  features: {
    authentication: <span class="hljs-built_in">boolean</span>;
    logging: <span class="hljs-built_in">boolean</span>;
    analytics: <span class="hljs-built_in">boolean</span>;
  };
}

<span class="hljs-comment">// Type-safe configuration getter</span>
<span class="hljs-keyword">class</span> ConfigManager&lt;T <span class="hljs-keyword">extends</span> Record&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt;&gt; {
  <span class="hljs-keyword">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> config: T</span>) {}

  <span class="hljs-keyword">get</span>&lt;P <span class="hljs-keyword">extends</span> Paths&lt;T&gt;&gt;(path: P): Get&lt;T, P&gt; {
    <span class="hljs-keyword">const</span> keys = path.split(<span class="hljs-string">"."</span>) <span class="hljs-keyword">as</span> <span class="hljs-built_in">string</span>[];
    <span class="hljs-keyword">let</span> value: <span class="hljs-built_in">any</span> = <span class="hljs-keyword">this</span>.config;

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> key of keys) {
      value = value?.[key];
    }

    <span class="hljs-keyword">return</span> value;
  }

  <span class="hljs-keyword">set</span>&lt;P <span class="hljs-keyword">extends</span> Paths&lt;T&gt;, V&gt;(path: P, value: V): ConfigManager&lt;Set&lt;T, P, V&gt;&gt; {
    <span class="hljs-keyword">const</span> keys = path.split(<span class="hljs-string">"."</span>) <span class="hljs-keyword">as</span> <span class="hljs-built_in">string</span>[];
    <span class="hljs-keyword">const</span> newConfig = <span class="hljs-built_in">JSON</span>.parse(<span class="hljs-built_in">JSON</span>.stringify(<span class="hljs-keyword">this</span>.config));
    <span class="hljs-keyword">let</span> current = newConfig;

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; keys.length - <span class="hljs-number">1</span>; i++) {
      current = current[keys[i]];
    }

    current[keys[keys.length - <span class="hljs-number">1</span>]] = value;
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> ConfigManager(newConfig);
  }

  update&lt;P <span class="hljs-keyword">extends</span> Paths&lt;T&gt;&gt;(
    path: P,
    updater: <span class="hljs-function">(<span class="hljs-params">current: Get&lt;T, P&gt;</span>) =&gt;</span> Get&lt;T, P&gt;
  ): ConfigManager&lt;T&gt; {
    <span class="hljs-keyword">const</span> currentValue = <span class="hljs-keyword">this</span>.get(path);
    <span class="hljs-keyword">const</span> newValue = updater(currentValue);
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.set(path, newValue) <span class="hljs-keyword">as</span> ConfigManager&lt;T&gt;;
  }
}

<span class="hljs-comment">// Usage</span>
<span class="hljs-keyword">const</span> config = <span class="hljs-keyword">new</span> ConfigManager&lt;AppConfig&gt;({
  database: {
    host: <span class="hljs-string">"localhost"</span>,
    port: <span class="hljs-number">5432</span>,
    ssl: <span class="hljs-literal">false</span>,
    pool: { min: <span class="hljs-number">2</span>, max: <span class="hljs-number">10</span> },
  },
  api: {
    baseUrl: <span class="hljs-string">"https://api.example.com"</span>,
    timeout: <span class="hljs-number">5000</span>,
    retries: <span class="hljs-number">3</span>,
  },
  features: {
    authentication: <span class="hljs-literal">true</span>,
    logging: <span class="hljs-literal">false</span>,
    analytics: <span class="hljs-literal">true</span>,
  },
});

<span class="hljs-comment">// Type-safe access</span>
<span class="hljs-keyword">const</span> dbHost = config.get(<span class="hljs-string">"database.host"</span>); <span class="hljs-comment">// string</span>
<span class="hljs-keyword">const</span> poolMax = config.get(<span class="hljs-string">"database.pool.max"</span>); <span class="hljs-comment">// number</span>
<span class="hljs-keyword">const</span> authEnabled = config.get(<span class="hljs-string">"features.authentication"</span>); <span class="hljs-comment">// boolean</span>

<span class="hljs-comment">// Type-safe updates</span>
<span class="hljs-keyword">const</span> updatedConfig = config
  .set(<span class="hljs-string">"database.ssl"</span>, <span class="hljs-literal">true</span>)
  .set(<span class="hljs-string">"api.timeout"</span>, <span class="hljs-number">10000</span>)
  .update(<span class="hljs-string">"database.pool.max"</span>, <span class="hljs-function">(<span class="hljs-params">current</span>) =&gt;</span> current * <span class="hljs-number">2</span>);
</div></code></pre>
<h3 id="form-validation-system">Form Validation System</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Form field types</span>
<span class="hljs-keyword">type</span> FieldType = <span class="hljs-string">"string"</span> | <span class="hljs-string">"number"</span> | <span class="hljs-string">"boolean"</span> | <span class="hljs-string">"date"</span> | <span class="hljs-string">"email"</span>;

<span class="hljs-keyword">interface</span> FieldSchema {
  <span class="hljs-keyword">type</span>: FieldType;
  required?: <span class="hljs-built_in">boolean</span>;
  min?: <span class="hljs-built_in">number</span>;
  max?: <span class="hljs-built_in">number</span>;
  pattern?: <span class="hljs-built_in">string</span>;
}

<span class="hljs-keyword">type</span> FormSchema = Record&lt;<span class="hljs-built_in">string</span>, FieldSchema&gt;;

<span class="hljs-comment">// Extract form data type from schema</span>
<span class="hljs-keyword">type</span> FormDataFromSchema&lt;T <span class="hljs-keyword">extends</span> FormSchema&gt; = {
  [K <span class="hljs-keyword">in</span> keyof T]: T[K][<span class="hljs-string">"type"</span>] <span class="hljs-keyword">extends</span> <span class="hljs-string">"string"</span> | <span class="hljs-string">"email"</span>
    ? <span class="hljs-built_in">string</span>
    : T[K][<span class="hljs-string">"type"</span>] <span class="hljs-keyword">extends</span> <span class="hljs-string">"number"</span>
    ? <span class="hljs-built_in">number</span>
    : T[K][<span class="hljs-string">"type"</span>] <span class="hljs-keyword">extends</span> <span class="hljs-string">"boolean"</span>
    ? <span class="hljs-built_in">boolean</span>
    : T[K][<span class="hljs-string">"type"</span>] <span class="hljs-keyword">extends</span> <span class="hljs-string">"date"</span>
    ? <span class="hljs-built_in">Date</span>
    : unknown;
};

<span class="hljs-comment">// Extract required fields</span>
<span class="hljs-keyword">type</span> RequiredFields&lt;T <span class="hljs-keyword">extends</span> FormSchema&gt; = {
  [K <span class="hljs-keyword">in</span> keyof T]: T[K][<span class="hljs-string">"required"</span>] <span class="hljs-keyword">extends</span> <span class="hljs-literal">true</span> ? K : never;
}[keyof T];

<span class="hljs-comment">// Extract optional fields</span>
<span class="hljs-keyword">type</span> OptionalFields&lt;T <span class="hljs-keyword">extends</span> FormSchema&gt; = Exclude&lt;keyof T, RequiredFields&lt;T&gt;&gt;;

<span class="hljs-comment">// Create form data type with proper optionality</span>
<span class="hljs-keyword">type</span> FormData&lt;T <span class="hljs-keyword">extends</span> FormSchema&gt; = Pick&lt;
  FormDataFromSchema&lt;T&gt;,
  RequiredFields&lt;T&gt;
&gt; &amp;
  Partial&lt;Pick&lt;FormDataFromSchema&lt;T&gt;, OptionalFields&lt;T&gt;&gt;&gt;;

<span class="hljs-comment">// Validation result type</span>
<span class="hljs-keyword">type</span> ValidationResult&lt;T <span class="hljs-keyword">extends</span> FormSchema&gt; = {
  isValid: <span class="hljs-built_in">boolean</span>;
  errors: Partial&lt;Record&lt;keyof T, <span class="hljs-built_in">string</span>[]&gt;&gt;;
};

<span class="hljs-comment">// Form validator class</span>
<span class="hljs-keyword">class</span> FormValidator&lt;T <span class="hljs-keyword">extends</span> FormSchema&gt; {
  <span class="hljs-keyword">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> schema: T</span>) {}

  validate(data: Partial&lt;FormDataFromSchema&lt;T&gt;&gt;): ValidationResult&lt;T&gt; {
    <span class="hljs-keyword">const</span> errors: Partial&lt;Record&lt;keyof T, <span class="hljs-built_in">string</span>[]&gt;&gt; = {};
    <span class="hljs-keyword">let</span> isValid = <span class="hljs-literal">true</span>;

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> [fieldName, fieldSchema] of <span class="hljs-built_in">Object</span>.entries(<span class="hljs-keyword">this</span>.schema)) {
      <span class="hljs-keyword">const</span> value = data[fieldName <span class="hljs-keyword">as</span> keyof T];
      <span class="hljs-keyword">const</span> fieldErrors: <span class="hljs-built_in">string</span>[] = [];

      <span class="hljs-comment">// Required validation</span>
      <span class="hljs-keyword">if</span> (fieldSchema.required &amp;&amp; (value === <span class="hljs-literal">undefined</span> || value === <span class="hljs-literal">null</span>)) {
        fieldErrors.push(<span class="hljs-string">`<span class="hljs-subst">${fieldName}</span> is required`</span>);
        isValid = <span class="hljs-literal">false</span>;
      }

      <span class="hljs-keyword">if</span> (value !== <span class="hljs-literal">undefined</span> &amp;&amp; value !== <span class="hljs-literal">null</span>) {
        <span class="hljs-comment">// Type-specific validation</span>
        <span class="hljs-keyword">if</span> (fieldSchema.type === <span class="hljs-string">"email"</span> &amp;&amp; <span class="hljs-keyword">typeof</span> value === <span class="hljs-string">"string"</span>) {
          <span class="hljs-keyword">const</span> emailRegex = <span class="hljs-regexp">/^[^\s@]+@[^\s@]+\.[^\s@]+$/</span>;
          <span class="hljs-keyword">if</span> (!emailRegex.test(value)) {
            fieldErrors.push(<span class="hljs-string">"Invalid email format"</span>);
            isValid = <span class="hljs-literal">false</span>;
          }
        }

        <span class="hljs-keyword">if</span> (fieldSchema.type === <span class="hljs-string">"string"</span> &amp;&amp; <span class="hljs-keyword">typeof</span> value === <span class="hljs-string">"string"</span>) {
          <span class="hljs-keyword">if</span> (fieldSchema.min &amp;&amp; value.length &lt; fieldSchema.min) {
            fieldErrors.push(<span class="hljs-string">`Minimum length is <span class="hljs-subst">${fieldSchema.min}</span>`</span>);
            isValid = <span class="hljs-literal">false</span>;
          }
          <span class="hljs-keyword">if</span> (fieldSchema.max &amp;&amp; value.length &gt; fieldSchema.max) {
            fieldErrors.push(<span class="hljs-string">`Maximum length is <span class="hljs-subst">${fieldSchema.max}</span>`</span>);
            isValid = <span class="hljs-literal">false</span>;
          }
          <span class="hljs-keyword">if</span> (fieldSchema.pattern) {
            <span class="hljs-keyword">const</span> regex = <span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(fieldSchema.pattern);
            <span class="hljs-keyword">if</span> (!regex.test(value)) {
              fieldErrors.push(<span class="hljs-string">"Invalid format"</span>);
              isValid = <span class="hljs-literal">false</span>;
            }
          }
        }

        <span class="hljs-keyword">if</span> (fieldSchema.type === <span class="hljs-string">"number"</span> &amp;&amp; <span class="hljs-keyword">typeof</span> value === <span class="hljs-string">"number"</span>) {
          <span class="hljs-keyword">if</span> (fieldSchema.min &amp;&amp; value &lt; fieldSchema.min) {
            fieldErrors.push(<span class="hljs-string">`Minimum value is <span class="hljs-subst">${fieldSchema.min}</span>`</span>);
            isValid = <span class="hljs-literal">false</span>;
          }
          <span class="hljs-keyword">if</span> (fieldSchema.max &amp;&amp; value &gt; fieldSchema.max) {
            fieldErrors.push(<span class="hljs-string">`Maximum value is <span class="hljs-subst">${fieldSchema.max}</span>`</span>);
            isValid = <span class="hljs-literal">false</span>;
          }
        }
      }

      <span class="hljs-keyword">if</span> (fieldErrors.length &gt; <span class="hljs-number">0</span>) {
        errors[fieldName <span class="hljs-keyword">as</span> keyof T] = fieldErrors;
      }
    }

    <span class="hljs-keyword">return</span> { isValid, errors };
  }
}

<span class="hljs-comment">// Usage example</span>
<span class="hljs-keyword">const</span> userFormSchema = {
  name: { <span class="hljs-keyword">type</span>: <span class="hljs-string">"string"</span> <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>, required: <span class="hljs-literal">true</span>, min: <span class="hljs-number">2</span>, max: <span class="hljs-number">50</span> },
  email: { <span class="hljs-keyword">type</span>: <span class="hljs-string">"email"</span> <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>, required: <span class="hljs-literal">true</span> },
  age: { <span class="hljs-keyword">type</span>: <span class="hljs-string">"number"</span> <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>, min: <span class="hljs-number">18</span>, max: <span class="hljs-number">120</span> },
  newsletter: { <span class="hljs-keyword">type</span>: <span class="hljs-string">"boolean"</span> <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span> },
  website: { <span class="hljs-keyword">type</span>: <span class="hljs-string">"string"</span> <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>, pattern: <span class="hljs-string">"^https?://.+"</span> },
} satisfies FormSchema;

<span class="hljs-keyword">type</span> UserFormData = FormData&lt;<span class="hljs-keyword">typeof</span> userFormSchema&gt;;
<span class="hljs-comment">// {</span>
<span class="hljs-comment">//   name: string;</span>
<span class="hljs-comment">//   email: string;</span>
<span class="hljs-comment">//   age?: number;</span>
<span class="hljs-comment">//   newsletter?: boolean;</span>
<span class="hljs-comment">//   website?: string;</span>
<span class="hljs-comment">// }</span>

<span class="hljs-keyword">const</span> validator = <span class="hljs-keyword">new</span> FormValidator(userFormSchema);

<span class="hljs-keyword">const</span> formData: Partial&lt;FormDataFromSchema&lt;<span class="hljs-keyword">typeof</span> userFormSchema&gt;&gt; = {
  name: <span class="hljs-string">"John Doe"</span>,
  email: <span class="hljs-string">"john@example.com"</span>,
  age: <span class="hljs-number">25</span>,
  newsletter: <span class="hljs-literal">true</span>,
  website: <span class="hljs-string">"https://johndoe.com"</span>,
};

<span class="hljs-keyword">const</span> result = validator.validate(formData);
<span class="hljs-keyword">if</span> (result.isValid) {
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Form is valid!"</span>);
} <span class="hljs-keyword">else</span> {
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Validation errors:"</span>, result.errors);
}
</div></code></pre>
<h3 id="api-response-type-system">API Response Type System</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Base API response structure</span>
<span class="hljs-keyword">interface</span> BaseApiResponse {
  success: <span class="hljs-built_in">boolean</span>;
  timestamp: <span class="hljs-built_in">string</span>;
  requestId: <span class="hljs-built_in">string</span>;
}

<span class="hljs-keyword">interface</span> SuccessResponse&lt;T&gt; <span class="hljs-keyword">extends</span> BaseApiResponse {
  success: <span class="hljs-literal">true</span>;
  data: T;
}

<span class="hljs-keyword">interface</span> ErrorResponse <span class="hljs-keyword">extends</span> BaseApiResponse {
  success: <span class="hljs-literal">false</span>;
  error: {
    code: <span class="hljs-built_in">string</span>;
    message: <span class="hljs-built_in">string</span>;
    details?: Record&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt;;
  };
}

<span class="hljs-keyword">type</span> ApiResponse&lt;T&gt; = SuccessResponse&lt;T&gt; | ErrorResponse;

<span class="hljs-comment">// API endpoint definitions</span>
<span class="hljs-keyword">interface</span> ApiEndpoints {
  <span class="hljs-string">"GET /users"</span>: {
    response: User[];
    query?: {
      page?: <span class="hljs-built_in">number</span>;
      limit?: <span class="hljs-built_in">number</span>;
      search?: <span class="hljs-built_in">string</span>;
    };
  };
  <span class="hljs-string">"GET /users/:id"</span>: {
    response: User;
    params: { id: <span class="hljs-built_in">string</span> };
  };
  <span class="hljs-string">"POST /users"</span>: {
    response: User;
    body: CreateUserRequest;
  };
  <span class="hljs-string">"PUT /users/:id"</span>: {
    response: User;
    params: { id: <span class="hljs-built_in">string</span> };
    body: Partial&lt;CreateUserRequest&gt;;
  };
  <span class="hljs-string">"DELETE /users/:id"</span>: {
    response: <span class="hljs-built_in">void</span>;
    params: { id: <span class="hljs-built_in">string</span> };
  };
}

<span class="hljs-comment">// Extract types from endpoint definitions</span>
<span class="hljs-keyword">type</span> ExtractResponse&lt;T&gt; = T <span class="hljs-keyword">extends</span> { response: infer R } ? R : never;
<span class="hljs-keyword">type</span> ExtractParams&lt;T&gt; = T <span class="hljs-keyword">extends</span> { params: infer P } ? P : never;
<span class="hljs-keyword">type</span> ExtractQuery&lt;T&gt; = T <span class="hljs-keyword">extends</span> { query: infer Q } ? Q : never;
<span class="hljs-keyword">type</span> ExtractBody&lt;T&gt; = T <span class="hljs-keyword">extends</span> { body: infer B } ? B : never;

<span class="hljs-comment">// Type-safe API client</span>
<span class="hljs-keyword">class</span> ApiClient {
  <span class="hljs-keyword">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> baseUrl: <span class="hljs-built_in">string</span></span>) {}

  <span class="hljs-keyword">async</span> request&lt;K <span class="hljs-keyword">extends</span> keyof ApiEndpoints&gt;(
    endpoint: K,
    options: {
      params?: ExtractParams&lt;ApiEndpoints[K]&gt;;
      query?: ExtractQuery&lt;ApiEndpoints[K]&gt;;
      body?: ExtractBody&lt;ApiEndpoints[K]&gt;;
    } = {}
  ): <span class="hljs-built_in">Promise</span>&lt;ApiResponse&lt;ExtractResponse&lt;ApiEndpoints[K]&gt;&gt;&gt; {
    <span class="hljs-keyword">const</span> [method, path] = endpoint.split(<span class="hljs-string">" "</span>) <span class="hljs-keyword">as</span> [<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>];

    <span class="hljs-comment">// Replace path parameters</span>
    <span class="hljs-keyword">let</span> url = path;
    <span class="hljs-keyword">if</span> (options.params) {
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> [key, value] of <span class="hljs-built_in">Object</span>.entries(options.params)) {
        url = url.replace(<span class="hljs-string">`:<span class="hljs-subst">${key}</span>`</span>, <span class="hljs-built_in">String</span>(value));
      }
    }

    <span class="hljs-comment">// Add query parameters</span>
    <span class="hljs-keyword">if</span> (options.query) {
      <span class="hljs-keyword">const</span> searchParams = <span class="hljs-keyword">new</span> URLSearchParams();
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> [key, value] of <span class="hljs-built_in">Object</span>.entries(options.query)) {
        <span class="hljs-keyword">if</span> (value !== <span class="hljs-literal">undefined</span>) {
          searchParams.append(key, <span class="hljs-built_in">String</span>(value));
        }
      }
      <span class="hljs-keyword">if</span> (searchParams.toString()) {
        url += <span class="hljs-string">`?<span class="hljs-subst">${searchParams.toString()}</span>`</span>;
      }
    }

    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> fetch(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-keyword">this</span>.baseUrl}</span><span class="hljs-subst">${url}</span>`</span>, {
      method,
      headers: {
        <span class="hljs-string">"Content-Type"</span>: <span class="hljs-string">"application/json"</span>,
      },
      body: options.body ? <span class="hljs-built_in">JSON</span>.stringify(options.body) : <span class="hljs-literal">undefined</span>,
    });

    <span class="hljs-keyword">return</span> response.json();
  }
}

<span class="hljs-comment">// Usage with full type safety</span>
<span class="hljs-keyword">const</span> apiClient = <span class="hljs-keyword">new</span> ApiClient(<span class="hljs-string">"https://api.example.com"</span>);

<span class="hljs-comment">// Get all users with query parameters</span>
<span class="hljs-keyword">const</span> usersResponse = <span class="hljs-keyword">await</span> apiClient.request(<span class="hljs-string">"GET /users"</span>, {
  query: { page: <span class="hljs-number">1</span>, limit: <span class="hljs-number">10</span>, search: <span class="hljs-string">"john"</span> },
});

<span class="hljs-keyword">if</span> (usersResponse.success) {
  <span class="hljs-keyword">const</span> users = usersResponse.data; <span class="hljs-comment">// Type: User[]</span>
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Users:"</span>, users);
} <span class="hljs-keyword">else</span> {
  <span class="hljs-built_in">console</span>.error(<span class="hljs-string">"Error:"</span>, usersResponse.error.message);
}

<span class="hljs-comment">// Get specific user</span>
<span class="hljs-keyword">const</span> userResponse = <span class="hljs-keyword">await</span> apiClient.request(<span class="hljs-string">"GET /users/:id"</span>, {
  params: { id: <span class="hljs-string">"123"</span> },
});

<span class="hljs-comment">// Create new user</span>
<span class="hljs-keyword">const</span> createResponse = <span class="hljs-keyword">await</span> apiClient.request(<span class="hljs-string">"POST /users"</span>, {
  body: {
    name: <span class="hljs-string">"Jane Doe"</span>,
    email: <span class="hljs-string">"jane@example.com"</span>,
    age: <span class="hljs-number">28</span>,
    isActive: <span class="hljs-literal">true</span>,
  },
});

<span class="hljs-comment">// Update user</span>
<span class="hljs-keyword">const</span> updateResponse = <span class="hljs-keyword">await</span> apiClient.request(<span class="hljs-string">"PUT /users/:id"</span>, {
  params: { id: <span class="hljs-string">"123"</span> },
  body: { name: <span class="hljs-string">"Jane Smith"</span> },
});

<span class="hljs-comment">// Delete user</span>
<span class="hljs-keyword">const</span> deleteResponse = <span class="hljs-keyword">await</span> apiClient.request(<span class="hljs-string">"DELETE /users/:id"</span>, {
  params: { id: <span class="hljs-string">"123"</span> },
});
</div></code></pre>
<h2 id="best-practices">Best Practices</h2>
<h3 id="%E2%9C%85-good-practices">‚úÖ Good Practices</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Use built-in utility types when possible</span>
<span class="hljs-keyword">type</span> UserUpdate = Partial&lt;Pick&lt;User, <span class="hljs-string">"name"</span> | <span class="hljs-string">"email"</span> | <span class="hljs-string">"age"</span>&gt;&gt;;

<span class="hljs-comment">// Create reusable utility types</span>
<span class="hljs-keyword">type</span> Optional&lt;T, K <span class="hljs-keyword">extends</span> keyof T&gt; = Omit&lt;T, K&gt; &amp; Partial&lt;Pick&lt;T, K&gt;&gt;;
<span class="hljs-keyword">type</span> RequiredBy&lt;T, K <span class="hljs-keyword">extends</span> keyof T&gt; = T &amp; Required&lt;Pick&lt;T, K&gt;&gt;;

<span class="hljs-comment">// Use meaningful names for complex types</span>
<span class="hljs-keyword">type</span> DatabaseEntity&lt;T&gt; = T &amp; {
  id: <span class="hljs-built_in">string</span>;
  createdAt: <span class="hljs-built_in">Date</span>;
  updatedAt: <span class="hljs-built_in">Date</span>;
};

<span class="hljs-comment">// Combine utility types for complex transformations</span>
<span class="hljs-keyword">type</span> ApiCreateRequest&lt;T&gt; = Omit&lt;T, <span class="hljs-string">"id"</span> | <span class="hljs-string">"createdAt"</span> | <span class="hljs-string">"updatedAt"</span>&gt;;
<span class="hljs-keyword">type</span> ApiUpdateRequest&lt;T&gt; = Partial&lt;ApiCreateRequest&lt;T&gt;&gt;;

<span class="hljs-comment">// Use conditional types for flexible APIs</span>
<span class="hljs-keyword">type</span> EventPayload&lt;T <span class="hljs-keyword">extends</span> <span class="hljs-built_in">string</span>&gt; = T <span class="hljs-keyword">extends</span> <span class="hljs-string">"user:created"</span>
  ? { user: User }
  : T <span class="hljs-keyword">extends</span> <span class="hljs-string">"user:updated"</span>
  ? { user: User; changes: Partial&lt;User&gt; }
  : T <span class="hljs-keyword">extends</span> <span class="hljs-string">"user:deleted"</span>
  ? { userId: <span class="hljs-built_in">string</span> }
  : never;
</div></code></pre>
<h3 id="%E2%9D%8C-avoid">‚ùå Avoid</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Don't create overly complex utility types</span>
<span class="hljs-keyword">type</span> OverlyComplex&lt;T&gt; = {
  [K <span class="hljs-keyword">in</span> keyof T <span class="hljs-keyword">as</span> T[K] <span class="hljs-keyword">extends</span> <span class="hljs-built_in">Function</span>
    ? never
    : K <span class="hljs-keyword">extends</span> <span class="hljs-string">`<span class="hljs-subst">${infer Prefix}</span>_<span class="hljs-subst">${infer Suffix}</span>`</span>
    ? <span class="hljs-string">`<span class="hljs-subst">${Prefix}</span><span class="hljs-subst">${Capitalize&lt;Suffix&gt;}</span>`</span>
    : K]: T[K] <span class="hljs-keyword">extends</span> object ? OverlyComplex&lt;T[K]&gt; : T[K];
}; <span class="hljs-comment">// Too complex, hard to understand and maintain</span>

<span class="hljs-comment">// Don't use utility types when simple types suffice</span>
<span class="hljs-keyword">type</span> SimpleString = Pick&lt;{ value: <span class="hljs-built_in">string</span> }, <span class="hljs-string">"value"</span>&gt;[<span class="hljs-string">"value"</span>]; <span class="hljs-comment">// Just use string</span>

<span class="hljs-comment">// Don't create utility types that are used only once</span>
<span class="hljs-keyword">type</span> OneTimeUse&lt;T&gt; = T &amp; { timestamp: <span class="hljs-built_in">Date</span> }; <span class="hljs-comment">// Better to inline</span>

<span class="hljs-comment">// Don't ignore type constraints</span>
<span class="hljs-keyword">type</span> BadUtility&lt;T&gt; = T <span class="hljs-keyword">extends</span> <span class="hljs-built_in">any</span> ? T[] : never; <span class="hljs-comment">// any defeats the purpose</span>

<span class="hljs-comment">// Don't create confusing type aliases</span>
<span class="hljs-keyword">type</span> A&lt;T&gt; = T; <span class="hljs-comment">// Not descriptive</span>
<span class="hljs-keyword">type</span> B&lt;T, U&gt; = T | U; <span class="hljs-comment">// Use Union&lt;T, U&gt; or inline</span>
</div></code></pre>
<h2 id="summary-checklist">Summary Checklist</h2>
<ul>
<li><input type="checkbox" id="checkbox114"><label for="checkbox114">Master built-in utility types (</label><code>Partial</code>, <code>Pick</code>, <code>Omit</code>, etc.)</li>
<li><input type="checkbox" id="checkbox115"><label for="checkbox115">Create custom utility types for common patterns</label></li>
<li><input type="checkbox" id="checkbox116"><label for="checkbox116">Use conditional types for flexible type logic</label></li>
<li><input type="checkbox" id="checkbox117"><label for="checkbox117">Implement string manipulation utilities when needed</label></li>
<li><input type="checkbox" id="checkbox118"><label for="checkbox118">Build type-safe configuration and form systems</label></li>
<li><input type="checkbox" id="checkbox119"><label for="checkbox119">Create reusable utility types for your domain</label></li>
<li><input type="checkbox" id="checkbox120"><label for="checkbox120">Use meaningful names for complex type transformations</label></li>
<li><input type="checkbox" id="checkbox121"><label for="checkbox121">Combine utility types for sophisticated type manipulations</label></li>
<li><input type="checkbox" id="checkbox122"><label for="checkbox122">Avoid overly complex utility types</label></li>
<li><input type="checkbox" id="checkbox123"><label for="checkbox123">Document complex utility types with examples</label></li>
</ul>
<h2 id="next-steps">Next Steps</h2>
<p>Now that you understand utility types and type manipulations, let's explore declaration merging and ambient declarations.</p>
<hr>
<p><em>Continue to: <a href="17-declaration-merging.md">Declaration Merging and Ambient Declarations</a></em></p>
<h1 id="declaration-merging-and-ambient-declarations">Declaration Merging and Ambient Declarations</h1>
<blockquote>
<p>Learn how to extend existing types, work with third-party libraries, and create ambient declarations for JavaScript code</p>
</blockquote>
<h2 id="declaration-merging">Declaration Merging</h2>
<p>Declaration merging allows TypeScript to combine multiple declarations with the same name into a single definition.</p>
<h3 id="interface-merging">Interface Merging</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Basic interface merging</span>
<span class="hljs-keyword">interface</span> User {
  id: <span class="hljs-built_in">number</span>;
  name: <span class="hljs-built_in">string</span>;
}

<span class="hljs-keyword">interface</span> User {
  email: <span class="hljs-built_in">string</span>;
  age: <span class="hljs-built_in">number</span>;
}

<span class="hljs-comment">// Merged interface has all properties</span>
<span class="hljs-keyword">const</span> user: User = {
  id: <span class="hljs-number">1</span>,
  name: <span class="hljs-string">"John Doe"</span>,
  email: <span class="hljs-string">"john@example.com"</span>,
  age: <span class="hljs-number">30</span>,
};

<span class="hljs-comment">// Interface merging with methods</span>
<span class="hljs-keyword">interface</span> Calculator {
  add(a: <span class="hljs-built_in">number</span>, b: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">number</span>;
}

<span class="hljs-keyword">interface</span> Calculator {
  subtract(a: <span class="hljs-built_in">number</span>, b: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">number</span>;
  multiply(a: <span class="hljs-built_in">number</span>, b: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">number</span>;
}

<span class="hljs-keyword">interface</span> Calculator {
  divide(a: <span class="hljs-built_in">number</span>, b: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">number</span>;
}

<span class="hljs-comment">// All methods are available</span>
<span class="hljs-keyword">const</span> calc: Calculator = {
  add: <span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a + b,
  subtract: <span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a - b,
  multiply: <span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a * b,
  divide: <span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a / b,
};

<span class="hljs-comment">// Interface merging with generics</span>
<span class="hljs-keyword">interface</span> Container&lt;T&gt; {
  value: T;
}

<span class="hljs-keyword">interface</span> Container&lt;T&gt; {
  getValue(): T;
  setValue(value: T): <span class="hljs-built_in">void</span>;
}

<span class="hljs-keyword">const</span> stringContainer: Container&lt;<span class="hljs-built_in">string</span>&gt; = {
  value: <span class="hljs-string">"hello"</span>,
  getValue() {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.value;
  },
  setValue(value) {
    <span class="hljs-keyword">this</span>.value = value;
  },
};

<span class="hljs-comment">// Interface merging with function overloads</span>
<span class="hljs-keyword">interface</span> EventEmitter {
  on(event: <span class="hljs-string">"data"</span>, listener: <span class="hljs-function">(<span class="hljs-params">data: <span class="hljs-built_in">string</span></span>) =&gt;</span> <span class="hljs-built_in">void</span>): <span class="hljs-built_in">void</span>;
}

<span class="hljs-keyword">interface</span> EventEmitter {
  on(event: <span class="hljs-string">"error"</span>, listener: <span class="hljs-function">(<span class="hljs-params">error: <span class="hljs-built_in">Error</span></span>) =&gt;</span> <span class="hljs-built_in">void</span>): <span class="hljs-built_in">void</span>;
}

<span class="hljs-keyword">interface</span> EventEmitter {
  on(event: <span class="hljs-string">"close"</span>, listener: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-built_in">void</span>): <span class="hljs-built_in">void</span>;
}

<span class="hljs-comment">// All overloads are merged</span>
<span class="hljs-keyword">const</span> emitter: EventEmitter = {
  on(event: <span class="hljs-built_in">any</span>, listener: <span class="hljs-built_in">any</span>) {
    <span class="hljs-comment">// Implementation</span>
  },
};

emitter.on(<span class="hljs-string">"data"</span>, <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> <span class="hljs-built_in">console</span>.log(data)); <span class="hljs-comment">// data is string</span>
emitter.on(<span class="hljs-string">"error"</span>, <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> <span class="hljs-built_in">console</span>.error(error)); <span class="hljs-comment">// error is Error</span>
emitter.on(<span class="hljs-string">"close"</span>, <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"closed"</span>)); <span class="hljs-comment">// no parameters</span>
</div></code></pre>
<h3 id="namespace-merging">Namespace Merging</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Basic namespace merging</span>
<span class="hljs-keyword">namespace</span> Utils {
  <span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">formatDate</span>(<span class="hljs-params">date: <span class="hljs-built_in">Date</span></span>): <span class="hljs-title">string</span> </span>{
    <span class="hljs-keyword">return</span> date.toISOString().split(<span class="hljs-string">"T"</span>)[<span class="hljs-number">0</span>];
  }
}

<span class="hljs-keyword">namespace</span> Utils {
  <span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">formatTime</span>(<span class="hljs-params">date: <span class="hljs-built_in">Date</span></span>): <span class="hljs-title">string</span> </span>{
    <span class="hljs-keyword">return</span> date.toTimeString().split(<span class="hljs-string">" "</span>)[<span class="hljs-number">0</span>];
  }
}

<span class="hljs-keyword">namespace</span> Utils {
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> Config {
    dateFormat: <span class="hljs-built_in">string</span>;
    timeFormat: <span class="hljs-built_in">string</span>;
  }

  <span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> defaultConfig: Config = {
    dateFormat: <span class="hljs-string">"YYYY-MM-DD"</span>,
    timeFormat: <span class="hljs-string">"HH:mm:ss"</span>,
  };
}

<span class="hljs-comment">// All exports are available</span>
<span class="hljs-keyword">const</span> formattedDate = Utils.formatDate(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>());
<span class="hljs-keyword">const</span> formattedTime = Utils.formatTime(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>());
<span class="hljs-keyword">const</span> config = Utils.defaultConfig;

<span class="hljs-comment">// Namespace merging with classes</span>
<span class="hljs-keyword">namespace</span> Database {
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> Connection {
    <span class="hljs-keyword">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">public</span> connectionString: <span class="hljs-built_in">string</span></span>) {}

    connect(): <span class="hljs-built_in">void</span> {
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Connecting to database..."</span>);
    }
  }
}

<span class="hljs-keyword">namespace</span> Database {
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> ConnectionOptions {
    ssl: <span class="hljs-built_in">boolean</span>;
    timeout: <span class="hljs-built_in">number</span>;
    retries: <span class="hljs-built_in">number</span>;
  }

  <span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createConnection</span>(<span class="hljs-params">
    connectionString: <span class="hljs-built_in">string</span>,
    options?: ConnectionOptions
  </span>): <span class="hljs-title">Connection</span> </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Connection(connectionString);
  }
}

<span class="hljs-comment">// Both class and function are available</span>
<span class="hljs-keyword">const</span> connection = Database.createConnection(
  <span class="hljs-string">"postgresql://localhost:5432/mydb"</span>
);
<span class="hljs-keyword">const</span> directConnection = <span class="hljs-keyword">new</span> Database.Connection(
  <span class="hljs-string">"postgresql://localhost:5432/mydb"</span>
);
</div></code></pre>
<h3 id="module-augmentation">Module Augmentation</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Augmenting existing modules</span>

<span class="hljs-comment">// global.d.ts - Augmenting global scope</span>
<span class="hljs-keyword">declare</span> global {
  <span class="hljs-keyword">interface</span> Window {
    myApp: {
      version: <span class="hljs-built_in">string</span>;
      config: Record&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt;;
      utils: {
        formatCurrency(amount: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">string</span>;
        debounce&lt;T <span class="hljs-keyword">extends</span> (...args: <span class="hljs-built_in">any</span>[]) =&gt; <span class="hljs-built_in">any</span>&gt;(fn: T, delay: <span class="hljs-built_in">number</span>): T;
      };
    };
  }

  <span class="hljs-keyword">interface</span> Array&lt;T&gt; {
    last(): T | <span class="hljs-literal">undefined</span>;
    first(): T | <span class="hljs-literal">undefined</span>;
    isEmpty(): <span class="hljs-built_in">boolean</span>;
  }

  <span class="hljs-keyword">interface</span> String {
    toTitleCase(): <span class="hljs-built_in">string</span>;
    truncate(length: <span class="hljs-built_in">number</span>, suffix?: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">string</span>;
  }

  <span class="hljs-keyword">interface</span> Number {
    toPercent(decimals?: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">string</span>;
    toCurrency(currency?: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">string</span>;
  }
}

<span class="hljs-comment">// Implementation (would be in a separate .ts file)</span>
<span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">window</span> !== <span class="hljs-string">"undefined"</span>) {
  <span class="hljs-built_in">window</span>.myApp = {
    version: <span class="hljs-string">"1.0.0"</span>,
    config: {},
    utils: {
      formatCurrency: <span class="hljs-function">(<span class="hljs-params">amount: <span class="hljs-built_in">number</span></span>) =&gt;</span> <span class="hljs-string">`$<span class="hljs-subst">${amount.toFixed(<span class="hljs-number">2</span>)}</span>`</span>,
      debounce: &lt;T <span class="hljs-keyword">extends</span> (...args: <span class="hljs-built_in">any</span>[]) =&gt; <span class="hljs-built_in">any</span>&gt;(
        fn: T,
        delay: <span class="hljs-built_in">number</span>
      ): <span class="hljs-function"><span class="hljs-params">T</span> =&gt;</span> {
        <span class="hljs-keyword">let</span> timeoutId: NodeJS.Timeout;
        <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">(<span class="hljs-params">...args: <span class="hljs-built_in">any</span>[]</span>) =&gt; {
          clearTimeout(<span class="hljs-params">timeoutId</span>);
          timeoutId = setTimeout(<span class="hljs-params">(<span class="hljs-params"></span>) =&gt; fn(<span class="hljs-params">...args</span>), delay</span>);
        }</span>) <span class="hljs-params">as</span> <span class="hljs-params">T</span>;
      },
    },
  };
}

<span class="hljs-params">Array</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">last</span> = <span class="hljs-params">function</span> &lt;<span class="hljs-params">T</span>&gt;(<span class="hljs-params"><span class="hljs-keyword">this</span>: T[]</span>): <span class="hljs-params">T</span> | <span class="hljs-params">undefined</span> {
  <span class="hljs-params">return</span> <span class="hljs-params">this</span>[<span class="hljs-params">this</span>.<span class="hljs-params">length</span> - 1];
};

<span class="hljs-params">Array</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">first</span> = <span class="hljs-params">function</span> &lt;<span class="hljs-params">T</span>&gt;(<span class="hljs-params"><span class="hljs-keyword">this</span>: T[]</span>): <span class="hljs-params">T</span> | <span class="hljs-params">undefined</span> {
  <span class="hljs-params">return</span> <span class="hljs-params">this</span>[0];
};

<span class="hljs-params">Array</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">isEmpty</span> = <span class="hljs-params">function</span> &lt;<span class="hljs-params">T</span>&gt;(<span class="hljs-params"><span class="hljs-keyword">this</span>: T[]</span>): <span class="hljs-params">boolean</span> {
  <span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">length</span> === 0;
};

<span class="hljs-params">String</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">toTitleCase</span> = <span class="hljs-params">function</span> (<span class="hljs-params"><span class="hljs-keyword">this</span>: <span class="hljs-built_in">string</span></span>): <span class="hljs-params">string</span> {
  <span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">replace</span>(<span class="hljs-params">
    /\w\S*/g,
    (<span class="hljs-params">txt</span>) =&gt; txt.charAt(<span class="hljs-params">0</span>).toUpperCase(<span class="hljs-params"></span>) + txt.substr(<span class="hljs-params">1</span>).toLowerCase(<span class="hljs-params"></span>)
  </span>);
};

<span class="hljs-params">String</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">truncate</span> = <span class="hljs-params">function</span> (<span class="hljs-params">
  <span class="hljs-keyword">this</span>: <span class="hljs-built_in">string</span>,
  length: <span class="hljs-built_in">number</span>,
  suffix = "..."
</span>): <span class="hljs-params">string</span> {
  <span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">length</span> &gt; <span class="hljs-params">length</span> ? <span class="hljs-params">this</span>.<span class="hljs-params">substring</span>(<span class="hljs-params">0, length</span>) + <span class="hljs-params">suffix</span> : <span class="hljs-params">this</span>;
};

<span class="hljs-params">Number</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">toPercent</span> = <span class="hljs-params">function</span> (<span class="hljs-params"><span class="hljs-keyword">this</span>: <span class="hljs-built_in">number</span>, decimals = 2</span>): <span class="hljs-params">string</span> {
  <span class="hljs-params">return</span> `${(<span class="hljs-params"><span class="hljs-keyword">this</span> * 100</span>).<span class="hljs-params">toFixed</span>(<span class="hljs-params">decimals</span>)}%`;
};

<span class="hljs-params">Number</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">toCurrency</span> = <span class="hljs-params">function</span> (<span class="hljs-params">
  <span class="hljs-keyword">this</span>: <span class="hljs-built_in">number</span>,
  currency = "USD"
</span>): <span class="hljs-params">string</span> {
  <span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">Intl</span>.<span class="hljs-params">NumberFormat</span>(<span class="hljs-params">"en-US", {
    style: "currency",
    currency,
  }</span>).<span class="hljs-params">format</span>(<span class="hljs-params"><span class="hljs-keyword">this</span></span>);
};

// <span class="hljs-params">Usage</span>
<span class="hljs-params">const</span> <span class="hljs-params">numbers</span> = [1, 2, 3, 4, 5];
<span class="hljs-params">console</span>.<span class="hljs-params">log</span>(<span class="hljs-params">numbers.first(<span class="hljs-params"></span>)</span>); // 1
<span class="hljs-params">console</span>.<span class="hljs-params">log</span>(<span class="hljs-params">numbers.last(<span class="hljs-params"></span>)</span>); // 5
<span class="hljs-params">console</span>.<span class="hljs-params">log</span>(<span class="hljs-params">[].isEmpty(<span class="hljs-params"></span>)</span>); // <span class="hljs-params">true</span>

<span class="hljs-params">const</span> <span class="hljs-params">text</span> = "<span class="hljs-params">hello</span> <span class="hljs-params">world</span>";
<span class="hljs-params">console</span>.<span class="hljs-params">log</span>(<span class="hljs-params">text.toTitleCase(<span class="hljs-params"></span>)</span>); // '<span class="hljs-params">Hello</span> <span class="hljs-params">World</span>'
<span class="hljs-params">console</span>.<span class="hljs-params">log</span>(<span class="hljs-params">text.truncate(<span class="hljs-params">5</span>)</span>); // '<span class="hljs-params">hello</span>...'

<span class="hljs-params">const</span> <span class="hljs-params">value</span> = 0.1234;
<span class="hljs-params">console</span>.<span class="hljs-params">log</span>(<span class="hljs-params">value.toPercent(<span class="hljs-params"></span>)</span>); // '12.34%'
<span class="hljs-params">console</span>.<span class="hljs-params">log</span>(<span class="hljs-params">value.toCurrency(<span class="hljs-params"></span>)</span>); // '$0.12'
</span></div></code></pre>
<h3 id="third-party-library-augmentation">Third-Party Library Augmentation</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Augmenting Express.js</span>
<span class="hljs-keyword">import</span> { User } <span class="hljs-keyword">from</span> <span class="hljs-string">"./types/user"</span>;

<span class="hljs-keyword">declare</span> <span class="hljs-keyword">module</span> "express-serve-static-core" {
  <span class="hljs-keyword">interface</span> Request {
    user?: User;
    requestId: <span class="hljs-built_in">string</span>;
    startTime: <span class="hljs-built_in">number</span>;
    correlationId?: <span class="hljs-built_in">string</span>;
  }

  <span class="hljs-keyword">interface</span> Response {
    success(data?: <span class="hljs-built_in">any</span>): Response;
    error(message: <span class="hljs-built_in">string</span>, code?: <span class="hljs-built_in">number</span>): Response;
  }
}

<span class="hljs-comment">// Implementation (middleware)</span>
<span class="hljs-keyword">import</span> express <span class="hljs-keyword">from</span> <span class="hljs-string">"express"</span>;

<span class="hljs-keyword">const</span> app = express();

<span class="hljs-comment">// Add custom methods to Response</span>
app.use(<span class="hljs-function">(<span class="hljs-params">req, res, next</span>) =&gt;</span> {
  res.success = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">data?: <span class="hljs-built_in">any</span></span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.json({
      success: <span class="hljs-literal">true</span>,
      data,
      timestamp: <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().toISOString(),
      requestId: req.requestId,
    });
  };

  res.error = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">message: <span class="hljs-built_in">string</span>, code = 500</span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.status(code).json({
      success: <span class="hljs-literal">false</span>,
      error: { message },
      timestamp: <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().toISOString(),
      requestId: req.requestId,
    });
  };

  next();
});

<span class="hljs-comment">// Add request tracking</span>
app.use(<span class="hljs-function">(<span class="hljs-params">req, res, next</span>) =&gt;</span> {
  req.requestId = <span class="hljs-built_in">Math</span>.random().toString(<span class="hljs-number">36</span>).substr(<span class="hljs-number">2</span>, <span class="hljs-number">9</span>);
  req.startTime = <span class="hljs-built_in">Date</span>.now();
  req.correlationId = req.headers[<span class="hljs-string">"x-correlation-id"</span>] <span class="hljs-keyword">as</span> <span class="hljs-built_in">string</span>;
  next();
});

<span class="hljs-comment">// Usage with augmented types</span>
app.get(<span class="hljs-string">"/users/:id"</span>, <span class="hljs-keyword">async</span> (req, res) =&gt; {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> userId = req.params.id;
    <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> getUserById(userId);

    <span class="hljs-keyword">if</span> (!user) {
      <span class="hljs-keyword">return</span> res.error(<span class="hljs-string">"User not found"</span>, <span class="hljs-number">404</span>);
    }

    res.success(user);
  } <span class="hljs-keyword">catch</span> (error) {
    res.error(<span class="hljs-string">"Internal server error"</span>);
  }
});

<span class="hljs-comment">// Augmenting Lodash</span>
<span class="hljs-keyword">import</span> _ <span class="hljs-keyword">from</span> <span class="hljs-string">"lodash"</span>;

<span class="hljs-keyword">declare</span> <span class="hljs-keyword">module</span> "lodash" {
  <span class="hljs-keyword">interface</span> LoDashStatic {
    isValidEmail(value: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">boolean</span>;
    formatPhoneNumber(value: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">string</span>;
    generateId(prefix?: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">string</span>;
  }

  <span class="hljs-keyword">interface</span> LoDashImplicitWrapper&lt;TValue&gt; {
    isValidEmail(): <span class="hljs-built_in">boolean</span>;
    formatPhoneNumber(): LoDashImplicitWrapper&lt;<span class="hljs-built_in">string</span>&gt;;
  }
}

<span class="hljs-comment">// Implementation</span>
_.mixin({
  isValidEmail: (value: <span class="hljs-built_in">string</span>): <span class="hljs-function"><span class="hljs-params">boolean</span> =&gt;</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-regexp">/^[^\s@]+@[^\s@]+\.[^\s@]+$/</span>.test(value);
  },

  formatPhoneNumber: (value: <span class="hljs-built_in">string</span>): <span class="hljs-function"><span class="hljs-params">string</span> =&gt;</span> {
    <span class="hljs-keyword">const</span> cleaned = value.replace(<span class="hljs-regexp">/\D/g</span>, <span class="hljs-string">""</span>);
    <span class="hljs-keyword">const</span> match = cleaned.match(<span class="hljs-regexp">/^(\d{3})(\d{3})(\d{4})$/</span>);
    <span class="hljs-keyword">return</span> match ? <span class="hljs-string">`(<span class="hljs-subst">${match[<span class="hljs-number">1</span>]}</span>) <span class="hljs-subst">${match[<span class="hljs-number">2</span>]}</span>-<span class="hljs-subst">${match[<span class="hljs-number">3</span>]}</span>`</span> : value;
  },

  generateId: (prefix = <span class="hljs-string">"id"</span>): <span class="hljs-function"><span class="hljs-params">string</span> =&gt;</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${prefix}</span>_<span class="hljs-subst">${<span class="hljs-built_in">Date</span>.now()}</span>_<span class="hljs-subst">${<span class="hljs-built_in">Math</span>.random().toString(<span class="hljs-number">36</span>).substr(<span class="hljs-number">2</span>, <span class="hljs-number">9</span>)}</span>`</span>;
  },
});

<span class="hljs-comment">// Usage</span>
<span class="hljs-keyword">const</span> email = <span class="hljs-string">"user@example.com"</span>;
<span class="hljs-built_in">console</span>.log(_.isValidEmail(email)); <span class="hljs-comment">// true</span>
<span class="hljs-built_in">console</span>.log(_(email).isValidEmail()); <span class="hljs-comment">// true</span>

<span class="hljs-keyword">const</span> phone = <span class="hljs-string">"1234567890"</span>;
<span class="hljs-built_in">console</span>.log(_.formatPhoneNumber(phone)); <span class="hljs-comment">// '(123) 456-7890'</span>
<span class="hljs-built_in">console</span>.log(_(phone).formatPhoneNumber().value()); <span class="hljs-comment">// '(123) 456-7890'</span>

<span class="hljs-keyword">const</span> id = _.generateId(<span class="hljs-string">"user"</span>); <span class="hljs-comment">// 'user_1634567890123_abc123def'</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getUserById</span>(<span class="hljs-params">id: <span class="hljs-built_in">string</span></span>): <span class="hljs-title">Promise</span>&lt;<span class="hljs-title">User</span> | <span class="hljs-title">null</span>&gt; </span>{
  <span class="hljs-comment">// Implementation</span>
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.resolve(<span class="hljs-literal">null</span>);
}
</div></code></pre>
<h2 id="ambient-declarations">Ambient Declarations</h2>
<p>Ambient declarations describe the shape of existing JavaScript code without providing implementation.</p>
<h3 id="basic-ambient-declarations">Basic Ambient Declarations</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Declaring global variables</span>
<span class="hljs-keyword">declare</span> <span class="hljs-keyword">const</span> VERSION: <span class="hljs-built_in">string</span>;
<span class="hljs-keyword">declare</span> <span class="hljs-keyword">const</span> BUILD_TIME: <span class="hljs-built_in">number</span>;
<span class="hljs-keyword">declare</span> <span class="hljs-keyword">const</span> IS_PRODUCTION: <span class="hljs-built_in">boolean</span>;

<span class="hljs-comment">// Declaring global functions</span>
<span class="hljs-keyword">declare</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">gtag</span>(<span class="hljs-params">command: <span class="hljs-built_in">string</span>, targetId: <span class="hljs-built_in">string</span>, config?: object</span>): <span class="hljs-title">void</span></span>;
<span class="hljs-keyword">declare</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fbq</span>(<span class="hljs-params">
  command: <span class="hljs-built_in">string</span>,
  eventName: <span class="hljs-built_in">string</span>,
  parameters?: object
</span>): <span class="hljs-title">void</span></span>;

<span class="hljs-comment">// Declaring global objects</span>
<span class="hljs-keyword">declare</span> <span class="hljs-keyword">const</span> analytics: {
  track(event: <span class="hljs-built_in">string</span>, properties?: Record&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt;): <span class="hljs-built_in">void</span>;
  identify(userId: <span class="hljs-built_in">string</span>, traits?: Record&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt;): <span class="hljs-built_in">void</span>;
  page(name?: <span class="hljs-built_in">string</span>, properties?: Record&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt;): <span class="hljs-built_in">void</span>;
};

<span class="hljs-comment">// Usage (no implementation needed)</span>
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">`Version: <span class="hljs-subst">${VERSION}</span>`</span>);
gtag(<span class="hljs-string">"config"</span>, <span class="hljs-string">"GA_MEASUREMENT_ID"</span>);
analytics.track(<span class="hljs-string">"page_view"</span>, { page: <span class="hljs-string">"/home"</span> });

<span class="hljs-comment">// Declaring classes</span>
<span class="hljs-keyword">declare</span> <span class="hljs-keyword">class</span> ThirdPartyWidget {
  <span class="hljs-keyword">constructor</span>(<span class="hljs-params">element: HTMLElement, options?: WidgetOptions</span>);
  render(): <span class="hljs-built_in">void</span>;
  destroy(): <span class="hljs-built_in">void</span>;
  on(event: <span class="hljs-built_in">string</span>, callback: <span class="hljs-built_in">Function</span>): <span class="hljs-built_in">void</span>;
  off(event: <span class="hljs-built_in">string</span>, callback?: <span class="hljs-built_in">Function</span>): <span class="hljs-built_in">void</span>;
}

<span class="hljs-keyword">interface</span> WidgetOptions {
  theme?: <span class="hljs-string">"light"</span> | <span class="hljs-string">"dark"</span>;
  size?: <span class="hljs-string">"small"</span> | <span class="hljs-string">"medium"</span> | <span class="hljs-string">"large"</span>;
  autoplay?: <span class="hljs-built_in">boolean</span>;
}

<span class="hljs-comment">// Usage</span>
<span class="hljs-keyword">const</span> widget = <span class="hljs-keyword">new</span> ThirdPartyWidget(<span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">"widget"</span>)!, {
  theme: <span class="hljs-string">"dark"</span>,
  size: <span class="hljs-string">"large"</span>,
});

widget.render();
widget.on(<span class="hljs-string">"ready"</span>, <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Widget is ready"</span>));

<span class="hljs-comment">// Declaring modules</span>
<span class="hljs-keyword">declare</span> <span class="hljs-keyword">module</span> "legacy-library" {
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> Config {
    apiKey: <span class="hljs-built_in">string</span>;
    baseUrl: <span class="hljs-built_in">string</span>;
    timeout?: <span class="hljs-built_in">number</span>;
  }

  <span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> Client {
    <span class="hljs-keyword">constructor</span>(<span class="hljs-params">config: Config</span>);
    request(endpoint: <span class="hljs-built_in">string</span>, data?: <span class="hljs-built_in">any</span>): <span class="hljs-built_in">Promise</span>&lt;<span class="hljs-built_in">any</span>&gt;;
    upload(file: File, options?: UploadOptions): <span class="hljs-built_in">Promise</span>&lt;UploadResult&gt;;
  }

  <span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> UploadOptions {
    onProgress?: <span class="hljs-function">(<span class="hljs-params">progress: <span class="hljs-built_in">number</span></span>) =&gt;</span> <span class="hljs-built_in">void</span>;
    maxSize?: <span class="hljs-built_in">number</span>;
  }

  <span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> UploadResult {
    id: <span class="hljs-built_in">string</span>;
    url: <span class="hljs-built_in">string</span>;
    size: <span class="hljs-built_in">number</span>;
  }

  <span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">initialize</span>(<span class="hljs-params">config: Config</span>): <span class="hljs-title">Client</span></span>;
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> version: <span class="hljs-built_in">string</span>;
}

<span class="hljs-comment">// Usage</span>
<span class="hljs-keyword">import</span> { initialize, Client, Config } <span class="hljs-keyword">from</span> <span class="hljs-string">"legacy-library"</span>;

<span class="hljs-keyword">const</span> config: Config = {
  apiKey: <span class="hljs-string">"your-api-key"</span>,
  baseUrl: <span class="hljs-string">"https://api.example.com"</span>,
  timeout: <span class="hljs-number">5000</span>,
};

<span class="hljs-keyword">const</span> client = initialize(config);
client.request(<span class="hljs-string">"/users"</span>).then(<span class="hljs-function">(<span class="hljs-params">users</span>) =&gt;</span> <span class="hljs-built_in">console</span>.log(users));
</div></code></pre>
<h3 id="environment-specific-declarations">Environment-Specific Declarations</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Node.js environment declarations</span>
<span class="hljs-keyword">declare</span> <span class="hljs-keyword">namespace</span> NodeJS {
  <span class="hljs-keyword">interface</span> ProcessEnv {
    NODE_ENV: <span class="hljs-string">"development"</span> | <span class="hljs-string">"production"</span> | <span class="hljs-string">"test"</span>;
    PORT: <span class="hljs-built_in">string</span>;
    DATABASE_URL: <span class="hljs-built_in">string</span>;
    JWT_SECRET: <span class="hljs-built_in">string</span>;
    REDIS_URL?: <span class="hljs-built_in">string</span>;
    SMTP_HOST?: <span class="hljs-built_in">string</span>;
    SMTP_PORT?: <span class="hljs-built_in">string</span>;
    SMTP_USER?: <span class="hljs-built_in">string</span>;
    SMTP_PASS?: <span class="hljs-built_in">string</span>;
    AWS_ACCESS_KEY_ID?: <span class="hljs-built_in">string</span>;
    AWS_SECRET_ACCESS_KEY?: <span class="hljs-built_in">string</span>;
    AWS_REGION?: <span class="hljs-built_in">string</span>;
    STRIPE_SECRET_KEY?: <span class="hljs-built_in">string</span>;
    STRIPE_WEBHOOK_SECRET?: <span class="hljs-built_in">string</span>;
  }

  <span class="hljs-keyword">interface</span> Global {
    __DEV__: <span class="hljs-built_in">boolean</span>;
    __TEST__: <span class="hljs-built_in">boolean</span>;
    __PROD__: <span class="hljs-built_in">boolean</span>;
  }
}

<span class="hljs-comment">// Browser environment declarations</span>
<span class="hljs-keyword">declare</span> <span class="hljs-keyword">interface</span> Window {
  gtag?: (
    command: <span class="hljs-string">"config"</span> | <span class="hljs-string">"event"</span> | <span class="hljs-string">"set"</span>,
    targetIdOrName: <span class="hljs-built_in">string</span>,
    configOrParameters?: object
  ) =&gt; <span class="hljs-built_in">void</span>;

  fbq?: (
    command: <span class="hljs-string">"track"</span> | <span class="hljs-string">"trackCustom"</span> | <span class="hljs-string">"init"</span>,
    eventNameOrPixelId: <span class="hljs-built_in">string</span>,
    parameters?: object
  ) =&gt; <span class="hljs-built_in">void</span>;

  dataLayer?: <span class="hljs-built_in">any</span>[];

  Stripe?: {
    (publishableKey: <span class="hljs-built_in">string</span>, options?: StripeOptions): StripeInstance;
  };

  PayPal?: {
    Buttons(options: PayPalButtonsOptions): PayPalButtonsInstance;
  };

  grecaptcha?: {
    ready(callback: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-built_in">void</span>): <span class="hljs-built_in">void</span>;
    execute(siteKey: <span class="hljs-built_in">string</span>, options: { action: <span class="hljs-built_in">string</span> }): <span class="hljs-built_in">Promise</span>&lt;<span class="hljs-built_in">string</span>&gt;;
  };
}

<span class="hljs-keyword">interface</span> StripeOptions {
  apiVersion?: <span class="hljs-built_in">string</span>;
  locale?: <span class="hljs-built_in">string</span>;
}

<span class="hljs-keyword">interface</span> StripeInstance {
  elements(): StripeElements;
  confirmCardPayment(clientSecret: <span class="hljs-built_in">string</span>, data?: <span class="hljs-built_in">any</span>): <span class="hljs-built_in">Promise</span>&lt;<span class="hljs-built_in">any</span>&gt;;
  createToken(element: <span class="hljs-built_in">any</span>, data?: <span class="hljs-built_in">any</span>): <span class="hljs-built_in">Promise</span>&lt;<span class="hljs-built_in">any</span>&gt;;
}

<span class="hljs-keyword">interface</span> StripeElements {
  create(<span class="hljs-keyword">type</span>: <span class="hljs-built_in">string</span>, options?: <span class="hljs-built_in">any</span>): StripeElement;
}

<span class="hljs-keyword">interface</span> StripeElement {
  mount(selector: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">void</span>;
  on(event: <span class="hljs-built_in">string</span>, callback: <span class="hljs-built_in">Function</span>): <span class="hljs-built_in">void</span>;
}

<span class="hljs-keyword">interface</span> PayPalButtonsOptions {
  createOrder?: <span class="hljs-function">(<span class="hljs-params">data: <span class="hljs-built_in">any</span>, actions: <span class="hljs-built_in">any</span></span>) =&gt;</span> <span class="hljs-built_in">Promise</span>&lt;<span class="hljs-built_in">string</span>&gt;;
  onApprove?: <span class="hljs-function">(<span class="hljs-params">data: <span class="hljs-built_in">any</span>, actions: <span class="hljs-built_in">any</span></span>) =&gt;</span> <span class="hljs-built_in">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt;;
  onError?: <span class="hljs-function">(<span class="hljs-params">error: <span class="hljs-built_in">any</span></span>) =&gt;</span> <span class="hljs-built_in">void</span>;
  style?: {
    layout?: <span class="hljs-string">"vertical"</span> | <span class="hljs-string">"horizontal"</span>;
    color?: <span class="hljs-string">"gold"</span> | <span class="hljs-string">"blue"</span> | <span class="hljs-string">"silver"</span> | <span class="hljs-string">"white"</span> | <span class="hljs-string">"black"</span>;
    shape?: <span class="hljs-string">"rect"</span> | <span class="hljs-string">"pill"</span>;
    label?: <span class="hljs-string">"paypal"</span> | <span class="hljs-string">"checkout"</span> | <span class="hljs-string">"buynow"</span> | <span class="hljs-string">"pay"</span>;
  };
}

<span class="hljs-keyword">interface</span> PayPalButtonsInstance {
  render(selector: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt;;
}

<span class="hljs-comment">// Usage</span>
<span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">window</span> !== <span class="hljs-string">"undefined"</span>) {
  <span class="hljs-comment">// Google Analytics</span>
  <span class="hljs-built_in">window</span>.gtag?.(<span class="hljs-string">"config"</span>, <span class="hljs-string">"GA_MEASUREMENT_ID"</span>);

  <span class="hljs-comment">// Facebook Pixel</span>
  <span class="hljs-built_in">window</span>.fbq?.(<span class="hljs-string">"track"</span>, <span class="hljs-string">"PageView"</span>);

  <span class="hljs-comment">// Stripe</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.Stripe) {
    <span class="hljs-keyword">const</span> stripe = <span class="hljs-built_in">window</span>.Stripe(<span class="hljs-string">"pk_test_..."</span>);
    <span class="hljs-keyword">const</span> elements = stripe.elements();
    <span class="hljs-keyword">const</span> cardElement = elements.create(<span class="hljs-string">"card"</span>);
    cardElement.mount(<span class="hljs-string">"#card-element"</span>);
  }

  <span class="hljs-comment">// PayPal</span>
  <span class="hljs-built_in">window</span>.PayPal?.Buttons({
    createOrder: <span class="hljs-keyword">async</span> (data, actions) =&gt; {
      <span class="hljs-comment">// Implementation</span>
      <span class="hljs-keyword">return</span> <span class="hljs-string">"order-id"</span>;
    },
    onApprove: <span class="hljs-keyword">async</span> (data, actions) =&gt; {
      <span class="hljs-comment">// Implementation</span>
    },
  }).render(<span class="hljs-string">"#paypal-button-container"</span>);
}

<span class="hljs-comment">// Node.js usage</span>
<span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> process !== <span class="hljs-string">"undefined"</span>) {
  <span class="hljs-keyword">const</span> port = process.env.PORT || <span class="hljs-string">"3000"</span>;
  <span class="hljs-keyword">const</span> isDev = process.env.NODE_ENV === <span class="hljs-string">"development"</span>;
  <span class="hljs-keyword">const</span> dbUrl = process.env.DATABASE_URL;
}
</div></code></pre>
<h3 id="creating-type-definition-files">Creating Type Definition Files</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// types/my-library.d.ts</span>

<span class="hljs-comment">// For a simple JavaScript library</span>
<span class="hljs-keyword">declare</span> <span class="hljs-keyword">module</span> "simple-validator" {
  <span class="hljs-keyword">interface</span> ValidationRule {
    required?: <span class="hljs-built_in">boolean</span>;
    minLength?: <span class="hljs-built_in">number</span>;
    maxLength?: <span class="hljs-built_in">number</span>;
    pattern?: <span class="hljs-built_in">RegExp</span>;
    custom?: <span class="hljs-function">(<span class="hljs-params">value: <span class="hljs-built_in">any</span></span>) =&gt;</span> <span class="hljs-built_in">boolean</span> | <span class="hljs-built_in">string</span>;
  }

  <span class="hljs-keyword">interface</span> ValidationSchema {
    [field: <span class="hljs-built_in">string</span>]: ValidationRule;
  }

  <span class="hljs-keyword">interface</span> ValidationResult {
    isValid: <span class="hljs-built_in">boolean</span>;
    errors: Record&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>[]&gt;;
  }

  <span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> Validator {
    <span class="hljs-keyword">constructor</span>(<span class="hljs-params">schema: ValidationSchema</span>);
    validate(data: Record&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt;): ValidationResult;
    addRule(name: <span class="hljs-built_in">string</span>, rule: ValidationRule): <span class="hljs-built_in">void</span>;
  }

  <span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">validate</span>(<span class="hljs-params">
    data: Record&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt;,
    schema: ValidationSchema
  </span>): <span class="hljs-title">ValidationResult</span></span>;

  <span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> rules: {
    email: ValidationRule;
    url: ValidationRule;
    numeric: ValidationRule;
    alpha: ValidationRule;
    alphanumeric: ValidationRule;
  };
}

<span class="hljs-comment">// For a library with default export</span>
<span class="hljs-keyword">declare</span> <span class="hljs-keyword">module</span> "date-formatter" {
  <span class="hljs-keyword">interface</span> FormatOptions {
    locale?: <span class="hljs-built_in">string</span>;
    timezone?: <span class="hljs-built_in">string</span>;
    format?: <span class="hljs-built_in">string</span>;
  }

  <span class="hljs-keyword">interface</span> DateFormatter {
    format(date: <span class="hljs-built_in">Date</span>, options?: FormatOptions): <span class="hljs-built_in">string</span>;
    parse(dateString: <span class="hljs-built_in">string</span>, format?: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">Date</span>;
    addDays(date: <span class="hljs-built_in">Date</span>, days: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">Date</span>;
    addMonths(date: <span class="hljs-built_in">Date</span>, months: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">Date</span>;
    addYears(date: <span class="hljs-built_in">Date</span>, years: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">Date</span>;
    isBefore(date1: <span class="hljs-built_in">Date</span>, date2: <span class="hljs-built_in">Date</span>): <span class="hljs-built_in">boolean</span>;
    isAfter(date1: <span class="hljs-built_in">Date</span>, date2: <span class="hljs-built_in">Date</span>): <span class="hljs-built_in">boolean</span>;
    isSame(date1: <span class="hljs-built_in">Date</span>, date2: <span class="hljs-built_in">Date</span>, unit?: <span class="hljs-string">"day"</span> | <span class="hljs-string">"month"</span> | <span class="hljs-string">"year"</span>): <span class="hljs-built_in">boolean</span>;
  }

  <span class="hljs-keyword">const</span> formatter: DateFormatter;
  <span class="hljs-keyword">export</span> = formatter;
}

<span class="hljs-comment">// For a library with mixed exports</span>
<span class="hljs-keyword">declare</span> <span class="hljs-keyword">module</span> "http-client" {
  <span class="hljs-keyword">interface</span> RequestConfig {
    method?: <span class="hljs-string">"GET"</span> | <span class="hljs-string">"POST"</span> | <span class="hljs-string">"PUT"</span> | <span class="hljs-string">"DELETE"</span> | <span class="hljs-string">"PATCH"</span>;
    headers?: Record&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>&gt;;
    timeout?: <span class="hljs-built_in">number</span>;
    retries?: <span class="hljs-built_in">number</span>;
    baseURL?: <span class="hljs-built_in">string</span>;
  }

  <span class="hljs-keyword">interface</span> Response&lt;T = any&gt; {
    data: T;
    status: <span class="hljs-built_in">number</span>;
    statusText: <span class="hljs-built_in">string</span>;
    headers: Record&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>&gt;;
  }

  <span class="hljs-keyword">interface</span> HttpClient {
    <span class="hljs-keyword">get</span>&lt;T = <span class="hljs-built_in">any</span>&gt;(url: <span class="hljs-built_in">string</span>, config?: RequestConfig): <span class="hljs-built_in">Promise</span>&lt;Response&lt;T&gt;&gt;;
    post&lt;T = <span class="hljs-built_in">any</span>&gt;(
      url: <span class="hljs-built_in">string</span>,
      data?: <span class="hljs-built_in">any</span>,
      config?: RequestConfig
    ): <span class="hljs-built_in">Promise</span>&lt;Response&lt;T&gt;&gt;;
    put&lt;T = <span class="hljs-built_in">any</span>&gt;(
      url: <span class="hljs-built_in">string</span>,
      data?: <span class="hljs-built_in">any</span>,
      config?: RequestConfig
    ): <span class="hljs-built_in">Promise</span>&lt;Response&lt;T&gt;&gt;;
    <span class="hljs-keyword">delete</span>&lt;T = <span class="hljs-built_in">any</span>&gt;(url: <span class="hljs-built_in">string</span>, config?: RequestConfig): <span class="hljs-built_in">Promise</span>&lt;Response&lt;T&gt;&gt;;
    patch&lt;T = <span class="hljs-built_in">any</span>&gt;(
      url: <span class="hljs-built_in">string</span>,
      data?: <span class="hljs-built_in">any</span>,
      config?: RequestConfig
    ): <span class="hljs-built_in">Promise</span>&lt;Response&lt;T&gt;&gt;;
  }

  <span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">create</span>(<span class="hljs-params">config?: RequestConfig</span>): <span class="hljs-title">HttpClient</span></span>;
  <span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">get</span>&lt;<span class="hljs-title">T</span> = <span class="hljs-title">any</span>&gt;(<span class="hljs-params">
    url: <span class="hljs-built_in">string</span>,
    config?: RequestConfig
  </span>): <span class="hljs-title">Promise</span>&lt;<span class="hljs-title">Response</span>&lt;<span class="hljs-title">T</span>&gt;&gt;</span>;
  <span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">post</span>&lt;<span class="hljs-title">T</span> = <span class="hljs-title">any</span>&gt;(<span class="hljs-params">
    url: <span class="hljs-built_in">string</span>,
    data?: <span class="hljs-built_in">any</span>,
    config?: RequestConfig
  </span>): <span class="hljs-title">Promise</span>&lt;<span class="hljs-title">Response</span>&lt;<span class="hljs-title">T</span>&gt;&gt;</span>;

  <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> create;
}

<span class="hljs-comment">// For a jQuery plugin</span>
<span class="hljs-keyword">declare</span> <span class="hljs-keyword">namespace</span> JQuery {
  <span class="hljs-keyword">interface</span> JQuery {
    myPlugin(options?: MyPluginOptions): JQuery;
    myPlugin(method: <span class="hljs-string">"destroy"</span>): JQuery;
    myPlugin(method: <span class="hljs-string">"update"</span>, data: <span class="hljs-built_in">any</span>): JQuery;
    myPlugin(method: <span class="hljs-string">"getValue"</span>): <span class="hljs-built_in">any</span>;
  }
}

<span class="hljs-keyword">interface</span> MyPluginOptions {
  theme?: <span class="hljs-string">"light"</span> | <span class="hljs-string">"dark"</span>;
  animation?: <span class="hljs-built_in">boolean</span>;
  duration?: <span class="hljs-built_in">number</span>;
  onInit?: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-built_in">void</span>;
  onChange?: <span class="hljs-function">(<span class="hljs-params">value: <span class="hljs-built_in">any</span></span>) =&gt;</span> <span class="hljs-built_in">void</span>;
}

<span class="hljs-comment">// Usage examples</span>
<span class="hljs-keyword">import</span> { Validator, validate, rules } <span class="hljs-keyword">from</span> <span class="hljs-string">"simple-validator"</span>;
<span class="hljs-keyword">import</span> dateFormatter <span class="hljs-keyword">from</span> <span class="hljs-string">"date-formatter"</span>;
<span class="hljs-keyword">import</span> httpClient, { create, <span class="hljs-keyword">get</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"http-client"</span>;

<span class="hljs-comment">// Simple validator</span>
<span class="hljs-keyword">const</span> validator = <span class="hljs-keyword">new</span> Validator({
  email: { ...rules.email, required: <span class="hljs-literal">true</span> },
  password: { required: <span class="hljs-literal">true</span>, minLength: <span class="hljs-number">8</span> },
});

<span class="hljs-keyword">const</span> result = validator.validate({
  email: <span class="hljs-string">"user@example.com"</span>,
  password: <span class="hljs-string">"password123"</span>,
});

<span class="hljs-comment">// Date formatter</span>
<span class="hljs-keyword">const</span> formatted = dateFormatter.format(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(), {
  locale: <span class="hljs-string">"en-US"</span>,
  format: <span class="hljs-string">"YYYY-MM-DD"</span>,
});

<span class="hljs-comment">// HTTP client</span>
<span class="hljs-keyword">const</span> client = create({ baseURL: <span class="hljs-string">"https://api.example.com"</span> });
<span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> client.get&lt;User[]&gt;(<span class="hljs-string">"/users"</span>);

<span class="hljs-comment">// jQuery plugin</span>
$(<span class="hljs-string">"#my-element"</span>).myPlugin({
  theme: <span class="hljs-string">"dark"</span>,
  animation: <span class="hljs-literal">true</span>,
  onChange: <span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Value changed:"</span>, value),
});
</div></code></pre>
<h2 id="working-with-types-packages">Working with @types Packages</h2>
<h3 id="installing-and-using-type-definitions">Installing and Using Type Definitions</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Install type definitions for popular libraries</span>
<span class="hljs-comment">// npm install --save-dev @types/node @types/express @types/lodash @types/jest</span>

<span class="hljs-comment">// Using Express with types</span>
<span class="hljs-keyword">import</span> express, { Request, Response, NextFunction } <span class="hljs-keyword">from</span> <span class="hljs-string">"express"</span>;
<span class="hljs-keyword">import</span> { User } <span class="hljs-keyword">from</span> <span class="hljs-string">"./types/user"</span>;

<span class="hljs-keyword">const</span> app = express();

<span class="hljs-comment">// Middleware with proper typing</span>
<span class="hljs-keyword">const</span> authMiddleware = <span class="hljs-function">(<span class="hljs-params">req: Request, res: Response, next: NextFunction</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> token = req.headers.authorization;

  <span class="hljs-keyword">if</span> (!token) {
    <span class="hljs-keyword">return</span> res.status(<span class="hljs-number">401</span>).json({ error: <span class="hljs-string">"No token provided"</span> });
  }

  <span class="hljs-comment">// Verify token and attach user</span>
  req.user = { id: <span class="hljs-string">"1"</span>, name: <span class="hljs-string">"John Doe"</span> } <span class="hljs-keyword">as</span> User;
  next();
};

<span class="hljs-comment">// Route handlers with typing</span>
app.get(<span class="hljs-string">"/users/:id"</span>, authMiddleware, <span class="hljs-keyword">async</span> (req: Request, res: Response) =&gt; {
  <span class="hljs-keyword">const</span> userId = req.params.id;
  <span class="hljs-keyword">const</span> currentUser = req.user; <span class="hljs-comment">// TypeScript knows this exists due to augmentation</span>

  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> getUserById(userId);
    res.json(user);
  } <span class="hljs-keyword">catch</span> (error) {
    res.status(<span class="hljs-number">500</span>).json({ error: <span class="hljs-string">"Internal server error"</span> });
  }
});

<span class="hljs-comment">// Using Lodash with types</span>
<span class="hljs-keyword">import</span> _ <span class="hljs-keyword">from</span> <span class="hljs-string">"lodash"</span>;

<span class="hljs-keyword">const</span> users: User[] = [
  {
    id: <span class="hljs-string">"1"</span>,
    name: <span class="hljs-string">"John"</span>,
    email: <span class="hljs-string">"john@example.com"</span>,
    age: <span class="hljs-number">30</span>,
    isActive: <span class="hljs-literal">true</span>,
    createdAt: <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(),
    updatedAt: <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(),
  },
  {
    id: <span class="hljs-string">"2"</span>,
    name: <span class="hljs-string">"Jane"</span>,
    email: <span class="hljs-string">"jane@example.com"</span>,
    age: <span class="hljs-number">25</span>,
    isActive: <span class="hljs-literal">false</span>,
    createdAt: <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(),
    updatedAt: <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(),
  },
];

<span class="hljs-comment">// TypeScript knows the return types</span>
<span class="hljs-keyword">const</span> activeUsers = _.filter(users, <span class="hljs-string">"isActive"</span>); <span class="hljs-comment">// User[]</span>
<span class="hljs-keyword">const</span> userNames = _.map(users, <span class="hljs-string">"name"</span>); <span class="hljs-comment">// string[]</span>
<span class="hljs-keyword">const</span> groupedByAge = _.groupBy(users, <span class="hljs-string">"age"</span>); <span class="hljs-comment">// Record&lt;string, User[]&gt;</span>
<span class="hljs-keyword">const</span> sortedUsers = _.sortBy(users, [<span class="hljs-string">"age"</span>, <span class="hljs-string">"name"</span>]); <span class="hljs-comment">// User[]</span>

<span class="hljs-comment">// Using Jest with types</span>
<span class="hljs-keyword">import</span> { describe, it, expect, beforeEach, afterEach } <span class="hljs-keyword">from</span> <span class="hljs-string">"@jest/globals"</span>;

describe(<span class="hljs-string">"User Service"</span>, <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
  <span class="hljs-keyword">let</span> userService: UserService;

  beforeEach(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    userService = <span class="hljs-keyword">new</span> UserService();
  });

  afterEach(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    <span class="hljs-comment">// Cleanup</span>
  });

  it(<span class="hljs-string">"should create a user"</span>, <span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-keyword">const</span> userData = {
      name: <span class="hljs-string">"Test User"</span>,
      email: <span class="hljs-string">"test@example.com"</span>,
      age: <span class="hljs-number">25</span>,
      isActive: <span class="hljs-literal">true</span>,
    };

    <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> userService.createUser(userData);

    expect(user).toBeDefined();
    expect(user.name).toBe(userData.name);
    expect(user.email).toBe(userData.email);
  });

  it(<span class="hljs-string">"should throw error for invalid email"</span>, <span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-keyword">const</span> userData = {
      name: <span class="hljs-string">"Test User"</span>,
      email: <span class="hljs-string">"invalid-email"</span>,
      age: <span class="hljs-number">25</span>,
      isActive: <span class="hljs-literal">true</span>,
    };

    <span class="hljs-keyword">await</span> expect(userService.createUser(userData)).rejects.toThrow(
      <span class="hljs-string">"Invalid email"</span>
    );
  });
});

<span class="hljs-keyword">class</span> UserService {
  <span class="hljs-keyword">async</span> createUser(
    userData: Omit&lt;User, <span class="hljs-string">"id"</span> | <span class="hljs-string">"createdAt"</span> | <span class="hljs-string">"updatedAt"</span>&gt;
  ): <span class="hljs-built_in">Promise</span>&lt;User&gt; {
    <span class="hljs-comment">// Implementation</span>
    <span class="hljs-keyword">return</span> {
      id: <span class="hljs-string">"1"</span>,
      ...userData,
      createdAt: <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(),
      updatedAt: <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(),
    };
  }
}
</div></code></pre>
<h3 id="creating-custom-types-packages">Creating Custom @types Packages</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// package.json for @types/my-custom-library</span>
{
  <span class="hljs-string">"name"</span>: <span class="hljs-string">"@types/my-custom-library"</span>,
  <span class="hljs-string">"version"</span>: <span class="hljs-string">"1.0.0"</span>,
  <span class="hljs-string">"description"</span>: <span class="hljs-string">"TypeScript definitions for my-custom-library"</span>,
  <span class="hljs-string">"types"</span>: <span class="hljs-string">"index.d.ts"</span>,
  <span class="hljs-string">"typesPublisherContentHash"</span>: <span class="hljs-string">"..."</span>,
  <span class="hljs-string">"typeScriptVersion"</span>: <span class="hljs-string">"4.0"</span>,
  <span class="hljs-string">"dependencies"</span>: {},
  <span class="hljs-string">"devDependencies"</span>: {
    <span class="hljs-string">"typescript"</span>: <span class="hljs-string">"^4.0.0"</span>
  }
}

<span class="hljs-comment">// index.d.ts</span>
<span class="hljs-comment">// Type definitions for my-custom-library 2.1</span>
<span class="hljs-comment">// Project: https://github.com/example/my-custom-library</span>
<span class="hljs-comment">// Definitions by: Your Name &lt;https://github.com/yourusername&gt;</span>
<span class="hljs-comment">// Definitions: https://github.com/DefinitelyTyped/DefinitelyTyped</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> LibraryConfig {
  apiKey: <span class="hljs-built_in">string</span>;
  baseUrl?: <span class="hljs-built_in">string</span>;
  timeout?: <span class="hljs-built_in">number</span>;
  debug?: <span class="hljs-built_in">boolean</span>;
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> ApiResponse&lt;T = any&gt; {
  success: <span class="hljs-built_in">boolean</span>;
  data?: T;
  error?: <span class="hljs-built_in">string</span>;
  timestamp: <span class="hljs-built_in">string</span>;
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> MyLibrary {
  <span class="hljs-keyword">constructor</span>(<span class="hljs-params">config: LibraryConfig</span>);

  <span class="hljs-keyword">get</span>&lt;T = <span class="hljs-built_in">any</span>&gt;(endpoint: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">Promise</span>&lt;ApiResponse&lt;T&gt;&gt;;
  post&lt;T = <span class="hljs-built_in">any</span>&gt;(endpoint: <span class="hljs-built_in">string</span>, data: <span class="hljs-built_in">any</span>): <span class="hljs-built_in">Promise</span>&lt;ApiResponse&lt;T&gt;&gt;;
  put&lt;T = <span class="hljs-built_in">any</span>&gt;(endpoint: <span class="hljs-built_in">string</span>, data: <span class="hljs-built_in">any</span>): <span class="hljs-built_in">Promise</span>&lt;ApiResponse&lt;T&gt;&gt;;
  <span class="hljs-keyword">delete</span>&lt;T = <span class="hljs-built_in">any</span>&gt;(endpoint: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">Promise</span>&lt;ApiResponse&lt;T&gt;&gt;;

  setConfig(config: Partial&lt;LibraryConfig&gt;): <span class="hljs-built_in">void</span>;
  getConfig(): LibraryConfig;
}

<span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createClient</span>(<span class="hljs-params">config: LibraryConfig</span>): <span class="hljs-title">MyLibrary</span></span>;
<span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isValidConfig</span>(<span class="hljs-params">config: <span class="hljs-built_in">any</span></span>): <span class="hljs-title">config</span> <span class="hljs-title">is</span> <span class="hljs-title">LibraryConfig</span></span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> version: <span class="hljs-built_in">string</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> defaultConfig: Partial&lt;LibraryConfig&gt;;

<span class="hljs-comment">// For libraries with global side effects</span>
<span class="hljs-keyword">declare</span> global {
  <span class="hljs-keyword">interface</span> Window {
    MyLibrary?: <span class="hljs-keyword">typeof</span> MyLibrary;
  }
}

<span class="hljs-comment">// tests/index.ts - Test the type definitions</span>
<span class="hljs-keyword">import</span> { MyLibrary, createClient, LibraryConfig, ApiResponse } <span class="hljs-keyword">from</span> <span class="hljs-string">'my-custom-library'</span>;

<span class="hljs-comment">// Test basic usage</span>
<span class="hljs-keyword">const</span> config: LibraryConfig = {
  apiKey: <span class="hljs-string">'test-key'</span>,
  baseUrl: <span class="hljs-string">'https://api.example.com'</span>,
  timeout: <span class="hljs-number">5000</span>
};

<span class="hljs-keyword">const</span> client = <span class="hljs-keyword">new</span> MyLibrary(config);
<span class="hljs-keyword">const</span> client2 = createClient(config);

<span class="hljs-comment">// Test API calls</span>
client.get&lt;{ users: <span class="hljs-built_in">any</span>[] }&gt;<span class="hljs-function">(<span class="hljs-params">'/users'</span>).<span class="hljs-params">then</span>(<span class="hljs-params">(<span class="hljs-params">response: ApiResponse&lt;{ users: <span class="hljs-built_in">any</span>[] }&gt;</span>) =&gt; {
  <span class="hljs-keyword">if</span> (<span class="hljs-params">response.success &amp;&amp; response.data</span>) {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-params">response.data.users</span>);
  }
}</span>);

<span class="hljs-params">client</span>.<span class="hljs-params">post</span>(<span class="hljs-params">'/users', { name: 'John' }</span>).<span class="hljs-params">then</span>(<span class="hljs-params">(<span class="hljs-params">response: ApiResponse</span>) =&gt; {
  <span class="hljs-built_in">console</span>.log(<span class="hljs-params">response.success</span>);
}</span>);

// <span class="hljs-params">Test</span> <span class="hljs-params">configuration</span>
<span class="hljs-params">client</span>.<span class="hljs-params">setConfig</span>(<span class="hljs-params">{ timeout: 10000 }</span>);
<span class="hljs-params">const</span> <span class="hljs-params">currentConfig</span>: <span class="hljs-params">LibraryConfig</span> = <span class="hljs-params">client</span>.<span class="hljs-params">getConfig</span><span class="hljs-params">()</span>;
</span></div></code></pre>
<h2 id="best-practices">Best Practices</h2>
<h3 id="%E2%9C%85-good-practices">‚úÖ Good Practices</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Use interface merging for extending existing types</span>
<span class="hljs-keyword">interface</span> User {
  id: <span class="hljs-built_in">string</span>;
  name: <span class="hljs-built_in">string</span>;
}

<span class="hljs-keyword">interface</span> User {
  email: <span class="hljs-built_in">string</span>; <span class="hljs-comment">// Extends the User interface</span>
}

<span class="hljs-comment">// Create specific ambient declarations for third-party libraries</span>
<span class="hljs-keyword">declare</span> <span class="hljs-keyword">module</span> "specific-library" {
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> Config {
    apiKey: <span class="hljs-built_in">string</span>;
    baseUrl: <span class="hljs-built_in">string</span>;
  }

  <span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> Client {
    <span class="hljs-keyword">constructor</span>(<span class="hljs-params">config: Config</span>);
    request(endpoint: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">Promise</span>&lt;<span class="hljs-built_in">any</span>&gt;;
  }
}

<span class="hljs-comment">// Use namespace merging for organizing related functionality</span>
<span class="hljs-keyword">namespace</span> Utils {
  <span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">formatDate</span>(<span class="hljs-params">date: <span class="hljs-built_in">Date</span></span>): <span class="hljs-title">string</span> </span>{
    <span class="hljs-keyword">return</span> date.toISOString();
  }
}

<span class="hljs-keyword">namespace</span> Utils {
  <span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">parseDate</span>(<span class="hljs-params">dateString: <span class="hljs-built_in">string</span></span>): <span class="hljs-title">Date</span> </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(dateString);
  }
}

<span class="hljs-comment">// Augment global types carefully and specifically</span>
<span class="hljs-keyword">declare</span> global {
  <span class="hljs-keyword">interface</span> Window {
    mySpecificLibrary?: {
      version: <span class="hljs-built_in">string</span>;
      init(): <span class="hljs-built_in">void</span>;
    };
  }
}

<span class="hljs-comment">// Use proper type constraints in ambient declarations</span>
<span class="hljs-keyword">declare</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">processData</span>&lt;<span class="hljs-title">T</span> <span class="hljs-title">extends</span> <span class="hljs-title">Record</span>&lt;<span class="hljs-title">string</span>, <span class="hljs-title">any</span>&gt;&gt;(<span class="hljs-params">data: T</span>): <span class="hljs-title">T</span></span>;
</div></code></pre>
<h3 id="%E2%9D%8C-avoid">‚ùå Avoid</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Don't over-augment global types</span>
<span class="hljs-keyword">declare</span> global {
  <span class="hljs-keyword">interface</span> Window {
    [key: <span class="hljs-built_in">string</span>]: <span class="hljs-built_in">any</span>; <span class="hljs-comment">// ‚ùå Too broad</span>
  }

  <span class="hljs-keyword">interface</span> Array&lt;T&gt; {
    customMethod(): <span class="hljs-built_in">any</span>; <span class="hljs-comment">// ‚ùå Pollutes all arrays</span>
  }
}

<span class="hljs-comment">// Don't create conflicting interface merges</span>
<span class="hljs-keyword">interface</span> User {
  id: <span class="hljs-built_in">string</span>;
}

<span class="hljs-keyword">interface</span> User {
  id: <span class="hljs-built_in">number</span>; <span class="hljs-comment">// ‚ùå Conflicts with previous declaration</span>
}

<span class="hljs-comment">// Don't use any in ambient declarations</span>
<span class="hljs-keyword">declare</span> <span class="hljs-keyword">module</span> "some-library" {
  <span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">doSomething</span>(<span class="hljs-params">data: <span class="hljs-built_in">any</span></span>): <span class="hljs-title">any</span></span>; <span class="hljs-comment">// ‚ùå Not type-safe</span>
}

<span class="hljs-comment">// Don't create overly broad ambient declarations</span>
<span class="hljs-keyword">declare</span> <span class="hljs-keyword">const</span> globalVariable: <span class="hljs-built_in">any</span>; <span class="hljs-comment">// ‚ùå Should be more specific</span>

<span class="hljs-comment">// Don't ignore existing type definitions</span>
<span class="hljs-comment">// If @types/library exists, don't create your own unless necessary</span>
</div></code></pre>
<h2 id="summary-checklist">Summary Checklist</h2>
<ul>
<li><input type="checkbox" id="checkbox124"><label for="checkbox124">Use interface merging to extend existing types</label></li>
<li><input type="checkbox" id="checkbox125"><label for="checkbox125">Leverage namespace merging for organizing code</label></li>
<li><input type="checkbox" id="checkbox126"><label for="checkbox126">Create ambient declarations for JavaScript libraries</label></li>
<li><input type="checkbox" id="checkbox127"><label for="checkbox127">Augment third-party library types when needed</label></li>
<li><input type="checkbox" id="checkbox128"><label for="checkbox128">Use module augmentation for extending external modules</label></li>
<li><input type="checkbox" id="checkbox129"><label for="checkbox129">Create proper type definition files for custom libraries</label></li>
<li><input type="checkbox" id="checkbox130"><label for="checkbox130">Install and use @types packages for popular libraries</label></li>
<li><input type="checkbox" id="checkbox131"><label for="checkbox131">Be specific and careful with global augmentations</label></li>
<li><input type="checkbox" id="checkbox132"><label for="checkbox132">Test your type definitions thoroughly</label></li>
<li><input type="checkbox" id="checkbox133"><label for="checkbox133">Document your ambient declarations clearly</label></li>
</ul>
<h2 id="next-steps">Next Steps</h2>
<p>Now that you understand declaration merging and ambient declarations, let's explore working with third-party types and creating custom type definitions.</p>
<hr>
<p><em>Continue to: <a href="18-third-party-types.md">Working with Third-Party Types</a></em></p>

</body>
</html>
